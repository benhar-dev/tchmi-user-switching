var TcHmi;!function(q){var e,a,_,t;function j(e,t,i){var o=_.call(this,e,t,i)||this;return o.__cacheWidthPerColumn=null,o.__cacheHeightPerRow=null,o.__cacheCellHeightPerRow=null,o.__onControlGridRowIndexChangedDestroyEvent=null,o.__onControlGridColumnIndexChangedDestroyEvent=null,o.__onControlsMovedDestroyEvent=null,o.__onControlsResizedDestroyEvent=null,o.__onControlPositionParameterChangedDestroyEvent=null,o.__onControlSizeParameterChangedDestroyEvent=null,o.__objectResolvers=new Map,o.__onResolverForRowOptionsWatchCallback=function(e){!1===o.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,o.__rowOptions)||(o.__rowOptions=e.value,q.EventProvider.raise(o.__id+".onFunctionResultChanged",["getRowOptions"]),o.__recalculateRowCount(),o.__recalculateColumnCount(),o.__processCellOptions(),o.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,o.__requestAsyncWork())},o.__onResolverForColumnOptionsWatchCallback=function(e){!1===o.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,o.__columnOptions)||(o.__columnOptions=e.value,q.EventProvider.raise(o.__id+".onFunctionResultChanged",["getColumnOptions"]),o.__recalculateColumnCount(),o.__processCellOptions(),o.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,o.__requestAsyncWork())},o.__onResolverForCellOptionsWatchCallback=function(e){!1===o.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,o.__cellOptions)||(o.__cellOptions=e.value,q.EventProvider.raise(o.__id+".onFunctionResultChanged",["getCellOptions"]),o.__processCellOptions(),o.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,o.__requestAsyncWork())},o.__element.empty(),o.__onControlGridRowIndexChangedDestroyEvent=q.EventProvider.register("System.onControlGridRowIndexChanged",o.__onGridRowOrColumnIndexChanged()),o.__onControlGridColumnIndexChangedDestroyEvent=q.EventProvider.register("System.onControlGridColumnIndexChanged",o.__onGridRowOrColumnIndexChanged()),o.__onControlPositionParameterChangedDestroyEvent=q.EventProvider.register("System.onControlPositionParameterChanged",o.__onControlGeometryChanged(!0)),o.__onControlSizeParameterChangedDestroyEvent=q.EventProvider.register("System.onControlSizeParameterChanged",o.__onControlGeometryChanged(!1)),o.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!1,o.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]=!1,o}e=q.Controls||(q.Controls={}),a=e.System||(e.System={}),_=q.Controls.System.TcHmiContainerControl,__extends(j,_),j.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".tchmi-grid-template"),0===this.__elementTemplateRoot.length)throw new Error("Invalid Template.html");this.__elementGridcontainer=$(document.createElement("div")),this.__elementGridcontainer[0].setAttribute("class","tchmi-box tchmi-grid-grid"),this.__elementTemplateRoot.append(this.__elementGridcontainer),_.prototype.__previnit.call(this)},j.prototype.__init=function(){_.prototype.__init.call(this)},j.prototype.__attach=function(){_.prototype.__attach.call(this),this.__onControlsMovedDestroyEvent=q.EventProvider.register("System.onControlsMoved",this.__onControlGeometryChanged(!0)),this.__onControlsResizedDestroyEvent=q.EventProvider.register("System.onControlsResized",this.__onControlGeometryChanged(!1)),this.__objectResolvers.forEach(function(e){return e.resolver.watch(e.watchCallback)})},j.prototype.__detach=function(){_.prototype.__detach.call(this),null!==this.__onControlsMovedDestroyEvent&&(this.__onControlsMovedDestroyEvent(),this.__onControlsMovedDestroyEvent=null),null!==this.__onControlsResizedDestroyEvent&&(this.__onControlsResizedDestroyEvent(),this.__onControlsResizedDestroyEvent=null),this.__objectResolvers.forEach(function(e){e.watchDestroyer&&(e.watchDestroyer(),e.watchDestroyer=null)})},j.prototype.destroy=function(){null!==this.__onControlGridRowIndexChangedDestroyEvent&&(this.__onControlGridRowIndexChangedDestroyEvent(),this.__onControlGridRowIndexChangedDestroyEvent=null),null!==this.__onControlGridColumnIndexChangedDestroyEvent&&(this.__onControlGridColumnIndexChangedDestroyEvent(),this.__onControlGridColumnIndexChangedDestroyEvent=null),null!==this.__onControlPositionParameterChangedDestroyEvent&&(this.__onControlPositionParameterChangedDestroyEvent(),this.__onControlPositionParameterChangedDestroyEvent=null),null!==this.__onControlSizeParameterChangedDestroyEvent&&(this.__onControlSizeParameterChangedDestroyEvent(),this.__onControlSizeParameterChangedDestroyEvent=null),this.__objectResolvers.forEach(function(e){e.watchDestroyer&&e.watchDestroyer(),e.resolver.destroy()}),this.__objectResolvers.clear(),_.prototype.destroy.call(this)},j.prototype.addChild=function(e,t){this.__addChild(e,t)},j.prototype.__addChild=function(e,t){_.prototype.__addChild.call(this,e,t),this.__correctGridPosition(e,t),this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null},j.prototype.removeChild=function(e){this.__removeChild(e)},j.prototype.__removeChild=function(e){_.prototype.__removeChild.call(this,e),!0!==this.__isDestroyed&&(this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__requestAsyncWork())},j.prototype.__onGridRowOrColumnIndexChanged=function(){var h=this;return function(e,t){if(t.getParent()===h){var i=t.getGridRowIndex(),o=t.getGridColumnIndex();if(void 0!==i&&void 0!==o){var n=-1,r=-1,l=t.getElement().parent().parent();if(0!==l.length){var s=l.parent()[0].getAttribute("data-tchmi-row-index");s&&(n=parseInt(s,10)),(s=l[0].getAttribute("data-tchmi-column-index"))&&(r=parseInt(s,10))}i===n&&o===r||(h.__correctGridPosition(t),h.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,h.__requestAsyncWork())}}}},j.prototype.__onControlGeometryChanged=function(r){var l=this;return function(e,t){var i=!1;if(!l.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]||!l.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"])for(var o=0;o<t.length;o++){var n=t[o];if(n instanceof q.Controls.System.baseTcHmiControl||(n=n.ctrl),n.getParent()===l){if(l.__cacheWidthPerColumn=null,l.__cacheHeightPerRow=null,i=!(l.__cacheCellHeightPerRow=null),l.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,l.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"])break}else if(!1===r&&n===l&&(i=!0,l.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]=!0,l.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]))break}i&&l.__requestAsyncWork()}},j.prototype.__doAsyncWork=function(){_.prototype.__doAsyncWork.call(this),this.__isAttached&&(this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]&&(this.__processColumnOptions(),this.__processRowOptions(),this.__processWidth()),this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]&&this.__rebuildCellHeightPerRowCache(),this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!1,this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]=!1)},j.prototype.__rebuildCellHeightPerRowCache=function(){if(this.__columnOptions){for(var e=0,t=this.__elementGridcontainer.children().first().children(),i=0;i<t.length;i++)0===t[i].offsetLeft&&0!==t[i].offsetWidth&&e++;if(e!==this.__cacheCellHeightPerRow)return this.__cacheCellHeightPerRow=e,this.__processHeight(),!0}return!1},j.prototype.getCellWrap=function(){return this.__cellWrap},j.prototype.setCellWrap=function(e){var t=q.ValueConverter.toBoolean(e);null===t&&(t=this.getAttributeDefaultValueInternal("CellWrap")),t!==this.__cellWrap&&(this.__cellWrap=t,q.EventProvider.raise(this.__id+".onFunctionResultChanged",["getCellWrap"]),this.__processCellWrap())},j.prototype.__processCellWrap=function(){var e=this.__elementGridcontainer.children();this.__cellWrap?q.StyleProvider.setSimpleElementStyle(e,"flex-wrap","wrap"):q.StyleProvider.setSimpleElementStyle(e,"flex-wrap",""),this.__processWidth()},j.prototype.getWidthMode=function(){if(this.__columnOptions)for(var e=0,t=this.__columnOptions;e<t.length;e++)if("Content"===t[e].widthMode)return"Content";return _.prototype.getWidthMode.call(this)},j.prototype.__processWidthMode=function(){this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,_.prototype.__processWidthMode.call(this)},j.prototype.getHeightMode=function(){if(this.__rowOptions)for(var e=0,t=this.__rowOptions;e<t.length;e++)if("Content"===t[e].heightMode)return"Content";return _.prototype.getHeightMode.call(this)},j.prototype.__processHeightMode=function(){this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,_.prototype.__processHeightMode.call(this)},j.prototype.__recalculateRowCount=function(){if(this.__rowOptions){var e=this.__elementGridcontainer.children();if(this.__rowOptions.length!==e.length){if(this.__rowOptions.length>e.length)this.__appendRows(this.__rowOptions.length-e.length);else if(this.__rowOptions.length<e.length)for(var t=this.__removeRows(e.length-this.__rowOptions.length).children().children().children(),i=0,o=t.length;i<o;i++){var n=q.Controls.get(t[i].id);void 0!==n&&this.__correctGridPosition(n)}q.EventProvider.raise("System.onControlGetRowCountChanged",this)}}},j.prototype.__recalculateColumnCount=function(){if(this.__columnOptions){for(var e=$(),t=$(),i=this.__elementGridcontainer.children(),o=0,n=i.length;o<n;o++){var r=i.eq(o),l=r.children();if(l.length!==this.__columnOptions.length)if(l.length<this.__columnOptions.length)e=e.add(this.__createColumns(r));else if(l.length>this.__columnOptions.length){var s=l.slice(-(l.length-this.__columnOptions.length)).detach();t=t.add(s)}}if(0<e.length)this.__correctAllGridPositions(),q.EventProvider.raise("System.onControlGetColumnCountChanged",this);else if(0<t.length){var h=t.children().children();for(o=0,n=h.length;o<n;o++){var a=q.Controls.get(h[o].id);void 0!==a&&this.__correctGridPosition(a)}q.EventProvider.raise("System.onControlGetColumnCountChanged",this)}}},j.prototype.getRowOptions=function(){return this.__rowOptions},j.prototype.setRowOptions=function(e){var t=q.ValueConverter.toObject(e);if(null!==t&&0!==t.length||(t=this.getAttributeDefaultValueInternal("RowOptions")),Array.isArray(t)){var i=this.__objectResolvers.get("rowOptions");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());var o=new q.Symbol.ObjectResolver(t);this.__objectResolvers.set("rowOptions",{resolver:o,watchCallback:this.__onResolverForRowOptionsWatchCallback,watchDestroyer:o.watch(this.__onResolverForRowOptionsWatchCallback)})}else q.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=RowOptions] Non array value ist not supported.")},j.prototype.__processRowOptions=function(){return this.__processSequenceOptions(1)},j.prototype.getColumnOptions=function(){return this.__columnOptions},j.prototype.setColumnOptions=function(e){var t=q.ValueConverter.toObject(e);if(null!==t&&0!==t.length||(t=this.getAttributeDefaultValueInternal("ColumnOptions")),Array.isArray(t)){var i=this.__objectResolvers.get("columnOptions");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());var o=new q.Symbol.ObjectResolver(t);this.__objectResolvers.set("columnOptions",{resolver:o,watchCallback:this.__onResolverForColumnOptionsWatchCallback,watchDestroyer:o.watch(this.__onResolverForColumnOptionsWatchCallback)})}else q.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=ColumnOptions] Non array value ist not supported.")},j.prototype.__processColumnOptions=function(){return this.__recalculateColumnCount(),this.__processSequenceOptions(0)},j.prototype.getCellOptions=function(){return this.__cellOptions},j.prototype.setCellOptions=function(e){var t=q.ValueConverter.toObject(e);if(null!==t&&0!==t.length||(t=this.getAttributeDefaultValueInternal("CellOptions")),Array.isArray(t)){var i=this.__objectResolvers.get("cellOptions");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());var o=new q.Symbol.ObjectResolver(t);this.__objectResolvers.set("cellOptions",{resolver:o,watchCallback:this.__onResolverForCellOptionsWatchCallback,watchDestroyer:o.watch(this.__onResolverForCellOptionsWatchCallback)})}else q.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=CellOptions] Non array value ist not supported.")},j.prototype.__processCellOptions=function(){if(this.__cellOptions)for(var e=this.__elementGridcontainer.children(),t=0,i=e.length;t<i;t++)for(var o=e.eq(t).children(),n=0,r=o.length;n<r;n++){for(var l=o.eq(n),s=null,h=null,a=null,_=null,d={color:null,image:null,imageWidth:null,imageWidthUnit:"px",imageHeight:null,imageHeightUnit:"px",imageHorizontalAlignment:"Center",imageVerticalAlignment:"Center",imagePadding:null},c=0,g=this.__cellOptions;c<g.length;c++){var u=g[c];if(u.columnIndex===n&&u.rowIndex===t){u.borderWidth&&(s=u.borderWidth),u.borderStyle&&(h=u.borderStyle),u.borderColor&&(a=u.borderColor),u.padding&&(_=u.padding),u.backgroundColor&&(d.color=u.backgroundColor),u.backgroundImage&&(d.image=u.backgroundImage),u.backgroundImagePadding&&(d.imagePadding=u.backgroundImagePadding),u.backgroundImageWidth&&(d.imageWidth=u.backgroundImageWidth),u.backgroundImageWidthUnit&&(d.imageWidthUnit=u.backgroundImageWidthUnit),u.backgroundImageHeight&&(d.imageHeight=u.backgroundImageHeight),u.backgroundImageHeightUnit&&(d.imageHeightUnit=u.backgroundImageHeightUnit),u.backgroundImageHorizontalAlignment&&(d.imageHorizontalAlignment=u.backgroundImageHorizontalAlignment),u.backgroundImageVerticalAlignment&&(d.imageVerticalAlignment=u.backgroundImageVerticalAlignment);break}}q.StyleProvider.processBackground(l,d),q.StyleProvider.processBorderWidth(l,s),q.StyleProvider.processBorderStyle(l,h),q.StyleProvider.processBorderColor(l,a),q.StyleProvider.processContentPadding(l,_);var p=l.children().first();_&&(_.right||_.left||_.top||_.bottom)?q.StyleProvider.setSimpleElementStyle(p,{height:"calc(100% - ("+(_.top||0)+(_.topUnit||"px")+") - ("+(_.bottom||0)+(_.bottomUnit||"px")+"))",width:"calc(100% - ("+(_.left||0)+(_.leftUnit||"px")+") - ("+(_.right||0)+(_.rightUnit||"px")+"))"}):q.StyleProvider.setSimpleElementStyle(p,{height:"",width:""})}},j.prototype.__correctAllGridPositions=function(){for(var e=0,t=this.__children;e<t.length;e++){var i=t[e];this.__correctGridPosition(i)}},j.prototype.__correctGridPosition=function(e,t){if(void 0===t&&(t=null),this.__rowOptions&&this.__columnOptions){var i=e.getGridRowIndex(),o=e.getGridColumnIndex();if(void 0!==i&&void 0!==o){var n,r,l=this.__elementGridcontainer.children();if(null===(n=i>=l.length?l.first():l.eq(i))||0===n.length)throw new Error("TcHmiGrid: Error finding Row "+i+"!");var s=n.children();if(null===(r=o>=s.length?s.first():s.eq(o))||0===r.length)throw new Error("TcHmiGrid: Error finding Column "+o+"!");if(null!==t&&0<=t){for(var h=t,a=0;a<this.__children.length;a++){var _=this.__children[a];if(_===e)break;var d=_.getGridRowIndex(),c=_.getGridColumnIndex();(void 0===d||d>=this.__rowOptions.length)&&(d=0),(void 0===c||c>=this.__columnOptions.length)&&(c=0),i<d?h--:d<i||o<c&&h--}if(0===h)r.children().first()[0].appendChild(e.getElement()[0]);else{var g=r.children().first().children().eq(h-1);0<g.length?g.after(e.getElement()):r.children().first()[0].appendChild(e.getElement()[0])}}else r.children().first()[0].appendChild(e.getElement()[0])}}},j.prototype.__appendRows=function(e){if(void 0===e&&(e=1),0===this.__elementGridcontainer.length)return $();for(var t=$(),i=1;i<=e;i++){var o=this.__elementGridcontainer[0].childElementCount,n=document.createElement("div");n.id=this.__id+"_row"+o,n.setAttribute("data-tchmi-row-index",o.toString()),n.setAttribute("class","tchmi-box tchmi-grid-gridrow"),this.__elementGridcontainer[0].appendChild(n),t=t.add(n)}return this.__cellWrap?q.StyleProvider.setSimpleElementStyle(t,"flex-wrap","wrap"):q.StyleProvider.setSimpleElementStyle(t,"flex-wrap",""),t},j.prototype.__removeRows=function(e){return void 0===e&&(e=1),this.__elementGridcontainer.children().slice(-e).detach()},j.prototype.__createColumns=function(e){for(var t=$();this.__columnOptions&&this.__columnOptions.length>e[0].childElementCount;)t=t.add(this.__createCell(e));return t},j.prototype.__createCell=function(e){if(0===e.length)return $();var t=e[0].childElementCount,i=document.createElement("div");i.id=e[0].id+"_col"+t,i.setAttribute("data-tchmi-column-index",t.toString()),i.setAttribute("class","tchmi-box tchmi-grid-gridcell");var o=document.createElement("div");return o.setAttribute("class","tchmi-grid-cellpaddingmover"),i.appendChild(o),e[0].appendChild(i),i},j.prototype.__processSequenceOptions=function(a){if(this.__rowOptions&&this.__columnOptions){var e,_="width";e=1===a?(_="height",this.__rowOptions.length):this.__columnOptions.length;for(var d=[],c=[],g=[],u=this.__elementGridcontainer.children(),t=[],i=[],o=0,n=u.length;o<n;o++){for(var r=u.eq(o).children(),l=[],s=[],h=0,p=r.length;h<p;h++){var m=r.eq(h),v=q.StyleProvider.getSimpleElementStyle(m),C=m.children().children(),f=0,y=0,w=0,b=0;1===a?(w+=j.__getPixelNumberInStyle(v,"border-top-width","border-width"),w+=j.__getPixelNumberInStyle(v,"padding-top","padding"),w+=j.__getPixelNumberInStyle(v,"padding-bottom","padding"),f=w+=j.__getPixelNumberInStyle(v,"border-bottom-width","border-width")):(b+=j.__getPixelNumberInStyle(v,"border-left-width","border-width"),b+=j.__getPixelNumberInStyle(v,"padding-left","padding"),b+=j.__getPixelNumberInStyle(v,"padding-right","padding"),y=b+=j.__getPixelNumberInStyle(v,"border-right-width","border-width"));for(var S="borderAndPadding",x=0,O=C.length;x<O;x++){var P=C.eq(x),R=q.Controls.get(P[0].id);if(void 0!==R){var H=0;if(1===a){var k=w,z=R.getTop();null!=z&&("px"===R.getTopUnit()&&(k+=z),H++);var W=R.__getContentHeight();null!==W&&(k+=W,H++);var E=R.getBottom();null!=E&&2!==H&&"px"===R.getBottomUnit()&&(k+=E),f<k&&(f=k,S=R.getId())}else{var G=b;H=0;var D=R.getLeft();null!=D&&("px"===R.getLeftUnit()&&(G+=D),H++);var I=R.__getContentWidth();null!==I&&(G+=I,H++);var A=R.getRight();null!=A&&2!==H&&"px"===R.getRightUnit()&&(G+=A),y<G&&(y=G,S=R.getId())}}}1===a?(l.push(f),s.push(S)):(void 0===t[h]&&(t[h]=[],i[h]=[]),t[h].push(y),i[h].push(S))}if(1===a){var U=Math.max.apply(null,l);0===U||U===1/0||U===-1/0||isNaN(U)?(d[o]=null,c[o]="unspecified"):(d[o]=U,c[o]=s[l.indexOf(U)])}}if(0===a)for(this.__elementGridcontainer.children().children(),h=0;h<this.__columnOptions.length;h++){var T=Math.max.apply(null,t[h]);0===T||T===1/0||T===-1/0||isNaN(T)?(d[h]=null,c[h]="unspecified"):(d[h]=T,c[h]=i[h][t[h].indexOf(T)])}function M(i){var e=!1;g[i]=null;var t=void 0,o=void 0;o=1===a?(t=u.filter(function(e,t){return t.getAttribute("data-tchmi-row-index")===i.toString()})).children():u.children().filter(function(e,t){return t.getAttribute("data-tchmi-column-index")===i.toString()});var n="unspecified",r={},l={size:null,sizeUnit:"px",sizeMode:"Value",minSize:null,minSizeUnit:"px",maxSize:null,maxSizeUnit:"px",overflow:!1};1===a&&i<F.__rowOptions.length?(l.size=F.__rowOptions[i].height,l.sizeUnit=F.__rowOptions[i].heightUnit,l.sizeMode=F.__rowOptions[i].heightMode,l.minSize=F.__rowOptions[i].minHeight,l.minSizeUnit=F.__rowOptions[i].minHeightUnit,l.maxSize=F.__rowOptions[i].maxHeight,l.maxSizeUnit=F.__rowOptions[i].maxHeightUnit,l.overflow=F.__rowOptions[i].overflow):i<F.__columnOptions.length&&(l.size=F.__columnOptions[i].width,l.sizeUnit=F.__columnOptions[i].widthUnit,l.sizeMode=F.__columnOptions[i].widthMode,l.minSize=F.__columnOptions[i].minWidth,l.minSizeUnit=F.__columnOptions[i].minWidthUnit,l.maxSize=F.__columnOptions[i].maxWidth,l.maxSizeUnit=F.__columnOptions[i].maxWidthUnit,l.overflow=F.__columnOptions[i].overflow),"Content"===l.sizeMode?($.isNumeric(d[i])?(r[_]=d[i]+"px",n=c[i],g[i]=d[i]):(r[_]="0px",n="zeroPixel",g[i]=0),1===a&&void 0!==t?q.StyleProvider.setSimpleElementStyle(t,{height:"","flex-grow":"","-webkit-flex-grow":"","flex-basis":"","-webkit-flex-basis":""}):(r["flex-grow"]="",r["-webkit-flex-grow"]="",r["flex-basis"]="",r["-webkit-flex-basis"]="")):void 0!==l.size&&null!==l.size&&$.isNumeric(l.size)?"px"===l.sizeUnit?(e=!0,1===a&&void 0!==t?(r[_]=l.size+l.sizeUnit,n="fixedPixelSize",g[i]=l.size,q.StyleProvider.setSimpleElementStyle(t,{height:"","flex-grow":"","-webkit-flex-grow":"","flex-basis":"","-webkit-flex-basis":""})):(r[_]=l.size+l.sizeUnit,n="fixedPixelSize",g[i]=l.size,r["flex-grow"]="",r["-webkit-flex-grow"]="",r["flex-basis"]="",r["-webkit-flex-basis"]="")):"%"===l.sizeUnit?(e=!0,1===a&&void 0!==t?(r[_]="",n="fixedPercentSize",q.StyleProvider.setSimpleElementStyle(t,{height:l.size+l.sizeUnit,"flex-grow":"","-webkit-flex-grow":"","flex-basis":"","-webkit-flex-basis":""})):(r[_]=l.size+l.sizeUnit,n="fixedPercentSize",r["flex-grow"]="",r["-webkit-flex-grow"]="",r["flex-basis"]="",r["-webkit-flex-basis"]="")):1===a&&void 0!==t?(r[_]="",n="factorSize",q.StyleProvider.setSimpleElementStyle(t,{height:"","flex-grow":l.size.toString(),"-webkit-flex-grow":l.size.toString(),"flex-basis":"0","-webkit-flex-basis":"0"})):(r[_]="",n="factorSize",r["flex-grow"]=l.size.toString(),r["-webkit-flex-grow"]=l.size.toString(),r["flex-basis"]="0",r["-webkit-flex-basis"]="0"):1===a&&void 0!==t?(r[_]="",n="factorSizeAsFallback",q.StyleProvider.setSimpleElementStyle(t,{height:"","flex-grow":"1","-webkit-flex-grow":"1","flex-basis":"0","-webkit-flex-basis":"0"})):(r[_]="",n="factorSizeAsFallback",r["flex-grow"]="1",r["-webkit-flex-grow"]="1",r["flex-basis"]="0",r["-webkit-flex-basis"]="0");var s=1/0;if(void 0!==l.maxSize&&null!==l.maxSize&&$.isNumeric(l.maxSize)?("px"===l.maxSizeUnit&&(null===g[i]||g[i]>l.maxSize)&&(g[i]=l.maxSize,s=l.maxSize),1===a&&void 0!==t?q.StyleProvider.setSimpleElementStyle(t,"max-height",l.maxSize+(l.maxSizeUnit||"px")):r["max-"+_]=l.maxSize+(l.maxSizeUnit||"px")):1===a&&void 0!==t?q.StyleProvider.setSimpleElementStyle(t,"max-height",""):r["max-"+_]="",void 0!==l.minSize&&null!==l.minSize&&$.isNumeric(l.minSize))"px"===l.minSizeUnit&&(null===g[i]||g[i]<l.minSize)&&(g[i]=l.minSize),1===a&&void 0!==t?q.StyleProvider.setSimpleElementStyle(t,"min-height",l.minSize+(l.minSizeUnit||"px")):r["min-"+_]=l.minSize+(l.minSizeUnit||"px");else{var h="";$.isNumeric(d[i])&&0!==d[i]&&"Content"!==l.sizeMode&&!1===e&&d[i]<s?(h=d[i]+"px",n+="+influenced-by_"+c[i],(null===g[i]||g[i]<d[i])&&(g[i]=d[i])):h="",1===a&&void 0!==t?q.StyleProvider.setSimpleElementStyle(t,"min-height",h):r["min-"+_]=h}void 0!==l.overflow&&null!==l.overflow&&!0===l.overflow?r["overflow-"+(1===a?"y":"x")]="":r["overflow-"+(1===a?"y":"x")]="hidden",q.StyleProvider.setSimpleElementStyle(o,r),o.attr("data-tchmi-grid-calculation-base-"+_,n)}for(var F=this,N=0;N<e;N++)M(N);1===a?tchmi_equal(this.__cacheHeightPerRow,g)||(q.EventProvider.raise("System.onGridCellResized",this),this.__cacheHeightPerRow=g):tchmi_equal(this.__cacheWidthPerColumn,g)||(q.EventProvider.raise("System.onGridCellResized",this),this.__cacheWidthPerColumn=g)}},j.prototype.__getContentWidth=function(){var e=null;if("Content"!==this.getWidthMode())return _.prototype.__getContentWidth.call(this);if("Collapsed"===this.__visibility)return null;if(null===this.__cacheWidthPerColumn&&this.__processColumnOptions(),null===this.__cacheWidthPerColumn)return null;for(var t=0,i=this.__cacheWidthPerColumn;t<i.length;t++){var o=i[t];null!==o&&(null===e?e=o:e+=o)}var n=parseFloat(this.__element.css("border-left-width"));0===n||isNaN(n)||(null===e?e=n:e+=n);var r=parseFloat(this.__element.css("border-right-width"));return 0===r||isNaN(r)||(null===e?e=r:e+=r),e},j.prototype.__getContentHeight=function(){var e=null;if("Content"!==this.getHeightMode())return _.prototype.__getContentHeight.call(this);if("Collapsed"===this.__visibility)return null;if(null===this.__cacheHeightPerRow&&this.__processRowOptions(),null===this.__cacheCellHeightPerRow&&this.__rebuildCellHeightPerRowCache(),null===this.__cacheCellHeightPerRow||null===this.__cacheHeightPerRow)return null;for(var t=0,i=this.__cacheHeightPerRow;t<i.length;t++){var o=i[t];null!==o&&(null===e?e=o*this.__cacheCellHeightPerRow:e+=o*this.__cacheCellHeightPerRow)}var n=parseFloat(this.__element.css("border-top-width"));0===n||isNaN(n)||(null===e?e=n:e+=n);var r=parseFloat(this.__element.css("border-bottom-width"));return 0===r||isNaN(r)||(null===e?e=r:e+=r),e},j.prototype.__processHeight=function(e){if(this.__rowOptions){for(var t="Value",i=0,o=this.__rowOptions;i<o.length;i++)if("Content"===(l=o[i]).heightMode){t="Content";break}if("Content"===t){e&&(this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null);for(var n=!1,r=0;r<this.__rowOptions.length;r++){if(!(r<this.__rowOptions.length)){n=!0;break}var l;if("Content"!==(l=this.__rowOptions[r]).heightMode&&"px"!==l.heightUnit){n=!0;break}}if(this.__intHeight=null,n)null!==this.__height&&void 0!==this.__height&&void 0!==this.__heightUnit?this.__intHeight=this.__height+this.__heightUnit:this.__intHeight=null;else{var s=this.__getContentHeight();null!==s&&(this.__intHeight=s+"px")}a.TcHmiControl.prototype.__processHeight.call(this,e)}else _.prototype.__processHeight.call(this,e)}},j.prototype.__processWidth=function(e){if(this.__columnOptions){for(var t="Value",i=0,o=this.__columnOptions;i<o.length;i++)if("Content"===(l=o[i]).widthMode){t="Content";break}if("Content"===t){e&&(this.__cacheWidthPerColumn=null);for(var n=!1,r=0;r<this.__columnOptions.length;r++){if(!(r<this.__columnOptions.length)){n=!0;break}var l;if("Content"!==(l=this.__columnOptions[r]).widthMode&&"px"!==l.widthUnit){n=!0;break}}var s=null;if(n)s=null!==this.__width&&void 0!==this.__width&&void 0!==this.__widthUnit?this.__width+this.__widthUnit:null;else{var h=this.__getContentWidth();null!==h&&(s=h+"px")}q.StyleProvider.setSimpleElementStyle(this.__element,"width",s),a.TcHmiControl.prototype.__processWidth.call(this,e)}else _.prototype.__processWidth.call(this,e);this.__processHeight()}},j.__getPixelNumberInStyle=function(e,t,i){if(e[t]&&-1!==e[t].indexOf("px"))return parseFloat(e[t]);if(void 0!==i&&e[i]&&-1!==e[i].indexOf("px")){var o=e[i].split(" ");switch(o.length){case 1:return parseFloat(o[0]);case 2:return-1!==t.indexOf("top")||-1!==t.indexOf("bottom")?parseFloat(o[0]):parseFloat(o[1]);case 3:return-1!==t.indexOf("top")?parseFloat(o[0]):-1!==t.indexOf("right")||-1!==t.indexOf("left")?parseFloat(o[1]):parseFloat(o[2]);case 4:return-1!==t.indexOf("top")?parseFloat(o[0]):-1!==t.indexOf("right")?parseFloat(o[1]):-1!==t.indexOf("bottom")?parseFloat(o[2]):parseFloat(o[3])}}return 0},t=j,a.TcHmiGrid=t,e.register("tchmi-grid",q.Controls.System.TcHmiGrid,"System/TcHmiGrid/","System/TcHmiGrid/Template.html")}(TcHmi=TcHmi||{});