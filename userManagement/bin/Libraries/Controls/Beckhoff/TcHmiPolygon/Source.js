var TcHmi;!function(l){var e,t,s,o;function r(e,t,o){var r=s.call(this,e,t,o)||this;return r.__resizedEventDestroyEvent=null,r.__objectResolvers=new Map,r.__onResolverForFillColorWatchCallback=function(e){!1===r.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,r.__fillColor)||(r.__fillColor=e.value,l.EventProvider.raise(r.__id+".onFunctionResultChanged",["getFillColor"]),r.__processFillColor())},r.__onResolverForStrokeColorWatchCallback=function(e){!1===r.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,r.__strokeColor)||(r.__strokeColor=e.value,l.EventProvider.raise(r.__id+".onFunctionResultChanged",["getStrokeColor"]),r.__processStrokeColor())},r}e=l.Controls||(l.Controls={}),t=e.Beckhoff||(e.Beckhoff={}),s=l.Controls.System.TcHmiControl,__extends(r,s),r.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".tchmi-polygon-template"),this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-polygon-template-svg"),this.__elementSvgPolygon=this.__elementTemplateRoot.find(".tchmi-polygon-template-svg-polygon"),0===this.__elementTemplateRoot.length||0===this.__elementSvg.length||0===this.__elementSvgPolygon.length)throw new Error("Invalid Template.html");s.prototype.__previnit.call(this)},r.prototype.__init=function(){s.prototype.__init.call(this)},r.prototype.__attach=function(){s.prototype.__attach.call(this),this.__resizedEventDestroyEvent=l.EventProvider.register(this.__id+".onResized",this.__onResized()),this.__objectResolvers.forEach(function(e){return e.resolver.watch(e.watchCallback)}),null!==this.__points&&this.__processPoints()},r.prototype.__detach=function(){s.prototype.__detach.call(this),null!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null),this.__objectResolvers.forEach(function(e){e.watchDestroyer&&(e.watchDestroyer(),e.watchDestroyer=null)})},r.prototype.destroy=function(){this.__objectResolvers.forEach(function(e){e.watchDestroyer&&e.watchDestroyer(),e.resolver.destroy()}),this.__objectResolvers.clear(),s.prototype.destroy.call(this)},r.prototype.__onResized=function(){var o=this;return function(e,t){o.__processPoints()}},r.prototype.setFillColor=function(e){var t=l.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("FillColor"));var o=this.__objectResolvers.get("fillColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new l.Symbol.ObjectResolver(t);this.__objectResolvers.set("fillColor",{resolver:r,watchCallback:this.__onResolverForFillColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForFillColorWatchCallback)})},r.prototype.getFillColor=function(){return this.__fillColor},r.prototype.__processFillColor=function(){l.StyleProvider.processFillColor(this.__elementSvgPolygon,this.__fillColor)},r.prototype.setFillMode=function(e){var t=l.ValueConverter.toString(e);if(null===t&&(t=this.getAttributeDefaultValueInternal("FillMode")),t!==this.__fillMode){switch(t){case"EvenOdd":this.__fillMode=t;break;default:this.__fillMode="NonZero"}l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getFillMode"]),this.__processFillMode()}},r.prototype.getFillMode=function(){return this.__fillMode},r.prototype.__processFillMode=function(){switch(this.__fillMode){case"EvenOdd":l.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"fill-rule","evenodd");break;case"NonZero":default:l.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"fill-rule","")}this.__elementSvgPolygon.remove(),this.__elementSvg.append(this.__elementSvgPolygon)},r.prototype.setStrokeColor=function(e){var t=l.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeColor"));var o=this.__objectResolvers.get("strokeColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new l.Symbol.ObjectResolver(t);this.__objectResolvers.set("strokeColor",{resolver:r,watchCallback:this.__onResolverForStrokeColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForStrokeColorWatchCallback)})},r.prototype.getStrokeColor=function(){return this.__strokeColor},r.prototype.__processStrokeColor=function(){l.StyleProvider.processStrokeColor(this.__elementSvgPolygon,this.__strokeColor)},r.prototype.setStrokeStyle=function(e){var t=l.ValueConverter.toString(e);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeStyle")),t!==this.__strokeStyle&&(this.__strokeStyle=t,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeStyle"]),this.__processStrokeStyle())},r.prototype.getStrokeStyle=function(){return this.__strokeStyle},r.prototype.__processStrokeStyle=function(){l.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"stroke-dasharray",this.__strokeStyle)},r.prototype.setStrokeThickness=function(e){var t=l.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeThickness")),t!==this.__strokeThickness&&(this.__strokeThickness=t,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeThickness"]),this.__processStrokeThickness())},r.prototype.getStrokeThickness=function(){return this.__strokeThickness},r.prototype.__processStrokeThickness=function(){"number"!=typeof this.__strokeThickness?l.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"stroke-width",null):l.StyleProvider.setSimpleElementStyle(this.__elementSvgPolygon,"stroke-width",this.__strokeThickness.toString())},r.prototype.getStrokeThicknessUnit=function(){return"px"},r.prototype.__processStrokeThicknessUnit=function(){},r.prototype.setPoints=function(e){var t=l.ValueConverter.toString(e);null===t&&(t=this.getAttributeDefaultValueInternal("Points")),t!==this.__points&&(this.__points=t,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getPoints"]),this.__processPoints())},r.prototype.getPoints=function(){return this.__points},r.prototype.__processPoints=function(){if(null!==this.__points&&void 0!==this.__points){var e=this.getRenderedWidth(),t=this.getRenderedHeight();if(!e||!t)return;var o=this.__points.split(/ |,/).filter(function(e){return""!==e}).map(function(e){return parseFloat(e)});if(o.length<2)return void this.__elementSvgPolygon[0].setAttribute("points","");for(var r=null,l=null,s=null,i=null,n=0,_=o.length;n<_;n++)n%2==0?((null===r||o[n]<r)&&(r=o[n]),(null===s||o[n]>s)&&(s=o[n])):((null===l||o[n]<l)&&(l=o[n]),(null===i||o[n]>i)&&(i=o[n]));var c=s-r,h=i-l,a=e/(c=0!==c?c:e),u=t/(h=0!==h?h:t);switch(this.__scaleMode){case"ScaleToFill":for(n=0,_=o.length;n<_;n++)o[n]=n%2==0?(o[n]-r)*a:(o[n]-l)*u;break;case"ScaleToFit":var p=a<u?a:u;for(n=0,_=o.length;n<_;n++)o[n]=n%2==0?(o[n]-r)*p:(o[n]-l)*p;break;case"ScaleToFitWidth":for(n=0,_=o.length;n<_;n++)o[n]=n%2==0?(o[n]-r)*a:(o[n]-l)*a;break;case"ScaleToFitHeight":for(n=0,_=o.length;n<_;n++)o[n]=n%2==0?(o[n]-r)*u:(o[n]-l)*u}this.__elementSvgPolygon[0].setAttribute("points",o.join(" "))}else this.__elementSvgPolygon[0].setAttribute("points","")},r.prototype.setScaleMode=function(e){var t=l.ValueConverter.toScaleModeString(e);null===t&&(t=this.getAttributeDefaultValueInternal("ScaleMode")),t!==this.__scaleMode&&(this.__scaleMode=t,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getScaleMode"]),this.__processScaleMode())},r.prototype.getScaleMode=function(){return this.__scaleMode},r.prototype.__processScaleMode=function(){this.__processPoints()},o=r,t.TcHmiPolygon=o,e.register("tchmi-polygon",l.Controls.Beckhoff.TcHmiPolygon,"Beckhoff/TcHmiPolygon/","Beckhoff/TcHmiPolygon/Template.html")}(TcHmi=TcHmi||{});