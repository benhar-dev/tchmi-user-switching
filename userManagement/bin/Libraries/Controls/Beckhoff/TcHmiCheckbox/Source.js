var TcHmi;!function(l){var t,e,r,o;function s(t,e,o){var s=r.call(this,t,e,o)||this;return s.__onPressedEventDestroyEvent=null,s.__resizedEventDestroyEvent=null,s.__onToggleGroupToggledEventDestroyEvent=null,s.__stateOld=!1,s.__state=!1,s.__objectResolvers=new Map,s.__onResolverForToggleStateIconColorWatchCallback=function(t){!1===s.__isAttached&&t.destroy&&t.destroy(),tchmi_equal(t.value,s.__toggleStateIconColor)||(s.__toggleStateIconColor=t.value,l.EventProvider.raise(s.__id+".onFunctionResultChanged",["getToggleStateIconColor"]),s.__processToggleStateIconColor())},s.__destroyStateSymbolWatch=null,s}t=l.Controls||(l.Controls={}),e=t.Beckhoff||(t.Beckhoff={}),r=l.Controls.System.TcHmiControl,__extends(s,r),s.prototype.__previnit=function(){r.prototype.__previnit.call(this)},s.prototype.__init=function(){r.prototype.__init.call(this)},s.prototype.__attach=function(){r.prototype.__attach.call(this),this.__resizedEventDestroyEvent=l.EventProvider.register(this.__id+".onResized",this.__onResized()),this.__onPressedEventDestroyEvent=l.EventProvider.register(this.__id+".onPressed",this.__onPressed()),this.__stateSymbol&&!this.__destroyStateSymbolWatch&&(this.__destroyStateSymbolWatch=this.__stateSymbol.watch(this.__onStateSymbolWatch())),this.__objectResolvers.forEach(function(t){return t.resolver.watch(t.watchCallback)})},s.prototype.__detach=function(){r.prototype.__detach.call(this),null!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null),null!==this.__onPressedEventDestroyEvent&&(this.__onPressedEventDestroyEvent(),this.__onPressedEventDestroyEvent=null),this.__destroyStateSymbolWatch&&(this.__destroyStateSymbolWatch(),this.__destroyStateSymbolWatch=null),this.__objectResolvers.forEach(function(t){t.watchDestroyer&&(t.watchDestroyer(),t.watchDestroyer=null)})},s.prototype.destroy=function(){null!==this.__onToggleGroupToggledEventDestroyEvent&&(this.__onToggleGroupToggledEventDestroyEvent(),this.__onToggleGroupToggledEventDestroyEvent=null),this.__objectResolvers.forEach(function(t){t.watchDestroyer&&t.watchDestroyer(),t.resolver.destroy()}),this.__objectResolvers.clear(),r.prototype.destroy.call(this)},s.prototype.__onToggleGroupToggled=function(){var o=this;return function(t,e){null!=e&&void 0!==e.ActiveElementId&&null!==e.ActiveElementId&&e.ActiveElementId!==o.__id&&o.__processState(!1,!0)}},s.prototype.setToggleGroup=function(t){var e=l.ValueConverter.toString(t);null===e&&(e=this.getAttributeDefaultValueInternal("ToggleGroup")),e!==this.__toggleGroup&&(this.__toggleGroup=e,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getToggleGroup"]),this.__processToggleGroup())},s.prototype.getToggleGroup=function(){return this.__toggleGroup},s.prototype.__processToggleGroup=function(){null!==this.__onToggleGroupToggledEventDestroyEvent&&(this.__onToggleGroupToggledEventDestroyEvent(),this.__onToggleGroupToggledEventDestroyEvent=null),null!==this.__toggleGroup&&(this.__onToggleGroupToggledEventDestroyEvent=l.EventProvider.register(this.__toggleGroup+".toggled",this.__onToggleGroupToggled()))},s.prototype.__processState=function(t,e){var o=this;void 0===e&&(e=!0),this.__stateOld=this.__state,this.__state=t,this.__state!==this.__stateOld&&(this.__state?(this.__stateSymbol&&e&&this.__stateSymbol.write(!0,function(t){t.error!==l.Errors.NONE&&t.details&&l.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiCheckbox, Id="+o.getId()+", Property=StateSymbol, "+(o.__stateSymbol?"Symbol = "+o.__stateSymbol.getExpression().toString():"")+"] "+l.Log.buildMessage(t.details))}),this.__setToggleState("Active",e,!1),null!==this.__toggleGroup&&l.EventProvider.raise(this.__toggleGroup+".toggled",{ActiveElementId:this.__id})):(this.__stateSymbol&&e&&this.__stateSymbol.write(!1,function(t){t.error!==l.Errors.NONE&&t.details&&l.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiCheckbox, Id="+o.getId()+", Property=StateSymbol, "+(o.__stateSymbol?"Symbol = "+o.__stateSymbol.getExpression().toString():"")+"] "+l.Log.buildMessage(t.details))}),this.__setToggleState("Normal",e,!1)),this.__element.toggleClass("tchmi-checkbox-active","Active"===this.__toggleState),l.EventProvider.raise(this.getId()+".onStateChanged",{control:this,state:this.__state,stateOld:this.__stateOld}))},s.prototype.__onResized=function(){var r=this;return function(t,e){var o=r.__element.width()/r.__element.height();if(1<o){var s=(100/o).toString()+"%";l.StyleProvider.setSimpleElementStyle(r.__element.find(".tchmi-checkbox-template"),"background-size",s)}else l.StyleProvider.setSimpleElementStyle(r.__element.find(".tchmi-checkbox-template"),"background-size",null)}},s.prototype.__onPressed=function(){var t=this;return function(){!0===l.Access.checkAccess(t,"operate")&&t.getIsEnabled()&&t.__processState(!t.__state,!0)}},s.prototype.__setToggleState=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1);var s=l.ValueConverter.toToggleState(t);null===s&&(s=this.getAttributeDefaultValueInternal("ToggleState")),s!==this.__toggleState&&(this.__toggleState=s,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getToggleState"]),l.EventProvider.raise(this.__id+".onToggleStateChanged"),o&&this.__processToggleState(e))},s.prototype.setToggleState=function(t){this.__setToggleState(t,!0,!0)},s.prototype.getToggleState=function(){return this.__toggleState},s.prototype.__processToggleState=function(t){void 0===t&&(t=!0),"Normal"===this.__toggleState?this.__processState(!1,t):"Active"===this.__toggleState&&this.__processState(!0,t)},s.prototype.setToggleStateIconColor=function(t){var e=l.ValueConverter.toObject(t);null===e&&(e=this.getAttributeDefaultValueInternal("ToggleStateIconColor"));var o=this.__objectResolvers.get("toggleStateIconColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var s=new l.Symbol.ObjectResolver(e);this.__objectResolvers.set("toggleStateIconColor",{resolver:s,watchCallback:this.__onResolverForToggleStateIconColorWatchCallback,watchDestroyer:s.watch(this.__onResolverForToggleStateIconColorWatchCallback)})},s.prototype.getToggleStateIconColor=function(){return this.__toggleStateIconColor},s.prototype.__processToggleStateIconColor=function(){l.StyleProvider.processStrokeColor(this.__element.find(".tchmi-checkbox-toggle-state-icon"),this.__toggleStateIconColor)},s.prototype.__onStateSymbolWatch=function(){var e=this;return function(t){t.error===l.Errors.NONE?!1!==t.value&&!0!==t.value||e.__processState(t.value,!1):t.details&&l.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiCheckbox, Id="+e.getId()+", Property=StateSymbol, "+(e.__stateSymbol?"Symbol = "+e.__stateSymbol.getExpression().toString():"")+"] "+l.Log.buildMessage(t.details))}},s.prototype.setStateSymbol=function(t){this.__stateSymbol!==t&&(this.__destroyStateSymbolWatch&&(this.__destroyStateSymbolWatch(),this.__destroyStateSymbolWatch=null),t instanceof l.Symbol?(this.__stateSymbol=t,this.__destroyStateSymbolWatch=this.__stateSymbol.watch(this.__onStateSymbolWatch())):void 0===this.__stateSymbol?this.__stateSymbol=null:(this.__stateSymbol=null,this.__processState(!1,!1)),l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStateSymbol"]))},s.prototype.getStateSymbol=function(){return this.__stateSymbol},o=s,e.TcHmiCheckbox=o,t.register("tchmi-checkbox",l.Controls.Beckhoff.TcHmiCheckbox,"Beckhoff/TcHmiCheckbox/","Beckhoff/TcHmiCheckbox/Template.html")}(TcHmi=TcHmi||{});