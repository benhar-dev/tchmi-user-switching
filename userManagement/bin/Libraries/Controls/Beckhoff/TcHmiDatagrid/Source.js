var TcHmi;!function(x){var e,t,i,o;function R(e,t,o){var u=i.call(this,e,t,o)||this;return u.__internalSorting=[],u.__internalSrcColumn=[],u.__objectResolvers=new Map,u.__lockState=null,u.__columnWidths=[{width:0,widthUnit:"px",pixelWidth:0,minWidth:6,minWidthUnit:"px",resizable:!0}],u.__draggingInfo={isDragging:!1,columnIndex:null,startingPoint:null,offset:null},u.__lastRemovedSorting=null,u.__sortMap=null,u.__sortTouches=[],u.__srcDataHasChanged=!1,u.__selectedCell=null,u.__scrollInfo={scrollTop:0,scrollLeft:0,firstIndex:0,oldFirstIndex:0,rowCount:0,oldRowCount:0,buffer:10},u.__resizedEventDestroyEvent=null,u.__comboboxDropdowns={},u.__selectedCombobox=null,u.__resizeElementMinWidth=8,u.__storageValidation={sorting:{function:"getSorting",expectedResult:void 0},columnWidths:{function:"getSrcColumn",expectedResult:void 0}},u.__onMousedown=function(e){if(!0===x.Access.checkAccess(u,"operate")&&!1!==u.getIsEnabled()&&0===e.button){for(var t=e.target;t&&t instanceof Element&&!t.classList.contains("tchmi-datagrid-combobox-template");)t=t.parentElement;if(t instanceof HTMLDivElement){var o=t.parentElement;o instanceof HTMLTableCellElement&&u.__openCombobox(o)}}},u.__onItemClick=function(e){if(e.target instanceof HTMLElement&&e.target.classList.contains("tchmi-datagrid-combobox-template-dropdown-element")&&u.__selectedCombobox&&!0===x.Access.checkAccess(u,"operate")&&!1!==u.getIsEnabled()){var t=u.__selectedCombobox.cell.parentElement;if(t instanceof HTMLTableRowElement){var o=parseInt(e.target.dataset.index||"",10),r=u.__selectedCombobox.column;if(!isNaN(o)&&r){var i=r.dataDefinitions?r.dataDefinitions[o]:void 0,n=u.__selectedCombobox.cell.getElementsByClassName("tchmi-datagrid-combobox-template-select")[0];i&&n&&(n.textContent=i.text||"",u.__modifySrcData(i.value,u.__selectedCombobox.row,u.__internalSrcColumn.indexOf(r),t))}u.__closeCombobox()}}},u.__onColumnMouseDown=function(e){if(0===e.button&&u.getIsEnabled()&&x.Access.checkAccess(u,"operate")&&e.target instanceof HTMLElement&&e.target.classList.contains("tchmi-datagrid-template-resize-element")){for(var t=e.target;t&&!(t instanceof HTMLTableCellElement);)t=t.parentElement;if(t){var o=t.getBoundingClientRect();u.__draggingInfo.isDragging=!0,u.__draggingInfo.columnIndex=t.cellIndex,u.__draggingInfo.startingPoint=o.left,u.__draggingInfo.offset=o.width-(e.clientX-o.left)}}},u.__onColumnMouseMove=function(e){if(u.__draggingInfo.isDragging&&null!==u.__draggingInfo.startingPoint&&null!==u.__draggingInfo.offset&&null!==u.__draggingInfo.columnIndex&&u.getIsEnabled()&&x.Access.checkAccess(u,"operate")){var t=e.clientX-u.__draggingInfo.startingPoint+u.__draggingInfo.offset;if("%"===u.__columnWidths[u.__draggingInfo.columnIndex].widthUnit){var o=u.__element[0].clientWidth;0!==u.__draggingInfo.columnIndex&&u.__showRowNumbers&&(o-=u.__columnWidths[0].pixelWidth),t=t/o*100}u.__resizeColumn(u.__draggingInfo.columnIndex,t),u.__setStoredValue("columnWidths",u.__columnWidths.map(function(e){return e.width}))}},u.__onColumnMouseUp=function(){u.__draggingInfo.isDragging=!1,u.__draggingInfo.columnIndex=null,u.__draggingInfo.startingPoint=null,u.__draggingInfo.offset=null,u.__lockState&&null!==u.__lockState.column&&u.__internalSrcColumn[u.__lockState.column]&&"CheckBox"===u.__internalSrcColumn[u.__lockState.column].control&&u.__unlock()},u.__onColumnMouseDblClick=function(e){if(u.getIsEnabled()&&x.Access.checkAccess(u,"operate")&&e.target instanceof HTMLElement&&e.target.classList.contains("tchmi-datagrid-template-resize-element")){var t=$(e.target).closest("th"),o=t[0].cellIndex;if(u.__columnWidths[o].resizable){var r=u.__elementDataTableBody.find("td:nth-child("+(o+1)+")");t.css({"min-width":"0","max-width":"none"}),r.css({"min-width":"0","max-width":"none"});var i="",n="",l=0<o&&"ComboBox"===u.__internalSrcColumn[o-1].control;l&&(r.find(".tchmi-datagrid-combobox-template-select").css({position:"static"}),i=r.css("padding-left"),n=r.css("padding-right"),r.css({"padding-left":"0","padding-right":"0"}));var s=0<o&&"TextBox"===u.__internalSrcColumn[o-1].control;if(s){var a=r.find("input");a.css({width:"0",position:"static"}),a.each(function(e,t){t.style.width=t.scrollWidth+"px"}),i=r.css("padding-left"),n=r.css("padding-right"),r.css({"padding-left":"0","padding-right":"0"})}var _=t[0].offsetWidth,d=r[0].offsetWidth;l&&(d+=r.find(".tchmi-datagrid-combobox-template-button")[0].offsetWidth,r.find(".tchmi-datagrid-combobox-template-select").css({position:""}),r.css({"padding-left":i,"padding-right":n})),s&&(r.find("input").css({width:"",position:""}),r.css({"padding-left":i,"padding-right":n})),t.css({"min-width":"","max-width":""}),r.css({"min-width":"","max-width":""});var c=d<_?_:d;if("%"===u.__columnWidths[o].widthUnit){var h=u.__element[0].clientWidth;0!==u.__draggingInfo.columnIndex&&u.__showRowNumbers&&(h-=u.__columnWidths[0].pixelWidth),c=c/h*100}u.__resizeColumn(o,c,!0),u.__setStoredValue("columnWidths",u.__columnWidths.map(function(e){return e.width}))}}},u.__onSortClick=function(e){if(u.getIsEnabled()&&x.Access.checkAccess(u,"operate")){for(var t=e.target;t instanceof HTMLElement&&!t.classList.contains("tchmi-datagrid-template-sort-element")&&!t.classList.contains("tchmi-datagrid-template-row-numbers");){if(t.classList.contains("tchmi-datagrid-template-resize-element"))return;t=t.parentElement}t instanceof HTMLElement&&u.__modifySorting(t,e.shiftKey)}},u.__onSortTouchStart=function(n){if(u.getIsEnabled()&&x.Access.checkAccess(u,"operate")){function e(e,t){for(var o=n.changedTouches[e],r=o.target;r instanceof HTMLElement&&!r.classList.contains("tchmi-datagrid-template-sort-element")&&!r.classList.contains("tchmi-datagrid-template-row-numbers");)r=r.classList.contains("tchmi-datagrid-template-resize-element")?null:r.parentElement;if(!(r instanceof HTMLElement))return 1;var i={touchId:o.identifier,timeoutId:null,sortElement:r,clientX:o.clientX,clientY:o.clientY};u.__sortTouches.push(i),i.timeoutId=window.setTimeout(function(){i.timeoutId=null,u.__modifySorting(i.sortElement,!0)},300)}for(var t=0,o=n.changedTouches.length;t<o;t++)e(t)}},u.__onSortTouchMove=function(e){for(var t=0,o=e.changedTouches.length;t<o;t++){for(var r=e.changedTouches[t],i=-1,n=0,l=u.__sortTouches.length;n<l;n++)if(u.__sortTouches[n].touchId===r.identifier){i=n;break}if(-1!==i){var s=u.__sortTouches[i];100<Math.pow(r.clientX-s.clientX,2)+Math.pow(r.clientY-s.clientY,2)&&(null!==s.timeoutId&&window.clearTimeout(s.timeoutId),u.__sortTouches.splice(i,1))}}},u.__onSortTouchEnd=function(e){e.cancelable&&e.preventDefault();for(var t=0,o=e.changedTouches.length;t<o;t++){for(var r=e.changedTouches[t],i=-1,n=0,l=u.__sortTouches.length;n<l;n++)if(u.__sortTouches[n].touchId===r.identifier){i=n;break}if(-1!==i){var s=u.__sortTouches[i];if(null!==s.timeoutId)if(window.clearTimeout(s.timeoutId),0===u.__internalSorting.length)u.__modifySorting(s.sortElement,!1);else{for(var a=s.sortElement;a&&!(a instanceof HTMLTableCellElement);)a=a.parentElement;if(a)if(a.classList.contains("tchmi-datagrid-template-row-numbers"))u.__modifySorting(s.sortElement,!1);else{var _=void 0;if(R.isSimpleColumn(u.__internalSrcColumn[0])||(_=a.dataset.name),u.__lastRemovedSorting&&u.__lastRemovedSorting.name===_)u.__modifySorting(s.sortElement,!0);else{for(var d=!1,c=0,h=u.__internalSorting.length;c<h;c++)if(u.__internalSorting[c].name===_){d=!0;break}u.__modifySorting(s.sortElement,d)}}}u.__sortTouches.splice(i,1)}}},u.__onSortTouchCancel=function(e){e.cancelable&&e.preventDefault();for(var t=0,o=e.changedTouches.length;t<o;t++){for(var r=e.changedTouches[t],i=-1,n=0,l=u.__sortTouches.length;n<l;n++)if(u.__sortTouches[n].touchId===r.identifier){i=n;break}if(-1!==i){var s=u.__sortTouches[i];null!==s.timeoutId&&window.clearTimeout(s.timeoutId),u.__sortTouches.splice(i,1)}}},u.__onScroll=function(e){if(u.getIsEnabled()&&x.Access.checkAccess(u,"operate")){var t=e.currentTarget.scrollLeft,o=e.currentTarget.scrollTop;if(u.__scrollInfo.scrollLeft!==t&&(u.__scrollInfo.scrollLeft=t,u.__elementHeaderScroll.scrollLeft(t)),u.__scrollInfo.scrollTop!==o){u.__scrollInfo.scrollTop=o;var r=u.__rowHeight?Math.floor(o/u.__rowHeight):0;Math.abs(u.__scrollInfo.firstIndex-r)>u.__scrollInfo.buffer/2&&(u.__scrollInfo.firstIndex=r,u.__updateTable(2),u.__updateSentinels())}}},u.__onFocusElement=function(e){if(u.__srcData&&u.getIsEnabled()&&x.Access.checkAccess(u,"operate")){for(var t=e.target;t instanceof Node&&!(t instanceof HTMLTableCellElement);)t=t.parentElement;if(t instanceof HTMLTableCellElement){var o=parseInt(t.dataset.row||"",10),r=parseInt(t.dataset.column||"-1",10);isNaN(o)||(u.__elementDataTableBody.find("tr.focused, td.focused").removeClass("focused"),t.classList.add("focused"),t.parentElement&&t.parentElement.classList.add("focused"),null!==u.__selectedCell&&u.__selectedCell.rowIndex===o&&u.__selectedCell.columnIndex===r||(u.__selectedCell={rowIndex:o,columnIndex:r},x.EventProvider.raise(u.__id+".onSelectedItemChanged"),x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getSelectedRowIndex","getSelectedColumnIndex","getSelectedRowValue","getSelectedCellValue"])),e.target instanceof HTMLInputElement&&"text"===e.target.type&&!e.target.disabled&&u.__lock(o,r))}}},u.__onFocusElementOut=function(e){if(u.__srcData&&u.getIsEnabled()&&x.Access.checkAccess(u,"operate")&&e.target instanceof HTMLInputElement&&"text"===e.target.type){for(var t=e.target;t&&!(t instanceof HTMLTableCellElement);)t=t.parentElement;for(var o=t;o&&!(o instanceof HTMLTableRowElement);)o=o.parentElement;if(o&&(u.__unlock(),t&&!t.classList.contains("TcHmi_Controls_Beckhoff_TcHmiDatagrid-template-row-numbers"))){var r=parseInt(t.dataset.row||"",10),i=parseInt(t.dataset.column||"",10);if(!isNaN(r)&&!isNaN(i)&&!("TextBox"!==u.__internalSrcColumn[i].control||r>=u.__srcData.length)){var n=u.__modifySrcData(e.target.value,r,i,o);e.target.value=u.__executeFormatFunction(u.__internalSrcColumn[i].format,n)}}}},u.__onKeydown=function(e){if(u.__srcData&&u.getIsEnabled()&&x.Access.checkAccess(u,"operate")&&e.target instanceof HTMLInputElement&&"text"===e.target.type)if("Enter"===e.key)e.target.blur();else if("Escape"===e.key&&u.__selectedCell&&null!==u.__selectedCell.rowIndex){var t=u.__srcData[u.__selectedCell.rowIndex],o=u.__internalSrcColumn[u.__selectedCell.columnIndex];R.isSimpleColumn(o)||(t=u.__readObjectProperty(t,o.name)),e.target.value=u.__executeFormatFunction(o.format,t),e.target.blur()}},u.__onCheckboxMouseDown=function(e){if(u.getIsEnabled()&&x.Access.checkAccess(u,"operate")&&e.target instanceof HTMLLabelElement&&e.target.previousElementSibling instanceof HTMLInputElement&&"checkbox"===e.target.previousElementSibling.type){for(var t=e.target;t&&!(t instanceof HTMLTableCellElement);)t=t.parentElement;if(t){var o=parseInt(t.dataset.row||"",10),r=parseInt(t.dataset.column||"",10);isNaN(o)||isNaN(r)||u.__lock(o,r)}}},u.__onValueChange=function(e){if(u.__srcData&&u.getIsEnabled()&&x.Access.checkAccess(u,"operate")&&e.target instanceof HTMLInputElement&&"checkbox"===e.target.type){for(var t=e.target;t&&!(t instanceof HTMLTableRowElement);)t=t.parentElement;if(t){u.__lockState&&"ComboBox"===u.__internalSrcColumn[u.__lockState.column].control&&u.__unlock();for(var o=e.target;o&&!(o instanceof HTMLTableCellElement);)o=o.parentElement;if(o){var r=parseInt(o.dataset.row||"",10),i=parseInt(o.dataset.column||"",10);isNaN(r)||isNaN(i)||"CheckBox"===u.__internalSrcColumn[i].control&&u.__modifySrcData(e.target.checked,r,i,t)}}}},u.__onResolverForSrcColumnWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__srcColumn)||(u.__srcColumn=e.value,Array.isArray(e.value)?u.__internalSrcColumn=e.value:u.__internalSrcColumn=[e.value],x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getSrcColumn"]),u.__processSrcColumn())},u.__onResolverForSrcDataWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),u.__srcDataHasChanged&&(u.__srcDataHasChanged=!1,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getSrcDataHasChanged"])),tchmi_equal(e.value,u.__srcData)||(null!==e.value?(u.__lockState&&e.value&&u.__lockState.row<e.value.length&&u.__srcData&&(null!==u.__lockState.propertyName?u.__writeObjectProperty(e.value[u.__lockState.row],u.__lockState.propertyName,u.__readObjectProperty(u.__srcData[u.__lockState.row],u.__lockState.propertyName)):e.value[u.__lockState.row]=u.__srcData[u.__lockState.row]),u.__srcData=e.value):u.__srcData=[],x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getSrcData"]),u.__processSrcData())},u.__onResolverForSortingWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__sorting)||(u.__sorting=e.value,u.__internalSorting=tchmi_clone_object(e.value)||[],x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getSorting"]),u.__processSorting())},u.__onResolverForHeaderCellPaddingWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__headerCellPadding)||(u.__headerCellPadding=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getHeaderCellPadding"]),u.__processHeaderCellPadding())},u.__onResolverForTableBorderColorWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__tableBorderColor)||(u.__tableBorderColor=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getTableBorderColor"]),u.__processTableBorderColor())},u.__onResolverForTableBorderStyleWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__tableBorderStyle)||(u.__tableBorderStyle=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getTableBorderStyle"]),u.__processTableBorderStyle())},u.__onResolverForRowNumbersCellPaddingWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__rowNumbersCellPadding)||(u.__rowNumbersCellPadding=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getRowNumbersCellPadding"]),u.__processRowNumbersCellPadding())},u.__onResolverForCellContentPaddingWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__cellContentPadding)||(u.__cellContentPadding=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getCellContentPadding"]),u.__processCellContentPadding())},u.__onResolverForHeaderBackgroundColorWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__headerBackgroundColor)||(u.__headerBackgroundColor=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getHeaderBackgroundColor"]),u.__processHeaderBackgroundColor())},u.__onResolverForHeaderTextColorWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__headerTextColor)||(u.__headerTextColor=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getHeaderTextColor"]),u.__processHeaderTextColor())},u.__onResolverForRowNumbersTextColorWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__rowNumbersTextColor)||(u.__rowNumbersTextColor=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getRowNumbersTextColor"]),u.__processRowNumbersTextColor())},u.__onResolverForRowNumbersBackgroundColorWatchCallback=function(e){!1===u.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,u.__rowNumbersBackgroundColor)||(u.__rowNumbersBackgroundColor=e.value,x.EventProvider.raise(u.__id+".onFunctionResultChanged",["getRowNumbersBackgroundColor"]),u.__processRowNumbersBackgroundColor())},u}e=x.Controls||(x.Controls={}),t=e.Beckhoff||(e.Beckhoff={}),i=x.Controls.System.TcHmiControl,__extends(R,i),R.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".tchmi-datagrid-template"),this.__elementOuter=this.__elementTemplateRoot.find(".tchmi-datagrid-template-outer"),this.__elementHeaderScroll=this.__elementTemplateRoot.find(".tchmi-datagrid-template-header-border"),this.__elementHeaderTable=this.__elementHeaderScroll.find("table"),this.__elementDataScroll=this.__elementTemplateRoot.find(".tchmi-datagrid-template-data-scroll"),this.__elementDataTableBody=this.__elementDataScroll.find("table tbody"),0===this.__elementTemplateRoot.length||0===this.__elementOuter.length||0===this.__elementHeaderScroll.length||0===this.__elementHeaderTable.length||0===this.__elementDataScroll.length||0===this.__elementDataTableBody.length)throw new Error("Invalid Template.html");i.prototype.__previnit.call(this)},R.prototype.__init=function(){i.prototype.__init.call(this),this.__initStorage()},R.prototype.__attach=function(){i.prototype.__attach.call(this),this.__resizedEventDestroyEvent=x.EventProvider.register(this.__id+".onResized",this.__onResized()),document.addEventListener("mouseup",this.__onColumnMouseUp),document.addEventListener("mousemove",this.__onColumnMouseMove),document.addEventListener("click",this.__onItemClick),this.__elementHeaderTable[0].addEventListener("mousedown",this.__onColumnMouseDown),this.__elementHeaderTable[0].addEventListener("dblclick",this.__onColumnMouseDblClick),this.__elementHeaderTable[0].addEventListener("click",this.__onSortClick),this.__elementHeaderTable[0].addEventListener("touchstart",this.__onSortTouchStart),this.__elementHeaderTable[0].addEventListener("touchmove",this.__onSortTouchMove),this.__elementHeaderTable[0].addEventListener("touchend",this.__onSortTouchEnd),this.__elementHeaderTable[0].addEventListener("touchcancel",this.__onSortTouchCancel),this.__elementDataScroll[0].addEventListener("scroll",this.__onScroll),this.__elementDataTableBody[0].addEventListener("mousedown",this.__onCheckboxMouseDown),this.__elementDataTableBody[0].addEventListener("change",this.__onValueChange),this.__elementDataTableBody[0].addEventListener("focusin",this.__onFocusElement),this.__elementDataTableBody[0].addEventListener("focusout",this.__onFocusElementOut),this.__elementDataTableBody[0].addEventListener("keydown",this.__onKeydown),this.__elementDataTableBody[0].addEventListener("mousedown",this.__onMousedown),this.__objectResolvers.forEach(function(e){return e.resolver.watch(e.watchCallback)});var e=this.__getStoredValue("columnWidths");if(e)for(var t=0,o=Math.min(e.length,this.__columnWidths.length);t<o;t++)this.__columnWidths[t].width=e[t];this.__recalcAllColumnWidths();var r=this.__getStoredValue("sorting");r&&(this.__internalSorting=r,this.__processSorting()),this.__updateTable(1)},R.prototype.__detach=function(){i.prototype.__detach.call(this),(this.__selectedCombobox=null)!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null),document.removeEventListener("mouseup",this.__onColumnMouseUp),document.removeEventListener("mousemove",this.__onColumnMouseMove),document.removeEventListener("click",this.__onItemClick),this.__elementHeaderTable[0].removeEventListener("mousedown",this.__onColumnMouseDown),this.__elementHeaderTable[0].removeEventListener("dblclick",this.__onColumnMouseDblClick),this.__elementHeaderTable[0].removeEventListener("click",this.__onSortClick),this.__elementHeaderTable[0].removeEventListener("touchstart",this.__onSortTouchStart),this.__elementHeaderTable[0].removeEventListener("touchmove",this.__onSortTouchMove),this.__elementHeaderTable[0].removeEventListener("touchend",this.__onSortTouchEnd),this.__elementHeaderTable[0].removeEventListener("touchcancel",this.__onSortTouchCancel),this.__elementDataScroll[0].removeEventListener("scroll",this.__onScroll),this.__elementDataTableBody[0].removeEventListener("mousedown",this.__onCheckboxMouseDown),this.__elementDataTableBody[0].removeEventListener("change",this.__onValueChange),this.__elementDataTableBody[0].removeEventListener("focusin",this.__onFocusElement),this.__elementDataTableBody[0].removeEventListener("focusout",this.__onFocusElementOut),this.__elementDataTableBody[0].removeEventListener("keydown",this.__onKeydown),this.__elementDataTableBody[0].removeEventListener("mousedown",this.__onMousedown),this.__objectResolvers.forEach(function(e){e.watchDestroyer&&(e.watchDestroyer(),e.watchDestroyer=null)})},R.prototype.destroy=function(){i.prototype.destroy.call(this),this.__objectResolvers.forEach(function(e){e.watchDestroyer&&e.watchDestroyer(),e.resolver.destroy()}),this.__objectResolvers.clear()},R.prototype.__onResized=function(){var o=this;return function(e,t){o.__rowHeight&&(o.__scrollInfo.rowCount=Math.ceil(o.__elementDataScroll[0].clientHeight/o.__rowHeight)),o.__updateTable(2),o.__updateSentinels(),o.__recalcAllColumnWidths()}},R.prototype.__recalcAllColumnWidths=function(e){if(void 0===e&&(e=!1),this.__isAttached){var t=this.__element[0].clientWidth,o=0;if(0<t)for(var r=0,i=this.__columnWidths.length;r<i;r++){var n=this.__columnWidths[r],l=n.minWidth;t<=0?l=0:"%"===n.widthUnit&&"px"===n.minWidthUnit?l=l/t*100:"px"===n.widthUnit&&"%"===n.minWidthUnit&&(l=m(l));var s=n.width<l?l:n.width,a="%"===n.widthUnit?m(s):s,_=Math.floor(a);if(1<=(o+=a-_)&&(_++,o--),0===r&&this.__showRowNumbers&&(t-=_),n.pixelWidth!==_||e){n.pixelWidth=_;var d={"min-width":n.pixelWidth+"px","max-width":n.pixelWidth+"px"};x.StyleProvider.setSimpleElementStyle(this.__elementHeaderScroll.find("th:nth-child("+(r+1)+")"),d),x.StyleProvider.setSimpleElementStyle(this.__elementDataScroll.find("td:nth-child("+(r+1)+")"),d)}}var c=this.__elementDataTableBody[0].querySelectorAll(".tchmi-datagrid-template-row td input[type=checkbox] + label"),h=0;for(i=c.length;h<i;h++)if(!((r=c[h].parentElement.cellIndex)>=this.__columnWidths.length)){var u=Math.min(this.__rowHeight||0,this.__columnWidths[r].pixelWidth)-(this.__tableBorderWidth||0);c[h].style.width=u+"px",c[h].style.height=u+"px"}}function m(e){return t*(.01*e)}},R.prototype.__buildHeader=function(){var e=this.__elementHeaderTable.find("tr");e.find("th[data-column]").remove();for(var t=document.createDocumentFragment(),o=0,r=this.__internalSrcColumn.length;o<r;o++){var i="",n=this.__internalSrcColumn[o];R.isSimpleColumn(n)||(i=n.name);var l=document.createElement("th");l.classList.add("tchmi-datagrid-template-header"),l.classList.add("tchmi-box"),l.dataset.column=o.toString(10),l.dataset.name=i,this.__internalSrcColumn[o].resize&&l.classList.add("resizable");var s=this.__columnWidths[o+1].pixelWidth;x.StyleProvider.setSimpleElementStyle(l,{"min-width":s+"px","max-width":s+"px"}),x.StyleProvider.processContentPadding(l,this.__headerCellPadding),x.StyleProvider.processBorderWidth(l,{right:this.__tableBorderWidth}),x.StyleProvider.processBorderStyle(l,this.__tableBorderStyle),x.StyleProvider.processBorderColor(l,this.__tableBorderColor),x.StyleProvider.processBackgroundColor(l,this.__headerBackgroundColor),x.StyleProvider.processTextColor(l,this.__headerTextColor),x.StyleProvider.processFontFamily(l,this.__headerFontFamily),x.StyleProvider.processFontSize(l,this.__headerFontSize,this.__headerFontSizeUnit),x.StyleProvider.processFontStyle(l,this.__headerFontStyle),x.StyleProvider.processFontWeight(l,this.__headerFontWeight);var a=document.createElement("div");a.classList.add("tchmi-datagrid-template-header-wrapper");var _=document.createElement("div");_.classList.add("tchmi-datagrid-template-sort-element"),n.sortable&&_.classList.add("sortable");var d=document.createElement("div");d.classList.add("tchmi-datagrid-template-sort-element-child"),d.textContent=this.__internalSrcColumn[o].label?tchmi_text_to_html(this.__internalSrcColumn[o].label)+" ":"";for(var c=0,h=this.__internalSorting.length;c<h;c++)if(this.__internalSorting[c].name===i){switch(this.__internalSorting[c].order){case"Ascending":d.classList.add("tchmi-datagrid-template-header-sort-asc");break;case"Descending":d.classList.add("tchmi-datagrid-template-header-sort-desc")}break}var u=document.createElement("div");u.classList.add("tchmi-datagrid-template-resize-element"),this.__tableBorderWidth&&this.__tableBorderWidth>this.__resizeElementMinWidth&&x.StyleProvider.setSimpleElementStyle(u,{width:this.__tableBorderWidth+"px",right:-this.__tableBorderWidth+"px"}),_.appendChild(d),a.appendChild(_),a.appendChild(u),l.appendChild(a),t.appendChild(l)}e[0].appendChild(t)},R.prototype.__updateTable=function(e){if(this.__srcData&&this.__rowNumbersHorizontalAlignment&&this.__rowNumbersVerticalAlignment&&void 0!==this.__rowHeight&&void 0!==this.__showRowNumbers){var t=this.__sortMap&&this.__sortMap.length===this.__srcData.length,o=this.__scrollInfo.firstIndex-this.__scrollInfo.buffer;o=0<o?o:0;var r=this.__scrollInfo.firstIndex+this.__scrollInfo.rowCount+this.__scrollInfo.buffer;r=r<=this.__srcData.length?r:this.__srcData.length;var i=this.__elementDataTableBody[0];switch(e){case 0:var n=0,l=!1;if(this.__lockState&&this.__lockState.row<o){n=1;var s=this.__lockState.row;this.__createRow(s,t?this.__sortMap.indexOf(s):s,i.children[0],this.__lockState.column)}else this.__lockState&&this.__lockState.row>=r&&(l=!0,s=this.__lockState.row,this.__createRow(s,t?this.__sortMap.indexOf(s):s,i.children[i.childElementCount-1],this.__lockState.column));for(var a=null,_=o;_<r;_++,n++){var d=t?this.__sortMap[_]:_,c=i.children[n];c?this.__createRow(d,_,c,this.__lockState&&this.__lockState.row===d?this.__lockState.column:void 0):(a=a||document.createDocumentFragment()).appendChild(this.__createRow(d,_))}for(a&&i.appendChild(a);i.childElementCount>(l?n+1:n);)i.removeChild(i.lastElementChild);break;case 1:this.__lockState&&this.__unlock();var h=document.createDocumentFragment();for(_=o;_<r;_++)d=t?this.__sortMap[_]:_,h.appendChild(this.__createRow(d,_));for(;i.lastChild;)i.removeChild(i.lastChild);i.appendChild(h);break;case 2:var u=this.__scrollInfo.oldFirstIndex-this.__scrollInfo.buffer;u=0<u?u:0;var m=this.__scrollInfo.oldFirstIndex+this.__scrollInfo.oldRowCount+this.__scrollInfo.buffer;m=m<=this.__srcData.length?m:this.__srcData.length;var g=[],p=0;for(_=u;_<o&&(s=i.children[p]);_++){if(this.__lockState&&this.__lockState.row===parseInt(s.dataset.row||"",10)){if(p=1,this.__lockState.row===_){s.style.position="absolute",s.style.left="-100%";continue}if(!(s=s.nextElementSibling))break}g.push(i.removeChild(s))}for(p=0,_=m-1;r<=_&&(s=i.children[i.childElementCount-(p+1)]);_--){if(this.__lockState&&this.__lockState.row===parseInt(s.dataset.row||"",10)){if(p=1,this.__lockState.row===_){s.style.position="absolute",s.style.left="-100%";continue}if(!(s=s.previousElementSibling))break}g.push(i.removeChild(s))}var b=document.createDocumentFragment(),v=Math.max(m,o);for(_=v;_<r;_++)d=t?this.__sortMap[_]:_,b.appendChild(this.__createRow(d,_,g.pop()));var f=document.createDocumentFragment(),C=Math.min(u-1,r-1);for(_=C;o<=_;_--)d=t?this.__sortMap[_]:_,f.insertBefore(this.__createRow(d,_,g.pop()),f.firstChild);if(this.__lockState){var y=t?this.__sortMap.indexOf(this.__lockState.row):this.__lockState.row;if(y<o)this.__elementDataTableBody.children().first().after(f),this.__elementDataTableBody.append(b);else if(r<=y)this.__elementDataTableBody.prepend(f),this.__elementDataTableBody.children().last().before(b);else{var S=y-(C-(f.childNodes.length-1));0<=S&&S<f.childNodes.length?(this.__elementDataTableBody.children().first().css({position:"",left:""}).after(Array.prototype.slice.call(f.childNodes,1+S)),this.__elementDataTableBody.prepend(Array.prototype.slice.call(f.childNodes,0,S))):this.__elementDataTableBody.prepend(f);var w=y-v;0<=w&&w<b.childNodes.length?(this.__elementDataTableBody.children().last().css({position:"",left:""}).before(Array.prototype.slice.call(b.childNodes,0,w)),this.__elementDataTableBody.append(Array.prototype.slice.call(b.childNodes,1))):this.__elementDataTableBody.append(b)}}else this.__elementDataTableBody.prepend(f),this.__elementDataTableBody.append(b)}this.__scrollInfo.oldFirstIndex=this.__scrollInfo.firstIndex,this.__scrollInfo.oldRowCount=this.__scrollInfo.rowCount}},R.prototype.__openCombobox=function(e){var t=this;if(this.__srcData){var o=parseInt(e.dataset.column||"",10),r=this.__internalSrcColumn[o],i=parseInt(e.dataset.row||"",10);if(r&&r.editable&&!isNaN(o)&&!isNaN(i)){var n=e.getElementsByClassName("tchmi-datagrid-combobox-template")[0],l=this.__comboboxDropdowns[JSON.stringify(r.dataDefinitions)];if(n&&l){this.__lock(i,o);var s=this.__srcData[i];R.isSimpleColumn(r)||(s=this.__readObjectProperty(s,r.name));for(var a=0,_=l.children.length;a<_;a++){var d=l.children[a];tchmi_equal(d.dataset.value,s,!1)?d.classList.add("selected"):d.classList.remove("selected")}n.classList.add("active");var c={removeCb:function(e){n.classList.remove("active"),t.__selectedCombobox=null}};l.classList.remove("drop-down-style-mobile"),c.dimBackground=!1,c.resizeCb=function(e){var t=n.getBoundingClientRect();x.StyleProvider.setSimpleElementStyle(l,{top:t.top+t.height+"px",left:t.left+"px",width:t.width+"px"})},x.TopMostLayer.add(this,$(l),c),this.__selectedCombobox={cell:e,column:r,row:i}}}}},R.prototype.__closeCombobox=function(){this.__selectedCombobox&&(x.TopMostLayer.remove(this,$(this.__comboboxDropdowns[JSON.stringify(this.__selectedCombobox.column.dataDefinitions)])),this.__unlock())},R.prototype.__createRow=function(v,f,C,y){if(!this.__srcData)throw new Error("Unable to create row without srcData");var S=-1;if(C&&(S=parseInt(C.dataset.row||"",10))===v&&this.__oldSrcData&&tchmi_equal(this.__oldSrcData[S],this.__srcData[v]))return C;var w=C||document.createElement("tr");function e(e,t){if(e===y)return 1;var o;if(-1!==e){var r=F.__internalSrcColumn[e];if(R.isSimpleColumn(r)){if(o=F.__srcData[v],S===v&&F.__oldSrcData&&tchmi_equal(F.__oldSrcData[S],o))return 1}else if(o=F.__readObjectProperty(F.__srcData[v],r.name),S===v&&F.__oldSrcData&&tchmi_equal(F.__readObjectProperty(F.__oldSrcData[S],r.name),o))return 1}var i=void 0;if((i=C?w.getElementsByTagName("td")[e+1]:document.createElement("td")).setAttribute("data-row",v.toString()),!C){var n=F.__columnWidths[e+1].pixelWidth,l={"min-width":n+"px","max-width":n+"px",height:F.__rowHeight+"px"};-1===e?(i.setAttribute("class","tchmi-datagrid-template-row-numbers tchmi-box"),l.display=F.__showRowNumbers?"":"none",l["text-align"]=F.__rowNumbersHorizontalAlignment?F.__rowNumbersHorizontalAlignment.toLowerCase():"","Center"===F.__rowNumbersVerticalAlignment?l["vertical-align"]="middle":F.__rowNumbersVerticalAlignment&&(l["vertical-align"]=F.__rowNumbersVerticalAlignment.toLowerCase()),x.StyleProvider.processContentPadding(i,F.__rowNumbersCellPadding),x.StyleProvider.processTextColor(i,F.__rowNumbersTextColor),x.StyleProvider.processBackgroundColor(i,F.__rowNumbersBackgroundColor),x.StyleProvider.processFontFamily(i,F.__rowNumbersFontFamily),x.StyleProvider.processFontSize(i,F.__rowNumbersFontSize,F.__rowNumbersFontSizeUnit),x.StyleProvider.processFontStyle(i,F.__rowNumbersFontStyle),x.StyleProvider.processFontWeight(i,F.__rowNumbersFontWeight)):(i.setAttribute("class","tchmi-datagrid-template-cell tchmi-box"),i.setAttribute("data-column",e.toString()),r=F.__internalSrcColumn[e],R.isSimpleColumn(r)||i.setAttribute("data-column-name",r.name),F.__internalSrcColumn[e].horizontalAlignment?l["text-align"]=F.__internalSrcColumn[e].horizontalAlignment.toLowerCase():l["text-align"]="",F.__internalSrcColumn[e].verticalAlignment?l["vertical-align"]="Center"===F.__internalSrcColumn[e].verticalAlignment?"middle":F.__internalSrcColumn[e].verticalAlignment.toLowerCase():l["vertical-align"]="",x.StyleProvider.processTextColor(i,F.__internalSrcColumn[e].textColor),x.StyleProvider.processBackgroundColor(i,F.__internalSrcColumn[e].cellBackground),x.StyleProvider.processFontFamily(i,F.__gridFontFamily),x.StyleProvider.processFontSize(i,F.__gridFontSize,F.__gridFontSizeUnit),x.StyleProvider.processFontStyle(i,F.__gridFontStyle),x.StyleProvider.processFontWeight(i,F.__gridFontWeight)),i.setAttribute("tabindex","0"),i.setAttribute("data-tchmi-focusable",""),x.StyleProvider.setSimpleElementStyle(i,l),x.StyleProvider.processBorderWidth(i,{right:F.__tableBorderWidth,rightUnit:"px",bottom:F.__tableBorderWidth,bottomUnit:"px",top:0,left:0}),x.StyleProvider.processBorderStyle(i,F.__tableBorderStyle),x.StyleProvider.processBorderColor(i,F.__tableBorderColor)}if(F.__selectedCell&&F.__selectedCell.columnIndex===e?i.classList.add("focused"):i.classList.remove("focused"),-1!==e){switch((r=F.__internalSrcColumn[e]).control){case"CheckBox":var s=void 0;if(C)s=i.getElementsByTagName("input")[0];else{(s=document.createElement("input")).setAttribute("type","checkbox");var a="checkbox-"+tchmi_create_guid();s.setAttribute("id",a),s.disabled=!r.editable;var _=document.createElement("label");_.setAttribute("for",a);var d=Math.min(F.__rowHeight||0,F.__columnWidths[e+1].pixelWidth)-(F.__tableBorderWidth||0);x.StyleProvider.setSimpleElementStyle(_,{height:d+"px",width:d+"px"}),i.classList.add("tchmi-datagrid-template-cell-unpadded-control"),i.appendChild(s),i.appendChild(_)}s.checked=x.ValueConverter.toBoolean(o,!1);break;case"TextBox":var c=void 0;C?c=i.getElementsByTagName("input")[0]:((c=document.createElement("input")).setAttribute("type","text"),null!==r.cellBackground&&void 0!==r.cellBackground&&x.StyleProvider.processBackgroundColor(c,r.cellBackground),null!==r.textColor&&void 0!==r.textColor&&x.StyleProvider.processTextColor(c,r.textColor),x.StyleProvider.processContentPadding(c,F.__cellContentPadding),c.disabled=!r.editable,i.appendChild(c),i.classList.add("tchmi-datagrid-template-cell-unpadded-control")),c.value=F.__executeFormatFunction(r.format,o);break;case"TextBlock":i.firstChild?i.firstChild.nodeValue=F.__executeFormatFunction(r.format,o):i.textContent=F.__executeFormatFunction(r.format,o);break;case"Image":var h=void 0;C?h=i.getElementsByTagName("img")[0]:(h=document.createElement("img"),i.appendChild(h));var u=null;r.dataDefinitions&&(u=r.dataDefinitions.filter(function(e){return tchmi_equal(e.value,o)})[0]),h.setAttribute("src",u&&u.source||""),h.setAttribute("alt",u&&u.text||""),h.style.width=u&&void 0!==u.width&&null!==u.width?u.width+"px":"",h.style.height=u&&void 0!==u.height&&null!==u.height?u.height+"px":"";break;case"ComboBox":var m=void 0,g=void 0;if(C)m=i.getElementsByTagName("div")[0],g=i.getElementsByClassName("tchmi-datagrid-combobox-template-select")[0];else{switch((m=document.createElement("div")).setAttribute("class","tchmi-datagrid-combobox-template tchmi-box"),m.setAttribute("tabindex","-1"),m.setAttribute("data-tchmi-column",e.toString()),(g=document.createElement("div")).setAttribute("class","tchmi-datagrid-combobox-template-select tchmi-box"),x.StyleProvider.processContentPadding(g,F.__cellContentPadding),r.horizontalAlignment){case"Left":g.style.justifyContent="flex-start";break;case"Center":g.style.justifyContent="center";break;case"Right":g.style.justifyContent="flex-end"}switch(r.verticalAlignment){case"Top":g.style.alignItems="flex-start";break;case"Center":g.style.alignItems="center";break;case"Bottom":g.style.alignItems="flex-end"}var p=$('<svg class="tchmi-datagrid-combobox-template-button tchmi-box" version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30px" height="100%" viewBox="0 0 30 30" enable-background="new 0 0 30 30" xml:space="preserve"><polyline class="tchmi-datagrid-combobox-template-button-arrow" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points= "22.865,12.5 15,20.366 7.135,12.5" /></svg>')[0];m.appendChild(g),m.appendChild(p),i.appendChild(m),i.classList.add("tchmi-datagrid-template-cell-unpadded-control")}m.setAttribute("data-tchmi-row",v.toString());var b=null;r.dataDefinitions&&(b=r.dataDefinitions.filter(function(e){return tchmi_equal(e.value,o)})[0]),g.textContent=b&&b.text||"";break;default:void 0!==o?i.innerHTML=o:i.textContent=""}C||i.classList.contains("tchmi-datagrid-template-cell-unpadded-control")||x.StyleProvider.processContentPadding(i,F.__cellContentPadding)}else i.firstChild?i.firstChild.nodeValue=(f+1).toString():i.textContent=(f+1).toString();null===i.parentNode&&w.appendChild(i)}w.setAttribute("data-row",v.toString(10)),this.__setRowClasses(w,v);for(var F=this,t=-1,o=this.__internalSrcColumn.length;t<o;t++)e(t);return w},R.prototype.__resizeColumn=function(e,t,o){void 0===o&&(o=!1),(this.__columnWidths[e].resizable||o)&&(t===this.__columnWidths[e].width&&!o||(this.__columnWidths[e].width=t,this.__recalcAllColumnWidths(o)))},R.prototype.__modifySorting=function(e,t){for(var o=e;o&&!(o instanceof HTMLTableCellElement);)o=o.parentElement;if(o){if(o.classList.contains("tchmi-datagrid-template-row-numbers")){if(t)return;this.__internalSorting=tchmi_clone_object(this.__sorting)||[],this.__lastRemovedSorting=null}else{if(!e.classList.contains("sortable"))return;var r=void 0;R.isSimpleColumn(this.__internalSrcColumn[0])||(r=o.dataset.name);for(var i=null,n=0,l=this.__internalSorting.length;n<l;n++)if(this.__internalSorting[n].name===r){i=this.__internalSorting[n];break}if(i)switch(i.order){case"Ascending":i.order="Descending",t||(this.__internalSorting=[i]),this.__lastRemovedSorting=null;break;case"Descending":if(t){var s=this.__internalSorting.indexOf(i);this.__internalSorting.splice(s,1),this.__lastRemovedSorting={name:i.name,position:s}}else this.__internalSorting=[],this.__lastRemovedSorting=null}else t?this.__lastRemovedSorting&&this.__lastRemovedSorting.name===r?this.__internalSorting.splice(this.__lastRemovedSorting.position,0,{name:r,order:"Ascending"}):this.__internalSorting.push({name:r,order:"Ascending"}):this.__internalSorting=[{name:r,order:"Ascending"}],this.__lastRemovedSorting=null}x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getSorting"]),this.__processSorting(),o.classList.contains("tchmi-datagrid-template-row-numbers")?this.__removeStoredValue("sorting"):this.__setStoredValue("sorting",this.__internalSorting)}},R.prototype.__mapSort=function(){var h=this;if(this.__srcData)if(0!==this.__internalSorting.length){var u="object"!=typeof this.__srcData[0];this.__sortMap=this.__srcData.map(function(e,t){return t}).sort(function(_,d){function e(e,t){var o=h.__srcData[_],r=h.__srcData[d];function i(e,t){return e-t}function n(e,t){return(s=s||new Intl.Collator(x.Locale.get(),{usage:"sort",sensitivity:"accent",numeric:!0})).compare(e,t)}!u&&h.__internalSorting[e].name&&(o=h.__readObjectProperty(h.__srcData[_],h.__internalSorting[e].name),r=h.__readObjectProperty(h.__srcData[d],h.__internalSorting[e].name)),o=null!=o?o.valueOf():o,r=null!=r?r.valueOf():r;var l,s=null,a="Descending"===h.__internalSorting[e].order?-1:1;switch(typeof o){case"boolean":switch(typeof r){case"boolean":c=(l=o)===r?0:l?1:-1;break;case"number":c=i(o?1:0,r);break;case"string":c=n(o.toString(),r);break;default:c=-1*a}break;case"number":switch(typeof r){case"boolean":c=i(o,r?1:0);break;case"number":c=i(o,r);break;case"string":c=n(o.toString(10),r);break;default:c=-1*a}break;case"string":switch(typeof r){case"boolean":c=n(o,r.toString());break;case"number":c=n(o,r.toString(10));break;case"string":c=n(o,r);break;default:c=-1*a}break;default:switch(typeof r){case"boolean":case"number":case"string":c=a;break;default:c=!o&&r?-1:o&&!r?1:o||r||o===r?0:void 0===o?-1:1}}c*=a}for(var c=0,t=0,o=h.__internalSorting.length;t<o&&0===c;t++)e(t);return c})}else this.__sortMap=null},R.prototype.__updateSentinels=function(){if(this.__srcData){var e=0,t=0;void 0!==this.__rowHeight&&(e=(this.__scrollInfo.firstIndex-this.__scrollInfo.buffer)*this.__rowHeight,t=(this.__srcData.length-(this.__scrollInfo.firstIndex+this.__scrollInfo.rowCount+this.__scrollInfo.buffer))*this.__rowHeight),e=0<e?e:0,t=0<t?t:0,x.StyleProvider.setSimpleElementStyle(this.__element.find(".tchmi-datagrid-template-scroll-sentinel-top"),"height",e+"px"),x.StyleProvider.setSimpleElementStyle(this.__element.find(".tchmi-datagrid-template-scroll-sentinel-bottom"),"height",t+"px")}},R.prototype.__modifySrcData=function(e,t,o,r){if(this.__srcData){var i=this.__internalSrcColumn[o],n=this.__srcData[t];R.isSimpleColumn(i)||(n=this.__readObjectProperty(n,i.name));var l=e;if(null!=n)switch(typeof n){case"string":l=x.ValueConverter.toString(e);break;case"number":l=x.ValueConverter.toNumber(e);break;case"boolean":l=x.ValueConverter.toBoolean(e);break;case"object":l=x.ValueConverter.toObject(e)}return null===l&&(l=e),tchmi_equal(n,l)||(R.isSimpleColumn(i)?this.__srcData[t]=l:this.__writeObjectProperty(this.__srcData[t],i.name,l),this.__srcDataHasChanged||(this.__srcDataHasChanged=!0,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getSrcDataHasChanged"])),x.EventProvider.raise(this.__id+".onDataChanged",{index:t,property:R.isSimpleColumn(i)?null:i.name,value:l}),this.__setRowClasses(r,t)),l}},R.prototype.__readObjectProperty=function(e,t){for(var o=x.System.resolveSymbolPathToTokenArray(t),r=e,i=0,n=o.length;i<n;i++){var l=o[i],s=!1;if(l.match(/\[.*\]/)&&(l=l.slice(1,-1),s=!0),Array.isArray(r)&&s){var a=parseInt(l,10);r=r[isNaN(a)?l:a]}else{if("object"!=typeof r)return x.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiDatagrid, Id="+this.getId()+"] Tried to read object properties of a primitive type."),null;r=r[l]}}return r},R.prototype.__writeObjectProperty=function(e,t,o){for(var r=x.System.resolveSymbolPathToTokenArray(t),i=e,n=0,l=r.length;n<l;n++){var s=r[n],a=!1;if(s.match(/\[.*\]/)&&(s=s.slice(1,-1),a=!0),Array.isArray(i)&&a){var _=parseInt(s,10);n+1===l?i[isNaN(_)?s:_]=o:i=i[isNaN(_)?s:_]}else{if("object"!=typeof i)return void x.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiDatagrid, Id="+this.getId()+"] Tried to read or write object properties of a primitive type.");n+1===l?i[s]=o:i=i[s]}}},R.prototype.__initStorage=function(){var e=window.localStorage.getItem("TCHMI_TCHMIDATAGRID_USERPREFERENCES_"+this.__id);if(e)try{this.__storage=JSON.parse(e),"object"!=typeof this.__storage&&(this.__storage={})}catch(e){this.__storage={}}else this.__storage={};for(var t in this.__storageValidation)this.__storageValidation[t].expectedResult=this[this.__storageValidation[t].function].apply(this);for(var t in this.__storage)tchmi_equal(this.__storageValidation[t].expectedResult,this.__storage[t].validation.expectedResult)||this.__removeStoredValue(t)},R.prototype.__getStoredValue=function(e){this.__storage||this.__initStorage();var t=x.Server.getCurrentUser(),o=this.__storage[e];if(o)return t?o.users?o.users[t]:void 0:o.anonymousUser},R.prototype.__setStoredValue=function(e,t){this.__storage||this.__initStorage();var o=x.Server.getCurrentUser();this.__storage[e]||(this.__storage[e]={validation:{function:this.__storageValidation[e].function,expectedResult:this.__storageValidation[e].expectedResult}});var r=this.__storage[e];o?(r.users||(r.users={}),r.users[o]=t):r.anonymousUser=t;try{window.localStorage.setItem("TCHMI_TCHMIDATAGRID_USERPREFERENCES_"+this.__id,JSON.stringify(this.__storage))}catch(e){}},R.prototype.__removeStoredValue=function(e){this.__storage||this.__initStorage();var t=this.__storage[e];if(t){var o=x.Server.getCurrentUser();o?t.users?(delete t.users[o],0===Object.keys(t.users).length&&(void 0===t.anonymousUser?delete this.__storage[e]:delete t.users)):void 0===t.anonymousUser&&delete this.__storage[e]:t.users?delete t.anonymousUser:delete this.__storage[e]}if(0<Object.keys(this.__storage).length)try{window.localStorage.setItem("TCHMI_TCHMIDATAGRID_USERPREFERENCES_"+this.__id,JSON.stringify(this.__storage))}catch(e){}else window.localStorage.removeItem("TCHMI_TCHMIDATAGRID_USERPREFERENCES_"+this.__id)},R.prototype.setSrcColumn=function(e){if(!this.__lockState){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("SrcColumn"));var o=this.__objectResolvers.get("srcColumn");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("srcColumn",{resolver:r,watchCallback:this.__onResolverForSrcColumnWatchCallback,watchDestroyer:r.watch(this.__onResolverForSrcColumnWatchCallback)})}},R.prototype.getSrcColumn=function(){return this.__srcColumn},R.prototype.__processSrcColumn=function(){this.__srcData&&0<this.__srcData.length&&"object"!=typeof this.__srcData[0]&&0===this.__internalSrcColumn.length&&(this.__internalSrcColumn=[{label:"",control:"TextBlock",width:70,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!0,horizontalAlignment:"Center",verticalAlignment:"Center",cellBackground:null,textColor:null}]);var e,t=void 0!==this.__tableBorderWidth?this.__tableBorderWidth:1,o=Math.max(t,this.__resizeElementMinWidth),r=this.__element[0].clientWidth-this.__columnWidths[0].pixelWidth;this.__columnWidths.splice(1),this.__comboboxDropdowns={};for(var i=0,n=this.__internalSrcColumn.length;i<n;i++){var l=this.__internalSrcColumn[i],s=l.minWidthUnit,a="px"===(s=s||"px")?o:(e=o,0<r?e/r*100:0),_=l.minWidth;if(_=a<=(_=null!=_?_:0)?_:a,this.__columnWidths.push({width:0,widthUnit:l.widthUnit,pixelWidth:0,minWidth:_,minWidthUnit:s,resizable:l.resize}),this.__resizeColumn(i+1,l.width,!0),"ComboBox"===l.control){var d=document.createElement("div");if(d.setAttribute("class","tchmi-datagrid-combobox-template-dropdown tchmi-box"),d.setAttribute("tabindex","-1"),l.dataDefinitions)for(var c=0,h=l.dataDefinitions.length;c<h;c++){var u=l.dataDefinitions[c],m=u.text||"",g=document.createElement("div");g.setAttribute("class","tchmi-datagrid-combobox-template-dropdown-element"),g.setAttribute("data-index",c.toString()),g.setAttribute("data-value",u.value.toString()),g.textContent=m,d.appendChild(g)}this.__comboboxDropdowns[JSON.stringify(l.dataDefinitions)]=d}}null!==this.__selectedCombobox&&this.__closeCombobox(),this.__buildHeader(),this.__updateTable(1)},R.prototype.__executeFormatFunction=function(t,e){if(null==t||!1===t.active)return null!=e?e.toString():"";var o=[e],r=null,i=new x.Function(t),n=this;return i.executeEx(o,function(e){e.error===x.Errors.NONE?r=e.result:x.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiDatagrid, Id="+n.getId()+"] Execution of function="+t.fn+" failed with error. Details: "+(void 0!==e.details?x.Log.buildMessage(e.details):x.Errors[e.error]))}),i.destroy(),r},R.prototype.setSrcData=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("SrcData"));var o=this.__objectResolvers.get("srcData");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("srcData",{resolver:r,watchCallback:this.__onResolverForSrcDataWatchCallback,watchDestroyer:r.watch(this.__onResolverForSrcDataWatchCallback)})},R.prototype.getSrcData=function(){return this.__srcData},R.prototype.__processSrcData=function(){if(!this.__srcData||this.__oldSrcData&&this.__oldSrcData.length===this.__srcData.length||(this.__lockState&&this.__lockState.row>=this.__srcData.length&&this.__unlock(),this.__updateSentinels(),null!==this.__selectedCell&&null!==this.__selectedCell.rowIndex&&this.__selectedCell.rowIndex>=this.__srcData.length&&(this.__selectedCell=null,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getSelectedRowIndex","getSelectedColumnIndex","getSelectedRowValue","getSelectedCellValue"]))),this.__srcData&&0<this.__srcData.length&&"object"!=typeof this.__srcData[0]&&0===this.__internalSrcColumn.length){this.__internalSrcColumn=[{label:"",control:"TextBlock",width:70,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!0,horizontalAlignment:"Center",verticalAlignment:"Center",cellBackground:null,textColor:null}];var e=void 0!==this.__tableBorderWidth?this.__tableBorderWidth:1,t=Math.max(e,this.__resizeElementMinWidth);this.__columnWidths.splice(1);for(var o=0,r=this.__internalSrcColumn.length;o<r;o++){var i=this.__internalSrcColumn[o].minWidth;i=t<=(i=null!=i?i:0)?i:t;var n=this.__internalSrcColumn[o].minWidthUnit;n=n||"px",this.__columnWidths.push({width:0,widthUnit:this.__internalSrcColumn[o].widthUnit,pixelWidth:0,minWidth:i,minWidthUnit:n,resizable:this.__internalSrcColumn[o].resize}),this.__resizeColumn(o+1,this.__internalSrcColumn[o].width,!0)}this.__buildHeader()}this.__mapSort(),this.__updateTable(0),this.__oldSrcData=this.__srcData},R.prototype.setSorting=function(e){var t=x.ValueConverter.toObject(e,this.getAttributeDefaultValueInternal("Sorting")),o=this.__objectResolvers.get("sorting");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("sorting",{resolver:r,watchCallback:this.__onResolverForSortingWatchCallback,watchDestroyer:r.watch(this.__onResolverForSortingWatchCallback)})},R.prototype.getSorting=function(){return this.__sorting},R.prototype.__processSorting=function(){this.__mapSort(),this.__updateTable(0);for(var e=this.__elementHeaderTable[0].getElementsByTagName("th"),t=0,o=e.length;t<o;t++)if(!e[t].classList.contains("tchmi-datagrid-template-row-numbers")){var r=e[t].getElementsByClassName("tchmi-datagrid-template-sort-element-child")[0];r.classList.remove("tchmi-datagrid-template-header-sort-asc"),r.classList.remove("tchmi-datagrid-template-header-sort-desc");var i=void 0;R.isSimpleColumn(this.__internalSrcColumn[0])||(i=e[t].dataset.name);for(var n=0,l=this.__internalSorting.length;n<l;n++)if(this.__internalSorting[n].name===i){switch(this.__internalSorting[n].order){case"Ascending":r.classList.add("tchmi-datagrid-template-header-sort-asc");break;case"Descending":r.classList.add("tchmi-datagrid-template-header-sort-desc")}break}}},R.prototype.setRowClassesProvider=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowClassesProvider")),tchmi_equal(t,this.__rowClassesProvider)||(this.__rowClassesProvider=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowClassesProvider"]),this.__processRowClassesProvider())},R.prototype.getRowClassesProvider=function(){return this.__rowClassesProvider},R.prototype.__processRowClassesProvider=function(){for(var e=this.__elementDataTableBody[0].children,t=0,o=e.length;t<o;t++){var r=e[t],i=parseInt(r.dataset.row||"",10);this.__setRowClasses(r,i)}},R.prototype.__executeRowClassesProviderFunction=function(e){var t=this;if(void 0!==this.__rowClassesProvider&&null!==this.__rowClassesProvider&&!1!==this.__rowClassesProvider.active&&this.__srcData){var o=[this.__srcData[e],e,this.__sortMap&&this.__sortMap.length===this.__srcData.length?this.__sortMap.indexOf(e):e],r=null,i=new x.Function(this.__rowClassesProvider);return i.executeEx(o,function(e){e.error===x.Errors.NONE?r=e.result:x.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiDatagrid, Id="+t.getId()+"] Execution of function="+t.__rowClassesProvider.fn+" failed with error. Details: "+(void 0!==e.details?x.Log.buildMessage(e.details):x.Errors[e.error]))}),i.destroy(),r||[]}return[]},R.prototype.__setRowClasses=function(e,t){e.setAttribute("class","tchmi-datagrid-template-row"),this.__selectedCell&&this.__selectedCell.rowIndex===t&&e.classList.add("focused");for(var o=this.__executeRowClassesProviderFunction(t),r=0,i=o.length;r<i;r++)e.classList.add(o[r])},R.prototype.setHeaderHeight=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderHeight")),t!==this.__headerHeight&&(this.__headerHeight=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeaderHeight"]),this.__processHeaderHeight())},R.prototype.getHeaderHeight=function(){return this.__headerHeight},R.prototype.__processHeaderHeight=function(){null!==this.__headerHeight&&void 0!==this.__headerHeight&&this.__headerHeightUnit&&(x.StyleProvider.setSimpleElementStyle(this.__elementHeaderScroll,"height",this.__headerHeight+this.__headerHeightUnit),x.StyleProvider.setSimpleElementStyle(this.__elementDataScroll,"height","calc(100% - "+this.__headerHeight+(this.__headerHeightUnit||"px")+")"))},R.prototype.setHeaderHeightUnit=function(e){var t=x.ValueConverter.toDimensionUnit(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderHeightUnit")),t!==this.__headerHeightUnit&&(this.__headerHeightUnit=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeaderHeightUnit"]),this.__processHeaderHeightUnit())},R.prototype.getHeaderHeightUnit=function(){return this.__headerHeightUnit},R.prototype.__processHeaderHeightUnit=function(){this.__processHeaderHeight()},R.prototype.setHeaderCellPadding=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderCellPadding"));var o=this.__objectResolvers.get("headerCellPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("headerCellPadding",{resolver:r,watchCallback:this.__onResolverForHeaderCellPaddingWatchCallback,watchDestroyer:r.watch(this.__onResolverForHeaderCellPaddingWatchCallback)})},R.prototype.getHeaderCellPadding=function(){return this.__headerCellPadding},R.prototype.__processHeaderCellPadding=function(){x.StyleProvider.processContentPadding(this.__elementHeaderTable.find("th.tchmi-datagrid-template-header"),this.__headerCellPadding)},R.prototype.setRowHeight=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowHeight")),t!==this.__rowHeight&&(this.__rowHeight=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowHeight"]),this.__processRowHeight())},R.prototype.getRowHeight=function(){return this.__rowHeight},R.prototype.__processRowHeight=function(){if(void 0!==this.__tableBorderWidth&&void 0!==this.__rowHeight){x.StyleProvider.setSimpleElementStyle(this.__elementDataTableBody.find(".tchmi-datagrid-template-row"),"height",this.__rowHeight+"px"),x.StyleProvider.setSimpleElementStyle(this.__elementDataTableBody.find(".tchmi-datagrid-template-row td"),"height",this.__rowHeight+"px");for(var e=this.__elementDataTableBody[0].querySelectorAll(".tchmi-datagrid-template-row td input[type=checkbox] + label"),t=0,o=e.length;t<o;t++){var r=e[t].parentElement.cellIndex;if(!(r>=this.__columnWidths.length)){var i=Math.min(this.__rowHeight,this.__columnWidths[r].pixelWidth)-this.__tableBorderWidth;e[t].style.width=i+"px",e[t].style.height=i+"px"}}}},R.prototype.getRowHeightUnit=function(){return"px"},R.prototype.setTableBorderColor=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("TableBorderColor"));var o=this.__objectResolvers.get("tableBorderColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("tableBorderColor",{resolver:r,watchCallback:this.__onResolverForTableBorderColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForTableBorderColorWatchCallback)})},R.prototype.getTableBorderColor=function(){return this.__tableBorderColor},R.prototype.__processTableBorderColor=function(){x.StyleProvider.processBorderColor(this.__elementHeaderTable.find("th"),this.__tableBorderColor),x.StyleProvider.processBorderColor(this.__elementDataTableBody.find(".tchmi-datagrid-template-row td"),this.__tableBorderColor),x.StyleProvider.processBorderColor(this.__elementHeaderScroll,this.__tableBorderColor)},R.prototype.setTableBorderWidth=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("TableBorderWidth")),t!==this.__tableBorderWidth&&(this.__tableBorderWidth=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTableBorderWidth"]),this.__processTableBorderWidth(),this.__processRowHeight())},R.prototype.getTableBorderWidth=function(){return this.__tableBorderWidth},R.prototype.__processTableBorderWidth=function(){var e={right:this.__tableBorderWidth,rightUnit:"px",bottom:0,left:0,top:0},t={right:this.__tableBorderWidth,rightUnit:"px",bottom:this.__tableBorderWidth,bottomUnit:"px",top:0,left:0},o={bottom:this.__tableBorderWidth,bottomUnit:"px",left:0,top:0,right:0};x.StyleProvider.processBorderWidth(this.__elementHeaderTable.find("th"),e),x.StyleProvider.processBorderWidth(this.__elementDataTableBody.find(".tchmi-datagrid-template-row td"),t),x.StyleProvider.processBorderWidth(this.__elementHeaderScroll,o);for(var r=this.__elementDataTableBody[0].querySelectorAll(".tchmi-datagrid-template-row td input[type=checkbox] + label"),i=0,n=r.length;i<n;i++){var l=r[i].parentElement.cellIndex;if(!(l>=this.__columnWidths.length)){var s=Math.min(this.__rowHeight||0,this.__columnWidths[l].pixelWidth)-(this.__tableBorderWidth||0);r[i].style.width=s+"px",r[i].style.height=s+"px"}}x.StyleProvider.setSimpleElementStyle(this.__elementHeaderTable.find(".tchmi-datagrid-template-resize-element"),{width:this.__tableBorderWidth&&this.__tableBorderWidth>this.__resizeElementMinWidth?this.__tableBorderWidth+"px":null,right:this.__tableBorderWidth&&this.__tableBorderWidth>this.__resizeElementMinWidth?-this.__tableBorderWidth+"px":null});var a,_=Math.max(this.__tableBorderWidth||0,this.__resizeElementMinWidth),d=!1,c=this.__element[0].clientWidth-this.__columnWidths[0].pixelWidth;for(i=0,n=this.__columnWidths.length;i<n;i++){var h="px"===this.__columnWidths[i].minWidthUnit?_:(a=_,0<c?a/c*100:0),u=0===i?6:this.__internalSrcColumn[i-1].minWidth;u=h<=(u=null!=u?u:0)?u:h,this.__columnWidths[i].minWidth<u&&(d=!0),this.__columnWidths[i].minWidth=u}d&&this.__recalcAllColumnWidths()},R.prototype.setTableBorderWidthUnit=function(){},R.prototype.getTableBorderWidthUnit=function(){return"px"},R.prototype.setTableBorderStyle=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("TableBorderStyle"));var o=this.__objectResolvers.get("tableBorderStyle");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("tableBorderStyle",{resolver:r,watchCallback:this.__onResolverForTableBorderStyleWatchCallback,watchDestroyer:r.watch(this.__onResolverForTableBorderStyleWatchCallback)})},R.prototype.getTableBorderStyle=function(){return this.__tableBorderStyle},R.prototype.__processTableBorderStyle=function(){x.StyleProvider.processBorderStyle(this.__element.find(".tchmi-datagrid-template-header-border, .tchmi-datagrid-template-header-border th, .tchmi-datagrid-template-row td"),this.__tableBorderStyle)},R.prototype.setShowRowNumbers=function(e){var t=x.ValueConverter.toBoolean(e);null===t&&(t=this.getAttributeDefaultValueInternal("ShowRowNumbers")),t!==this.__showRowNumbers&&(this.__showRowNumbers=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getShowRowNumbers"]),this.__processShowRowNumbers())},R.prototype.getShowRowNumbers=function(){return this.__showRowNumbers},R.prototype.__processShowRowNumbers=function(){x.StyleProvider.setSimpleElementStyle(this.__element.find(".tchmi-datagrid-template-row-numbers"),"display",this.__showRowNumbers?null:"none"),this.__recalcAllColumnWidths()},R.prototype.setRowNumbersResizable=function(e){var t=x.ValueConverter.toBoolean(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersResizable")),t!==this.__rowNumbersResizable&&(this.__rowNumbersResizable=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersResizable"]),this.__processRowNumbersResizable())},R.prototype.getRowNumbersResizable=function(){return this.__rowNumbersResizable},R.prototype.__processRowNumbersResizable=function(){this.__columnWidths[0].resizable=this.__rowNumbersResizable,this.__elementHeaderTable.find(".tchmi-datagrid-template-row-numbers").toggleClass("resizable",this.__rowNumbersResizable)},R.prototype.setRowNumbersWidth=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersWidth")),t!==this.__rowNumbersWidth&&(this.__rowNumbersWidth=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersWidth"]),this.__processRowNumbersWidth())},R.prototype.getRowNumbersWidth=function(){return this.__rowNumbersWidth},R.prototype.__processRowNumbersWidth=function(){void 0!==this.__rowNumbersWidth&&this.__resizeColumn(0,this.__rowNumbersWidth,!0)},R.prototype.setRowNumbersWidthUnit=function(e){var t=x.ValueConverter.toDimensionUnit(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersWidthUnit")),t!==this.__rowNumbersWidthUnit&&(this.__rowNumbersWidthUnit=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersWidthUnit"]),this.__processRowNumbersWidthUnit())},R.prototype.getRowNumbersWidthUnit=function(){return this.__rowNumbersWidthUnit},R.prototype.__processRowNumbersWidthUnit=function(){void 0!==this.__rowNumbersWidthUnit&&(this.__columnWidths[0].widthUnit=this.__rowNumbersWidthUnit,this.__processRowNumbersWidth())},R.prototype.setRowNumbersHorizontalAlignment=function(e){var t=x.ValueConverter.toHorizontalAlignment(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersHorizontalAlignment")),t!==this.__rowNumbersHorizontalAlignment&&(this.__rowNumbersHorizontalAlignment=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersHorizontalAlignment"]),this.__processRowNumbersHorizontalAlignment())},R.prototype.getRowNumbersHorizontalAlignment=function(){return this.__rowNumbersHorizontalAlignment},R.prototype.__processRowNumbersHorizontalAlignment=function(){switch(this.__rowNumbersHorizontalAlignment){case"Left":case"Center":case"Right":x.StyleProvider.setSimpleElementStyle(this.__element.find("td.tchmi-datagrid-template-row-numbers"),"text-align",this.__rowNumbersHorizontalAlignment.toLowerCase())}},R.prototype.setRowNumbersVerticalAlignment=function(e){var t=x.ValueConverter.toVerticalAlignment(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersVerticalAlignment")),t!==this.__rowNumbersVerticalAlignment&&(this.__rowNumbersVerticalAlignment=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersVerticalAlignment"]),this.__processRowNumbersVerticalAlignment())},R.prototype.getRowNumbersVerticalAlignment=function(){return this.__rowNumbersVerticalAlignment},R.prototype.__processRowNumbersVerticalAlignment=function(){switch(this.__rowNumbersVerticalAlignment){case"Center":x.StyleProvider.setSimpleElementStyle(this.__element.find("td.tchmi-datagrid-template-row-numbers"),"vertical-align","middle");break;case"Bottom":case"Top":x.StyleProvider.setSimpleElementStyle(this.__element.find("td.tchmi-datagrid-template-row-numbers"),"vertical-align",this.__rowNumbersVerticalAlignment.toLowerCase())}},R.prototype.setRowNumbersCellPadding=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersCellPadding"));var o=this.__objectResolvers.get("rowNumbersCellPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("rowNumbersCellPadding",{resolver:r,watchCallback:this.__onResolverForRowNumbersCellPaddingWatchCallback,watchDestroyer:r.watch(this.__onResolverForRowNumbersCellPaddingWatchCallback)})},R.prototype.getRowNumbersCellPadding=function(){return this.__rowNumbersCellPadding},R.prototype.__processRowNumbersCellPadding=function(){x.StyleProvider.processContentPadding(this.__element.find(".tchmi-datagrid-template-row td.tchmi-datagrid-template-row-numbers"),this.__rowNumbersCellPadding)},R.prototype.setCellContentPadding=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("CellContentPadding"));var o=this.__objectResolvers.get("cellContentPadding");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("cellContentPadding",{resolver:r,watchCallback:this.__onResolverForCellContentPaddingWatchCallback,watchDestroyer:r.watch(this.__onResolverForCellContentPaddingWatchCallback)})},R.prototype.getCellContentPadding=function(){return this.__cellContentPadding},R.prototype.__processCellContentPadding=function(){var e=this.__elementDataTableBody[0].querySelectorAll(".tchmi-datagrid-template-cell:not(.tchmi-datagrid-template-cell-unpadded-control)");x.StyleProvider.processContentPadding(e,this.__cellContentPadding);var t=this.__elementDataTableBody[0].querySelectorAll('input[type="text"]');x.StyleProvider.processContentPadding(t,this.__cellContentPadding);var o=this.__elementDataTableBody[0].getElementsByClassName("tchmi-datagrid-combobox-template-select");x.StyleProvider.processContentPadding(o,this.__cellContentPadding)},R.prototype.setHeaderBackgroundColor=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderBackgroundColor"));var o=this.__objectResolvers.get("headerBackgroundColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("headerBackgroundColor",{resolver:r,watchCallback:this.__onResolverForHeaderBackgroundColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForHeaderBackgroundColorWatchCallback)})},R.prototype.getHeaderBackgroundColor=function(){return this.__headerBackgroundColor},R.prototype.__processHeaderBackgroundColor=function(){x.StyleProvider.processBackgroundColor(this.__element.find(".tchmi-datagrid-template-header-border th, .tchmi-datagrid-template-placeholder"),this.__headerBackgroundColor)},R.prototype.setHeaderTextColor=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderTextColor"));var o=this.__objectResolvers.get("headerTextColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("headerTextColor",{resolver:r,watchCallback:this.__onResolverForHeaderTextColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForHeaderTextColorWatchCallback)})},R.prototype.getHeaderTextColor=function(){return this.__headerTextColor},R.prototype.__processHeaderTextColor=function(){x.StyleProvider.processTextColor(this.__elementHeaderTable.find("th.tchmi-datagrid-template-header:not(.tchmi-datagrid-template-row-numbers)"),this.__headerTextColor)},R.prototype.setRowNumbersTextColor=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersTextColor"));var o=this.__objectResolvers.get("rowNumbersTextColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("rowNumbersTextColor",{resolver:r,watchCallback:this.__onResolverForRowNumbersTextColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForRowNumbersTextColorWatchCallback)})},R.prototype.getRowNumbersTextColor=function(){return this.__rowNumbersTextColor},R.prototype.__processRowNumbersTextColor=function(){x.StyleProvider.processTextColor(this.__element.find("td.tchmi-datagrid-template-row-numbers"),this.__rowNumbersTextColor)},R.prototype.setRowNumbersBackgroundColor=function(e){var t=x.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersBackgroundColor"));var o=this.__objectResolvers.get("rowNumbersBackgroundColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new x.Symbol.ObjectResolver(t);this.__objectResolvers.set("rowNumbersBackgroundColor",{resolver:r,watchCallback:this.__onResolverForRowNumbersBackgroundColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForRowNumbersBackgroundColorWatchCallback)})},R.prototype.getRowNumbersBackgroundColor=function(){return this.__rowNumbersBackgroundColor},R.prototype.__processRowNumbersBackgroundColor=function(){x.StyleProvider.processBackgroundColor(this.__element.find("td.tchmi-datagrid-template-row-numbers"),this.__rowNumbersBackgroundColor)},R.prototype.setHeaderFontFamily=function(e){var t=x.ValueConverter.toFontFamily(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderFontFamily")),t!==this.__headerFontFamily&&(this.__headerFontFamily=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeaderFontFamily"]),this.__processHeaderFontFamily())},R.prototype.getHeaderFontFamily=function(){return this.__headerFontFamily},R.prototype.__processHeaderFontFamily=function(){x.StyleProvider.processFontFamily(this.__elementHeaderTable.find("th.tchmi-datagrid-template-header"),this.__headerFontFamily)},R.prototype.setHeaderFontSize=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderFontSize")),t!==this.__headerFontSize&&(this.__headerFontSize=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeaderFontSize"]),this.__processHeaderFontSize())},R.prototype.getHeaderFontSize=function(){return this.__headerFontSize},R.prototype.__processHeaderFontSize=function(){x.StyleProvider.processFontSize(this.__elementHeaderTable.find("th.tchmi-datagrid-template-header"),this.__headerFontSize,this.__headerFontSizeUnit)},R.prototype.setHeaderFontSizeUnit=function(e){var t=x.ValueConverter.toFontSizeUnit(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderFontSizeUnit")),t!==this.__headerFontSizeUnit&&(this.__headerFontSizeUnit=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeaderFontSizeUnit"]),this.__processHeaderFontSizeUnit())},R.prototype.getHeaderFontSizeUnit=function(){return this.__headerFontSizeUnit},R.prototype.__processHeaderFontSizeUnit=function(){this.__processHeaderFontSize()},R.prototype.setHeaderFontStyle=function(e){var t=x.ValueConverter.toFontStyle(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderFontStyle")),t!==this.__headerFontStyle&&(this.__headerFontStyle=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeaderFontStyle"]),this.__processHeaderFontStyle())},R.prototype.getHeaderFontStyle=function(){return this.__headerFontStyle},R.prototype.__processHeaderFontStyle=function(){x.StyleProvider.processFontStyle(this.__elementHeaderTable.find("th.tchmi-datagrid-template-header"),this.__headerFontStyle)},R.prototype.setHeaderFontWeight=function(e){var t=x.ValueConverter.toFontWeight(e);null===t&&(t=this.getAttributeDefaultValueInternal("HeaderFontWeight")),t!==this.__headerFontWeight&&(this.__headerFontWeight=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHeaderFontWeight"]),this.__processHeaderFontWeight())},R.prototype.getHeaderFontWeight=function(){return this.__headerFontWeight},R.prototype.__processHeaderFontWeight=function(){x.StyleProvider.processFontWeight(this.__elementHeaderTable.find("th.tchmi-datagrid-template-header"),this.__headerFontWeight)},R.prototype.setGridFontFamily=function(e){var t=x.ValueConverter.toFontFamily(e);null===t&&(t=this.getAttributeDefaultValueInternal("GridFontFamily")),t!==this.__gridFontFamily&&(this.__gridFontFamily=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getGridFontFamily"]),this.__processGridFontFamily())},R.prototype.getGridFontFamily=function(){return this.__gridFontFamily},R.prototype.__processGridFontFamily=function(){x.StyleProvider.processFontFamily(this.__element.find("td.tchmi-datagrid-template-cell"),this.__gridFontFamily)},R.prototype.setGridFontSize=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("GridFontSize")),t!==this.__gridFontSize&&(this.__gridFontSize=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getGridFontSize"]),this.__processGridFontSize())},R.prototype.getGridFontSize=function(){return this.__gridFontSize},R.prototype.__processGridFontSize=function(){void 0!==this.__gridFontSize&&void 0!==this.__gridFontSizeUnit&&x.StyleProvider.processFontSize(this.__element.find("td.tchmi-datagrid-template-cell"),this.__gridFontSize,this.__gridFontSizeUnit)},R.prototype.setGridFontSizeUnit=function(e){var t=x.ValueConverter.toFontSizeUnit(e);null===t&&(t=this.getAttributeDefaultValueInternal("GridFontSizeUnit")),t!==this.__gridFontSizeUnit&&(this.__gridFontSizeUnit=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getGridFontSizeUnit"]),this.__processGridFontSizeUnit())},R.prototype.getGridFontSizeUnit=function(){return this.__gridFontSizeUnit},R.prototype.__processGridFontSizeUnit=function(){this.__processGridFontSize()},R.prototype.setGridFontStyle=function(e){var t=x.ValueConverter.toFontStyle(e);null===t&&(t=this.getAttributeDefaultValueInternal("GridFontStyle")),t!==this.__gridFontStyle&&(this.__gridFontStyle=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getGridFontStyle"]),this.__processGridFontStyle())},R.prototype.getGridFontStyle=function(){return this.__gridFontStyle},R.prototype.__processGridFontStyle=function(){x.StyleProvider.processFontStyle(this.__element.find("td.tchmi-datagrid-template-cell"),this.__gridFontStyle)},R.prototype.setGridFontWeight=function(e){var t=x.ValueConverter.toFontWeight(e);null===t&&(t=this.getAttributeDefaultValueInternal("GridFontWeight")),t!==this.__gridFontWeight&&(this.__gridFontWeight=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getGridFontWeight"]),this.__processGridFontWeight())},R.prototype.getGridFontWeight=function(){return this.__gridFontWeight},R.prototype.__processGridFontWeight=function(){x.StyleProvider.processFontWeight(this.__element.find("td.tchmi-datagrid-template-cell"),this.__gridFontWeight)},R.prototype.setRowNumbersFontFamily=function(e){var t=x.ValueConverter.toFontFamily(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersFontFamily")),t!==this.__rowNumbersFontFamily&&(this.__rowNumbersFontFamily=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersFontFamily"]),this.__processRowNumbersFontFamily())},R.prototype.getRowNumbersFontFamily=function(){return this.__rowNumbersFontFamily},R.prototype.__processRowNumbersFontFamily=function(){x.StyleProvider.processFontFamily(this.__element.find("td.tchmi-datagrid-template-row-numbers"),this.__rowNumbersFontFamily)},R.prototype.setRowNumbersFontSize=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersFontSize")),t!==this.__rowNumbersFontSize&&(this.__rowNumbersFontSize=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersFontSize"]),this.__processRowNumbersFontSize())},R.prototype.getRowNumbersFontSize=function(){return this.__rowNumbersFontSize},R.prototype.__processRowNumbersFontSize=function(){void 0!==this.__rowNumbersFontSize&&void 0!==this.__rowNumbersFontSizeUnit&&x.StyleProvider.processFontSize(this.__element.find("td.tchmi-datagrid-template-row-numbers"),this.__rowNumbersFontSize,this.__rowNumbersFontSizeUnit)},R.prototype.setRowNumbersFontSizeUnit=function(e){var t=x.ValueConverter.toFontSizeUnit(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersFontSizeUnit")),t!==this.__rowNumbersFontSizeUnit&&(this.__rowNumbersFontSizeUnit=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersFontSizeUnit"]),this.__processRowNumbersFontSizeUnit())},R.prototype.getRowNumbersFontSizeUnit=function(){return this.__rowNumbersFontSizeUnit},R.prototype.__processRowNumbersFontSizeUnit=function(){this.__processRowNumbersFontSize()},R.prototype.setRowNumbersFontStyle=function(e){var t=x.ValueConverter.toFontStyle(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersFontStyle")),t!==this.__rowNumbersFontStyle&&(this.__rowNumbersFontStyle=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersFontStyle"]),this.__processRowNumbersFontStyle())},R.prototype.getRowNumbersFontStyle=function(){return this.__rowNumbersFontStyle},R.prototype.__processRowNumbersFontStyle=function(){x.StyleProvider.processFontStyle(this.__element.find("td.tchmi-datagrid-template-row-numbers"),this.__rowNumbersFontStyle)},R.prototype.setRowNumbersFontWeight=function(e){var t=x.ValueConverter.toFontWeight(e);null===t&&(t=this.getAttributeDefaultValueInternal("RowNumbersFontWeight")),t!==this.__rowNumbersFontWeight&&(this.__rowNumbersFontWeight=t,x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRowNumbersFontWeight"]),this.__processRowNumbersFontWeight())},R.prototype.getRowNumbersFontWeight=function(){return this.__rowNumbersFontWeight},R.prototype.__processRowNumbersFontWeight=function(){x.StyleProvider.processFontWeight(this.__element.find("td.tchmi-datagrid-template-row-numbers"),this.__rowNumbersFontWeight)},R.prototype.setSelectedRowIndex=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("SelectedRowIndex")),null!==this.__selectedCell&&t===this.__selectedCell.rowIndex||(null!==t?null===this.__selectedCell?this.__selectedCell={rowIndex:t,columnIndex:-1}:this.__selectedCell.rowIndex=t:null!==this.__selectedCell&&(this.__selectedCell.rowIndex=null),x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getSelectedRowIndex","getSelectedRowValue","getSelectedCellValue"]),this.__processSelectedRowIndex())},R.prototype.getSelectedRowIndex=function(){return null!==this.__selectedCell?this.__selectedCell.rowIndex:null},R.prototype.__processSelectedRowIndex=function(){if(this.__elementDataTableBody.find("tr.focused, td.focused").removeClass("focused"),null!==this.__selectedCell&&null!==this.__selectedCell.rowIndex){var e=this.__elementDataTableBody.find("tr[data-row="+this.__selectedCell.rowIndex+"]").addClass("focused");0<e.length&&(-1===this.__selectedCell.columnIndex?e.find("td.tchmi-datagrid-template-row-numbers").addClass("focused"):e.find("td[data-column="+this.__selectedCell.columnIndex+"]").addClass("focused"))}},R.prototype.setSelectedColumnIndex=function(e){var t=x.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("SelectedColumnIndex")),null!==this.__selectedCell&&t===this.__selectedCell.columnIndex||(null!==t?null===this.__selectedCell?this.__selectedCell={rowIndex:null,columnIndex:t}:this.__selectedCell.columnIndex=t:null!==this.__selectedCell&&(this.__selectedCell.columnIndex=-1),x.EventProvider.raise(this.__id+".onFunctionResultChanged",["getSelectedColumnIndex","getSelectedCellValue"]),this.__processSelectedColumnIndex())},R.prototype.getSelectedColumnIndex=function(){return null!==this.__selectedCell?this.__selectedCell.columnIndex:null},R.prototype.__processSelectedColumnIndex=function(){this.__processSelectedRowIndex()},R.prototype.getSrcDataHasChanged=function(){return this.__srcDataHasChanged},R.prototype.getSelectedCellValue=function(){if(this.__srcData&&null!==this.__selectedCell&&null!==this.__selectedCell.rowIndex&&null!==this.__selectedCell.columnIndex&&this.__srcData.length>this.__selectedCell.rowIndex){var e=this.__internalSrcColumn[this.__selectedCell.columnIndex];return R.isSimpleColumn(e)?this.__srcData[this.__selectedCell.rowIndex]:this.__readObjectProperty(this.__srcData[this.__selectedCell.rowIndex],e.name)}return null},R.prototype.getSelectedRowValue=function(){return this.__srcData&&null!==this.__selectedCell&&null!==this.__selectedCell.rowIndex&&this.__srcData.length>this.__selectedCell.rowIndex?this.__srcData[this.__selectedCell.rowIndex]:null},R.prototype.__lock=function(e,t){this.__lockState={row:e,column:t,propertyName:null};var o=this.__internalSrcColumn[t];R.isSimpleColumn(o)||(this.__lockState.propertyName=o.name)},R.prototype.__unlock=function(){if(this.__srcData&&this.__lockState){var e=this.__scrollInfo.firstIndex-this.__scrollInfo.buffer;e=0<e?e:0;var t=this.__scrollInfo.firstIndex+this.__scrollInfo.rowCount+this.__scrollInfo.buffer;t=t<=this.__srcData.length?t:this.__srcData.length;var o=this.__sortMap&&this.__sortMap.length===this.__srcData.length?this.__sortMap.indexOf(this.__lockState.row):this.__lockState.row;this.__lockState=null;var r=this.__elementDataTableBody[0];o<e&&r.firstElementChild?r.removeChild(r.firstElementChild):t<=o&&r.lastElementChild&&r.removeChild(r.lastElementChild)}},R.prototype.__processIsEnabled=function(){i.prototype.__processIsEnabled.call(this),!this.__isEnabled&&this.__selectedCombobox&&this.__closeCombobox()},o=R,t.TcHmiDatagrid=o,(o=t.TcHmiDatagrid||(t.TcHmiDatagrid={})).isSimpleColumn=function(e){return e&&void 0===e.name},e.register("tchmi-datagrid",x.Controls.Beckhoff.TcHmiDatagrid,"Beckhoff/TcHmiDatagrid/","Beckhoff/TcHmiDatagrid/Template.html")}(TcHmi=TcHmi||{});