var TcHmi;!function(n){var t,e,i,o;function r(t,e,o){var r=i.call(this,t,e,o)||this;return r.__resizeEventDestroyEvent=null,r.__objectResolvers=new Map,r.__onResolverForStrokeColorWatchCallback=function(t){!1===r.__isAttached&&t.destroy&&t.destroy(),tchmi_equal(t.value,r.__strokeColor)||(r.__strokeColor=t.value,n.EventProvider.raise(r.__id+".onFunctionResultChanged",["getStrokeColor"]),r.__processStrokeColor())},r}t=n.Controls||(n.Controls={}),e=t.Beckhoff||(t.Beckhoff={}),i=n.Controls.System.TcHmiControl,__extends(r,i),r.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".tchmi-line-template"),this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-line-template-svg"),this.__elementSvgLine=this.__elementTemplateRoot.find(".tchmi-line-template-svg-line"),0===this.__elementTemplateRoot.length||0===this.__elementSvg.length||0===this.__elementSvgLine.length)throw new Error("Invalid Template.html");i.prototype.__previnit.call(this)},r.prototype.__init=function(){i.prototype.__init.call(this)},r.prototype.__attach=function(){i.prototype.__attach.call(this),this.__resizeEventDestroyEvent=n.EventProvider.register(this.__id+".onResized",this.__onResized()),this.__objectResolvers.forEach(function(t){return t.resolver.watch(t.watchCallback)}),this.__drawLine()},r.prototype.__detach=function(){i.prototype.__detach.call(this),null!==this.__resizeEventDestroyEvent&&(this.__resizeEventDestroyEvent(),this.__resizeEventDestroyEvent=null),this.__objectResolvers.forEach(function(t){t.watchDestroyer&&(t.watchDestroyer(),t.watchDestroyer=null)})},r.prototype.destroy=function(){this.__objectResolvers.forEach(function(t){t.watchDestroyer&&t.watchDestroyer(),t.resolver.destroy()}),this.__objectResolvers.clear(),i.prototype.destroy.call(this)},r.prototype.__onResized=function(){var o=this;return function(t,e){o.__drawLine()}},r.prototype.setStrokeColor=function(t){var e=n.ValueConverter.toObject(t);null===e&&(e=this.getAttributeDefaultValueInternal("StrokeColor"));var o=this.__objectResolvers.get("strokeColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new n.Symbol.ObjectResolver(e);this.__objectResolvers.set("strokeColor",{resolver:r,watchCallback:this.__onResolverForStrokeColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForStrokeColorWatchCallback)})},r.prototype.getStrokeColor=function(){return this.__strokeColor},r.prototype.__processStrokeColor=function(){n.StyleProvider.processStrokeColor(this.__elementSvgLine,this.__strokeColor)},r.prototype.setStrokeStyle=function(t){var e=n.ValueConverter.toString(t);null===e&&(e=this.getAttributeDefaultValueInternal("StrokeStyle")),e!==this.__strokeStyle&&(this.__strokeStyle=e,n.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeStyle"]),this.__processStrokeStyle())},r.prototype.getStrokeStyle=function(){return this.__strokeStyle},r.prototype.__processStrokeStyle=function(){n.StyleProvider.setSimpleElementStyle(this.__elementSvgLine,"stroke-dasharray",this.__strokeStyle)},r.prototype.setStrokeThickness=function(t){var e=n.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("StrokeThickness")),e!==this.__strokeThickness&&(this.__strokeThickness=e,n.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeThickness"]),this.__processStrokeThickness())},r.prototype.getStrokeThickness=function(){return this.__strokeThickness},r.prototype.__processStrokeThickness=function(){"number"!=typeof this.__strokeThickness?n.StyleProvider.setSimpleElementStyle(this.__elementSvgLine,"stroke-width",null):n.StyleProvider.setSimpleElementStyle(this.__elementSvgLine,"stroke-width",this.__strokeThickness.toString())},r.prototype.getStrokeThicknessUnit=function(){return"px"},r.prototype.__processStrokeThicknessUnit=function(){},r.prototype.setX1=function(t){var e=n.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("X1")),e!==this.__x1&&(this.__x1=e,n.EventProvider.raise(this.__id+".onFunctionResultChanged",["getX1"]),this.__processX1())},r.prototype.getX1=function(){return this.__x1},r.prototype.__processX1=function(){this.__drawLine()},r.prototype.getX1Unit=function(){return"px"},r.prototype.__processX1Unit=function(){},r.prototype.setY1=function(t){var e=n.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("Y1")),e!==this.__y1&&(this.__y1=e,n.EventProvider.raise(this.__id+".onFunctionResultChanged",["getY1"]),this.__processY1())},r.prototype.getY1=function(){return this.__y1},r.prototype.__processY1=function(){this.__drawLine()},r.prototype.getY1Unit=function(){return"px"},r.prototype.__processY1Unit=function(){},r.prototype.setX2=function(t){var e=n.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("X2")),e!==this.__x2&&(this.__x2=e,n.EventProvider.raise(this.__id+".onFunctionResultChanged",["getX2"]),this.__processX2())},r.prototype.getX2=function(){return this.__x2},r.prototype.__processX2=function(){this.__drawLine()},r.prototype.getX2Unit=function(){return"px"},r.prototype.__processX2Unit=function(){},r.prototype.setY2=function(t){var e=n.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("Y2")),e!==this.__y2&&(this.__y2=e,n.EventProvider.raise(this.__id+".onFunctionResultChanged",["getY2"]),this.__processY2())},r.prototype.getY2=function(){return this.__y2},r.prototype.__processY2=function(){this.__drawLine()},r.prototype.getY2Unit=function(){return"px"},r.prototype.__processY2Unit=function(){},r.prototype.__drawLine=function(){if(this.__isAttached&&void 0!==this.__x1&&null!==this.__x1&&void 0!==this.__y1&&null!==this.__y1&&void 0!==this.__x2&&null!==this.__x2&&void 0!==this.__y2&&null!==this.__y2){var t=this.getRenderedWidth(),e=this.getRenderedHeight();if(t&&e){for(var o=[this.__x1,this.__y1,this.__x2,this.__y2],r=null,n=null,i=null,s=null,_=0,l=o.length;_<l;_++)_%2==0?((null===r||o[_]<r)&&(r=o[_]),(null===i||o[_]>i)&&(i=o[_])):((null===n||o[_]<n)&&(n=o[_]),(null===s||o[_]>s)&&(s=o[_]));var h=i-r,c=s-n,a=t/(h=0!==h?h:t),u=e/(c=0!==c?c:e);switch(this.__scaleMode){case"ScaleToFill":for(_=0,l=o.length;_<l;_++)o[_]=_%2==0?(o[_]-r)*a:(o[_]-n)*u;break;case"ScaleToFit":var p=a<u?a:u;for(_=0,l=o.length;_<l;_++)o[_]=_%2==0?(o[_]-r)*p:(o[_]-n)*p;break;case"ScaleToFitWidth":for(_=0,l=o.length;_<l;_++)o[_]=_%2==0?(o[_]-r)*a:(o[_]-n)*a;break;case"ScaleToFitHeight":for(_=0,l=o.length;_<l;_++)o[_]=_%2==0?(o[_]-r)*u:(o[_]-n)*u}this.__elementSvgLine[0].setAttribute("x1",o[0].toString()),this.__elementSvgLine[0].setAttribute("y1",o[1].toString()),this.__elementSvgLine[0].setAttribute("x2",o[2].toString()),this.__elementSvgLine[0].setAttribute("y2",o[3].toString())}}},r.prototype.setScaleMode=function(t){var e=n.ValueConverter.toScaleModeString(t);null===e&&(e=this.getAttributeDefaultValueInternal("Scalemode")),e!==this.__scaleMode&&(this.__scaleMode=e,n.EventProvider.raise(this.__id+".onFunctionResultChanged",["getScaleMode"]),this.__processScaleMode())},r.prototype.getScaleMode=function(){return this.__scaleMode},r.prototype.__processScaleMode=function(){this.__drawLine()},o=r,e.TcHmiLine=o,t.register("tchmi-line",n.Controls.Beckhoff.TcHmiLine,"Beckhoff/TcHmiLine/","Beckhoff/TcHmiLine/Template.html")}(TcHmi=TcHmi||{});