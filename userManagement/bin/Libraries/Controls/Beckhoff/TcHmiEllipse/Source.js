var TcHmi;!function(l){var e,t,s,o;function r(e,t,o){var r=s.call(this,e,t,o)||this;return r.__resizedEventDestroyEvent=null,r.__objectResolvers=new Map,r.__onResolverForFillColorWatchCallback=function(e){!1===r.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,r.__fillColor)||(r.__fillColor=e.value,l.EventProvider.raise(r.__id+".onFunctionResultChanged",["getFillColor"]),r.__processFillColor())},r.__onResolverForStrokeColorWatchCallback=function(e){!1===r.__isAttached&&e.destroy&&e.destroy(),tchmi_equal(e.value,r.__strokeColor)||(r.__strokeColor=e.value,l.EventProvider.raise(r.__id+".onFunctionResultChanged",["getStrokeColor"]),r.__processStrokeColor())},r}e=l.Controls||(l.Controls={}),t=e.Beckhoff||(e.Beckhoff={}),s=l.Controls.System.TcHmiControl,__extends(r,s),r.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".tchmi-ellipse-template"),this.__elementSvgEllipse=this.__elementTemplateRoot.find(".tchmi-ellipse-template-svg-ellipse"),0===this.__elementTemplateRoot.length||0===this.__elementSvgEllipse.length)throw new Error("Invalid Template.html");s.prototype.__previnit.call(this)},r.prototype.__init=function(){s.prototype.__init.call(this)},r.prototype.__attach=function(){s.prototype.__attach.call(this),this.__updateDimensions(),this.__resizedEventDestroyEvent=l.EventProvider.register(this.__id+".onResized",this.__onResized()),this.__objectResolvers.forEach(function(e){return e.resolver.watch(e.watchCallback)})},r.prototype.__detach=function(){s.prototype.__detach.call(this),null!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null),this.__objectResolvers.forEach(function(e){e.watchDestroyer&&(e.watchDestroyer(),e.watchDestroyer=null)})},r.prototype.destroy=function(){this.__objectResolvers.forEach(function(e){e.watchDestroyer&&e.watchDestroyer(),e.resolver.destroy()}),this.__objectResolvers.clear(),s.prototype.destroy.call(this)},r.prototype.__onResized=function(){var o=this;return function(e,t){o.__updateDimensions()}},r.prototype.__updateDimensions=function(){if(this.__isAttached){var e=this.getRenderedWidth(),t=this.getRenderedHeight();if(e&&t){var o=this.__strokeThickness?this.__strokeThickness:0;o=(o=o<e/2?o:e/2)<t/2?o:t/2;var r=e/2-Math.ceil(o/2),s=t/2-Math.ceil(o/2);this.__elementSvgEllipse.attr("cx",e/2).attr("rx",0<r?r:1).attr("cy",t/2).attr("ry",0<s?s:1),l.StyleProvider.setSimpleElementStyle(this.__elementSvgEllipse,"stroke-width",o.toString())}}},r.prototype.setFillColor=function(e){var t=l.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("Fillcolor"));var o=this.__objectResolvers.get("fillColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new l.Symbol.ObjectResolver(t);this.__objectResolvers.set("fillColor",{resolver:r,watchCallback:this.__onResolverForFillColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForFillColorWatchCallback)})},r.prototype.getFillColor=function(){return this.__fillColor},r.prototype.__processFillColor=function(){l.StyleProvider.processFillColor(this.__elementSvgEllipse,this.__fillColor)},r.prototype.setStrokeColor=function(e){var t=l.ValueConverter.toObject(e);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeColor"));var o=this.__objectResolvers.get("strokeColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new l.Symbol.ObjectResolver(t);this.__objectResolvers.set("strokeColor",{resolver:r,watchCallback:this.__onResolverForStrokeColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForStrokeColorWatchCallback)})},r.prototype.getStrokeColor=function(){return this.__strokeColor},r.prototype.__processStrokeColor=function(){l.StyleProvider.processStrokeColor(this.__elementSvgEllipse,this.__strokeColor)},r.prototype.setStrokeStyle=function(e){var t=l.ValueConverter.toString(e);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeStyle")),t!==this.__strokeStyle&&(this.__strokeStyle=t,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeStyle"]),this.__processStrokeStyle())},r.prototype.getStrokeStyle=function(){return this.__strokeStyle},r.prototype.__processStrokeStyle=function(){l.StyleProvider.setSimpleElementStyle(this.__elementSvgEllipse,"stroke-dasharray",this.__strokeStyle)},r.prototype.setStrokeThickness=function(e){var t=l.ValueConverter.toNumber(e);null===t&&(t=this.getAttributeDefaultValueInternal("StrokeThickness")),e!==this.__strokeThickness&&(this.__strokeThickness=t,l.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeThickness"]),this.__processStrokeThickness())},r.prototype.getStrokeThickness=function(){return this.__strokeThickness},r.prototype.__processStrokeThickness=function(){this.__updateDimensions()},r.prototype.getStrokeThicknessUnit=function(){return"px"},r.prototype.__processStrokeThicknessUnit=function(){},r.prototype.__processWidth=function(){s.prototype.__processWidth.call(this),this.__updateDimensions()},r.prototype.__processHeight=function(){s.prototype.__processHeight.call(this),this.__updateDimensions()},o=r,t.TcHmiEllipse=o,e.register("tchmi-ellipse",l.Controls.Beckhoff.TcHmiEllipse,"Beckhoff/TcHmiEllipse/","Beckhoff/TcHmiEllipse/Template.html")}(TcHmi=TcHmi||{});