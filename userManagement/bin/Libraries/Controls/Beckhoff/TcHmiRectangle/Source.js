var TcHmi;!function(s){var t,e,i,o;function r(t,e,o){var r=i.call(this,t,e,o)||this;return r.__objectResolvers=new Map,r.__resizedEventDestroyEvent=null,r.__onResolverForFillColorWatchCallback=function(t){!1===r.__isAttached&&t.destroy&&t.destroy(),tchmi_equal(t.value,r.__fillColor)||(r.__fillColor=t.value,s.EventProvider.raise(r.__id+".onFunctionResultChanged",["getFillColor"]),r.__processFillColor())},r.__onResolverForStrokeColorWatchCallback=function(t){!1===r.__isAttached&&t.destroy&&t.destroy(),tchmi_equal(t.value,r.__strokeColor)||(r.__strokeColor=t.value,s.EventProvider.raise(r.__id+".onFunctionResultChanged",["getStrokeColor"]),r.__processStrokeColor())},r}t=s.Controls||(s.Controls={}),e=t.Beckhoff||(t.Beckhoff={}),i=s.Controls.System.TcHmiControl,__extends(r,i),r.prototype.__previnit=function(){if(this.__elementTemplateRoot=this.__element.find(".tchmi-rectangle-template"),this.__elementSvgRectangle=this.__elementTemplateRoot.find(".tchmi-rectangle-template-svg-rectangle"),0===this.__elementTemplateRoot.length||0===this.__elementSvgRectangle.length)throw new Error("Invalid Template.html");i.prototype.__previnit.call(this)},r.prototype.__init=function(){i.prototype.__init.call(this)},r.prototype.__attach=function(){i.prototype.__attach.call(this),this.__updateDimensions(),this.__resizedEventDestroyEvent=s.EventProvider.register(this.__id+".onResized",this.__onResized()),this.__objectResolvers.forEach(function(t){return t.resolver.watch(t.watchCallback)})},r.prototype.__detach=function(){i.prototype.__detach.call(this),null!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null),this.__objectResolvers.forEach(function(t){t.watchDestroyer&&(t.watchDestroyer(),t.watchDestroyer=null)})},r.prototype.destroy=function(){this.__objectResolvers.forEach(function(t){t.watchDestroyer&&t.watchDestroyer(),t.resolver.destroy()}),this.__objectResolvers.clear(),i.prototype.destroy.call(this)},r.prototype.__onResized=function(){var o=this;return function(t,e){o.__updateDimensions()}},r.prototype.__updateDimensions=function(){if(this.__isAttached){var t=this.getRenderedWidth(),e=this.getRenderedHeight();if(t&&e){var o=this.__strokeThickness?this.__strokeThickness:0;o=(o=o<t/2?o:t/2)<e/2?o:e/2,this.__elementSvgRectangle.attr("x",o/2).attr("y",o/2).attr("width",t-o).attr("height",e-o),s.StyleProvider.setSimpleElementStyle(this.__elementSvgRectangle,"stroke-width",o.toString())}}},r.prototype.setFillColor=function(t){var e=s.ValueConverter.toObject(t);null===e&&(e=this.getAttributeDefaultValueInternal("FillColor"));var o=this.__objectResolvers.get("fillColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new s.Symbol.ObjectResolver(e);this.__objectResolvers.set("fillColor",{resolver:r,watchCallback:this.__onResolverForFillColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForFillColorWatchCallback)})},r.prototype.getFillColor=function(){return this.__fillColor},r.prototype.__processFillColor=function(){s.StyleProvider.processFillColor(this.__elementSvgRectangle,this.__fillColor)},r.prototype.setStrokeColor=function(t){var e=s.ValueConverter.toObject(t);null===e&&(e=this.getAttributeDefaultValueInternal("StrokeColor"));var o=this.__objectResolvers.get("strokeColor");o&&(o.watchDestroyer&&o.watchDestroyer(),o.resolver.destroy());var r=new s.Symbol.ObjectResolver(e);this.__objectResolvers.set("strokeColor",{resolver:r,watchCallback:this.__onResolverForStrokeColorWatchCallback,watchDestroyer:r.watch(this.__onResolverForStrokeColorWatchCallback)})},r.prototype.getStrokeColor=function(){return this.__strokeColor},r.prototype.__processStrokeColor=function(){s.StyleProvider.processStrokeColor(this.__elementSvgRectangle,this.__strokeColor)},r.prototype.setStrokeStyle=function(t){var e=s.ValueConverter.toString(t);null===e&&(e=this.getAttributeDefaultValueInternal("StrokeStyle")),e!==this.__strokeStyle&&(this.__strokeStyle=e,s.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeStyle"]),this.__processStrokeStyle())},r.prototype.getStrokeStyle=function(){return this.__strokeStyle},r.prototype.__processStrokeStyle=function(){s.StyleProvider.setSimpleElementStyle(this.__elementSvgRectangle,"stroke-dasharray",this.__strokeStyle)},r.prototype.setStrokeThickness=function(t){var e=s.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("StrokeThickness")),e!==this.__strokeThickness&&(this.__strokeThickness=e,s.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStrokeThickness"]),this.__processStrokeThickness())},r.prototype.getStrokeThickness=function(){return this.__strokeThickness},r.prototype.__processStrokeThickness=function(){this.__updateDimensions()},r.prototype.getStrokeThicknessUnit=function(){return"px"},r.prototype.__processStrokeThicknessUnit=function(){},r.prototype.setRadiusX=function(t){var e=s.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("RadiusX")),e!==this.__radiusX&&(this.__radiusX=e,s.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRadiusX"]),this.__processRadiusX())},r.prototype.getRadiusX=function(){return this.__radiusX},r.prototype.__processRadiusX=function(){void 0!==this.__radiusX&&null!==this.__radiusX?this.__elementSvgRectangle[0].setAttribute("rx",this.__radiusX.toString()):this.__elementSvgRectangle[0].removeAttribute("rx")},r.prototype.getRadiusXUnit=function(){return"px"},r.prototype.__processRadiusXUnit=function(){},r.prototype.setRadiusY=function(t){var e=s.ValueConverter.toNumber(t);null===e&&(e=this.getAttributeDefaultValueInternal("RadiusY")),e!==this.__radiusY&&(this.__radiusY=e,s.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRadiusY"]),this.__processRadiusY())},r.prototype.getRadiusY=function(){return this.__radiusY},r.prototype.__processRadiusY=function(){void 0!==this.__radiusY&&null!==this.__radiusY?this.__elementSvgRectangle[0].setAttribute("ry",this.__radiusY.toString()):this.__elementSvgRectangle[0].removeAttribute("ry")},r.prototype.getRadiusYUnit=function(){return"px"},r.prototype.__processRadiusYUnit=function(){},r.prototype.__processWidth=function(){i.prototype.__processWidth.call(this),this.__updateDimensions()},r.prototype.__processHeight=function(){i.prototype.__processHeight.call(this),this.__updateDimensions()},o=r,e.TcHmiRectangle=o,t.register("tchmi-rectangle",s.Controls.Beckhoff.TcHmiRectangle,"Beckhoff/TcHmiRectangle/","Beckhoff/TcHmiRectangle/Template.html")}(TcHmi=TcHmi||{});