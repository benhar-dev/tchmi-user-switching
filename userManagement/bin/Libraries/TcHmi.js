var TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi,TcHmi;
/**
* Encodes HTML
* @param {string} html The html to encode
* @return {string} The encoded representation of parameter html.
* @preserve (Part of the public API)
*/
function tchmi_encode_html(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}
/**
* Decodes HTML
* @param {string} text The text to decode
* @return {string} The decoded representation of parameter text.
"&#176;!\"&#167;$%&/()=?~#|&#233;&#232;€…™&#174;&#169;"
"°     !\"§     $%&/()=?~#|é     è     €…™®     ©"
 @preserve (Part of the public API)
*/function tchmi_decode_html(e){return String(e).replace(/\&amp;/g,"&").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&quot;/g,'"').replace(/\&#39;/g,"'").replace(/\&#228;/g,"ä").replace(/\&#196;/g,"Ä").replace(/\&#246;/g,"ö").replace(/\&#214;/g,"Ö").replace(/\&#252;/g,"ü").replace(/\&#220;/g,"Ü").replace(/\&#223;/g,"ß").replace(/\&#233;/g,"é").replace(/\&#232;/g,"è").replace(/\&#176;/g,"°").replace(/\&#167;/g,"§").replace(/\&#174;/g,"®").replace(/\&#169;/g,"©").replace(/\&#181;/g,"µ")}
/**
* Converts formatted text to formatted html.
* @param {string} text The text which contains the formatting placeholders which shall be encoded.
* @return {string} The encoded representation of parameter text.
* @preserve (Part of the public API)
*/function tchmi_text_to_html(e){for(var r=e,t=0,o=r.length-1,i=0;i<=o;o--){if(" "!==r[o])break;t++}r=(r=(r=(r=r.substr(0,r.length-t)).replace(/\\s\\s/g," &nbsp;")).replace(/  /g," &nbsp;")).replace(/\\t/g,"&nbsp;&nbsp;&nbsp;");var n=[];for(o=0,i=t;o<i;o++)o%2==0?n.push("&nbsp;"):n.push(" ");for(o=n.length-1,i=0;i<=o;o--)r+=n[o];return r=(r=r.replace(/\\r\\n/g,"<br/>")).replace(/\\n/g,"<br/>")}
/**
* Decode base64 strings
* Attention: JS strings are UTF16!
* @param input
* @return {string} returns the String or null
* @preserve (Part of the public API)
*/function tchmi_base64decode(e){return window.atob(e)}
/**
* Encode base64 strings
* Attention: JS strings are UTF16!
* @param {string} input String to encode
* @return {string} returns the String or null
* @preserve (Part of the public API)
*/function tchmi_base64encode(e){return window.btoa(e)}
/**
* Creates a Guid string.
* @return {string} Guid
* @preserve (Part of the public API)
*/function tchmi_create_guid(){var t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:7&r|8).toString(16)})}
/**
 * Compares 2 values for equality.
 * @param a Value 1
 * @param b Value 2
 * @param {boolean} typeSafe If set to "true" the comparison will return "false" if a {string} "1" is compared with {number} 1. If it is set to "false" the same comparison will return "true" because the value is rough equal.
 * @returns {boolean}
 * @preserve (Part of the public API)
 */function tchmi_equal(e,r,t){if(void 0===t&&(t=!0),e===r)return!0;if(null===e||null===r)return!1;var o=typeof e,i=typeof r;if(o!=i){if(!t)switch(o){case"boolean":switch(i){case"number":return e==r;case"string":return e.toString()===r.toLowerCase()}break;case"number":switch(i){case"boolean":return e==r;case"string":return""!==r&&e==r}break;case"string":switch(i){case"boolean":return e.toLowerCase()===r.toString();case"number":return""!==e&&e==r}}return!1}if("number"==o&&isNaN(e)&&isNaN(r))return!0;if("object"!=o||__tchmi_is_instanced_object(e)||__tchmi_is_instanced_object(r))return!1;var n=Array.isArray(e);if(n!==Array.isArray(r))return!1;if(n){var a=e.length;if(a!==r.length)return!1;for(var s=0;s<a;s++)if(!tchmi_equal(e[s],r[s]))return!1;return!0}if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var l in e){if(!r.hasOwnProperty(l))return!1;if(!tchmi_equal(e[l],r[l]))return!1}return!0}function __tchmi_is_instanced_object(e){void 0===__tchmi_is_instanced_object.__objectPrototype&&(__tchmi_is_instanced_object.__objectPrototype=Object.getPrototypeOf({})),void 0===__tchmi_is_instanced_object.__arrayPrototype&&(__tchmi_is_instanced_object.__arrayPrototype=Object.getPrototypeOf([]));var r=Object.getPrototypeOf(e);return null!==r&&r!==__tchmi_is_instanced_object.__objectPrototype&&r!==__tchmi_is_instanced_object.__arrayPrototype}
/**
 * Clones the data {Object} in param obj and returns a clone of it.
 * Do not use this function to create clones of objects which contain functions or are based on a prototype definition!
 * String, null, undefined are returned directly as they are immutable / handled by value.
 * @function
 * @param {Object} obj The {Object} to clone.
 * @returns {Object} Clone of param obj.
 * @preserve (Part of the public API)
 */function tchmi_clone_object(e){var a=!1,s=function(e){var r,t=typeof e;if("function"==t)return a=!0,null;if(null===e||"object"!=t||__tchmi_is_instanced_object(e))return e;if(Array.isArray(e)){r=[];for(var o=0,i=e.length;o<i;o++)if(r[o]=s(e[o]),a)return null}else for(var n in r={},e)if(r[n]=s(e[n]),a)return null;return r},r=s(e);return a?e:r}
/**
 * Unify a path {string}.
 * Replace all backslashes with slashes, replace multiple slashes with single slashes, remove leading slash
 * @function
 * @param {string} path The path {string}
 * @return {string} Unified path {string}.
 * @preserve (Part of the public API)
 */function tchmi_path(e){return"string"==typeof e?e.replace(/\\+/g,"/").replace(/\/+/g,"/").replace(/^\/+/g,""):e}
/**
* Converts a String to a valid CSS id pattern by escaping all reserved characters.
* @param {string} id The target id.
* @returns {string} Converted id.
* @preserve (Part of the public API)
*/function tchmi_css_escape_selector(e){if("string"!=typeof e)return e;for(var r,t=e.length,o=-1,i="",n=e.charCodeAt(0);++o<t;)0!==(r=e.charCodeAt(o))?i+=1<=r&&r<=31||127===r||0===o&&48<=r&&r<=57||1===o&&48<=r&&r<=57&&45===n?"\\"+r.toString(16)+" ":(0!==o||1!==t||45!==r)&&(128<=r||45===r||95===r||48<=r&&r<=57||65<=r&&r<=90||97<=r&&r<=122)?e.charAt(o):"\\"+e.charAt(o):i+="�";return i}
/**
 * tchmi_escape_regex
 * @param {string} s
 * @returns {string}
 * @preserve (Part of the public API)
 */function tchmi_escape_regex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gIsolatedEval_TcHmi_System_FunctionExpression_Results(s,resSE,resFCE){return eval(s)}function gIsolatedEval_TcHmi_System_FunctionExpression(s){return eval(s)}function gIsolatedEval_TcHmi_System_TriggerManager_JavaScriptAction(ctx,s){return eval(s)}function gIsolatedEval_TcHmi_System_TriggerManager_ConditionExpressionsResult(s,results){return eval(s)}!function(e){var r;(r=e.Errors||(e.Errors={}))[r.NONE=0]="NONE",r[r.ERROR=1]="ERROR",r[r.E_PARAMETER_INVALID=2]="E_PARAMETER_INVALID",r[r.E_TIMEOUT=3]="E_TIMEOUT",r[r.E_EXCEPTION=4]="E_EXCEPTION",r[r.E_INVALID=5]="E_INVALID",r[r.E_NOT_SUPPORTED=100]="E_NOT_SUPPORTED",r[r.E_NOT_ALLOWED=110]="E_NOT_ALLOWED",r[r.E_UNKNOWN=115]="E_UNKNOWN",r[r.E_UNKNOWN_TYPE=120]="E_UNKNOWN_TYPE",r[r.E_KEY_NOT_FOUND=130]="E_KEY_NOT_FOUND",r[r.E_TYPE_INVALID=150]="E_TYPE_INVALID",r[r.E_VALUE_INVALID=160]="E_VALUE_INVALID",r[r.E_WEBSOCKET_NOT_READY=1e3]="E_WEBSOCKET_NOT_READY",r[r.E_WEBSOCKET_CLOSED=1001]="E_WEBSOCKET_CLOSED",r[r.E_WEBSOCKET_NOT_SUPPORTED=1404]="E_WEBSOCKET_NOT_SUPPORTED",r[r.E_WEBSOCKET_OPEN_SERVER_LICENSE_CHECK_FAILED=1500]="E_WEBSOCKET_OPEN_SERVER_LICENSE_CHECK_FAILED",r[r.E_WEBSOCKET_OPEN_SERVER_LICENSE_MISSING=1501]="E_WEBSOCKET_OPEN_SERVER_LICENSE_MISSING",r[r.E_WEBSOCKET_OPEN_SERVER_NO_ACCESS=1502]="E_WEBSOCKET_OPEN_SERVER_NO_ACCESS",r[r.E_SYMBOL_STATE_INVALID=2e3]="E_SYMBOL_STATE_INVALID",r[r.E_SYMBOL_VALUE_INVALID=2001]="E_SYMBOL_VALUE_INVALID",r[r.E_SYMBOL_RESOLVE_SCHEMA=2002]="E_SYMBOL_RESOLVE_SCHEMA",r[r.E_SYMBOL_READONLY=2003]="E_SYMBOL_READONLY",r[r.E_SYMBOL_UNKNOWN=2010]="E_SYMBOL_UNKNOWN",r[r.E_SYMBOL_INVALID_DATA_PROVIDER_ENTRY=2020]="E_SYMBOL_INVALID_DATA_PROVIDER_ENTRY",r[r.E_SYMBOL_INVALID_PATH=2030]="E_SYMBOL_INVALID_PATH",r[r.E_SYMBOL_SUBSYMBOL_ERROR=2040]="E_SYMBOL_SUBSYMBOL_ERROR",r[r.E_SYMBOL_OBJECT_RESOLVE=2050]="E_SYMBOL_OBJECT_RESOLVE",r[r.E_SERVER_RESPONSE_ERROR=3e3]="E_SERVER_RESPONSE_ERROR",r[r.E_SERVER_COMMAND_ERROR=3005]="E_SERVER_COMMAND_ERROR",r[r.E_SERVER_INVALID_RESPONSE=3010]="E_SERVER_INVALID_RESPONSE",r[r.E_SERVER_COMMANDS_MISSING=3015]="E_SERVER_COMMANDS_MISSING",r[r.E_SERVER_COMMAND_MISSING=3016]="E_SERVER_COMMAND_MISSING",r[r.E_SERVER_READVALUE_MISSING=3020]="E_SERVER_READVALUE_MISSING",r[r.E_SERVER_WRITEVALUE_MISSING=3025]="E_SERVER_WRITEVALUE_MISSING",r[r.E_SERVER_RESPONSE_MISSING=3030]="E_SERVER_RESPONSE_MISSING",r[r.E_FUNCTION_MISSING_FUNCTION_REFERENCE=4e3]="E_FUNCTION_MISSING_FUNCTION_REFERENCE",r[r.E_FUNCTION_MISSING_FUNCTION_DESCRIPTION=4005]="E_FUNCTION_MISSING_FUNCTION_DESCRIPTION",r[r.E_FUNCTION_INVALID_CONFIGURATION=4010]="E_FUNCTION_INVALID_CONFIGURATION",r[r.E_FUNCTION_EXCEPTION=4020]="E_FUNCTION_EXCEPTION",r[r.E_FUNCTION_UNKNOWN=4030]="E_FUNCTION_UNKNOWN",r[r.E_FUNCTION_RESTPARAMETER_DEFINITION_MISSING=4040]="E_FUNCTION_RESTPARAMETER_DEFINITION_MISSING",r[r.E_FUNCTION_RESOLVING_PARAMETER_FAILED=4050]="E_FUNCTION_RESOLVING_PARAMETER_FAILED",r[r.E_FUNCTION_EXPRESSION_PARSER_ERROR=4100]="E_FUNCTION_EXPRESSION_PARSER_ERROR",r[r.E_FUNCTION_EXPRESSION_EXCEPTION=4120]="E_FUNCTION_EXPRESSION_EXCEPTION",r[r.E_TRIGGER_ACTION_EXCEPTION=5050]="E_TRIGGER_ACTION_EXCEPTION",r[r.E_TRIGGER_JAVASCRIPT_EVAL_EXCEPTION=5055]="E_TRIGGER_JAVASCRIPT_EVAL_EXCEPTION",r[r.E_TRIGGER_FUNCTION_EXPRESSION_EXCEPTION=5060]="E_TRIGGER_FUNCTION_EXPRESSION_EXCEPTION",r[r.E_TRIGGER_RESOLVE_CONDITION_EXPRESSION_EXCEPTION=5065]="E_TRIGGER_RESOLVE_CONDITION_EXPRESSION_EXCEPTION",r[r.E_CONTROL_INSTANCE_NOT_FOUND=6e3]="E_CONTROL_INSTANCE_NOT_FOUND",r[r.E_CONTROL_INVALID_CONFIGURATION=6001]="E_CONTROL_INVALID_CONFIGURATION",r[r.E_CONTROL_ATTRIBUTE_NOT_FOUND=6005]="E_CONTROL_ATTRIBUTE_NOT_FOUND",r[r.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION=6010]="E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION",r[r.E_SCHEMA_INVALID=7e3]="E_SCHEMA_INVALID",r[r.E_SCHEMA_INVALID_PATH=7010]="E_SCHEMA_INVALID_PATH"}(TcHmi=TcHmi||{}),function(t){var e=(u.prototype.setColor=function(e){t.isSolidColor(e)&&(this.__color=t.StyleProvider.resolveSolidColorAsRGBA(e),this.__key&&u.__clientMap[this.__key]&&(u.__clientMap[this.__key].color=this.__color))},u.__frame=function(){u.__frameRequestId=window.requestAnimationFrame(u.__frame);var e=Date.now();if(!(e-u.__then<=1e3/30))for(var r in u.__then=e,u.__clientMap){var t=u.__clientMap[r];if(t){var o=t.context,i=t.color,n=o.canvas.width,a=o.canvas.height;n===o.canvas.clientWidth&&a===o.canvas.clientHeight||(o.canvas.width=o.canvas.clientWidth,o.canvas.height=o.canvas.clientHeight);var s=Math.floor((e-u.__start.getTime())/1e3*u.__lines)/u.__lines;o.save(),o.lineCap="round",o.clearRect(0,0,n,a),o.translate(n/2,a/2),o.rotate(2*Math.PI*s);for(var l=0,c=u.__lines;l<c;l++)o.beginPath(),o.rotate(2*Math.PI/u.__lines),o.moveTo(n/10,0),o.lineTo(n/4,0),o.lineWidth=a/30,o.strokeStyle="rgba("+i.r+", "+i.g+", "+i.b+","+l/u.__lines+")",o.stroke();o.restore()}}},u.prototype.run=function(){!0!==this.__run&&this.__host&&(this.__run=!0,this.__canvas||(this.__canvas=document.createElement("canvas"),this.__canvas.setAttribute("style","width:100%;height:100%;display:block;"),this.__context=this.__canvas.getContext("2d")),this.__host.empty(),this.__host.append(this.__canvas),this.__key=u.__clientCount.toString(),u.__clientMap[this.__key]={context:this.__context,color:this.__color},u.__clientCount++,u.__frameRequestId||(u.__frameRequestId=window.requestAnimationFrame(u.__frame)))},u.prototype.stop=function(){!1!==this.__run&&this.__host&&(this.__host.empty(),u.__clientCount--,delete u.__clientMap[this.__key],u.__clientCount<=0&&u.__frameRequestId&&(window.cancelAnimationFrame(u.__frameRequestId),u.__frameRequestId=0),this.__run=!1)},u.prototype.destroy=function(){this.stop(),this.__canvas&&this.__canvas.parentElement&&this.__canvas.parentElement.removeChild(this.__canvas),this.__canvas=null,this.__context=null,this.__host=null},u.__frameRequestId=0,u.__then=0,u.__clientMap={},u.__clientCount=0,u.__start=new Date,u.__lines=16,u);function u(e,r){this.__canvas=null,this.__context=null,this.__run=!1,this.__color={r:0,g:0,b:0,a:0},this.__host=e,t.isSolidColor(r)&&(this.__color=t.StyleProvider.resolveSolidColorAsRGBA(r))}t.LoadingSpinner=e}(TcHmi=TcHmi||{}),function(){if(!window.hasOwnProperty("jQuery")||null===jQuery)throw new ReferenceError('Object "jQuery" is missing!');if(!window.hasOwnProperty("$")||null===$)throw new ReferenceError('Object "$" is missing!');if(!window.hasOwnProperty("acorn")||null===acorn)throw new ReferenceError('Object "acorn" is missing!');TCHMI_DEBUG_TIME_LOAD_LIBRARY=Date.now(),TCHMI_DYNAMIC_INSTANCE_ID="unset",window.hasOwnProperty("TCHMI_ENABLE_DESIGNER_MODE")||(TCHMI_ENABLE_DESIGNER_MODE=!1),window.hasOwnProperty("TCHMI_ENABLE_DESIGNER_MODE_MASTER")||(TCHMI_ENABLE_DESIGNER_MODE_MASTER=!1),window.hasOwnProperty("TCHMI_ENABLE_DESIGNER_MODE_SLAVE")||(TCHMI_ENABLE_DESIGNER_MODE_SLAVE=!1),TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL=window.hasOwnProperty("TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL")?tchmi_path(TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL):"",window.hasOwnProperty("TCHMI_ENABLE_DESIGNER_MODE_FALLBACK_CONFIG_JSON")||(TCHMI_ENABLE_DESIGNER_MODE_FALLBACK_CONFIG_JSON=null),window.hasOwnProperty("TCHMI_CONSOLE_LOG_LEVEL")||(TCHMI_CONSOLE_LOG_LEVEL=0),window.hasOwnProperty("TCHMI_CONSOLE_LOG_TCHMISERVER_MESSAGES")||(TCHMI_CONSOLE_LOG_TCHMISERVER_MESSAGES=!1),window.hasOwnProperty("TCHMI_CONSOLE_LOG_DESIGNER_MODE_COM_MESSAGES")||(TCHMI_CONSOLE_LOG_DESIGNER_MODE_COM_MESSAGES=!1),window.hasOwnProperty("TCHMI_UNITTEST_MODE")||(TCHMI_UNITTEST_MODE=!1),window.hasOwnProperty("TCHMI_BENCHMARK_MODE")||(TCHMI_BENCHMARK_MODE=!1),window.hasOwnProperty("TCHMI_EVENT_OPTION_OBJECT_SUPPORTED")||(TCHMI_EVENT_OPTION_OBJECT_SUPPORTED=!1);try{window.addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){TCHMI_EVENT_OPTION_OBJECT_SUPPORTED=!0}}))}catch(e){}}(TcHmi=TcHmi||{}),function(s){
/**
    * Allows converting of values from any type to any type if types are compatible.
    * @class ValueConverter
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(
/**
         * Converts a value to {Object/Array} and returns the {Object/Array} or null if the type of value is not compatible to {Object/Array}.
         * No content check will be done!
         * @function toObject
         * @memberOf TcHmi.ValueConverter
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string|number|boolean|Object|Array} defaultValue The fallback value (null if not given)
         * @returns {Object|Array|null}
         * @preserve (Part of the public API)
         */
l.toObject=function(e,r){void 0===r&&(r=null);var t=r;if("string"==typeof e&&""!==e)try{t=JSON.parse(e)}catch(e){}else"object"==typeof e&&null!==e&&(t=e);return t},
/**
         * Converts a value to {string} and returns the {string} or null if the type of value is not compatible to {string}.
         * @function toString
         * @memberOf TcHmi.ValueConverter
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible to string (null if not given)
         * @returns {string} returns the {string} or defaultValue if the type of value is not compatible to {string}.
         * @preserve (Part of the public API)
         */
l.toString=function(e,r){void 0===r&&(r=null);var t=r;switch(typeof e){case"boolean":case"number":t=e.toString();break;case"object":null!==e&&e instanceof s.Controls.System.baseTcHmiControl!=1&&e instanceof Element!=1&&(t=JSON.stringify(e));break;case"string":t=e}return t},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toDimensionUnit=function(e,r){return l.toEnum(e,l.DimensionUnitList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toAngleUnit=function(e,r){return l.toEnum(e,l.AngleUnitList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toBorderStyleValue=function(e,r){return l.toEnum(e,l.BorderStyleValueList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toFontStyle=function(e,r){return l.toEnum(e,l.FontStyleList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toFontSizeUnit=function(e,r){return l.toEnum(e,l.FontSizeUnitList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toFontWeight=function(e,r){return l.toEnum(e,l.FontWeightList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toHorizontalAlignment=function(e,r){return l.toEnum(e,l.HorizontalAlignmentList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toScaleModeString=function(e,r){return l.toEnum(e,l.ScaleModeStringList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toSizeMode=function(e,r){return l.toEnum(e,l.SizeModeList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toSizeModeWithContent=function(e,r){return l.toEnum(e,l.SizeModeWithContentList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toVerticalAlignment=function(e,r){return l.toEnum(e,l.VerticalAlignmentList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toVisibility=function(e,r){return l.toEnum(e,l.VisibilityList,r)},
/**
         * Converts a value to enum value and returns the string or null if the type of value is not compatible to the enum.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to the enum.
         * @preserve (Part of the public API)
         */
l.toToggleState=function(e,r){return l.toEnum(e,l.ToggleStateList,r)},
/**
         * Converts a value to fontFamily value and returns the string or null if the type of value is not compatible to {string}.
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns {string} returns the {string} or null if the type of value is not compatible to string.
         * @preserve (Part of the public API)
         */
l.toFontFamily=function(e,r){return l.toString(e,r)},
/**
         * Converts a value to {number}
         * @function toNumber
         * @memberOf TcHmi.ValueConverter
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible to number (null if not given)
         * @returns {number} returns the {number} or the defaultValue if the type of value is not compatible to {number}.
         * @preserve (Part of the public API)
         */
l.toNumber=function(e,r){void 0===r&&(r=null);var t=r;switch(typeof e){case"string":t=parseFloat(e),isNaN(t)&&(t=r);break;case"boolean":switch(e){case!0:t=1;break;case!1:t=0}break;case"number":t=e,isNaN(e)&&(t=r)}return t},
/**
         * Converts a value to {boolean} and returns the {boolean} or null if the type of value is not compatible to {boolean}.
         * @function toBoolean
         * @memberOf TcHmi.ValueConverter
         * @param {string|number|boolean|Object|Array} value The value to convert.
         * @param {string} defaultValue Value which should be returned if value is not compatible to boolean (null if not given)
         * @returns {boolean}
         * @preserve (Part of the public API)
         */
l.toBoolean=function(e,r){void 0===r&&(r=null);var t=r;switch(typeof e){case"string":switch(e.toLowerCase()){case"true":t=!0;break;case"false":t=!1}break;case"number":switch(e){case 1:t=!0;break;case 0:t=!1}break;case"boolean":t=e}return t},
/**
         * Converts a value to enum {number} and returns the enum {number} or null if the type of value is not compatible to enum {Object}.
         * @function toEnum
         * @memberOf TcHmi.ValueConverter
         * @param {string|number|boolean|Object|Array} value  The value to convert.
         * @param {Object} enumType The enum {Object}.
         * @param {number} defaultValue Value which should be returned if value is not compatible with the enum (null if not given)
         * @returns number
         * @preserve (Part of the public API)
         */
l.toEnum=function(e,r,t){void 0===t&&(t=null);var o=t;switch(typeof e){case"string":if(""===e)break;var i=parseInt(e,10);isNaN(i)?(void 0===(o=r[e])&&(o=r[e.toLowerCase()]),void 0===o&&(o=r[e.toUpperCase()]),void 0===o&&(o=t)):o=this.toEnum(i,r,t);break;case"number":void 0!==r[e]&&(o=e);break;case"boolean":o=this.toEnum(this.toNumber(e),r,t)}return o},
/**
         *
         * @function toType
         * @memberOf TcHmi.ValueConverter
         * @param {string|number|boolean|Object|Array} value
         * @param {string} typeString
         * @returns {string|number|boolean|Object|Array}
         * @preserve (Part of the public API)
         */
l.toType=function(e,r){var t=s.System.Services.typeManager.getSchema(r);return null===t?null:l.toSchemaType(e,t)},
/**
         *
         * @function toType
         * @memberOf TcHmi.ValueConverter
         * @param {string|number|boolean|Object|Array} value
         * @param {Object} schema
         * @returns {string|number|boolean|Object|Array}
         * @preserve (Part of the public API)
         */
l.toSchemaType=function(e,r){if(null==e)return null;if(null==r)return null;var t=s.System.Type.Schema.resolveType(r);if("string"!=typeof t&&!Array.isArray(t))return null;if(Array.isArray(t)){var o=typeof e;if("string"==o||"number"==o||"boolean"==o||"object"==o){if(-1!==t.indexOf(o))return e;for(var i=0,n=t.length;i<n;i++){var a=null;switch(t[i]){case"object":case"array":a=l.toObject(e);break;case"string":a=l.toString(e);break;case"integer":case"number":a=l.toNumber(e);break;case"boolean":a=l.toBoolean(e)}if(null!==a)return a}}}else switch(t){case"object":case"array":return l.toObject(e);case"string":return l.toString(e);case"integer":case"number":return l.toNumber(e);case"boolean":return l.toBoolean(e)}return null},l.AngleUnitList={deg:"deg",rad:"rad",turn:"turn",grad:"grad"},l.BorderStyleValueList={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted",None:"None"},l.DimensionUnitList={px:"px","%":"%"},l.FontSizeUnitList={px:"px","%":"%",em:"em",rem:"rem"},l.FontStyleList={Normal:"Normal",Italic:"Italic",Oblique:"Oblique",Auto:"Auto"},l.FontWeightList={Normal:"Normal",Bold:"Bold",Auto:"Auto"},l.HorizontalAlignmentList={Left:"Left",Center:"Center",Right:"Right"},l.ScaleModeStringList={None:"None",ScaleToFill:"ScaleToFill",ScaleToFit:"ScaleToFit",ScaleToFitWidth:"ScaleToFitWidth",ScaleToFitHeight:"ScaleToFitHeight"},l.SizeModeList={Value:"Value",Parent:"Parent"},l.SizeModeWithContentList={Value:"Value",Parent:"Parent",Content:"Content"},l.ToggleStateList={Normal:"Normal",Active:"Active"},l.VerticalAlignmentList={Top:"Top",Center:"Center",Bottom:"Bottom"},l.VisibilityList={Visible:"Visible",Hidden:"Hidden",Collapsed:"Collapsed"},l);function l(){}s.ValueConverter=e}(TcHmi=TcHmi||{}),function(e){var r,t,o;e.isSolidColor=function(e){return null!=e&&"string"==typeof e.color},e.isLinearGradientColor=function(e){if(null==e)return!1;var r=e.angle;return!(!Array.isArray(e.stopPoints)||"number"!=typeof r&&("string"!=typeof r||isNaN(parseFloat(r))))},e.isBackground=
/**
     * Checks if the parameter is a TcHmi.Background
     * @param {object} background
     * @returns {boolean}
     * @preserve (Part of the public API)
     */
function(e){return null!=e&&(void 0!==e.color&&void 0!==e.image&&void 0!==e.imageWidth&&void 0!==e.imageWidthUnit&&void 0!==e.imageHeight&&void 0!==e.imageHeightUnit&&void 0!==e.imageHorizontalAlignment&&void 0!==e.imageVerticalAlignment&&void 0!==e.imagePadding)},e.isTranslate=
/**
     * Checks if the parameter is a TcHmi.checkTransform
     * @param {Transform | null} checkTransform
     * @returns {boolean}
     * @preserve (Part of the public API)
     */
function(e){return!!e&&"Translate"===e.transformType},e.isRotate=
/**
     * Checks if the parameter is a TcHmi.Rotate
     * @param {Transform | null} checkTransform
     * @returns {boolean}
     * @preserve (Part of the public API)
     */
function(e){return!!e&&"Rotate"===e.transformType},e.isScale=
/**
     * Checks if the parameter is a TcHmi.Scale
     * @param {Transform | null} checkTransform
     * @returns {boolean}
     * @preserve (Part of the public API)
     */
function(e){return!!e&&"Scale"===e.transformType},e.isSkew=
/**
     * Checks if the parameter is a TcHmi.Skew
     * @param {Transform | null} checkTransform
     * @returns {boolean}
     * @preserve (Part of the public API)
     */
function(e){return!!e&&"Skew"===e.transformType},e.isOrigin=
/**
     * Checks if the parameter is a TcHmi.Origin
     * @param {Transform | null} checkTransform
     * @returns {boolean}
     * @preserve (Part of the public API)
     */
function(e){return!!e&&"Origin"===e.transformType},e.isPerspective=
/**
     * Checks if the parameter is a TcHmi.Perspective
     * @param {Transform | null} checkTransform
     * @returns {boolean}
     * @preserve (Part of the public API)
     */
function(e){return!!e&&"Perspective"===e.transformType},(r=e.IFunction||(e.IFunction={})).isStaticValue=function(e){return e&&"StaticValue"===e.objectType},r.isSymbol=function(e){return e&&"Symbol"===e.objectType},r.isEventDataObject=function(e){return e&&"EventDataObject"===e.objectType},r.isFunctionExpression=function(e){return e&&"FunctionExpression"===e.objectType},(t=e.Endianness||(e.Endianness={}))[t.LittleEndian=0]="LittleEndian",t[t.BigEndian=1]="BigEndian",e.isComparison=function(e){var r=typeof e.value;return-1!==["==","!=","<",">","<=",">=","contains","contains not","== [ignore case]","!= [ignore case]","contains [ignore case]","contains not [ignore case]"].indexOf(e.comparator)&&("string"==r||"number"==r||"boolean"==r||e.value instanceof Date)},e.isLogicOperator=function(e){return"AND"===e.logic||"OR"===e.logic},(o=e.PartialType||(e.PartialType={}))[o.Invalid=0]="Invalid",o[o.View=1]="View",o[o.Content=2]="Content",o[o.UserControl=3]="UserControl"}(TcHmi=TcHmi||{}),function(e){var r;(r=e.System||(e.System={})).SharedResources||(r.SharedResources={})}(TcHmi=TcHmi||{}),function(t){
/**
     *
     * @preserve (Part of the public API)
     */
var e,o;e=t.Log||(t.Log={}),o=null,e.error=
/**
        * Prints out an error message in the browsers console if TCHMI_CONSOLE_LOG_LEVEL is set to 1 or higher.
        * If the message is an object it will be inspectable in most debug tools
        * @function
        * @param {string | object} message The text which will be printed out in the browsers console.
        * @preserve (Part of the public API)
        */
function(e,r){void 0===r&&(r=!1),TCHMI_CONSOLE_LOG_LEVEL<1||console&&console.error&&(!1===r&&"object"!=typeof e?console.error("["+(new Date).toISOString()+"][Error] "+e):console.error(e))},e.warn=
/**
        * Prints out a warning message in the browsers console if TCHMI_CONSOLE_LOG_LEVEL is set to 2 or higher.
        * If the message is an object it will be inspectable in most debug tools
        * @function
        * @param {string | object} message The text which will be printed out in the browsers console
        * @preserve (Part of the public API)
        */
function(e,r){void 0===r&&(r=!1),TCHMI_CONSOLE_LOG_LEVEL<2||console&&console.warn&&(!1===r&&"object"!=typeof e?console.warn("["+(new Date).toISOString()+"][Warning] "+e):console.warn(e))},e.info=
/**
        * Prints out an info message in the browsers console if TCHMI_CONSOLE_LOG_LEVEL is set to 3 or higher.
        * If the message is an object it will be inspectable in most debug tools
        * @function
        * @param {string | object} message The text which will be printed out in the browsers console
        * @preserve (Part of the public API)
        */
function(e,r){void 0===r&&(r=!1),TCHMI_CONSOLE_LOG_LEVEL<3||console&&console.info&&(!1===r&&"object"!=typeof e?console.info("["+(new Date).toISOString()+"][Info] "+e):console.info(e))},e.debug=
/**
        * Prints out a debug message in the browsers console if TCHMI_CONSOLE_LOG_LEVEL is set to 4 or higher.
        * If the message is an object it will be inspectable in most debug tools
        * @function
        * @param {string | object} message The text which will be printed out in the browsers console.
        * @preserve (Part of the public API)
        */
function(e,r){void 0===r&&(r=!1),TCHMI_CONSOLE_LOG_LEVEL<4||console&&console.log&&(!1===r&&"object"!=typeof e?console.log("["+(new Date).toISOString()+"][Debug] "+e):console.log(e))},e.performanceLog=function(e){if(!(TCHMI_CONSOLE_LOG_LEVEL<4)&&window.console&&window.console.time&&window.console.timeEnd){var r="["+(new Date).toISOString()+"][Performance] "+e;null!==o&&window.console.timeEnd(o),o="[Source=Framework, Module=TcHmi] End"!==e?(window.console.time(r),r):null}},e.__buildFirstDeepestErrorMessage=function(e){if(!e)return"";var r=function(e){if(!e)return{code:t.Errors.ERROR,message:t.Errors[t.Errors.ERROR]};if(void 0!==e.errors&&e.errors.length){var r=0;if(r<e.errors.length)return e.errors[r]}return e}(e);return t.Log.buildMessage(r)},e.buildMessage=
/**
         * Builds a formatted message of hierarchical error objects
         * @param {TcHmi.IErrorDetails} error
         * @preserve (Part of the public API)
         */
function(e){var a=function(e,r){if(!e)return"";for(var t="",o="  ",i=0,n=r;i<n;i++)o+="  ";if(e.code&&(t+="Code: "+e.code+"/0x"+e.code.toString(16)),e.message&&(t+=", Message: "+e.message),e.reason&&(t+="\n"+o+"Reason: "+e.reason),e.domain&&(t+="\n"+o+"Domain: "+e.domain),void 0!==e.errors&&e.errors.length){t+="\n"+o+"as result of: ";for(i=0,n=e.errors.length;i<n;i++)t+=a(e.errors[i],r+1)}return t};return a(e,0)}}(TcHmi=TcHmi||{}),function(r){var t,e=(t=Array,__extends(o,t),o.prototype.first=function(e){for(var r=0,t=this.length;r<t;r++)if(e(this[r]))return this[r];throw new Error("Array does not contain elements")},o.prototype.firstOrDefault=function(e,r){void 0===r&&(r=null);for(var t=0,o=this.length;t<o;t++)if(e(this[t]))return this[t];return null},o.prototype.remove=function(e){for(var r=0,t=this.length;r<t;r++)if(this[r]===e)return this.splice(r,1),!0;return!1},o.prototype.addRange=function(e){for(var r=0,t=e.length;r<t;r++)this.push(e[r])},o.prototype.clearAll=function(){for(;0<this.length;)this.pop()},o.prototype.findIndex=function(e){for(var r=0,t=this.length;r<t;r++)if(e(this[r],r,this))return r;return-1},o);function o(){var e=t.call(this)||this;return e.__proto__!==r.List.prototype&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o.prototype):e.__proto__=o.prototype),e}r.List=e}(TcHmi=TcHmi||{}),function(o){var e,r,t,i;function n(){}e=o.Engineering||(o.Engineering={}),n.add=function(e,r,t){o.System.Services.Engineering.errorPane&&o.System.Services.Engineering.errorPane.add(e,r,t)},n.remove=function(e){o.System.Services.Engineering.errorPane&&o.System.Services.Engineering.errorPane.remove(e)},i=n,e.ErrorPane=i,r=i=e.ErrorPane||(e.ErrorPane={}),(t=r.MessageType||(r.MessageType={}))[t.Message=0]="Message",t[t.Error=1]="Error",t[t.Warning=2]="Warning",t[t.Information=3]="Information"}(TcHmi=TcHmi||{}),function(p){var e,f,r,S,t;function o(e){for(var r=e[0].getAttribute("data-tchmi-target-user-control"),t=e[0].getAttribute("data-tchmi-type"),o={},i=r?p.System.Caches.partialCompositeConfigCache.get(tchmi_path(r.replace(".usercontrol",".usercontrol.json"))):null,n=e[0].children,a=0,s=n.length;a<s;a++){var l=n[a];if(l.hasAttribute("data-tchmi-target-attribute")&&"application/json"===l.getAttribute("type")){var c=l.getAttribute("data-tchmi-target-attribute");if(null!==(g={name:c,value:p.ValueConverter.toObject(l.innerHTML,null),valueType:S.Complex,type:f.General,descr:p.System.Services.controlManager.getDescriptionAttributeByName(t,c)}).descr&&(g.type=f.Control),null!=i&&void 0!==i.parameters&&null!==i.parameters)for(var u=0,d=i.parameters.length;u<d;u++)i.parameters[u].name===g.name&&(g.descr=i.parameters[u],null!==g.descr&&(g.type=f.UserControlParameter));o[g.name]=g}}for(a=0,s=e.length;a<s;a++)for(var m=e[a],_=m.attributes.length,h=0;h<_;h++){var g,E=m.attributes[h];if(null!==(g={name:E.name,value:E.value,type:f.Invalid,valueType:S.Simple,descr:p.System.Services.controlManager.getDescriptionAttributeByName(t,E.name)}).descr&&(g.type=f.Control),null!=i&&void 0!==i.parameters&&null!==i.parameters)for(u=0,d=i.parameters.length;u<d;u++)i.parameters[u].name===g.name&&(g.descr=i.parameters[u],null!==g.descr&&(g.type=f.UserControlParameter));o[g.name]=g}return o}e=p.System||(p.System={}),(r=f=e.ControlAttributeType||(e.ControlAttributeType={}))[r.Invalid=0]="Invalid",r[r.General=1]="General",r[r.Control=2]="Control",r[r.UserControlParameter=3]="UserControlParameter",(t=S=e.ControlAttributeValueType||(e.ControlAttributeValueType={}))[t.Invalid=0]="Invalid",t[t.Simple=1]="Simple",t[t.Complex=2]="Complex",e.resolveControlHierarchy=function(e,r){void 0===r&&(r=null);var t=[];if("function"==typeof e.getChildren)for(var o=e.getChildren(),i=0,n=o.length;i<n;i++)t.push(p.System.resolveControlHierarchy(o[i],e));return{ctrl:e,children_hierarchy:t,pctrl:r}},e.resolveAttributesFromControlObject=function(e){return o(e.getPcElement())},e.resolveAttributesFromControlElement=o,e.resolveElementStyleDimensions=function(e){var r=e.clone(),t=$("<div></div>");t.css("display","none"),t.append(r),p.System.SharedResources.jqBody.append(t);var o=window.getComputedStyle(r[0],null),i={width:o.width?o.width:"auto",height:o.height?o.height:"auto",top:o.top?o.top:"auto",left:o.left?o.left:"auto",right:o.right?o.right:"auto",bottom:o.bottom?o.bottom:"auto"};return t.remove(),i},e.toCamelCase=function(e){var r="";if(null==e||""===e)return r;for(var t=e,o=0,i=t.length;o<i;o++){var n=t[o];if(0!==o)"-"===t[o-1]?r+=n.toUpperCase():"-"!==n&&(r+=n);else r+=n.toUpperCase()}return r},e.toDashCase=function(e){var r="";if(null==e||""===e)return r;for(var t=e,o=0,i=t.length;o<i;o++){var n=t[o];"-"!==n&&n.toUpperCase()===n&&0<o?r+="-"+n:r+=n}return r.toLowerCase()},e.tchmi_utf8str_base64decode=function(e){try{return decodeURIComponent(Array.prototype.map.call(window.atob(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){return null}},e.tchmi_utf8str_base64encode=function(e){try{return window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,r){return String.fromCharCode(parseInt("0x"+r,16))}))}catch(e){return null}},e.resolveSymbolPathToTokenArray=function(e){for(var r=[],t=e.split("::"),o=0,i=t.length;o<i;o++)for(var n=t[o],a="",s=0,l=n.length;s<l;s++){var c=n[s];"["===c&&0<a.length?(r.push(a),a="",a+=c):"]"===c?(a+=c,r.push(a),a=""):(a+=c,s===l-1&&0<a.length&&r.push(a))}return r},e.createES5Map=function(){return"function"==typeof Map?new Map:{get:function(){},set:function(){},has:function(){},clear:function(){},delete:function(){},forEach:function(){},size:0}},e.__unload=function(){p.EventProvider.raise("System.onUnload")}}(TcHmi=TcHmi||{}),function(e){var r,t;r=e.System||(e.System={}),function(){var a=acorn.tokTypes,i=acorn.tokContexts;i.symbolExpressionOpenTag=new acorn.TokContext("%tag",!1),i.symbolExpressionCloseTag=new acorn.TokContext("%/tag",!1),i.symbolExpressionExpression=new acorn.TokContext("%tag%...%/tag%",!0,!0),a.symbolExpressionTagName=new acorn.TokenType("symbolExpressionTagName"),a.symbolExpressionSymbolName=new acorn.TokenType("symbolExpressionSymbolName",{beforeExpr:!0}),a.symbolExpressionOpenTagStart=new acorn.TokenType("symbolExpressionOpenTagStart"),a.symbolExpressionOpenTagEnd=new acorn.TokenType("symbolExpressionOpenTagEnd"),a.symbolExpressionCloseTagStart=new acorn.TokenType("symbolExpressionCloseTagStart"),a.symbolExpressionCloseTagEnd=new acorn.TokenType("symbolExpressionCloseTagEnd"),a.symbolExpressionOpenTagStart.updateContext=function(){this.context.push(i.symbolExpressionExpression),this.context.push(i.symbolExpressionOpenTag),this.exprAllowed=!1},a.symbolExpressionOpenTagEnd.updateContext=function(e){this.context.pop(),this.exprAllowed=!0},a.symbolExpressionCloseTagStart.updateContext=function(){this.context.pop(),this.context.push(i.symbolExpressionCloseTag),this.exprAllowed=!1},a.symbolExpressionCloseTagEnd.updateContext=function(e){this.context.pop(),this.exprAllowed=!1};var e=acorn.Parser.prototype;e.symbolExpression_readToken=function(){for(var e="",r=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated BEX contents");var t=this.input.charCodeAt(this.pos);switch(t){case 37:return this.pos===this.start?this.getTokenFromCode(t):(e+=this.input.slice(r,this.pos),this.finishToken(a.symbolExpressionSymbolName,e));default:++this.pos}}},e.symbolExpression_readWord=function(){for(var e,r=this.pos;e=this.input.charCodeAt(++this.pos),acorn.isIdentifierChar(e)||45===e;);return this.finishToken(a.symbolExpressionTagName,this.input.slice(r,this.pos))},e.symbolExpression_parseString=function(){var e=this.value;return this.next(),e},e.symbolExpression_parseOpeningTagName=function(){var e=this.symbolExpression_parseString();return this.expect(a.symbolExpressionOpenTagEnd),e},e.symbolExpression_parseClosingTagName=function(){var e=this.symbolExpression_parseString();return this.expect(a.symbolExpressionCloseTagEnd),e},e.symbolExpression_parseElementAt=function(e,r){var t=this.startNodeAt(e,r),o="",i=this.symbolExpression_parseOpeningTagName(),n="";e:for(;;)switch(this.type){case a.symbolExpressionOpenTagStart:this.next();break;case a.symbolExpressionSymbolName:o=this.symbolExpression_parseString();break;case a.symbolExpressionCloseTagStart:if(this.next(),this.eat(a.slash)){n=this.symbolExpression_parseClosingTagName();break e}default:this.unexpected()}return n!==i&&this.raise(t.start,"Expected corresponding closing tag for %/"+i+"%"),t.passAsSymbol=!1,t.expression="%"+i+"%"+o+"%/"+n+"%",this.options.plugins.symbolExpression.onSymbol&&this.options.plugins.symbolExpression.onSymbol(t),this.finishNode(t,"SymbolExpression")},e.symbolExpression_parseElement=function(){var e=this.start,r=this.startLoc;return this.next(),this.symbolExpression_parseElementAt(e,r)},acorn.plugins.symbolExpression=function(e,r){var t,o;r&&("object"!=typeof r&&(r={}),Array.isArray(r.onSymbol)&&(t=r.onSymbol,r.onSymbol=function(e){return t.push(e)}),Array.isArray(r.onCallExpression)&&(o=r.onCallExpression,r.onSymbol=function(e){return o.push(e)}),e.extend("parseExprAtom",function(r){return function(e){return this.type===a.symbolExpressionSymbolName?this.parseLiteral(this.value):this.type===a.symbolExpressionOpenTagStart?this.symbolExpression_parseElement():r.call(this,e)}}),e.extend("readToken",function(t){return function(e){var r=this.curContext();if(r===i.symbolExpressionExpression)return 37===e?(++this.pos,this.finishToken(a.symbolExpressionCloseTagStart)):this.symbolExpression_readToken();if(r===i.symbolExpressionOpenTag||r===i.symbolExpressionCloseTag){if(acorn.isIdentifierStart(e))return this.symbolExpression_readWord();if(37===e)return++this.pos,r===i.symbolExpressionCloseTag?this.finishToken(a.symbolExpressionCloseTagEnd):this.finishToken(a.symbolExpressionOpenTagEnd)}return 37===e&&this.exprAllowed?(++this.pos,this.finishToken(a.symbolExpressionOpenTagStart)):t.call(this,e)}}),e.extend("updateContext",function(r){return function(e){return r.call(this,e)}}),e.extend("finishNode",function(t){return function(e,r){return"CallExpression"===r&&this.options.plugins.symbolExpression.onCallExpression&&this.options.plugins.symbolExpression.onCallExpression(e),t.call(this,e,r)}}))}}((t=r.Parser||(r.Parser={})).SymbolExpressionExtension||(t.SymbolExpressionExtension={}))}(TcHmi=TcHmi||{}),function(t){
/**
    * Provides functions for checking rights
    * @class Access
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(
/**
        * Checks if an right is allowed for the current user on this control or its parents
        * Rules for granting access:
        *      - Designer Mode Master => true
        *
        *      - Server Auth is not restricted (IsAuthRequired == false in Server) => TRUE
        *
        *      - Server Auth is not known right now => null
        *      - Server Auth loading error => false
        *
        *      - On this control: 1 Group  has  ALLOW => TRUE
        *      - On this control: 0 Groups have ALLOW, but 1 Group has DENY => FALSE
        *      - On this control: 0 Groups have ALLOW, 0 Groups have DENY => Ask Parent
        *
        *      - use control default of the bottom most control with this right. tchmi-view has operate/observe set to TRUE
        *      - control has no Parent (should not be possible) => FALSE
        *
        * @param {TcHmi.Controls.System.baseTcHmiControl} control Control to check
        * @param {string} accessright name of the access right
        * @returns true/false or null if the state is not known right now
        * @preserve (Part of the public API)
        */
r.checkAccess=function(e,r){return e instanceof t.Controls.System.baseTcHmiControl!=0&&"string"==typeof r&&t.System.Services.accessManager.checkAccess(e,r)},r);function r(){}t.Access=e}(TcHmi=TcHmi||{}),function(t){var e=(
/**
         * Creates a new animation
         * @function
         * @param {string} controlName       The name of the control for which the animation is intendend.
         * @param {string} selector          A CSS selector to identify the element inside the control to animate.
         * @preserve (Part of the public API)
         */
r.create=function(e,r){return void 0===r&&(r=""),t.System.Services.animationProvider.create(e,r)},r);function r(){}t.AnimationProvider=e;var o,i,n=(
/**
         * Returns the name of the control the animation is intended for.
         * @function
         * @returns {string} The name of the control.
         * @preserve (Part of the public API)
         */
a.prototype.controlName=function(){return this.__controlName},
/**
         * Returns the selector of the element to animate.
         * @function
         * @returns {string} The selector.
         * @preserve (Part of the public API)
         */
a.prototype.selector=function(){return this.__selector},
/**
         * Returns the name of the animation.
         * @function
         * @returns {string} The name of the animation.
         * @preserve (Part of the public API)
         */
a.prototype.animationName=function(){return this.__animationName},
/**
         * Returns the state of the animation.
         * @function
         * @returns {Status} The state.
         * @preserve (Part of the public API)
         */
a.prototype.state=function(){return this.__state},a.prototype.addKeyframe=function(e,r,t){if(!this.__configAllowed())return this;if(1===arguments.length){if(e.progressPoint<0||1<e.progressPoint)throw new Error("Argument out of range: progressPoint must be between 0 and 1 inclusive.");this.__keyframes.push(e)}else if(2===arguments.length&&"number"==typeof r){if(r<0||1<r)throw new Error("Argument out of range: progressPoint must be between 0 and 1 inclusive.");var o={styles:{},progressPoint:r};for(var i in e)e.hasOwnProperty(i)&&("string"==typeof e[i]?o.styles[i]=[e[i]]:o.styles[i]=e[i]);this.__keyframes.push(o)}else if("string"==typeof e&&("string"==typeof r||Array.isArray(r))){if(void 0===t||t<0||1<t)throw new Error("Argument out of range: progressPoint must be between 0 and 1 inclusive.");(o={styles:{},progressPoint:t}).styles[e]="string"==typeof r?[r]:r,this.__keyframes.push(o)}return this},
/**
         * Removes all keyframes.
         * @function
         * @preserve (Part of the public API)
         */
a.prototype.clearKeyframes=function(){return this.__configAllowed()&&(this.__keyframes=[]),this},
/**
         * Reverses the keyframes by subtracting the progressPoint from 1 and setting that as the new progressPoint.
         * @preserve (Part of the public API)
         */
a.prototype.reverseKeyframes=function(){return this.__keyframes.forEach(function(e){return e.progressPoint=1-e.progressPoint}),this},
/**
         * Gets the keyframes of this animation.
         * @function
         * @returns {Animation.Keframe[]} The keyframes.
         * @preserve (Part of the public API)
         */
a.prototype.keyframes=function(){return this.__keyframes},a.prototype.duration=function(e){return void 0===e?this.__duration:(this.__configAllowed()&&(this.__duration=null===e?0:e),this)},a.prototype.delay=function(e){return void 0===e?this.__delay:(this.__configAllowed()&&(this.__delay=null===e?0:e),this)},a.prototype.iterationCount=function(e){return void 0===e?this.__iterationCount:(this.__configAllowed()&&(this.__iterationCount=null===e?1:e),this)},a.prototype.direction=function(e){return void 0===e?this.__direction:(this.__configAllowed()&&(this.__direction=null===e?"normal":e),this)},a.prototype.timingFunction=function(e){return void 0===e?this.__timingFunction:(this.__configAllowed()&&(this.__timingFunction=null===e?"ease":e),this)},a.prototype.fillMode=function(e){return void 0===e?this.__fillMode:(this.__configAllowed()&&(this.__fillMode=null===e?"none":e),this)},a.prototype.cleanup=function(e){return void 0===e?this.__cleanup:(this.__cleanup=null!==e&&e,this.__state===a.Status.ENDED&&null!==this.__animationController&&this.__animationController.cleanup(),this)},a.prototype.useCss=function(e){return void 0===e?this.__canUseCss()&&this.__useCss:(this.__configAllowed()&&(this.__useCss=null===e||e),this)},
/**
         * Registers an event handler for one of the events animationstart, animationend or animationiteration.
         * @function
         * @param {string} name     The name of the event.
         * @param callback          The callback function.
         * @preserve (Part of the public API)
         */
a.prototype.registerEventHandler=function(e,r){return this.__eventHandlers.push({name:e,callback:r}),this},
/**
         * Unregisters a previously registered event handler.
         * @function
         * @param {string} name     The name of the event.
         * @param callback          The callback function to unregister.
         * @preserve (Part of the public API)
         */
a.prototype.unregisterEventHandler=function(r,t){return this.__eventHandlers=this.__eventHandlers.filter(function(e){return!(e.name===r&&(void 0===t||e.callback===t))}),this},
/**
         * Gets all event handlers
         * @function
         * @returns The event handlers.
         * @preserve (Part of the public API)
         */
a.prototype.eventHandlers=function(){return this.__eventHandlers},
/**
         * Run the animation.
         * @function
         * @preserve (Part of the public API)
         */
a.prototype.run=function(){return 0===this.__keyframes.length?t.Log.error("[Source=Framework, Module=TcHmi.Animation] This animation has no keyframes defined."):0===this.__keyframes.filter(function(e){return 0===e.progressPoint}).length?t.Log.error("[Source=Framework, Module=TcHmi.Animation] This animation has no start keyframe with progressPoint 0 defined."):0===this.__keyframes.filter(function(e){return 1===e.progressPoint}).length?t.Log.error("[Source=Framework, Module=TcHmi.Animation] This animation has no end keyframe with progressPoint 1 defined."):(null!==this.__animationController&&this.__animationController.isValid()||(this.__animationController=t.System.Services.animationProvider.createAnimationController(this,this.__stateUpdater)),this.__animationController.run()),this},
/**
         * Pause the animation.
         * @function
         * @preserve (Part of the public API)
         */
a.prototype.pause=function(){return null!==this.__animationController&&this.__animationController.pause(),this},
/**
         * Cancels the animation and writes the last keyframe styles into the element CSS.
         * @function
         * @preserve (Part of the public API)
         */
a.prototype.skip=function(){return null!==this.__animationController&&this.__animationController.skip(),this},
/**
         * Resets the animation. This is an asynchronous operation.
         * @function
         * @param callback The function to call when the animation has been reset.
         * @preserve (Part of the public API)
         */
a.prototype.reset=function(e){return null!==this.__animationController&&this.__animationController.reset(e),this},a.prototype.__canUseCss=function(){return"string"==typeof this.__timingFunction},a.prototype.__configAllowed=function(){return this.__state===a.Status.CONFIGURE||this.__state===a.Status.ENDED||(t.Log.warn("[Source=Framework, Module=TcHmi.AnimationProvider] Configurating an animation is only allowed when it has the state CONFIGURE or ENDED."),!1)},a);
/**
         * Creates a new animation
         * @constructor
         * @param {string} controlName      The name of the control for which the animation is intendend.
         * @param {string} selector         A CSS selector to identify the element inside the control to animate.
         * @preserve (Part of the public API)
        */
function a(e,r){var t=this;this.__keyframes=[],this.__duration=0,this.__delay=0,this.__iterationCount=1,this.__direction="normal",this.__timingFunction="ease",this.__fillMode="none",this.__cleanup=!1,this.__useCss=!0,this.__eventHandlers=[],this.__state=a.Status.CONFIGURE,this.__stateUpdater=function(e){return t.__state=e},this.__animationController=null,this.__controlName=e,this.__selector=r,this.__animationName="anim-"+tchmi_create_guid()}t.Animation=n,o=n=t.Animation||(t.Animation={}),(i=o.Status||(o.Status={}))[i.CONFIGURE=0]="CONFIGURE",i[i.INITIALIZED=1]="INITIALIZED",i[i.RUNNING=2]="RUNNING",i[i.PAUSED=3]="PAUSED",i[i.ENDED=4]="ENDED"}(TcHmi=TcHmi||{}),function(n){
/**
     * Provides methods to read base64 encoded data.
     * @class Base64BinaryReader
     * @memberOf TcHmi
     * @preserve (Part of the public API)
     */
var e=(r.prototype.__getChunk=function(e){if(this.__offset+e>this.__data.length)throw new RangeError("Trying to read "+e+" bytes from offset "+this.__offset+" exceeds the length of the data.");var r=this.__data.slice(this.__offset,this.__offset+e);return this.__offset+=e,this.__endianness===n.Endianness.BigEndian&&(r=r.reverse()),r},r.prototype.__readInteger=function(e,r){for(var t=this.__getChunk(e),o=0,i=0,n=t.length;i<n;i++){var a=255&t[i];i<4?o=(o|a<<8*i)>>>0:o+=a*Math.pow(256,i)}if(r){var s=Math.pow(2,8*e-1);e<=4?o=(o&~s)-((o&s)>>>0):128==(128&t[t.length-1])&&(o-=2*s)}return o},r.prototype.__readFloatingPointNumber=function(e){var r,t,o=this.__getChunk(e);switch(e){case 4:r=8,t=23;break;case 8:r=11,t=52}for(var i=Math.pow(2,r-1)-1,n=[{value:0,bitsToRead:t},{value:0,bitsToRead:r},{value:0,bitsToRead:1}],a=0,s=0,l=0;l<e||n[a].bitsToRead<0;l++){var c=0;n[a].bitsToRead<0?(c=8+n[a].bitsToRead,l--,a++,s=0):0===n[a].bitsToRead&&(a++,s=0);var u=(255&o[l])>>>c;n[a].bitsToRead<8&&(u&=Math.pow(2,n[a].bitsToRead)-1),s<=24?n[a].value=(n[a].value|u<<s)>>>0:n[a].value+=u*Math.pow(2,s),s+=8-c,n[a].bitsToRead-=8-c}var d=n[0].value,m=n[1].value,_=n[2].value;return m===Math.pow(2,r)-1?0<d?NaN:1/0*(1===_?-1:1):0===m&&0===d?0*(1===_?-1:1):0===m?(1===_?-1:1)*d*Math.pow(2,1-i-t):(1===_?-1:1)*(1+d/Math.pow(2,t))*Math.pow(2,m-i)},
/**
         * Reads a boolean value.
         * @preserve (Part of the public API)
         */
r.prototype.readBoolean=function(){return 0!==this.__readInteger(1,!1)},
/**
         * Reads a single byte of data.
         * @preserve (Part of the public API)
         */
r.prototype.readByte=function(){return this.__readInteger(1,!1)},
/**
         * Reads a signed byte.
         * @preserve (Part of the public API)
         */
r.prototype.readSByte=function(){return this.__readInteger(1,!0)},
/**
         * Reads a signed 16-bit integer.
         * @preserve (Part of the public API)
         */
r.prototype.readInt16=function(){return this.__readInteger(2,!0)},
/**
         * Reads an unsigned 16-bit integer.
         * @preserve (Part of the public API)
         */
r.prototype.readUInt16=function(){return this.__readInteger(2,!1)},
/**
         * Reads a signed 32-bit integer.
         * @preserve (Part of the public API)
         */
r.prototype.readInt32=function(){return this.__readInteger(4,!0)},
/**
         * Reads an unsigned 32-bit integer.
         * @preserve (Part of the public API)
         */
r.prototype.readUInt32=function(){return this.__readInteger(4,!1)},
/**
         * Reads a single precision floating point number.
         * @preserve (Part of the public API)
         */
r.prototype.readFloat=function(){return this.__readFloatingPointNumber(4)},
/**
         * Reads a double precision floating point number.
         * @preserve (Part of the public API)
         */
r.prototype.readDouble=function(){return this.__readFloatingPointNumber(8)},
/**
         * Reads a string. Will read until a zero byte is encountered, or until the specified length has been reached, or, if no length has been specified, until the end of the data.
         * @param {number} length The length of the string to read in bytes.
         * @preserve (Part of the public API)
         */
r.prototype.readString=function(e){var r;if(void 0!==e){if(e<0)throw new RangeError("Length of the string to read must be positive.");if(this.__offset+e>this.__data.length)throw new RangeError("Trying to read "+e+" bytes from offset "+this.__offset+" exceeds the length of the data.");r=this.__data.slice(this.__offset,this.__offset+e)}else r=this.__data.slice(this.__offset);var t=this.__stringEncodings["UTF-8"].decode(r,this.__endianness);return this.__offset+=void 0!==e?e:t.byteCount,this.__getStringFromCodePoints(t.codePoints)},r.prototype.__getStringFromCodePoints=function(e){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];if(i<=65535)r.push(i);else{var n=55296+((i-=65536)>>10),a=i%1024+56320;r.push(n,a)}}return String.fromCharCode.apply(String,r)},
/**
         *
         * @preserve (Part of the public API)
         */
r.prototype.getLength=function(){return this.__data.length},
/**
         *
         * @preserve (Part of the public API)
         */
r.prototype.getOffset=function(){return this.__offset},
/**
         *
         * @preserve (Part of the public API)
         */
r.prototype.setOffset=function(e){var r=Math.floor(n.ValueConverter.toNumber(e,0));this.__offset=r},r);
/**
         * Creates a new Base64BinaryReader.
         * @constructor
         * @param {string} data          The base64 encoded string to read from.
         * @param endianness    Whether the encoded data uses little endian (default) or big endian to store numbers.
         * @preserve (Part of the public API)
         */
function r(e,r){void 0===r&&(r=n.Endianness.LittleEndian),this.__offset=0,this.__stringEncodings={"UTF-8":{decode:function(e,r){for(var t=[],o=0,i=e.length;o<i;o++){var n=e[o];if(0===n)return{codePoints:t,byteCount:o+1};if(n<=127)t.push(n);else if(194<=n&&n<=244){for(var a=1,s=31,l=32;0<l;)0<(n&l)?(a++,s>>>=1,l>>>=1):l=0;var c=n&s,u=o+a;if(i<=u)c=65533;else for(;o<u;){var d=e[++o];if(d<128||191<d){c=65533,o--;break}c=c<=67108863?(c<<6|63&d)>>>0:c*Math.pow(2,6)+(63&d)}t.push(c)}else t.push(65533)}return{codePoints:t,byteCount:e.length}}}};var t=tchmi_base64decode(e);if(null===t)throw new Error('Could not decode string "'+e+'" as base64.');this.__data=[];for(var o=0,i=t.length;o<i;o++)this.__data.push(t.charCodeAt(o));this.__endianness=r}n.Base64BinaryReader=e}(TcHmi=TcHmi||{}),function(t){
/**
     * Provides methods to write base64 encoded data.
     * @class Base64BinaryWriter
     * @memberOf TcHmi
     * @preserve (Part of the public API)
     */
var e=(r.prototype.__addChunk=function(e){if(this.__data.length+e.length>this.__length)throw new RangeError("Trying to write "+e.length+" bytes exceeds the length of the data.");this.__endianness===t.Endianness.BigEndian&&(e=e.reverse()),this.__data=this.__data.concat(e)},r.prototype.__checkIntegerBounds=function(e,r,t){if(e%1!=0)return!1;var o=Math.pow(2,8*r)-1,i=t?-Math.ceil(o/2):0;return i<=e&&e<=o+i},r.prototype.__writeInteger=function(e,r){for(var t=[],o=0;o<r;o++)t.push(255&e),r-o<=4?e>>>=8:e=Math.floor(e/256);this.__addChunk(t)},r.prototype.__writeFloatingPointNumber=function(e,r){var t,o;switch(r){case 4:t=8,o=23;break;case 8:t=11,o=52}var i,n,a=Math.pow(2,t-1)-1,s=e<0?1:0;if(isFinite(e))if(0===e)s=1/e==-1/0?1:0,n=i=0;else{e=Math.abs(e);for(var l=Math.floor(e),c=e-l,u=0,d=l;0<d;)u++,d<=4294967295?d>>>=1:d=Math.floor(d/2);n=0<l?l-Math.pow(2,u-1):0;var m=0<u?u-1:0;o<m&&(n<=4294967295?n>>>=m-o:n=Math.floor(n/Math.pow(2,m-o)),m=o);var _=-1;for(d=c,E=0;m<o;){var h=1<=(d*=2)?1:0;a-1<=E&&-1===_&&(_=E),h&&(d--,-1===_&&(_=E,0===u&&(h=0))),n=m<32?(n<<1|h)>>>0:2*n+h,(0<u||-1<_||0==c)&&m++,E++}i=0<u?u-1:-_-1,i+=a;var g=Math.pow(2,t)-1;i<1?i=0:g-1<i&&(i=g,n=0)}else{for(var E=i=0;E<t;E++)i=i<<1|1;n=isNaN(e)?1:0}var p=[{value:n,length:o},{value:i,length:t},{value:s,length:1}],f=[],S=0;for(E=0;E<r||p[S].length<0;E++){var v=0;p[S].length<0?(v=8+p[S].length,E--,S++):0===p[S].length&&S++,void 0===f[E]&&(f[E]=0),f[E]|=p[S].value<<v&255,p[S].length<=32?p[S].value=p[S].value>>>8-v:p[S].value=Math.floor(p[S].value/Math.pow(2,8-v)),p[S].length-=8-v}this.__addChunk(f)},
/**
         * Writes a boolean value.
         * @param {boolean} value The boolean value to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeBoolean=function(e){return this.writeByte(e?1:0),this},
/**
         * Writes a single byte of data.
         * @param {number} value The byte to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeByte=function(e){if(!this.__checkIntegerBounds(e,1,!1))throw new RangeError("The value "+e+" does not fit into a byte.");return this.__writeInteger(e,1),this},
/**
         * Writes a signed byte.
         * @param {number} value The byte to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeSByte=function(e){if(!this.__checkIntegerBounds(e,1,!0))throw new RangeError("The value "+e+" does not fit into a signed byte.");return this.__writeInteger(e,1),this},
/**
         * Writes a signed 16-bit integer.
         * @param {number} value The number to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeInt16=function(e){if(!this.__checkIntegerBounds(e,2,!0))throw new RangeError("The value "+e+" does not fit into an int16.");return this.__writeInteger(e,2),this},
/**
         * Writes an unsigned 16-bit integer.
         * @param {number} value The number to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeUInt16=function(e){if(!this.__checkIntegerBounds(e,2,!1))throw new RangeError("The value "+e+" does not fit into an uint16.");return this.__writeInteger(e,2),this},
/**
         * Writes a signed 32-bit integer.
         * @param {number} value The number to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeInt32=function(e){if(!this.__checkIntegerBounds(e,4,!0))throw new RangeError("The value "+e+" does not fit into a int32.");return this.__writeInteger(e,4),this},
/**
         * Writes an unsigned 32-bit integer.
         * @param {number} value The number to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeUInt32=function(e){if(!this.__checkIntegerBounds(e,4,!1))throw new RangeError("The value "+e+" does not fit into an uint32.");return this.__writeInteger(e,4),this},
/**
         * Writes a single precision floating point number.
         * @param {number} value The number to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeFloat=function(e){return this.__writeFloatingPointNumber(e,4),this},
/**
         * Writes a double precision floating point number.
         * @param {number} value The number to write.
         * @preserve (Part of the public API)
         */
r.prototype.writeDouble=function(e){return this.__writeFloatingPointNumber(e,8),this},
/**
         * Writes a string.
         * @param {string} value The string to write.
         * @param {number} length (Optional) The length of the string to write. If the string is shorter, the remaining space is filled with 0.
         * @preserve (Part of the public API)
         */
r.prototype.writeString=function(e,r){var t=this.__stringEncodings["UTF-8"].encode(this.__getCodePointsFromString(e),this.__endianness);if(void 0!==r){for(;t.length<r;)t.push(0);if(t.length>r)throw new RangeError("The specified string does not fit into the specified length.")}if(this.__data.length+t.length>this.__length)throw new RangeError("Trying to write "+t.length+" bytes exceeds the length of the data.");return this.__data=this.__data.concat(t),this},r.prototype.__getCodePointsFromString=function(e){for(var r=[],t=0,o=e.length;t<o;t++){var i=e.charCodeAt(t);if(55296<=i&&i<=56319&&t<o-1){var n=e.charCodeAt(t+1);56320<=n&&n<=57343?(r.push(1024*(i-55296)+n-56320+65536),t++):r.push(i)}else r.push(i)}return r},
/**
         * Returns the base64 encoded string. If not enough data was written to fill the length the data should have, the rest is filled up with zeros.
         * @preserve (Part of the public API)
         */
r.prototype.getEncodedString=function(){for(var e=this.__data.length;isFinite(this.__length)&&this.__data.length<this.__length;)this.__data.push(0);var r=String.fromCharCode.apply(String,this.__data);return this.__data.length=e,tchmi_base64encode(r)},
/**
         * Returns the length of the data that has been written.
         * @preserve (Part of the public API)
         */
r.prototype.getLength=function(){return this.__data.length},r);
/**
         * Creates a new Base64BinaryWriter.
         * @param endianness    Whether to use little endian (default) or big endian when encoding numbers.
         * @param {number} length        The desired length of the data. If this parameter is omitted the data will be expanded dynamically.
         * @preserve (Part of the public API)
         */
function r(e,r){void 0===e&&(e=t.Endianness.LittleEndian),this.__data=[],this.__stringEncodings={"UTF-8":{encode:function(e,r){for(var t=[],o=0,i=e.length;o<i;o++){var n=e[o];if(n<=127)t.push(n);else{for(var a=[],s=192,l=31;0<n&&a.length<=6;)a.push(128|63&n),n<=4294967295?n>>>=6:n=Math.floor(n/Math.pow(2,6)),n<=l?(a.push(s|n&l),n=0):(s=128|s>>>1,l>>>=1);t=t.concat(a.reverse())}}return t}}},this.__endianness=e,this.__length=void 0!==r?r:1/0}t.Base64BinaryWriter=e}(TcHmi=TcHmi||{}),function(n){
/**
    * Reserved
    * @class Binding
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(a.__getFuncName=function(e,r){var t=null;for(var o in r)if(r[o]===e){t=o;break}return t},
/**
         * Creates a binding between a symbol and a control attribute setter function.
         * @function createEx
         * @param {string} expr The target symbol expression.
         * @param {(value: any) => void} fn The target function as prototype reference.
         * @param {fnThis: TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
         * @preserve (Part of the public API)
         */
a.create=function(e,r,t){var o=a.__getFuncName(r,t);null!==o&&a.createEx(e,o,t)},
/**
         * Creates a binding between a symbol and a control attribute setter function by name.
         * @function create
         * @param {string} expr The target symbol expression.
         * @param {string} fn The name of the control setter function.
         * @param {TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
         * @preserve (Part of the public API)
         */
a.createEx=function(e,r,t){var o=n.System.Services.controlManager.getAttributeByPropertySetterName(t,r);o?n.System.Services.bindingManager.createBinding(e,o.propertyName,t):n.Log.error("[Source=Framework, Module=TcHmi.Binding] The attribute with the setter "+r+" is not included in the description.json of "+t.getType()+". Creating a binding with this attribute failed.")},
/**
        * Creates a binding between a symbol and a control attribute setter function by name of property.
        * @function createEx2
        * @param {string} expr The target symbol expression.
        * @param {string} propertyName The name of the control property.
        * @param {TcHmi.Controls.System.baseTcHmiControl} control
        * @preserve (Part of the public API)
        */
a.createEx2=function(e,r,t){n.System.Services.bindingManager.createBinding(e,r,t)},
/**
         * Removes a binding between a symbol and a control attribute setter function.
         * @function remove
         * @param {string} expr [OBSOLETE] The target symbol expression.
         * @param {(value: any) => void} fn
         * @param {TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
         * @param {boolean} bReset [Optional] If set to false the setter will not resetted with null.
         * @preserve (Part of the public API)
         */
a.remove=function(e,r,t,o){void 0===o&&(o=!0);var i=a.__getFuncName(r,t);null!==i&&a.removeEx(e,i,t,o)},
/**
         * Removes a binding between a symbol and a control attribute setter function.
         * @function remove
         * @param {string} expr [OBSOLETE] The target symbol expression.
         * @param {string} fn The name of the control setter function.
         * @param {TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
         * @param {boolean} bReset [Optional] If set to false the setter will not resetted with null.
         * @preserve (Part of the public API)
         */
a.removeEx=function(e,r,t,o){void 0===o&&(o=!0);var i=n.System.Services.controlManager.getAttributeByPropertySetterName(t,r);i?a.removeEx2(e,i.propertyName,t,o):n.Log.error("[Source=Framework, Module=TcHmi.Binding] The attribute with the setter "+r+" is not included in the description.json of "+t.getType()+". Removing a binding with this attribute failed.")},
/**
        * Removes a binding between a symbol and a control attribute setter function by name of property.
        * @function remove
        * @param {string} expr [OBSOLETE] The target symbol expression.
        * @param {string} propertyName The name of the control attribute property.
        * @param {TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
        * @param {boolean} bReset [Optional] If set to false the setter will not resetted with null.
        * @preserve (Part of the public API)
        */
a.removeEx2=function(e,r,t,o){void 0===o&&(o=!0),n.System.Services.bindingManager.removeBinding(r,t,o)},
/**
         * Returns true if a symbol is bound to the target control property.
         * @param {string} propertyName The name of the control attribute property.
         * @param {TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
         * @preserve (Part of the public API)
         */
a.exists=function(e,r){return!!a.resolve(e,r)},
/**
         * Returns the symbol expression of a binding as string or null if no symbol is bound to the target control property.
         * @param {string} propertyName The name of the control attribute property.
         * @param {TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
         * @preserve (Part of the public API)
         */
a.resolve=function(e,r){var t=n.System.Services.bindingManager.getBinding(e,r);if(t){var o=t.getSymbol();if(o)return o.getExpression().toString()}return null},
/**
         * Returns the symbol expression of a binding as SymbolExpression object or null if no symbol is bound to the target control property.
         * @param {string} propertyName The name of the control attribute property.
         * @param {TcHmi.Controls.System.baseTcHmiControl} control The target control instance.
         * @preserve (Part of the public API)
         */
a.resolveEx=function(e,r){var t=n.System.Services.bindingManager.getBinding(e,r);if(t){var o=t.getSymbol();if(o)return new n.SymbolExpression(o.getExpression().toString())}return null},a);function a(){}n.Binding=e}(TcHmi=TcHmi||{}),function(e){var r=(
/**
         * Calls a callback
         * @param {function} callback function to call
         * @param {object|null} thisArg the this pointer in the function call
         * @param {any} ...args parameters for the function call
         * @returns undefined or the Error in case of an exception
         * @preserve (Part of the public API)
         */
t.callSafe=function(e,r){var t=void 0;if(e&&"function"==typeof e)try{switch(arguments.length){case 2:e.call(r);break;case 3:e.call(r,arguments[2]);break;case 4:e.call(r,arguments[2],arguments[3]);break;case 5:e.call(r,arguments[2],arguments[3],arguments[4]);break;case 6:e.call(r,arguments[2],arguments[3],arguments[4],arguments[5]);break;default:for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];e.call.apply(e,[r].concat(o))}}catch(e){t=e}return t},t);function t(){}e.Callback=r}(TcHmi=TcHmi||{}),function(n){
/**
    * @class Theme
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(
/**
         * Returns the active theme.
         *
         * @preserve (Part of the public API)
         * @returns {string}
         */
r.get=function(){return n.System.Services.themeManager.getTheme()},
/**
         * Sets the active theme.
         *
         * @preserve (Part of the public API)
         * @returns {TcHmi.Errors}
         */
r.set=function(e){return n.System.Services.themeManager.setTheme(e,!0)},r);function r(){}n.Theme=e,function(e){
/**
         * Control property related API
         * @preserve (Part of the public API)
         */
var r=(
/**
            * Parses every source of implicit properties and returns this or null
            * Can have different value after the event onThemeDataChanged.
            * The order of resources are
            * 1) control class
            * 2) theme definition of the control type in project
            * 3) theme definition in control
            * 4) defaultValueInternal in Description.json of the control
            * @param {TcHmi.Controls.System.baseTcHmiControl} control Control which needs the resource
            * @param {string} propertyName name of the property
            * @preserve (Part of the public API)
            */
t.getDefaultValue=function(e,r){return e instanceof n.Controls.System.baseTcHmiControl!=0&&r?n.System.Services.themeManager.getDefaultPropertyValue(e,r):{error:n.Errors.E_PARAMETER_INVALID,origin:"system",originThemeName:n.System.Services.themeManager.getTheme(),value:null}},
/**
             * Sets the default value of a property and change it (if needed) on theme change.
             *
             * @param {TcHmi.Controls.System.baseTcHmiControl}
             * @param {string} propertyName
             * @returns {TcHmi.Errors} returns an Error code
             * @preserve (Part of the public API)
             */
t.setThemeValue=function(e,r){if(e instanceof n.Controls.System.baseTcHmiControl==0)return n.Errors.E_PARAMETER_INVALID;if(!r)return n.Errors.E_PARAMETER_INVALID;var t=n.System.Services.controlManager.setControlProperty(e,r,null);return t?t.code:n.Errors.NONE},t);function t(){}e.Properties=r;
/**
         * Control resource related API
         * @preserve (Part of the public API)
         */
var o=(
/**
            * Gets a themed resource.
            * Parses every source of properties and returns this or null
            * Can have different value after the event onThemeDataChanged.
            * The order of resources are
            * 1) control class
            * 2) theme definition of the control type in project
            * 3) theme definition in control
        
            * @param {TcHmi.Controls.System.baseTcHmiControl} control Control which needs the resource
            * @param {string} resourceName name of the resource
            * @return {TcHmi.Theme.Resource<T> | null} returns the resource or null
            * @preserve (Part of the public API)
            */
i.get=function(e,r){return e instanceof n.Controls.System.baseTcHmiControl!=0&&r?n.System.Services.themeManager.getThemeResource(e,r):{error:n.Errors.E_PARAMETER_INVALID,origin:"system",originThemeName:n.System.Services.themeManager.getTheme(),value:null}},i.resolveBasePath=function(e,r){var t;if("control"===r.origin){var o=n.System.Caches.registeredControls.get(e.getType());t=o?n.Environment.getBasePath()+"/Controls/"+o.directory+"/Themes/"+r.originThemeName+"/":"controlNotFoundInSystemCache/"}else t="/Themes/"+r.originThemeName+"/";return t},i);function i(){}e.Resources=o}(e=n.Theme||(n.Theme={}))}(TcHmi=TcHmi||{}),function(i){var e;(e=i.Controls||(i.Controls={})).register=
/**
         * Register a TcHmi Control.
         * The Framework will fetch and interprete the Description.json in the Control Directory and optionally load a HTML Template file
         * @param {string} name Name of the Control.
         * @param {TcHmi.Controls.baseTcHmiControlConstructor} constructor Constructor which generates the TcHmi Control.
         * @param {string} directory Directory of the Control (base path is the Controls directory).
         * @param {string} templatePath Template file of the Control (base path is the Controls directory).
         * @preserve (Part of the public API)
         */
function(e,r,t,o){i.System.Caches.registeredControls.set(e,{name:e,constructor:r,directory:t,templatePath:o})},e.get=
/**
         * Get control by name. Returns the control or undefined
         * @param {string} name Name of the Control.
         * @preserve (Part of the public API)
         */
function(e){if(e)return i.System.Services.controlManager.getControlsCache().get(e)},e.tachControls=
/**
         * DEPRECATED
         * Does no longer do anything
         * @deprecated  Does no longer do anything
         * @function tachControls
         * @memberOf TcHmi.Controls
         * @param {((this: void, data: TcHmi.IResultObject) => void} callback
         * @preserve (Part of the public API)
         */
function(e){void 0===e&&(e=null),i.Log.warn("[Source=Framework, Module=TcHmi.Controls] The function 'TcHmi.Controls.tachControls(callback: null | ((this: void) => void) = null)' has been marked as deprecated and should no longer be used because it does no longer do anything."),"function"==typeof e&&e.apply(null)},e.tachControlsAsync=function(e){void 0===e&&(e=null),i.Log.warn("[Source=Framework, Module=TcHmi.Controls] The function 'TcHmi.Controls.tachControlsAsync(callback: null | ((this: void) => void) = null)' has been marked as deprecated and should no longer be used because it does no longer do anything."),"function"==typeof e&&e.apply(null)}}(TcHmi=TcHmi||{}),function(e){e.control={};function r(){}e.Control=r}(TcHmi=TcHmi||{}),function(l){var e=(
/**
        * Creates a new control.
        * @function
        * @param {string} type The type of the control.
        * @param {string} name The name of the control.
        * @param {Dictionary<{}>}
        * @param {TcHmi.Controls.System.baseTcHmiControl} parent Optional. The logical parent control.
        * @preserve (Part of the public API)
         */
r.createEx=function(e,r,t,o){var i=document.createElement("div");for(var n in i.id=r,i.setAttribute("data-tchmi-type",e),t){var a=t[n];if(null!=a)if("object"!=typeof a)i.setAttribute(n,a);else{var s=document.createElement("script");s.setAttribute("data-tchmi-target-attribute",n),s.setAttribute("type","application/json"),s.textContent=JSON.stringify(a),i.appendChild(s)}}return l.System.Services.controlManager.compile($(i),o)},
/**
        * DEPRECATED
        * Creates a new control.
        * @function
        * @param {string|jQuery} htmlOrElementOrType The HTML, jQuery element or type of the control.
        * @param {string} [name] Optional the name of the control.
        * @param {TcHmi.Controls.System.baseTcHmiControl} [parent] Optional. The logical parent control.
        * @deprecated Please use createEx()
        * @preserve (Part of the public API)
        */
r.create=function(e,r,t){var o;if(null==r)o="string"==typeof e?$(e):e;else{if("string"!=typeof e)return void l.Log.error("[Source=Framework, Module=TcHmi.ControlFactory] Error compiling control. Wrong input parameter given.");o=$('<div id="'+r+'" data-tchmi-type="'+e+'"></div>')}if(0!==o.length){if(void 0===l.Controls.get(o[0].id))return l.System.Services.controlManager.compile(o,t);l.Log.error("[Source=Framework, Module=TcHmi.ControlFactory] Error compiling control. A control with the name "+o[0].id+" already exists.")}},r);function r(){}l.ControlFactory=e}(TcHmi=TcHmi||{}),function(i){
/**
    * Provides multiple types of dialogs to the user
    *
    * @class DialogManager
    * @preserve (Part of the public API)
    */
var e,r,t,o=(
/**
        * Change visibility of dialog and set its DialogType when showing
        *
        * @param {string} dialogOwner Caller Id to prevent overwriting forreign dialogs
        * @param {boolean} bVisibility Toggling visiblity of Dialog
        * @param {TcHmi.DialogManager.DialogType} dialogType?
        * @param {object} options?
        * @param {string} options.cancelable The dialog should have an button to close the dialog
        * @preserve (Part of the public API)
        */
n.showDialog=function(e,r,t,o){return i.System.Services.dialogManager.showDialog(e,r,t,o)},
/**
         * Changes the output content of the Dialog to a new value
         * The default Severity is Info
         *
         * @param {string} dialogOwner Caller Id to prevent overwriting forreign dialogs
         * @param {string} newHtmlContent
         * @param [severity = DialogManager.DialogSeverity.Info]
         * @returns {boolean} Success of the text update
         * @preserve (Part of the public API)
         */
n.updateText=function(e,r,t){return void 0===t&&(t=n.DialogSeverity.Info),i.System.Services.dialogManager.updateText(e,r,t)},
/**
        * Returns the current dialog owner or null
        * @returns {string, null}
        * @preserve (Part of the public API)
        */
n.getDialogOwner=function(){return i.System.Services.dialogManager.getDialogOwner()},n);function n(){}i.DialogManager=o,e=o=i.DialogManager||(i.DialogManager={}),(r=e.DialogSeverity||(e.DialogSeverity={}))[r.Info=0]="Info",r[r.Error=1]="Error",(t=e.DialogType||(e.DialogType={}))[t.Overlay=1]="Overlay",t[t.SYSTEMLoading=100]="SYSTEMLoading"}(TcHmi=TcHmi||{}),function(e){
/**
    * Reserved
    * @class Environment
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var r=(
/**
         * Returns the base path in this environment.
         * You have to add '/Controls/Custom' if you want to address your own control dir
         *
         * @preserve (Part of the public API)
         * @returns {string}
         */
t.getBasePath=function(){return e.System.config.basePath},t);function t(){}e.Environment=r}(TcHmi=TcHmi||{}),function(i){
/**
    * Reserved
    * @class StyleProvider
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(
/**
         * Returns the given computed CSS property on the first given element. Does return values set by CSS files, the other Style APIs and AnimationProvider
         * Unset or unknown CSS values will not be set in the result object.
         * @param {JQuery|HTMLElement|SVGElement} element The jQuery collection or single HTML/SVG element.
         * @param {string|string[]} propertyNames  The CSS property (string) or properties (string array) to get.
         * @preserve (Part of the public API)
         */
r.getComputedElementStyle=function(e,r){return i.System.Services.styleManager.__getElementStyle(e,r,!0)},
/**
         * Returns the given CSS property on the first given element. Does not return values set by CSS files, the other Style APIs and AnimationProvider
         * @param {JQuery | undefined} element The jQuery element.
         * @param {string|string[]} propertyNames  The CSS property (string) or properties (string array) to get.
         * @returns {object}
         * @preserve (Part of the public API)
         */
r.getSimpleElementStyle=function(e,r){return i.System.Services.styleManager.__getElementStyle(e,r,!1)},
/**
         * Style setter for simple styles in a collection of JQuery elements or single HTML or SVG Elements.
         * @param {JQuery | undefined} element The jQuery element.
         * @param {string|object} property      The CSS property to process or a dictionary of property value pairs.
         * @param {string} [value]         The value for the CSS property or an array of values. Only used if second parameter is no object.
         * @preserve (Part of the public API)
         */
r.setSimpleElementStyle=function(e,r,t){return void 0===t&&(t=null),i.System.Services.styleManager.__setSimpleElementStyle(e,r,t)},r.processGenericStyle=function(e,r,t,o){return void 0===o&&(o=null),i.System.Services.styleManager.processGenericStyle(e,r,t,o)},
/**
         * Resolves a SolidColor object to a string representation for use as css color property.
         * Has to be called with a valid SolidColor. Use isSolidColor to check
         * @param colorObject The SolidColor to resolve.
         * @preserve (Part of the public API)
        */
r.resolveSolidColorAsCssValue=function(e){return"none"===e.color.toLowerCase()?"transparent":e.color},
/**
        * Resolve a SolidColor object to a RGBAColor object.
        * Has to be called with a valid SolidColor. Use isSolidColor to check
        * @param colorObject The SolidColor to resolve.
        * @preserve (Part of the public API)
        */
r.resolveSolidColorAsRGBA=function(e){var r=document.createElement("canvas");r.width=r.height=1;var t=r.getContext("2d");t.clearRect(0,0,1,1),t.fillStyle=e.color,t.fillRect(0,0,1,1);var o=t.getImageData(0,0,1,1).data;return{r:o[0],g:o[1],b:o[2],a:o[3]}},
/**
         * Resolves a LinearGradientColor object to a string representation for use in css background-image property.
         * Has to be called with a valid LinearGradientColor. Use isLinearGradientColor to check
         * @param colorObject The LinearGradientColor to resolve.
         * @preserve (Part of the public API)
        */
r.resolveLinearGradientColorAsCssValue=function(e){var r=e.angle;null==r&&(r=0);var t="linear-gradient(";if(t+=r+"deg",e.stopPoints)for(var o=0,i=e.stopPoints.length;o<i;o++){var n=e.stopPoints[o];void 0!==n.stop&&null!==n.stop?t+=","+n.color+" "+n.stop:t+=","+n.color}return t+=")"},
/**
         * Style Processor for background.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew  The new value for the background.
         * @preserve (Part of the public API)
         */
r.processBackground=function(e,r){return i.System.Services.styleManager.processBackground(e,r)},
/**
         * Style Processor for background colors and gradients.
         * @param {JQuery} element   The jQuery element.
         * @param valueNew  The new value for the background.
         * @preserve (Part of the public API)
         */
r.processBackgroundColor=function(e,r){return i.System.Services.styleManager.processBackground(e,{color:r})},
/**
         * Style Processor for background images.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew  The URL of the image.
         * @preserve (Part of the public API)
         */
r.processBackgroundImage=function(e,r){return i.System.Services.styleManager.processBackground(e,{image:r})},
/**
         * Style processor for SVG fill color.
         * @param {JQuery | SVGElement | undefined} element The jQuery element.
         * @param valueNew The new fill color.
         * @preserve (Part of the public API)
         */
r.processFillColor=function(e,r){return i.System.Services.styleManager.processFillColor(e,r)},
/**
         * Style processor for SVG stroke color.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new stroke color.
         * @preserve (Part of the public API)
         */
r.processStrokeColor=function(e,r){return i.System.Services.styleManager.processStrokeColor(e,r)},
/**
         * Style processor for text color.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new text color.
         * @preserve (Part of the public API)
         */
r.processTextColor=function(e,r){return i.System.Services.styleManager.processTextColor(e,r)},
/**
         * Style processor for border color.
         * @param {JQuery | undefined} element The jQuery element.
         * @param {object} valueNew      The new border color.
         * @preserve (Part of the public API)
         */
r.processBorderColor=function(e,r){return i.System.Services.styleManager.processBorderColor(e,r)},
/**
         * Style processor for border width.
         * @param {JQuery | undefined} element The jQuery element.
         * @param {object} valueNew      The new border widths.
         * @preserve (Part of the public API)
         */
r.processBorderWidth=function(e,r){return i.System.Services.styleManager.processBorderWidth(e,r)},
/**
         * Style processor for border radius.
         * @param {JQuery | undefined} element The jQuery element.
         * @param {object} valueNew      The new border radii.
         * @preserve (Part of the public API)
         */
r.processBorderRadius=function(e,r){return i.System.Services.styleManager.processBorderRadius(e,r)},
/**
         * Style processor for border style.
         * @param {JQuery | undefined} element The jQuery element.
         * @param {object} valueNew      The new border styles.
         * @preserve (Part of the public API)
         */
r.processBorderStyle=function(e,r){return i.System.Services.styleManager.processBorderStyle(e,r)},
/**
         * Style processor for box shadow.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new border styles.
         * @preserve (Part of the public API)
         */
r.processBoxShadow=function(e,r){return i.System.Services.styleManager.processBoxShadow(e,r)},
/**
         * Style processor for font family.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new font family.
         * @preserve (Part of the public API)
         */
r.processFontFamily=function(e,r){return i.System.Services.styleManager.processFontFamily(e,r)},
/**
         * Style processor for font size.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new font size.
         * @param unitNew       The new font size unit. Defaults to "px".
         * @preserve (Part of the public API)
         */
r.processFontSize=function(e,r,t){return void 0===t&&(t="px"),i.System.Services.styleManager.processFontSize(e,r,t)},
/**
         * Style processor for font style.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new font style. Allowed values are "Normal", "Italic" and "Oblique".
         * @preserve (Part of the public API)
         */
r.processFontStyle=function(e,r){return i.System.Services.styleManager.processFontStyle(e,r)},
/**
         * Style processor for font weight.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new font weight. Allowed values are "Normal" and "Bold".
         * @preserve (Part of the public API)
         */
r.processFontWeight=function(e,r){return i.System.Services.styleManager.processFontWeight(e,r)},
/**
         * Style processor for visibility.
         * Visibility also effects pointer events, i.e. a hidden element will not receive mouse click events.
         * Hidden still uses space in fluid calculations, collapsed is ignored there.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new visibility. Allowed values are "Visible", "Collapsed" and "Hidden". Hidden still uses space in fluid calculations, collapsed is ignored there.
         * @preserve (Part of the public API)
         */
r.processVisibility=function(e,r){return i.System.Services.styleManager.processVisibility(e,r)},
/**
         * Style processor for horizontal alignment. This aligns the content of the target element, not the target element itself.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new horizontal alignment. Allowed values are "Left", "Center" and "Right".
         * @preserve (Part of the public API)
         */
r.processContentHorizontalAlignment=function(e,r){return i.System.Services.styleManager.processContentHorizontalAlignment(e,r)},
/**
         * Style processor for vertical alignment. This aligns the content of the target element, not the target element itself.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new vertical alignment. Allowed values are "Top", "Center" and "Bottom".
         * @preserve (Part of the public API)
         */
r.processContentVerticalAlignment=function(e,r){return i.System.Services.styleManager.processContentVerticalAlignment(e,r)},
/**
         * Style processor for content padding.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new content padding.
         * @preserve (Part of the public API)
         */
r.processContentPadding=function(e,r){return i.System.Services.styleManager.processContentPadding(e,r)},
/**
         * Theme processor for transforms.
         * @param {JQuery | undefined} element The jQuery element.
         * @param valueNew      The new transform value or an array of transform values.
         * @param order         If this parameter is passed, the transforms in valueNew will replace the transform at the specified place, instead of replacing all transforms.
         * @preserve (Part of the public API)
         */
r.processTransform=function(e,r,t){return i.System.Services.styleManager.processTransform(e,r,t)},r);function r(){}i.StyleProvider=e}(TcHmi=TcHmi||{}),function(o){
/**
    * Provides a layer to show elements above the normal visualization
    * @class TopMostLayer
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(
/**
        * Appends the elements to the top layer above the normal visualization
        * A reference to the element should be kept to be able to call remove() function
        * The parent element will be a div with style="width:<browserwindowwidth>;height:<browserwindowheight>;"
        * Your element could have style="min-width:50%;min-height:50%;"
        *
        * @param {TcHmi.Controls.System.baseTcHmiControl} control control which requests this
        * @param {JQuery} element jQuery Collection with exactly one element which should be moved to TopMostLayer
        * @param {object} options optional options
        * @param options.resizeCb optional callback which will be called after resizing the element or parent. Will be called after add, too. ("this" will be the calling control in this function)
        * @param options.removeCb optional callback which will be called after removing the element ("this" will be the calling control in this function)
        * @param {boolean} options.centerHorizontal bool to center the given element
        * @param {boolean} options.centerVertical bool to center the given element
        * @param {boolean} options.dimBackground Should the overlay be darken over the background. Default is true
        * @returns {boolean} success of the add
        * @preserve (Part of the public API)
        */
r.add=function(e,r,t){return!!e&&o.System.Services.topMostLayer.add(e,r,t)},
/**
         * Removes the element from the top layer and returns it for later use by the caller
         * If the element is not inside the TopMostLayer it will be returned without change.
         * @param {TcHmi.Controls.System.baseTcHmiControl} control control which requests this
         * @param {JQuery} element jQuery Collection with the element which should be removed from TopMostLayer
         * @returns {JQuery} jQuery Collection
         * @preserve (Part of the public API)
         */
r.remove=function(e,r){return e?o.System.Services.topMostLayer.remove(e,r,!1):r},
/**
        * Appends the elements to the top layer above the normal visualization (not control namespaced)
        * A reference to the element should be kept to be able to call remove() function
        * The parent element will be a div with style="width:<browserwindowwidth>;height:<browserwindowheight>;"
        * Your element could have style="min-width:50%;min-height:50%;"
        *
        * @param {JQuery} element jQuery Collection with exactly one element which should be moved to TopMostLayer
        * @param {object} options optional options
        * @param options.resizeCb optional callback which will be called after resizeing the element or parent ("this" will be the calling control in this function)
        * @param options.removeCb optional callback which will be called after removing the element ("this" will be the calling control in this function)
        * @param {boolean} options.centerHorizontal bool to center the given element
        * @param {boolean} options.centerVertical bool to center the given element
        * @returns {boolean} success of the add
        * @preserve (Part of the public API)
        */
r.addEx=function(e,r){return!!o.control&&o.System.Services.topMostLayer.add(null,e,r)},
/**
         * Removes the element from the top layer and returns it for later use by the caller (not control namespaced)
         * If the element is not inside the TopMostLayer it will be returned without change.
         * @param {JQuery} element jQuery Collection with the element which should be removed from TopMostLayer
         * @returns {JQuery} jQuery Collection
         * @preserve (Part of the public API)
         */
r.removeEx=function(e){return o.control?o.System.Services.topMostLayer.remove(null,e,!1):e},r);function r(){}o.TopMostLayer=e}(TcHmi=TcHmi||{}),function(c){
/**
    *
    * @class EventProvider
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e,r,t=(
/**
         * Register a callback to an event name.
         * If the name is a binding expression the callback will be initially called if there is a binding with this name
         * @function
         * @param {string} name Name of the event.
         * @param {function} callback Callback which will be called
         * @returns {function} Destroy function which cleans up/unregisters
         * @preserve (Part of the public API)
         */
u.register=function(t,o,e){function i(){a||c.EventProvider.raise("System.EventProvider.onDestroyCallback<"+t+">",l),n&&(n(),n=null),a&&(a.destroy(),a=null);var e=u.__events.get(t);e&&(e.delete(r),0===e.size&&u.__events.delete(t))}var n,r=this.__internalEventId++,a=null,s=u.__events.get(t);void 0===s&&(s=c.System.createES5Map(),u.__events.set(t,s));var l={id:r,name:t,callback:o,options:e,destroy:i};return s.set(r,l),!0===c.Symbol.isSymbolExpression(t)?(a=new c.System.Symbol(t),n=a.watch(function(e){if(n=n||e.destroy,e.error===c.Errors.NONE){var r=c.Callback.callSafe(o,null,{name:t,destroy:i},e.value);r&&c.Log.error(r)}})):c.EventProvider.raise("EventProvider.onRegisterCallback<"+t+">",l),i},
/**
         * Calls all registered callbacks related to an event name.
         * @function
         * @param {string} name Name of the event.
         * @param args optional parameter(s) which will be transfered to the callbacks
         * @preserve (Part of the public API)
         */
u.raise=function(e){var r=u.__events.get(e);if(r){var t=arguments;switch(arguments.length){case 1:r.forEach(function(e,r){u.raiseEx(e)});break;case 2:r.forEach(function(e,r){u.raiseEx(e,t[1])});break;case 3:r.forEach(function(e,r){u.raiseEx(e,t[1],t[2])});break;case 4:r.forEach(function(e,r){u.raiseEx(e,t[1],t[2],t[3])});break;default:for(var o=[null],i=1;i<arguments.length;i++)o[i]=arguments[i];r.forEach(function(e,r){o[0]=e,u.raiseEx.apply(u,o)})}}},
/**
         * Calls the callback of an specific event registration.
         * @function
         * @param {EventProvider.IEventEntry} event
         * @param args optional parameter(s) which will be transfered to the callbacks
         * @preserve (Part of the public API)
         */
u.raiseEx=function(e){var r;switch(arguments.length){case 1:r=c.Callback.callSafe(e.callback,null,{name:e.name,destroy:e.destroy});break;case 2:r=c.Callback.callSafe(e.callback,null,{name:e.name,destroy:e.destroy},arguments[1]);break;case 3:r=c.Callback.callSafe(e.callback,null,{name:e.name,destroy:e.destroy},arguments[1],arguments[2]);break;case 4:r=c.Callback.callSafe(e.callback,null,{name:e.name,destroy:e.destroy},arguments[1],arguments[2],arguments[3]);break;default:for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];r=c.Callback.callSafe.apply(c.Callback,[e.callback,null,{name:e.name,destroy:e.destroy}].concat(t))}r&&c.Log.error(r)},u.watchEventRegistration=function(r,t){function o(e){i=c.EventProvider.register("System.EventProvider.onDestroyCallback<"+r+">",function(e,r){c.Callback.callSafe(t,u,{error:c.Errors.NONE,type:u.EventRegWatchType.DESTROY,event:r}),i?(i(),i=null):e.destroy()}),c.Callback.callSafe(t,u,{error:c.Errors.NONE,type:u.EventRegWatchType.REGISTER,event:e})}var i=null,e=u.__events.get(r);e&&e.forEach(function(e,r){o(e)});var n=c.EventProvider.register("EventProvider.onRegisterCallback<"+r+">",function(e,r){o(r)});return function(){n&&(n(),n=null),i&&(i(),i=null)}},u.__events=c.System.createES5Map(),u.__internalEventId=0,u);function u(){}c.EventProvider=t,e=t=c.EventProvider||(c.EventProvider={}),(r=e.EventRegWatchType||(e.EventRegWatchType={}))[r.REGISTER=100]="REGISTER",r[r.DESTROY=200]="DESTROY"}(TcHmi=TcHmi||{}),function(y){var e=(r.prototype.__execute=function(i,e){var n=[],r=this.__f.fnParams;Array.isArray(r)||(r=[]);var a=this.__fnDescr,t=a.function.arguments,s=!1,o=0,l=this;function c(e,r){var t;if(!s)if(s=!0,e===y.Errors.NONE){var o=void 0;!0===a.function.injectContextObject&&(a.function&&a.function.waitMode&&"Asynchronous"===a.function.waitMode?n.unshift(i):n.unshift({}));try{o=(t=l.__fn).call.apply(t,[l].concat(n))}catch(e){return void i.error(y.Errors.E_FUNCTION_EXCEPTION,{code:y.Errors.E_FUNCTION_EXCEPTION,message:y.Errors[y.Errors.E_FUNCTION_EXCEPTION],reason:a.function.name+', Exception: "'+e+'"',domain:"TcHmi.Function"})}a.function&&(!a.function.waitMode||a.function.waitMode&&"Synchronous"===a.function.waitMode)&&i.success(o)}else i.error(e,r)}if(!0===a.function.injectContextObject&&o++,a.function&&a.function.waitMode&&"Asynchronous"===a.function.waitMode&&!1===a.function.injectContextObject)c(y.Errors.E_FUNCTION_INVALID_CONFIGURATION,{code:y.Errors.E_FUNCTION_INVALID_CONFIGURATION,message:y.Errors[y.Errors.E_FUNCTION_INVALID_CONFIGURATION],reason:a.function.name+", Setting waitMode=Asynchronous and injectContextObject="+a.function.injectContextObject+" is an invalid function configuration. Please define a context object if you want to use waitMode=Asynchronous.",domain:"TcHmi.Function"});else{function u(e,r,t){if(r){var o=y.System.Services.typeManager.getSchema(r.type);"TcHmi.Symbol"===o.frameworkInstanceOf?t instanceof y.Symbol?n[e]=t:n[e]=null:n[e]=y.ValueConverter.toSchemaType(t,o)}else n[e]=t;0==--_&&c(y.Errors.NONE)}function d(r,t,o){o.readEx(function(e){e.error===y.Errors.NONE?u(r,t,e.value):c(y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED,{code:y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED,message:y.Errors[y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED],reason:a.function.name+", Resolving symbol: '"+o.getExpression()+"' for parameter: "+r+" failed.",domain:"TcHmi.Function",errors:[e.details]})})}function m(t,r,o){try{new y.System.FunctionExpression(o).execute({success:function(e){u(t,r,e)},error:function(e,r){c(y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED,{code:y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED,message:y.Errors[y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED],reason:a.function.name+", Resolving function expression: '"+o+"' for parameter: "+t+" failed.",domain:"TcHmi.Function",errors:[r]})}})}catch(e){c(y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED,{code:y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED,message:y.Errors[y.Errors.E_FUNCTION_RESOLVING_PARAMETER_FAILED],reason:a.function.name+", Resolving function expression: '"+o+"' for parameter: "+t+"  failed with exception.",domain:"TcHmi.Function",errors:[{code:y.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,message:y.Errors[y.Errors.E_FUNCTION_EXPRESSION_EXCEPTION],reason:e,domain:"TcHmi.System.FunctionExpression"}]})}}var _=e.length+r.length;if(!s)if(0===_)c(y.Errors.NONE);else{for(var h=0,g=e.length;h<g;h++){var E=e[h],p=void 0;h<t.length?p=t[h+o]:(p=t[t.length-1+o]).restParameter||(p=null),u(h,p,E)}for(h=0,g=r.length;h<g;h++){if(s)return;var f=r[h];if(p=void 0,h<t.length-e.length?p=t[h+e.length+o]:(p=t[t.length-1+o]).restParameter||(p=null),!p)return void c(y.Errors.E_FUNCTION_INVALID_CONFIGURATION,{code:y.Errors.E_FUNCTION_INVALID_CONFIGURATION,message:y.Errors[y.Errors.E_FUNCTION_INVALID_CONFIGURATION],reason:a.function.name,domain:"TcHmi.Function"});if(y.IFunction.isStaticValue(f))u(h+e.length,p,f.value);else if(y.IFunction.isSymbol(f)){var S=new y.Symbol(f.symbolExpression),v=y.System.Services.typeManager.getSchema(p.type);(v&&"TcHmi.Symbol"===v.frameworkInstanceOf?u:d)(h+e.length,p,S)}else y.IFunction.isFunctionExpression(f)?m(h+e.length,p,f.functionExpression):c(y.Errors.E_PARAMETER_INVALID,{code:y.Errors.E_PARAMETER_INVALID,message:y.Errors[y.Errors.E_PARAMETER_INVALID],reason:a.function.name,domain:"TcHmi.Function"})}}}},
/**
         * Will raise the function defined in constructor argument f: IFunction.
         * @param requiredArgs Optional required arguments. Will be injected before arguments defined in IFunction and after context object dummy if context object is required.
         * @preserve (Part of the public API)
         */
r.prototype.execute=function(e){if(void 0===e&&(e=[]),!this.__fn)return y.Log.error("[Source=Framework, Module=TcHmi.Function] Function="+this.__f.fn+" is not registered."),null;if(!this.__fnDescr)return y.Log.error("[Source=Framework, Module=TcHmi.Function] Description for function="+this.__f.fn+" missing."),null;var r=null,t=!1;return this.__execute({success:function(e){t||(t=!0,r=e)},error:function(e){t||(t=!0,r=null)}},e),r},
/**
         * Will raise the function defined in constructor argument f: IFunction and raises a callback afterwards.
         * @param requiredArgs Optional required arguments. Will be injected before arguments defined in IFunction and after context object dummy if context object is required.
         * @param callback
         * @preserve (Part of the public API)
         */
r.prototype.executeEx=function(e,t){void 0===e&&(e=[]);var o=this,r=this.__fnDescr,i=this.__fn;if(r)if(i){e=e||[];var n=!1;this.__execute({success:function(e){n||(n=!0,y.Callback.callSafe(t,o,{error:y.Errors.NONE,result:e}))},error:function(e,r){n||(n=!0,y.Callback.callSafe(t,o,{error:e,details:r}))}},e)}else y.Callback.callSafe(t,this,{error:y.Errors.E_FUNCTION_MISSING_FUNCTION_REFERENCE,details:{code:y.Errors.E_FUNCTION_MISSING_FUNCTION_REFERENCE,message:y.Errors[y.Errors.E_FUNCTION_MISSING_FUNCTION_REFERENCE],reason:"Missing function reference for "+r.function.name,domain:"TcHmi.Function"}});else y.Callback.callSafe(t,this,{error:y.Errors.E_FUNCTION_MISSING_FUNCTION_DESCRIPTION,details:{code:y.Errors.E_FUNCTION_MISSING_FUNCTION_DESCRIPTION,message:y.Errors[y.Errors.E_FUNCTION_MISSING_FUNCTION_DESCRIPTION],domain:"TcHmi.Function"}})},
/**
         * Releases all resources of the function
         * @preserve (Part of the public API)
         */
r.prototype.destroy=function(){this.__f=null,this.__fn=null,this.__fnDescr=null},r);function r(e){this.__f=e,this.__fn=y.System.Services.functionProvider.getFunction(e.fn),this.__fnDescr=y.System.Services.functionProvider.getFunctionDescription(e.fn)}y.Function=e}(TcHmi=TcHmi||{}),function(o){
/**
     * @namespace TcHmi.Functions
     * @preserve (Part of the public API)
     */
var e;(e=o.Functions||(o.Functions={})).registerFrameworkFunction=
/**
         * @function registerFrameworkFunction
         * @memberOf TcHmi.Functions
         * @param {string} name
         * @param {function} func
         * @param {string} descriptionUrl
         * @preserve (Part of the public API)
         */
function(e,r,t){void 0===t&&(t=""),null!=t&&0!==t.length&&o.System.Caches.registeredFrameworkFunctionDescription.push({name:e,func:r,descriptionUrl:t})},e.registerFunction=
/**
         * @function registerFunction
         * @memberOf TcHmi.Functions
         * @param {string} name
         * @param {(...args)} func
         * @preserve (Part of the public API)
         */
function(e,r){if(void 0===o.System.Services.functionProvider)var t=o.EventProvider.register("System.onInitializedServices",function(){o.System.Services.functionProvider.registerFunction(e,r),t()});else o.System.Services.functionProvider.registerFunction(e,r)},e.getFunction=
/**
         * Returns a registered HMI function
         * @function getFunction
         * @memberOf TcHmi.Functions
         * @param {string} name
         * @returns {function}
         * @preserve (Part of the public API)
         */
function(e){return o.System.Services.functionProvider.getFunction(e)}}(TcHmi=TcHmi||{}),function(f){
/**
    * Provides functions for interaction with the TwinCAT HMI Server.
    * @class Server
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(
/**
         * Returns the current readyState value of the underlying websocket which is connected to the TwinCAT HMI Server.
         * @function getWebsocketReadyState
         * @memberOf TcHmi.Server
         * @returns {number | null} The current readyState value of the underlying websocket which is connected to the TwinCAT HMI Server or null.
         * @preserve (Part of the public API)
         */
n.getWebsocketReadyState=function(){var e=f.System.Services.serverManager;return null==e?null:e.getWebSocketReadyState()},
/**
         * Returns true if the websocket is ready and false if its not.
         * @function isWebsocketReady
         * @returns {boolean} If true the websocket is ready for connectivity.
         * @preserve (Part of the public API)
         */
n.isWebsocketReady=function(){var e=f.System.Services.serverManager;return null!=e&&e.getWebSocketReadyState()===WebSocket.OPEN},
/**
         * Write one or more values to a TwinCAT HMI Server symbol.
         * @function writeSymbol
         * @memberOf TcHmi.Server
         * @param {string|string[]} symbolName The target TwinCAT HMI Server symbolname.
         * @param {string|number|boolean|Object|Array} value The value which should be written to the target symbol.
         * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished.
         * @returns {number} Request id
         * @preserve (Part of the public API)
         */
n.writeSymbol=function(e,r,t){return n.writeSymbolEx(e,r,null,t)},
/**
       * Write one or more values to a TwinCAT HMI Server symbol.
       * @function writeSymbol
       * @memberOf TcHmi.Server
       * @param {string|string[]} symbolName The target TwinCAT HMI Server symbolname.
       * @param {string|number|boolean|Object|Array} value The value which should be written to the target symbol.
       * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
       * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished.
       * @returns {number} Request id
       * @preserve (Part of the public API)
       */
n.writeSymbolEx=function(e,r,t,o){var i,n,a=f.System.Services.serverManager;if(null==a)return f.Callback.callSafe(o,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),null;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return f.Callback.callSafe(o,null,{error:f.Errors.E_PARAMETER_INVALID,details:{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],domain:"TcHmi.Server"}}),null;i=e,n=r}else i=[e],n=[r];for(var s={requestType:"ReadWrite",commands:[]},l=0;l<i.length;l++){var c=i[l],u=n[l];if("string"!=typeof c)return f.Callback.callSafe(o,null,{error:f.Errors.E_PARAMETER_INVALID,details:{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],domain:"TcHmi.Server"}}),null;s.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:c,writeValue:u})}return a.requestEx(s,t,function(e){var r=f.Callback.callSafe(o,null,e);r&&f.Log.error(r)})},
/**
         * Reads the value of a TwinCAT HMI Server symbol.
         * @function readSymbol
         * @memberOf TcHmi.Server
         * @param {string|string[]} symbolName The target TwinCAT HMI Server symbolname.
         * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished. The callback function gets 'error' (TcHmi.Errors.E_WEBSOCKET_NOT_READY or TcHmi.Errors.NONE) and the response
         * @returns {number} Request id
         * @preserve (Part of the public API)
         */
n.readSymbol=function(e,r){return n.readSymbolEx(e,null,r)},
/**
        * Reads the value of a TwinCAT HMI Server symbol.
        * @function readSymbol
        * @memberOf TcHmi.Server
        * @param {string|string[]} symbolName The target TwinCAT HMI Server symbolname.
        * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
        * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished. The callback function gets 'error' (TcHmi.Errors.E_WEBSOCKET_NOT_READY or TcHmi.Errors.NONE) and the response
        * @returns {number} Request id
        * @preserve (Part of the public API)
        */
n.readSymbolEx=function(e,r,t){var o,i=f.System.Services.serverManager;if(null==i)return f.Callback.callSafe(t,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),null;o=Array.isArray(e)?e:[e];for(var n={requestType:"ReadWrite",commands:[]},a=0;a<o.length;a++){var s=o[a];if("string"!=typeof s)return f.Callback.callSafe(t,null,{error:f.Errors.E_PARAMETER_INVALID,details:{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]}}),null;n.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:s})}return i.requestEx(n,{},function(e){var r=f.Callback.callSafe(t,null,e);r&&f.Log.error(r)})},
/**
         * Requests a message to the hmi server with default connection parameter
         * @function request
         * @memberOf TcHmi.Server
         * @param {Object} request Request object
         * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished. The callback function gets 'error' (TcHmi.Errors.E_WEBSOCKET_NOT_READY or TcHmi.Errors.NONE) and the response
         * @returns {number} Request id
         * @preserve (Part of the public API)
         */
n.request=function(e,r){return n.requestEx(e,null,r)},
/**
        * Requests a message to the hmi server with given connection parameter
        * @function requestEx
        * @memberOf TcHmi.Server
        * @param {Object} request Request object
        * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
        * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished. The callback function gets 'error' (TcHmi.Errors.E_WEBSOCKET_NOT_READY or TcHmi.Errors.NONE) and the response
        * @returns {number} Request id
        * @preserve (Part of the public API)
        */
n.requestEx=function(e,r,t){var o=f.System.Services.serverManager;return null==o?(f.Callback.callSafe(t,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),null):o.requestEx(e,r,function(e){var r=f.Callback.callSafe(t,null,e);r&&f.Log.error(r)})},
/**
         * Subscribe to a to a list of commands.
         * Subscription have to be unsubscribed by use of the TcHmi.Server.unsubscribe function.
         * @function subscribe
         * @memberOf TcHmi.Server
         * @param {Object[]} commands
         * @param {number} interval Subscription refresh interval.
         * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished.
         * @returns {number} Request id
         * @preserve (Part of the public API)
         */
n.subscribe=function(e,r,t){return n.subscribeEx(e,r,null,t)},
/**
         * Subscribe to a to a list of commands.
         * Subscription have to be unsubscribed by use of the TcHmi.Server.unsubscribe function.
         * @function subscribe
         * @memberOf TcHmi.Server
         * @param {Object[]} commands
         * @param {number} interval Subscription refresh interval.
         * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
         * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished.
         * @returns {number} Request id
         * @preserve (Part of the public API)
         */
n.subscribeEx=function(e,r,t,o){var i=f.System.Services.serverManager;if(null==i)return f.Callback.callSafe(o,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),null;var n={requestType:"Subscription",commands:e};return null!=r&&"number"==typeof r&&(n.intervalTime=r),i.requestEx(n,t,function(e){var r=f.Callback.callSafe(o,null,e);r&&f.Log.error(r)})},
/**
         * Unsubscribe a list of commands.
         * @function unsubscribe
         * @memberOf TcHmi.Server
         * @param {number} requestId The id of the subscription request which shall be unsubscribed.
         * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished.
         * @returns {number} Request id
         * @preserve (Part of the public API)
         */
n.unsubscribe=function(e,r){return n.unsubscribeEx(e,null,r)},
/**
         * Unsubscribe a list of commands.
         * @function unsubscribe
         * @memberOf TcHmi.Server
         * @param {number} requestId The id of the subscription request which shall be unsubscribed.
         * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
         * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback Asynchronous response callback which will be raised if the operation has finished.
         * @returns {number} Request id
         * @preserve (Part of the public API)
         */
n.unsubscribeEx=function(e,r,t){var o=f.System.Services.serverManager;if(null==o)return f.Callback.callSafe(t,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),null;var i={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Unsubscribe",writeValue:e}]};return n.releaseRequest(e),o.requestEx(i,r,function(e){var r=f.Callback.callSafe(t,null,e);r&&f.Log.error(r)})},n.releaseRequest=function(e){var r=f.System.Services.serverManager;null!=r&&r.releaseRequest(e)},
/**
         * Get current username as string or null.
         * @returns {string|null}
         * @preserve (Part of the public API)
         */
n.getCurrentUser=function(){return f.System.Services.accessManager.getCurrentUserConfig().name},
/**
         * Get groups membership of current user as array (can be empty).
         * @returns {string[]}
         * @preserve (Part of the public API)
         */
n.getGroupsOfCurrentUser=function(){return f.System.Services.accessManager.getCurrentUserConfig().userIsInGroups},
/**
         * Get current user config.
         * @preserve (Part of the public API)
         */
n.getCurrentUserConfig=function(){return f.System.Services.accessManager.getCurrentUserConfig()},
/**
        * Login into a TcHmiServer, reloads the page on success, call of a callback on failure
        * @param {string | null | undefined} username String with the username
        * @param {string | null | undefined} password String with the password
        * @param {boolean = true} persistent Should the session be valid even after browser restart
        * @param {null | ((this: void, data: TcHmi.Server.IResultObject) => void)} callback? This callback is called if the login was not successful
        * @return {boolean} returns a boolean if the login was called
        * @preserve (Part of the public API)
        */
n.login=function(e,r,t,o){return void 0===t&&(t=!0),n.loginEx(e,r,t,null,o)},
/**
         * Login into a TcHmiServer, reloads the page on success, call of a callback on failure
         * @param {string | null | undefined} username String with the username
         * @param {string | null | undefined} password String with the password
         * @param {boolean = true} persistent Should the session be valid even after browser restart
         * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
         * @param {null | ((this: void, data: TcHmi.ResultObject) => void)} callback? This callback is called if the login was not successful
         * @return {boolean} returns a boolean if the login was called
         * @preserve (Part of the public API)
         */
n.loginEx=function(e,r,t,o,i){void 0===t&&(t=!0);var n=f.System.Services.serverManager;return null==n?(f.Callback.callSafe(i,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),!1):null==e||"string"!=typeof e||null==r||"string"!=typeof r?(f.Callback.callSafe(i,null,{error:f.Errors.E_PARAMETER_INVALID,details:{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],domain:"TcHmi.Server"}}),!1):n.login(e,r,t,o,i)},
/**
         * Logout from a TcHmiServer, reloads the page on success, call of a callback on failure
         * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback This callback is called if the logout was not successful
         * @return {boolean} returns a boolean if the logout was called
         * @preserve (Part of the public API)
         */
n.logout=function(e){return n.logoutEx(null,e)},
/**
         * Logout from a TcHmiServer, reloads the page on success, call of a callback on failure
         * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
         * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback This callback is called if the logout was not successful
         * @return {boolean} returns a boolean if the logout was called
         * @preserve (Part of the public API)
         */
n.logoutEx=function(e,r){var t=!1,o=f.System.Services.serverManager;return null==o?(f.Callback.callSafe(r,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),t):t=o.logout(e,r)},
/**
         * Logout all users with a specific username or all users from a TcHmiServer
         * @param {string | Server.IForceLogoutTarget} username username to logout.
         * If empty string or null is provided, all users are logged out.
         * The authentification domain can be specified by using 'Domain::UserName'. If no domain is specified all users with the given name will be logged out.
         * 'Domain::' will logout every user from this domain
         * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback This callback is called if the logout was not successful
         * @return {boolean} returns a boolean if the logout was called
         * @preserve (Part of the public API)
         */
n.forceLogout=function(e,r){return n.forceLogoutEx(e,null,r)},
/**
         * Logout all users with a specific username or all users from a TcHmiServer
         * @param {string | Server.IForceLogoutTarget} username username to logout.
         * If empty string or null is provided, all users are logged out.
         * The authentification domain can be specified by using 'Domain::UserName'. If no domain is specified all users with the given name will be logged out.
         * 'Domain::' will logout every user from this domain
         * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
         * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback This callback is called if the logout was not successful
         * @return {boolean} returns a boolean if the logout was called
         * @preserve (Part of the public API)
         */
n.forceLogoutEx=function(e,r,t){var o=f.System.Services.serverManager;return null==o?(f.Callback.callSafe(t,null,{error:f.Errors.E_WEBSOCKET_NOT_READY,details:{code:f.Errors.E_WEBSOCKET_NOT_READY,message:f.Errors[f.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.Server"}}),!1):(void 0!==e&&""!==e||(e=null),o.forceLogout(e,r,t))},n.__handleServerAnswer=function(l,c){return function(e){var r;if(e.error===f.Errors.NONE){var t=e.response;if(t)if(t.error)(r=f.Callback.callSafe(l,null,{error:f.Errors.E_SERVER_RESPONSE_ERROR,details:{code:f.Errors.E_SERVER_RESPONSE_ERROR,message:f.Errors[f.Errors.E_SERVER_RESPONSE_ERROR],errors:[t.error]}}))&&f.Log.error(r);else{var o=t.commands;if(o)if(0!==o.length){for(var i=0,n=o;i<n.length;i++){var a=n[i];if(a.error){var s=tchmi_clone_object(a.error);return!s.reason&&a.symbol&&(s.reason="Error in Symbol: "+a.symbol),void((r=f.Callback.callSafe(l,null,{error:f.Errors.E_SERVER_COMMAND_ERROR,details:{code:f.Errors.E_SERVER_COMMAND_ERROR,message:f.Errors[f.Errors.E_SERVER_COMMAND_ERROR],errors:[s]}}))&&f.Log.error(r))}}c?c(e):f.Callback.callSafe(l,null,{error:f.Errors.NONE})}else(r=f.Callback.callSafe(l,null,{error:f.Errors.E_SERVER_COMMAND_MISSING,details:{code:f.Errors.E_SERVER_COMMAND_MISSING,message:f.Errors[f.Errors.E_SERVER_COMMAND_MISSING]}}))&&f.Log.error(r);else(r=f.Callback.callSafe(l,null,{error:f.Errors.E_SERVER_COMMANDS_MISSING,details:{code:f.Errors.E_SERVER_COMMANDS_MISSING,message:f.Errors[f.Errors.E_SERVER_COMMANDS_MISSING]}}))&&f.Log.error(r)}else(r=f.Callback.callSafe(l,null,{error:f.Errors.E_SERVER_RESPONSE_MISSING,details:{code:f.Errors.E_SERVER_RESPONSE_MISSING,message:f.Errors[f.Errors.E_SERVER_RESPONSE_MISSING]}}))&&f.Log.error(r)}else f.Callback.callSafe(l,null,{error:e.error,details:e.details})}},n);function n(){}f.Server=e,function(d){var e,r;(e=d.Error||(d.Error={}))[e.HMI_SUCCESS=0]="HMI_SUCCESS",e[e.HMI_E_FAIL=257]="HMI_E_FAIL",e[e.HMI_E_SYMBOL_IN_USE=274]="HMI_E_SYMBOL_IN_USE",e[e.HMI_E_SYMBOL_NOT_MAPPED=513]="HMI_E_SYMBOL_NOT_MAPPED",e[e.HMI_E_MISSING_LICENSE_HANDSHAKE=781]="HMI_E_MISSING_LICENSE_HANDSHAKE",e[e.HMI_E_LICENSE_VERIFY=782]="HMI_E_LICENSE_VERIFY",e[e.HMI_E_INSUFFICIENT_ACCESS=4101]="HMI_E_INSUFFICIENT_ACCESS",(r=d.ACCESS||(d.ACCESS={}))[r.NONE=0]="NONE",r[r.READ=1]="READ",r[r.WRITE=2]="WRITE",r[r.READWRITE=3]="READWRITE";var t=(
/**
             * Add a new user with a given password
             * @param {string} userName
             * @param {string} password
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.addUser=function(e,r,t){return void 0===t&&(t=null),this.addUserEx(e,r,null,null,t)},
/**
             * Add a new user with a given password
             * @param {string} userName
             * @param {string} password
             * @param {object} options optional options
             * @param {string} options.domain domain of user management. defaults to TcHmiUserManagement
             * @param {boolean} options.enabled a new user can be disabled
             * @param {string} options.autoLogout ISO8601 TimeSpan for logout after user interaction
             * @param {string} options.locale locale of this user
             * @param {string[]} options.groups list of groups the user will be part of
             * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.addUserEx=function(t,e,o,i,n){if(void 0===o&&(o=null),void 0===i&&(i=null),void 0===n&&(n=null),!t){var r={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter userName given",domain:"TcHmi.Server.UserManagement"};return f.Callback.callSafe(n,null,{error:r.code,details:r}),r}if(!e)return r={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter password given",domain:"TcHmi.Server.UserManagement"},f.Callback.callSafe(n,null,{error:r.code,details:r}),r;var a=f.System.Services.accessManager.getCurrentUserConfig().defaultAuthExtension,s={userName:t,password:e};o&&("string"==typeof o.domain&&(a=o.domain),"boolean"==typeof o.enabled&&(s.enabled=o.enabled));var l={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:a+".AddUser",writeValue:s}]};return null!==d.requestEx(l,i,d.__handleServerAnswer(n,function(e){var r={requestType:"ReadWrite",commands:[]};o&&("string"!=typeof o.locale&&null!==o.locale||r.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+a+"::"+t+"::USERGROUPUSERS_LOCALE",writeValue:o.locale}),"string"!=typeof o.timeFormatLocale&&null!==o.timeFormatLocale||r.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+a+"::"+t+"::USERGROUPUSERS_TIMEFORMATLOCALE",writeValue:o.timeFormatLocale}),"string"!=typeof o.timeZone&&null!==o.timeZone||r.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+a+"::"+t+"::USERGROUPUSERS_TIMEZONE",writeValue:o.timeZone}),"string"==typeof o.autoLogout&&r.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+a+"::"+t+"::USERGROUPUSERS_AUTO_LOGOFF",writeValue:o.autoLogout}),Array.isArray(o.groups)&&r.commands.push({commandOptions:["SendErrorMessage","SendWriteValue","Add"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+a+"::"+t+"::USERGROUPUSERS_GROUPS",writeValue:o.groups})),r.commands.length?d.requestEx(r,i,d.__handleServerAnswer(n)):f.Callback.callSafe(n,null,{error:f.Errors.NONE})}))?{code:f.Errors.NONE}:(r={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.UserManagement"},f.Callback.callSafe(n,null,{error:r.code,details:r}),r)},
/**
             * Lists all usernames as a string array
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IUsernameListResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUsernames=function(e){return void 0===e&&(e=null),this.listUsernamesEx(null,null,e)},
/**
             * Lists all usernames as a string array
             * @param {object} options optional options
             * @param {string} options.domain domain of user management. defaults to TcHmiUserManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IUsernameListResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUsernamesEx=function(e,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var o=f.System.Services.accessManager.getCurrentUserConfig().defaultAuthExtension;e&&"string"==typeof e.domain&&(o=e.domain);var i={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:o+".ListUsers"}]};if(null!==d.requestEx(i,r,d.__handleServerAnswer(t,function(e){f.Callback.callSafe(t,null,{error:f.Errors.NONE,userList:e.response.commands[0].readValue})})))return{code:f.Errors.NONE};var n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.UserManagement"};return f.Callback.callSafe(t,null,{error:n.code,details:n}),n},
/**
             * Lists all username as a dictionary with all meta data
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IUserResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUsers=function(e){return void 0===e&&(e=null),this.listUsersEx(null,null,e)},
/**
             * Lists all username as a dictionary with all meta data
             * @param {object} options optional options
             * @param {string} options.domain domain of user management. defaults to TcHmiUserManagement
             * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IUserResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUsersEx=function(e,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var a=f.System.Services.accessManager.getCurrentUserConfig().defaultAuthExtension;e&&"string"==typeof e.domain&&(a=e.domain);var t={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:a+".Config::USERS"},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+a}]};if(null!==d.requestEx(t,r,d.__handleServerAnswer(n,function(e){var r={},t=e.response.commands[0].readValue,o=e.response.commands[1].readValue;for(var i in t)r[i]={domain:a,enabled:t[i].ENABLED,autoLogout:o[i].USERGROUPUSERS_AUTO_LOGOFF,locale:o[i].USERGROUPUSERS_LOCALE,timeFormatLocale:o[i].USERGROUPUSERS_TIMEFORMATLOCALE,timeZone:o[i].USERGROUPUSERS_TIMEZONE,groups:o[i].USERGROUPUSERS_GROUPS};f.Callback.callSafe(n,null,{error:f.Errors.NONE,userDetails:r})})))return{code:f.Errors.NONE};var o={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.UserManagement"};return f.Callback.callSafe(n,null,{error:o.code,details:o}),o},
/**
             * Lists all user groups as a dictionary with all meta data
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IGroupResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUserGroups=function(e){return void 0===e&&(e=null),this.listUserGroupsEx(null,null,e)},
/**
             * Lists all user groups as a dictionary with all meta data
             * @param {object} options optional options (not used till now)
             * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IGroupResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUserGroupsEx=function(e,r,i){if(void 0===r&&(r=null),void 0===i&&(i=null),null!==d.requestEx({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPS"}]},r,d.__handleServerAnswer(i,function(e){var r={},t=e.response.commands[0].readValue;for(var o in t)r[o]={enabled:t[o].ENABLED,fileAccess:t[o].FILEACCESS,files:t[o].FILES,symbolAccess:t[o].SYMBOLACCESS,symbols:t[o].SYMBOLS};f.Callback.callSafe(i,null,{error:f.Errors.NONE,groupDetailsList:r})})))return{code:f.Errors.NONE};var t={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.UserManagement"};return f.Callback.callSafe(i,null,{error:t.code,details:t}),t},
/**
             * Lists all users of a group as a string array
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IUsernameListResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUsersInGroup=function(e,r){return void 0===r&&(r=null),this.listUsersInGroupEx(e,null,null,r)},
/**
             * Lists all users of a group as a string array
             * @param {object} options optional options
             * @param {string} options.domain domain of user management. defaults to TcHmiUserManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.Server.UserManagement.IUsernameListResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.listUsersInGroupEx=function(n,e,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var t=f.System.Services.accessManager.getCurrentUserConfig().defaultAuthExtension;e&&"string"==typeof e.domain&&(t=e.domain);var o={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPS"},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+t}]};if(null!==d.requestEx(o,r,d.__handleServerAnswer(a,function(e){var r=e.response.commands[0].readValue;if(n in r){var t=e.response.commands[1].readValue,o=[];for(var i in t)t[i].USERGROUPUSERS_GROUPS&&-1!==t[i].USERGROUPUSERS_GROUPS.indexOf(n)&&o.push(i);f.Callback.callSafe(a,null,{error:f.Errors.NONE,userList:o})}else f.Callback.callSafe(a,null,{error:f.Errors.E_KEY_NOT_FOUND,details:{code:f.Errors.E_KEY_NOT_FOUND,reason:"Requested user group not found",domain:"TcHmi.Server.UserManagement"}})})))return{code:f.Errors.NONE};var i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.UserManagement"};return f.Callback.callSafe(a,null,{error:i.code,details:i}),i},
/**
             * Removes a user
             * @param userName
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.removeUser=function(e,r){return void 0===r&&(r=null),this.removeUserEx(e,null,null,r)},
/**
              * Removes a user
              * @param {string} userName
              * @param {object} options optional options
              * @param {string} options.domain defaults to TcHmiUserManagement
              * @param {TcHmi.Server.IRequestOptions|null} requestOptions Request options
              * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
              * @preserve (Part of the public API)
              */
o.removeUserEx=function(e,r,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),!e){var i={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter userName given",domain:"TcHmi.Server.UserManagement"};return f.Callback.callSafe(o,null,{error:i.code,details:i}),i}var n=f.System.Services.accessManager.getCurrentUserConfig().defaultAuthExtension;r&&"string"==typeof r.domain&&(n=r.domain);var a={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:n+".RemoveUser",writeValue:e}]};return null!==d.requestEx(a,t,d.__handleServerAnswer(o))?{code:f.Errors.NONE}:(i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.UserManagement"},f.Callback.callSafe(o,null,{error:i.code,details:i}),i)},
/**
             * Update user config
             * @param userName
             * @param {object} options optional options
             * @param {string} options.domain domain of user management. defaults to TcHmiUserManagement
             * @param {boolean} options.enabled a new user can be disabled
             * @param {string} options.autoLogout ISO8601 TimeSpan for logout after user interaction
             * @param {string} options.locale locale of this user
             * @param {string} options.newName new name for this user
             * @param {string} options.password new password for this user
             * @param {string[]} options.addGroups List of groups the user will be added
             * @param {string[]} options.removeGroups List of groups the user will be removed
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.updateUser=function(e,r,t){return void 0===t&&(t=null),this.updateUserEx(e,r,null,t)},
/**
             * Update user config
             * @param userName
             * @param {object} options optional options
             * @param {string} options.domain domain of user management. defaults to TcHmiUserManagement
             * @param {boolean} options.enabled a new user can be disabled
             * @param {string} options.autoLogout ISO8601 TimeSpan for logout after user interaction
             * @param {string} options.locale locale of this user
             * @param {string[]} options.addGroups List of groups the user will be added
             * @param {string[]} options.removeGroups List of groups the user will be removed
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
o.updateUserEx=function(e,r,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),!e){var i={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter userName given",domain:"TcHmi.Server.UserManagement"};return f.Callback.callSafe(o,null,{error:i.code,details:i}),i}var n=f.System.Services.accessManager.getCurrentUserConfig().defaultAuthExtension,a={requestType:"ReadWrite",commands:[]};if(r){if("string"==typeof r.domain&&(n=r.domain),"string"==typeof r.password&&a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:n+".AddUser",writeValue:{userName:e,password:r.password}}),"boolean"==typeof r.enabled&&a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:n+".Config::USERS::"+e+"::ENABLED",writeValue:r.enabled}),"string"==typeof r.autoLogout&&a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+n+"::"+e+"::USERGROUPUSERS_AUTO_LOGOFF",writeValue:r.autoLogout}),"string"!=typeof r.locale&&null!==r.locale||a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+n+"::"+e+"::USERGROUPUSERS_LOCALE",writeValue:r.locale}),"string"!=typeof r.timeFormatLocale&&null!==r.timeFormatLocale||a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+n+"::"+e+"::USERGROUPUSERS_TIMEFORMATLOCALE",writeValue:r.timeFormatLocale}),"string"!=typeof r.timeZone&&null!==r.timeZone||a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+n+"::"+e+"::USERGROUPUSERS_TIMEZONE",writeValue:r.timeZone}),Array.isArray(r.addGroups)&&a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue","Add"],symbol:"TcHmiSrv.Config::USERGROUPUSERS::"+n+"::"+e+"::USERGROUPUSERS_GROUPS",writeValue:r.addGroups}),Array.isArray(r.removeGroups))for(var s=0,l=r.removeGroups;s<l.length;s++){var c=l[s];a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Remove",writeValue:{domain:"TcHmiSrv",path:"USERGROUPUSERS::"+n+"::"+e+"::USERGROUPUSERS_GROUPS",value:c}})}"string"==typeof r.newName&&a.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Rename",writeValue:{domain:n,old:"Config::USERS::"+e,new:"Config::USERS::"+r.newName}})}return a.commands.length?null!==d.requestEx(a,t,d.__handleServerAnswer(o))?{code:f.Errors.NONE}:(i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.UserManagement"},f.Callback.callSafe(o,null,{error:i.code,details:i}),i):(f.Callback.callSafe(o,null,{error:f.Errors.NONE}),{code:f.Errors.NONE})},o);function o(){}d.UserManagement=t;var i=(
/**
             * Lists all available recipe types
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.listRecipeTypes=function(e){return void 0===e&&(e=null),this.listRecipeTypesEx(null,null,e)},
/**
             * Lists all available recipe types
             * This function provides more options to manipulate the request
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.listRecipeTypesEx=function(e,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var o="TcHmiRecipeManagement";e&&"string"==typeof e.domain&&(o=e.domain);var i={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:o+".Config::recipeTypeList"}]};if(null!==d.requestEx(i,r,f.Server.__handleServerAnswer(t,function(e){f.Callback.callSafe(t,null,{error:f.Errors.NONE,value:e.response.commands[0].readValue})})))return{code:f.Errors.NONE};var n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(t,null,{error:n.code,details:n}),n},
/**
             * Creates a recipe type folder
             * @param {string} path name of the new folder
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipeTypeFolder=function(e,r){return void 0===r&&(r=null),this.createRecipeTypeFolderEx(e,null,null,r)},
/**
             * Creates a recipe type folder
             * This function provides more options to manipulate the request
             * @param {string} path name of the new folder
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipeTypeFolderEx=function(e,r,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),"string"!=typeof e||""===e){var i={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(o,null,{error:i.code,details:i}),i}var n="TcHmiRecipeManagement";r&&"string"==typeof r.domain&&(n=r.domain);var a={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:n+".Config::recipeTypeList::"+e,writeValue:{}}]};return null!==d.requestEx(a,t,f.Server.__handleServerAnswer(o))?{code:f.Errors.NONE}:(i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(o,null,{error:i.code,details:i}),i)},
/**
             * Deletes a recipe type folder
             * @param {string} path name of the folder
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipeTypeFolder=function(e,r){return void 0===r&&(r=null),this.deleteRecipeTypeFolderEx(e,null,null,r)},
/**
             * Deletes a recipe type folder
             * This function provides more options to manipulate the request
             * @param {string} path name of the folder
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipeTypeFolderEx=function(e,r,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),"string"!=typeof e||""===e){var i={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(o,null,{error:i.code,details:i}),i}var n="TcHmiRecipeManagement";r&&"string"==typeof r.domain&&(n=r.domain);var a={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue","Delete"],symbol:n+".Config::recipeTypeList::"+e}]};return null!==d.requestEx(a,t,f.Server.__handleServerAnswer(o))?{code:f.Errors.NONE}:(i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(o,null,{error:i.code,details:i}),i)},
/**
             * Creates a new recipe type
             * @param {string} recipeTypeName name of the recipe type
             * @param {TcHmi.Server.RecipeManagement.RecipeType} recipeType recipe type definition
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipeType=function(e,r,t,o){return void 0===o&&(o=null),this.createRecipeTypeEx(e,r,t,null,null,o)},
/**
             * Creates a new recipe type
             * This function provides more options to manipulate the request
             * @param {string} recipeTypeName name of the recipe type
             * @param {TcHmi.Server.RecipeManagement.RecipeType} recipeType recipe type definition
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipeTypeEx=function(e,r,t,o,i,n){if(void 0===i&&(i=null),void 0===n&&(n=null),"string"!=typeof e||""===e){var a={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeTypeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(n,null,{error:a.code,details:a}),a}if(null!==t&&"string"!=typeof t)return a={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(n,null,{error:a.code,details:a}),a;var s="TcHmiRecipeManagement";o&&"string"==typeof o.domain&&(s=o.domain);var l={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:s+".Config::recipeTypeList::"+(t?t+"::":"")+e,writeValue:r}]};return null!==d.requestEx(l,i,f.Server.__handleServerAnswer(n))?{code:f.Errors.NONE}:(a={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(n,null,{error:a.code,details:a}),a)},
/**
             * Renames or moves a recipe type
             * @param {string} recipeTypeName old name of the recipe type
             * @param {string | null} path old path of the recipe type (root folder if set to null)
             * @param {string} newName new name of the recipe type
             * @param {string | null} newPath new path of the recipe type (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipeType=function(e,r,t,o,i){return void 0===i&&(i=null),this.renameRecipeTypeEx(e,r,t,o,null,null,i)},
/**
             * Renames or moves a recipe type
             * This function provides more options to manipulate the request
             * @param {string} recipeTypeName old name of the recipe type
             * @param {string | null} path old path of the recipe type (root folder if set to null)
             * @param {string} newName new name of the recipe type
             * @param {string | null} newPath new path of the recipe type (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipeTypeEx=function(e,r,t,o,i,n,a){return void 0===n&&(n=null),void 0===a&&(a=null),this.__renameRecipeEntry("recipeTypeList",e,r,t,o,i,n,a)},
/**
             * Renames or moves a recipe type folder
             * @param {string} recipeTypeFolderName old name of the recipe type
             * @param {string | null} path old path of the recipe type (root folder if set to null)
             * @param {string} newName new name of the recipe type
             * @param {string | null} newPath new path of the recipe type (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipeTypeFolder=function(e,r,t,o,i){return void 0===i&&(i=null),this.renameRecipeTypeFolderEx(e,r,t,o,null,null,i)},
/**
             * Renames or moves a recipe type folder
             * This function provides more options to manipulate the request
             * @param {string} recipeTypeFolderName old name of the recipe type
             * @param {string | null} path old path of the recipe type (root folder if set to null)
             * @param {string} newName new name of the recipe type
             * @param {string | null} newPath new path of the recipe type (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipeTypeFolderEx=function(e,r,t,o,i,n,a){return void 0===n&&(n=null),void 0===a&&(a=null),this.__renameRecipeEntry("recipeTypeList",e,r,t,o,i,n,a)},l.__renameRecipeEntry=function(e,r,t,o,i,n,a,s){if(void 0===a&&(a=null),void 0===s&&(s=null),"string"!=typeof r||""===r||"string"!=typeof o||""===o){var l={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter oldName or newName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(s,null,{error:l.code,details:l}),l}if(null!==t&&"string"!=typeof t)return l={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(s,null,{error:l.code,details:l}),l;if(null!==i&&"string"!=typeof i)return l={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter newPath given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(s,null,{error:l.code,details:l}),l;var c="TcHmiRecipeManagement";n&&"string"==typeof n.domain&&(c=n.domain);var u={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Rename",writeValue:{domain:c,configuration:"default",old:e+"::"+(t?t+"::":"")+r,new:e+"::"+(i?i+"::":"")+o}}]};return null!==d.requestEx(u,a,f.Server.__handleServerAnswer(s))?{code:f.Errors.NONE}:(l={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(s,null,{error:l.code,details:l}),l)},
/**
             * Deletes a recipe type
             * @param {string} recipeTypeName name of the recipe type
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipeType=function(e,r,t){return void 0===t&&(t=null),this.deleteRecipeTypeEx(e,r,null,null,t)},
/**
             * Deletes a recipe type
             * This function provides more options to manipulate the request
             * @param {string} recipeTypeName name of the recipe type
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipeTypeEx=function(e,r,t,o,i){if(void 0===o&&(o=null),void 0===i&&(i=null),"string"!=typeof e||""===e){var n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeTypeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(i,null,{error:n.code,details:n}),n}if(null!==r&&"string"!=typeof r)return n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n;var a="TcHmiRecipeManagement";t&&"string"==typeof t.domain&&(a=t.domain);var s={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue","Delete"],symbol:a+".Config::recipeTypeList::"+(r?r+"::":"")+e}]};return null!==d.requestEx(s,o,f.Server.__handleServerAnswer(i))?{code:f.Errors.NONE}:(n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n)},
/**
             * Lists all available recipes
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.listRecipes=function(e){return void 0===e&&(e=null),this.listRecipesEx(null,null,e)},
/**
             * Lists all available recipes
             * This function provides more options to manipulate the request
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.listRecipesEx=function(e,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var o="TcHmiRecipeManagement";e&&"string"==typeof e.domain&&(o=e.domain);var i={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:o+".Config::recipeList"}]};if(null!==d.requestEx(i,r,f.Server.__handleServerAnswer(t,function(e){f.Callback.callSafe(t,null,{error:f.Errors.NONE,value:e.response.commands[0].readValue})})))return{code:f.Errors.NONE};var n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(t,null,{error:n.code,details:n}),n},
/**
             * Creates a recipe folder
             * @param {string} path name of the new folder
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipeFolder=function(e,r){return void 0===r&&(r=null),this.createRecipeFolderEx(e,null,null,r)},
/**
             * Creates a recipe folder
             * This function provides more options to manipulate the request
             * @param {string} path name of the new folder
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipeFolderEx=function(e,r,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),"string"!=typeof e||""===e){var i={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(o,null,{error:i.code,details:i}),i}var n="TcHmiRecipeManagement";r&&"string"==typeof r.domain&&(n=r.domain);var a={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:n+".Config::recipeList::"+e,writeValue:{}}]};return null!==d.requestEx(a,t,f.Server.__handleServerAnswer(o))?{code:f.Errors.NONE}:(i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(o,null,{error:i.code,details:i}),i)},
/**
             * Deletes a recipe folder
             * @param {string} path name of the folder
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipeFolder=function(e,r){return void 0===r&&(r=null),this.deleteRecipeFolderEx(e,null,null,r)},
/**
             * Deletes a recipe folder
             * This function provides more options to manipulate the request
             * @param {string} path name of the folder
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipeFolderEx=function(e,r,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),"string"!=typeof e||""===e){var i={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(o,null,{error:i.code,details:i}),i}var n="TcHmiRecipeManagement";r&&"string"==typeof r.domain&&(n=r.domain);var a={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue","Delete"],symbol:n+".Config::recipeList::"+e}]};return null!==d.requestEx(a,t,f.Server.__handleServerAnswer(o))?{code:f.Errors.NONE}:(i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(o,null,{error:i.code,details:i}),i)},
/**
             * Creates a new recipe
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {TcHmi.Server.RecipeManagement.Recipe} recipe recipe definition
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipe=function(e,r,t,o){return void 0===o&&(o=null),this.createRecipeEx(e,r,t,null,null,o)},
/**
             * Creates a new recipe
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {TcHmi.Server.RecipeManagement.Recipe} recipe recipe definition
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.createRecipeEx=function(e,r,t,o,i,n){if(void 0===i&&(i=null),void 0===n&&(n=null),"string"!=typeof e||""===e){var a={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(n,null,{error:a.code,details:a}),a}if(null!==r&&"string"!=typeof r)return a={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(n,null,{error:a.code,details:a}),a;var s="TcHmiRecipeManagement";o&&"string"==typeof o.domain&&(s=o.domain);var l={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:s+".Config::recipeList"+(r?"::"+r:"")+"::"+e,writeValue:t}]};return null!==d.requestEx(l,i,f.Server.__handleServerAnswer(n))?{code:f.Errors.NONE}:(a={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(n,null,{error:a.code,details:a}),a)},
/**
             * Lists one recipe
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.getRecipe=function(e,r,t){return void 0===t&&(t=null),this.getRecipeEx(e,r,null,null,t)},
/**
             * Lists one recipe
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.getRecipeEx=function(e,r,t,o,i){if(void 0===o&&(o=null),void 0===i&&(i=null),"string"!=typeof e||""===e){var n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(i,null,{error:n.code,details:n}),n}if(null!==r&&"string"!=typeof r)return n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n;var a="TcHmiRecipeManagement";t&&"string"==typeof t.domain&&(a=t.domain);var s={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:a+".Config::recipeList"+(r?"::"+r:"")+"::"+e}]};return null!==d.requestEx(s,o,f.Server.__handleServerAnswer(i,function(e){f.Callback.callSafe(i,null,{error:f.Errors.NONE,value:e.response.commands[0].readValue})}))?{code:f.Errors.NONE}:(n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n)},
/**
             * Updates a recipe
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {Dictionary<any>} newValues dictionary of the new values
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.updateRecipe=function(e,r,t,o){return void 0===o&&(o=null),this.updateRecipeEx(e,r,t,null,null,o)},
/**
             * Updates a recipe
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {Dictionary<any>} newValues dictionary of the new values
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.updateRecipeEx=function(e,r,t,o,i,n){if(void 0===i&&(i=null),void 0===n&&(n=null),"string"!=typeof e||""===e){var a={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(n,null,{error:a.code,details:a}),a}if(null!==r&&"string"!=typeof r)return a={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(n,null,{error:a.code,details:a}),a;var s="TcHmiRecipeManagement";o&&"string"==typeof o.domain&&(s=o.domain);var l={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:s+".Config::recipeList"+(r?"::"+r:"")+"::"+e+"::values",writeValue:t}]};return null!==d.requestEx(l,i,f.Server.__handleServerAnswer(n))?{code:f.Errors.NONE}:(a={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(n,null,{error:a.code,details:a}),a)},
/**
             * Reads all values which is referenced by a recipe
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.readFromTarget=function(e,r,t){return void 0===t&&(t=null),this.readFromTargetEx(e,r,null,null,t)},
/**
             * Reads all values which is referenced by a recipe
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.Server.RecipeManagement.IReadFromTargetResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.readFromTargetEx=function(e,r,t,o,i){if(void 0===o&&(o=null),void 0===i&&(i=null),"string"!=typeof e||""===e){var n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(i,null,{error:n.code,details:n}),n}if(null!==r&&"string"!=typeof r)return n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n;var a="TcHmiRecipeManagement";t&&"string"==typeof t.domain&&(a=t.domain);var s={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:a+".ReadFromTarget",writeValue:{path:(r?r+"::":"")+e}}]};return null!==d.requestEx(s,o,f.Server.__handleServerAnswer(i,function(e){f.Callback.callSafe(i,null,{error:f.Errors.NONE,value:e.response.commands[0].readValue})}))?{code:f.Errors.NONE}:(n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n)},
/**
             * Reads the current values which are referenced from a base recipe and write it back
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.teach=function(e,r,t){return void 0===t&&(t=null),this.teachEx(e,r,null,null,t)},
/**
             * Reads the current values which are referenced from a base recipe and write it back
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.teachEx=function(r,t,o,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),this.readFromTargetEx(r,t,o,i,function(e){e.error===f.Errors.NONE?l.createRecipeEx(r,t,e.value[(t?t+"::":"")+r],o,i,n):f.Callback.callSafe(n,null,e)})},
/**
             * Reads the current values which are referenced from a base recipe and write it into a new recipe
             * @param {string} recipeName name of the base recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {string} newRecipeName name of the new recipe. (could be prefixed with a path if seperated with ::)
             * @param {string | null} newRecipePath path of the new recipe. (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.teachAsNewRecipe=function(e,r,t,o,i){return void 0===i&&(i=null),this.teachAsNewRecipeEx(e,r,t,o,null,null,i)},
/**
             * Reads the current values which are referenced from a base recipe and write it into a new recipe
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the base recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {string} newRecipeName name of the new recipe. (could be prefixed with a path if seperated with ::)
             * @param {string | null} newRecipePath path of the new recipe. (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.teachAsNewRecipeEx=function(r,t,o,i,n,a,s){if(void 0===a&&(a=null),void 0===s&&(s=null),"string"==typeof o&&""!==o)return null!==t&&"string"!=typeof t?(e={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(s,null,{error:e.code,details:e}),e):null===i||"string"==typeof i?this.readFromTargetEx(r,t,n,a,function(e){e.error===f.Errors.NONE?l.createRecipeEx(o,i,e.value[(t?t+"::":"")+r],n,a,s):f.Callback.callSafe(s,null,e)}):(e={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter newRecipePath given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(s,null,{error:e.code,details:e}),e);var e={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter newRecipeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(s,null,{error:e.code,details:e}),e},
/**
             * Activates a recipe (writes all values)
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.activate=function(e,r,t){return void 0===t&&(t=null),this.activateEx(e,r,null,null,t)},
/**
             * Activates a recipe (writes all values)
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.activateEx=function(e,r,t,o,i){if(void 0===o&&(o=null),void 0===i&&(i=null),"string"!=typeof e||""===e){var n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(i,null,{error:n.code,details:n}),n}if(null!==r&&"string"!=typeof r)return n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n;var a="TcHmiRecipeManagement";t&&"string"==typeof t.domain&&(a=t.domain);var s={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:a+".ActivateRecipe",writeValue:{path:(r?r+"::":"")+e}}]};return null!==d.requestEx(s,o,f.Server.__handleServerAnswer(i))?{code:f.Errors.NONE}:(n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n)},
/**
             * Lists all active recipes
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.getActiveRecipes=function(e){return void 0===e&&(e=null),this.getActiveRecipesEx(null,null,e)},
/**
             * Lists all active recipes
             * This function provides more options to manipulate the request
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.getActiveRecipesEx=function(e,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var o="TcHmiRecipeManagement";e&&"string"==typeof e.domain&&(o=e.domain);var i={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:o+".GetActiveRecipes"}]};if(null!==d.requestEx(i,r,f.Server.__handleServerAnswer(t,function(e){f.Callback.callSafe(t,null,{error:f.Errors.NONE,recipeList:e.response.commands[0].readValue})})))return{code:f.Errors.NONE};var n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(t,null,{error:n.code,details:n}),n},
/**
             * Renames or moves a recipe
             * @param {string} recipeName old name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path old path of the recipe (root folder if set to null)
             * @param {string} newName new name of the recipe
             * @param {string | null} newPath new path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipe=function(e,r,t,o,i){return void 0===i&&(i=null),this.renameRecipeEx(e,r,t,o,null,null,i)},
/**
             * Renames or moves a recipe
             * This function provides more options to manipulate the request
             * @param {string} recipeName old name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path old path of the recipe (root folder if set to null)
             * @param {string} newName new name of the recipe
             * @param {string | null} newPath new path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipeEx=function(e,r,t,o,i,n,a){return void 0===n&&(n=null),void 0===a&&(a=null),this.__renameRecipeEntry("recipeList",e,r,t,o,i,n,a)},
/**
             * Renames or moves a recipe folder
             * @param {string} recipeFolderName old name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path old path of the recipe (root folder if set to null)
             * @param {string} newName new name of the recipe
             * @param {string | null} newPath new path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipeFolder=function(e,r,t,o,i){return void 0===i&&(i=null),this.renameRecipeFolderEx(e,r,t,o,null,null,i)},
/**
             * Renames or moves a recipe folder
             * This function provides more options to manipulate the request
             * @param {string} recipeFolderName old name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path old path of the recipe (root folder if set to null)
             * @param {string} newName new name of the recipe
             * @param {string | null} newPath new path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.renameRecipeFolderEx=function(e,r,t,o,i,n,a){return void 0===n&&(n=null),void 0===a&&(a=null),this.__renameRecipeEntry("recipeList",e,r,t,o,i,n,a)},
/**
             * Deletes a recipe
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipe=function(e,r,t){return void 0===t&&(t=null),this.deleteRecipeEx(e,r,null,null,t)},
/**
             * Deletes a recipe
             * This function provides more options to manipulate the request
             * @param {string} recipeName name of the recipe (could be prefixed with a path if seperated with ::)
             * @param {string | null} path path of the recipe (root folder if set to null)
             * @param {object} options optional options
             * @param {string} options.domain domain of recipe management. defaults to recipeManagement
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
l.deleteRecipeEx=function(e,r,t,o,i){if(void 0===o&&(o=null),void 0===i&&(i=null),"string"!=typeof e||""===e){var n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter recipeName given",domain:"TcHmi.Server.RecipeManagement"};return f.Callback.callSafe(i,null,{error:n.code,details:n}),n}if(null!==r&&"string"!=typeof r)return n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter path given",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n;var a="TcHmiRecipeManagement";t&&"string"==typeof t.domain&&(a=t.domain);var s={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue","Delete"],symbol:a+".Config::recipeList::"+(r?r+"::":"")+e}]};return null!==d.requestEx(s,o,f.Server.__handleServerAnswer(i))?{code:f.Errors.NONE}:(n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.RecipeManagement"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n)},l);function l(){}d.RecipeManagement=i;var n=(
/**
             * Adding a Symbol to the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IEntrySettings} settings
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.add=function(e,r,t){return void 0===t&&(t=null),this.addEx2(e,r,null,null,t)},
/**
             * Adding a Symbol to the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IEntrySettings} settings
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.addEx=function(e,r,t,o){return void 0===o&&(o=null),this.addEx2(e,r,null,t,o)},
/**
             * Adding a Symbol to the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IEntrySettings} settings
             * @param {TcHmi.Server.Historize.IOptions} options global settings
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.addEx2=function(e,r,t,o,i){if(void 0===i&&(i=null),!e){var n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter symbolName given",domain:"TcHmi.Server.Historize"};return f.Callback.callSafe(i,null,{error:n.code,details:n}),n}if(null==r||"object"!=typeof r)return n={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter settings given",domain:"TcHmi.Server.Historize"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n;var a="TcHmiSqliteHistorize";t&&"string"==typeof t.domain&&(a=t.domain);var s={interval:"PT1S",maxEntries:1e4,rowLimit:1e4,recordingEnabled:!0};void 0!==r.INTERVAL&&(s.interval=r.INTERVAL),void 0!==r.MAXENTRIES&&(s.maxEntries=r.MAXENTRIES),void 0!==r.ROWLIMIT&&(s.rowLimit=r.ROWLIMIT),void 0!==r.RECORDINGENABLED&&(s.recordingEnabled=r.RECORDINGENABLED);var l={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:a+".Config::historizedSymbolList::"+e,writeValue:s}]};return null!==d.requestEx(l,o,f.Server.__handleServerAnswer(i))?{code:f.Errors.NONE}:(n={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.Historize"},f.Callback.callSafe(i,null,{error:n.code,details:n}),n)},
/**
             * Removing a Symbol from the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.remove=function(e,r){return void 0===r&&(r=null),this.removeEx2(e,null,null,r)},
/**
            * Removing a Symbol from the Historize Configuration of the server
            * @param {string} symbolName Name of the Symbol to manipulate
            * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
            * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
            * @preserve (Part of the public API)
            */
a.removeEx=function(e,r,t){return void 0===t&&(t=null),this.removeEx2(e,null,r,t)},
/**
             * Removing a Symbol from the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IOptions} options
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.removeEx2=function(e,r,t,o){if(void 0===o&&(o=null),!e){var i={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter symbolName given",domain:"TcHmi.Server.Historize"};return f.Callback.callSafe(o,null,{error:i.code,details:i}),i}var n="TcHmiSqliteHistorize";r&&"string"==typeof r.domain&&(n=r.domain);var a={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue","Delete"],symbol:n+".Config::historizedSymbolList::"+e}]};return null!==d.requestEx(a,t,f.Server.__handleServerAnswer(o))?{code:f.Errors.NONE}:(i={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.Historize"},f.Callback.callSafe(o,null,{error:i.code,details:i}),i)},
/**
             * Update a config of a Symbol in the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IEntrySettings} settings
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.update=function(e,r,t){return void 0===t&&(t=null),this.updateEx2(e,r,null,null,t)},
/**
             * Update a config of a Symbol in the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IEntrySettings} settings
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.updateEx=function(e,r,t,o){return void 0===o&&(o=null),this.updateEx2(e,r,null,t,o)},
/**
             * Update a config of a Symbol in the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IEntrySettings} settings
             * @param {TcHmi.Server.Historize.IOptions} options global settings
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.updateEx2=function(i,n,e,a,s){if(void 0===s&&(s=null),!i){var r={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter symbolName given",domain:"TcHmi.Server.Historize"};return f.Callback.callSafe(s,null,{error:r.code,details:r}),r}if(null==n||"object"!=typeof n)return r={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter settings given",domain:"TcHmi.Server.Historize"},f.Callback.callSafe(s,null,{error:r.code,details:r}),r;var l="TcHmiSqliteHistorize";e&&"string"==typeof e.domain&&(l=e.domain);var t={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:l+".Config::historizedSymbolList::"+i}]};return null!==d.requestEx(t,a,d.__handleServerAnswer(s,function(e){var r=e.response.commands[0].readValue;if(r){var t=tchmi_clone_object(r);void 0!==n.INTERVAL&&(t.interval=n.INTERVAL),void 0!==n.MAXENTRIES&&(t.maxEntries=n.MAXENTRIES),void 0!==n.ROWLIMIT&&(t.rowLimit=n.ROWLIMIT),void 0!==n.RECORDINGENABLED&&(t.recordingEnabled=n.RECORDINGENABLED);var o={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:l+".Config::historizedSymbolList::"+i,writeValue:t}]};d.requestEx(o,a,f.Server.__handleServerAnswer(s))}else f.Callback.callSafe(s,null,{error:f.Errors.E_SERVER_READVALUE_MISSING})}))?{code:f.Errors.NONE}:(r={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.Historize"},f.Callback.callSafe(s,null,{error:r.code,details:r}),r)},
/**
             * Gets the current config of a Symbol in the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.get=function(e,r){return void 0===r&&(r=null),this.getEx2(e,null,null,r)},
/**
             * Gets the current config of a Symbol in the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.IRequestOptions} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.getEx=function(e,r,t){return void 0===t&&(t=null),this.getEx2(e,null,r,t)},
/**
             * Gets the current config of a Symbol in the Historize Configuration of the server
             * @param {string} symbolName Name of the Symbol to manipulate
             * @param {TcHmi.Server.Historize.IOptions|null} options
             * @param {TcHmi.Server.IRequestOptions|null} requestOptions for the request itself
             * @param {null | ((this: void, data: TcHmi.IResultObject) => void)} callback
             * @preserve (Part of the public API)
             */
a.getEx2=function(o,e,r,i){if(void 0===i&&(i=null),!o){var t={code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:"Invalid parameter symbolName given.",domain:"TcHmi.Server.Historize"};return f.Callback.callSafe(i,null,{error:t.code,details:t}),t}var n="TcHmiSqliteHistorize";e&&"string"==typeof e.domain&&(n=e.domain);var a={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:n+".Config::historizedSymbolList::"+o}]};return null!==d.requestEx(a,r,d.__handleServerAnswer(i,function(e){var r=e.response.commands[0].readValue;if(r){var t={};void 0!==r.interval&&(t.INTERVAL=r.interval),void 0!==r.maxEntries&&(t.MAXENTRIES=r.maxEntries),void 0!==r.rowLimit&&(t.ROWLIMIT=r.rowLimit),void 0!==r.recordingEnabled&&(t.RECORDINGENABLED=r.recordingEnabled),f.Callback.callSafe(i,null,{error:f.Errors.NONE,key:o,settings:t})}else f.Callback.callSafe(i,null,{error:f.Errors.E_SERVER_READVALUE_MISSING})}))?{code:f.Errors.NONE}:(t={code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"Request could not be sent.",domain:"TcHmi.Server.Historize"},f.Callback.callSafe(i,null,{error:t.code,details:t}),t)},a);function a(){}d.Historize=n;var s,c,u,m,_,h,g,E=(p.confirmAlarm=function(e,r){var t={name:e.name,domain:e.domain,severity:e.severity,timeRaised:e.timeRaised.toISOString(),params:e.params,id:e.id,timeCleared:e.timeCleared.toISOString(),timeConfirmed:e.timeConfirmed.toISOString(),alarmState:e.alarmState,confirmationState:e.confirmationState};f.System.Services.serverEventManager.confirmAlarm(t,r)},p.registerConsumer=function(e,r){var t,o=this;try{t=f.System.Filter.parse(e,f.Type.getSchema("tchmi:server#/definitions/eventFilter"))}catch(e){return f.Callback.callSafe(r.list,null,{error:f.Errors.E_PARAMETER_INVALID,details:{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:e.message,domain:"TcHmi.Server.Events"}}),f.Callback.callSafe(r.subscription,null,{error:f.Errors.E_PARAMETER_INVALID,details:{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:e.message,domain:"TcHmi.Server.Events"}}),null}var i={filter:t,rawFilter:e,activeAlarmIds:[],listCallback:r.list,subscriptionCallback:r.subscription};return this.__consumersToAdd.push(i),-1!==this.__registerTimeoutId&&window.clearTimeout(this.__registerTimeoutId),this.__registerTimeoutId=window.setTimeout(function(){o.__registerTimeoutId=-1,o.__addConsumers()},200),function(){var e=o.__consumersToAdd.indexOf(i),r=o.__consumers.indexOf(i);-1!==e&&o.__consumersToAdd.splice(e,1),-1!==r&&(o.__consumers.splice(r,1),i.subscriptionCallback&&(-1!==o.__unregisterTimeoutId&&window.clearTimeout(o.__unregisterTimeoutId),o.__unregisterTimeoutId=window.setTimeout(function(){o.__unregisterTimeoutId=-1,o.__updateSubscription()},500)))}},p.__addConsumers=function(){var e;this.__listEvents(this.__consumersToAdd),(e=this.__consumers).push.apply(e,this.__consumersToAdd),this.__consumersToAdd=[],this.__updateSubscription()},p.__feedListConsumers=function(e,r){for(var t=0,o=e.length;t<o;t++){var i=e[t];if(i.listCallback){i.activeAlarmIds=[];for(var n=[],a=0,s=r.length;a<s;a++){var l=this.__parseServerEvent(r[a]);i.filter.test(l)&&(n.push(l),p.isAlarm(l)&&-1<l.id&&-1===i.activeAlarmIds.indexOf(l.id)&&i.activeAlarmIds.push(l.id))}f.Callback.callSafe(i.listCallback,null,{error:f.Errors.NONE,events:n})}}},p.__feedSubscriptionConsumers=function(e){for(var r=0,t=this.__consumers.length;r<t;r++){var o=this.__consumers[r];if(o.subscriptionCallback){var i=this.__parseServerEvent(e);if(o.filter.test(i))p.isAlarm(i)&&-1<i.id&&-1===o.activeAlarmIds.indexOf(i.id)&&o.activeAlarmIds.push(i.id),o.subscriptionCallback({error:f.Errors.NONE,event:i,changeType:this.__toServerEventChangeType(e.changeType),removedByFilter:!1});else if(p.isAlarm(i)&&-1<i.id){var n=o.activeAlarmIds.indexOf(i.id);-1!==n&&(o.activeAlarmIds.splice(n,1),f.Callback.callSafe(o.subscriptionCallback,null,{error:f.Errors.NONE,event:i,changeType:this.__toServerEventChangeType(e.changeType),removedByFilter:!0}))}}}},p.__listEvents=function(e){var t=this,r=this.__accumulateFilters(e,!1);void 0!==r&&f.System.Services.serverEventManager.listEvents(r,function(r){r.error===f.Errors.NONE?t.__feedListConsumers(e,r.events):e.forEach(function(e){return f.Callback.callSafe(e.listCallback,null,{error:r.error,details:r.details})})})},p.__updateSubscription=function(){var e=this.__accumulateFilters(this.__consumers,!0);void 0!==e?-1===this.__subscriptionId?(this.__subscriptionId=f.System.Services.serverEventManager.subscribe(e,this.__onEventReveived()),this.__onLocaleChangedDestroyer=f.EventProvider.register("onLocaleChanged",this.__onLocaleChanged())):f.System.Services.serverEventManager.updateSubscription(this.__subscriptionId,e):-1!==this.__subscriptionId&&(f.System.Services.serverEventManager.unsubscribe(this.__subscriptionId),this.__subscriptionId=-1,this.__onLocaleChangedDestroyer&&(this.__onLocaleChangedDestroyer(),this.__onLocaleChangedDestroyer=null))},p.__onEventReveived=function(){var e=this;return function(r){r.error===f.Errors.NONE?e.__feedSubscriptionConsumers(r.event):e.__consumers.forEach(function(e){return f.Callback.callSafe(e.subscriptionCallback,null,{error:r.error,details:r.details})})}},p.__onLocaleChanged=function(){var e=this;return function(){e.__listEvents(e.__consumers)}},p.__accumulateFilters=function(e,r){var t;if(1===e.length)t=r&&e[0].subscriptionCallback||!r&&e[0].listCallback?e[0].rawFilter:void 0;else{t=[];for(var o=0,i=e.length;o<i;o++)if((!r||e[o].subscriptionCallback)&&(r||e[o].listCallback)){if(null===e[o].rawFilter){t=null;break}t.push(e[o].rawFilter),o+1!==i&&t.push({logic:"OR"})}null!==t&&0===t.length&&(t=void 0)}return t},p.__parseServerEvent=function(e){return e.message?{type:p.Type.Message,severity:e.message.severity,domain:e.domain,sourceDomain:e.message.domain,name:e.message.name,text:e.localizedString,timeRaised:new Date(e.message.timeRaised),params:e.message.params}:e.alarm?{type:p.Type.Alarm,severity:e.alarm.severity,id:e.alarm.id,domain:e.domain,sourceDomain:e.alarm.domain,name:e.alarm.name,text:e.localizedString,timeRaised:new Date(e.alarm.timeRaised),timeCleared:new Date(e.alarm.timeCleared),timeConfirmed:new Date(e.alarm.timeConfirmed),alarmState:e.alarm.alarmState,confirmationState:e.alarm.confirmationState,params:e.alarm.params}:null},p.__toServerEventChangeType=function(e){if(void 0===e)return p.ChangeType.MessageSent;switch(e){case f.System.ServerEventManager.ServerAlarmChangeType.Raise:return p.ChangeType.AlarmRaised;case f.System.ServerEventManager.ServerAlarmChangeType.Change:return p.ChangeType.AlarmChanged;case f.System.ServerEventManager.ServerAlarmChangeType.Dispose:return p.ChangeType.AlarmDisposed}},p.__consumers=[],p.__consumersToAdd=[],p.__registerTimeoutId=-1,p.__unregisterTimeoutId=-1,p.__subscriptionId=-1,p.__onLocaleChangedDestroyer=null,p);function p(){}d.Events=E,s=E=d.Events||(d.Events={}),(u=c=s.Type||(s.Type={}))[u.Message=0]="Message",u[u.Alarm=1]="Alarm",(m=s.Severity||(s.Severity={}))[m.Verbose=0]="Verbose",m[m.Info=1]="Info",m[m.Warning=2]="Warning",m[m.Error=3]="Error",m[m.Critical=4]="Critical",(_=s.AlarmState||(s.AlarmState={}))[_.Raised=0]="Raised",_[_.Confirmed=1]="Confirmed",_[_.Cleared=2]="Cleared",_[_.ClearedAndConfirmed=3]="ClearedAndConfirmed",(h=s.ConfirmationState||(s.ConfirmationState={}))[h.NotSupported=0]="NotSupported",h[h.NotRequired=1]="NotRequired",h[h.WaitForConfirmation=2]="WaitForConfirmation",h[h.Confirmed=3]="Confirmed",h[h.Reset=4]="Reset",(g=s.ChangeType||(s.ChangeType={}))[g.AlarmRaised=0]="AlarmRaised",g[g.AlarmChanged=1]="AlarmChanged",g[g.AlarmDisposed=2]="AlarmDisposed",g[g.MessageSent=3]="MessageSent",s.isAlarm=function(e){return e.type===c.Alarm}}(e=f.Server||(f.Server={}))}(TcHmi=TcHmi||{}),function(g){var e=(
/**
        * Returns the expression as string.
        * @member
        * @preserve (Part of the public API)
        */
E.prototype.toString=function(){return this.__expression},
/**
         * @preserve (Part of the public API)
         */
E.prototype.getContent=function(){return this.__content},
/**
         *
         * @preserve (Part of the public API)
         */
E.prototype.getTag=function(){return this.__tag},E.prototype.getName=function(){return this.__name},
/**
         * @preserve (Part of the public API)
         */
E.prototype.getPath=function(){return this.__path},
/**
         * @preserve (Part of the public API)
         */
E.prototype.getPathTokens=function(){return this.__pathTokens},
/**
         * @preserve (Part of the public API)
         */
E.prototype.getType=function(){return this.__type},
/**
         * @preserve (Part of the public API)
         */
E.prototype.getOptions=function(){return this.__options},E.RegExpExpressionGroupByPipe=/([^|()]+|[(](['][^']*[']|["][^"]*["]|[^)])*[)])+/g,E.RegExpExpression=new RegExp("^\\%(s|i|l|pp|tp|f|ctrl)\\%([^]*)\\%/\\1\\%$"),E);function E(e){if(this.__path=null,this.__type=g.SymbolType.Invalid,this.__options={},e){var r=(this.__expression=e).match(E.RegExpExpression);if(null!=r&&3===r.length){switch(this.__tag=r[1],this.__tag){case"s":this.__type=g.SymbolType.Server;break;case"i":this.__type=g.SymbolType.Internal;break;case"l":this.__type=g.SymbolType.LocalizedText;break;case"pp":this.__type=g.SymbolType.PartialParam;break;case"tp":this.__type=g.SymbolType.TemplateParam;break;case"f":this.__type=g.SymbolType.Function;break;case"ctrl":this.__type=g.SymbolType.Control;break;default:this.__type=g.SymbolType.Invalid}switch(this.__tag){case"s":case"i":case"l":case"f":this.__content=this.__expression.substr(3,this.__expression.length-7);break;case"pp":case"tp":this.__content=this.__expression.substr(4,this.__expression.length-9);break;case"ctrl":this.__content=this.__expression.substr(6,this.__expression.length-13)}var t=r[2].match(E.RegExpExpressionGroupByPipe);if(null!=t&&0<t.length){if(this.__type!==g.SymbolType.Server&&this.__type!==g.SymbolType.Function){var o=t[0].indexOf("["),i=t[0].indexOf("::"),n=-1;-1!==(n=-1!==o&&(-1===i||o<i)?o:i)?(this.__name=t[0].substring(0,n),this.__path=t[0].substring(n),this.__pathTokens=g.System.resolveSymbolPathToTokenArray(this.__path)):(this.__name=t[0],this.__path=null,this.__pathTokens=null)}else this.__name=t[0];if(this.__type!==g.SymbolType.Function)for(var a=1,s=t.length;a<s;a++){if(this.__type===g.SymbolType.Server){var l=/^(?:Interval\s*=)\s*(\d+)\s*$/i.exec(t[a]);null!==l&&0!==l.length&&(this.__options.Interval=parseInt(l[1],10));var c=/^(?:Timeout\s*=)\s*(\d+)\s*$/i.exec(t[a]);null!==c&&0!==c.length&&(this.__options.Timeout=parseInt(c[1],10));var u=/^(?:Parallel\s*=)\s*([a-zA-Z]+)\s*$/i.exec(t[a]);if(null!==u&&0!==u.length){var d=!1;switch(u[1].toLowerCase()){case"true":d=!0;break;case"false":d=!1}this.__options.Parallel=d}}var m=/^(?:BindingMode\s*=)\s*([a-zA-Z]+)\s*$/i.exec(t[a]);null!==m&&0!==m.length&&(this.__options.BindingMode=m[1]);var _=/^(?:BindingEvent\s*=)\s*([a-zA-Z]+)\s*$/i.exec(t[a]);null!==_&&0!==_.length&&(this.__options.BindingEvent||(this.__options.BindingEvent=_[1]),this.__options.BindingEvents||(this.__options.BindingEvents=[]),this.__options.BindingEvents.push(_[1]));var h=/^(?:SubscriptionMode\s*=)\s*([a-zA-Z]+)\s*$/i.exec(t[a]);null!==h&&0!==h.length&&(this.__options.SubscriptionMode=h[1])}}}}}g.SymbolExpression=e}(TcHmi=TcHmi||{}),function(m){
/**
     * Provides methods to read and write symbol values and schemas.
     * @class Symbol
     * @memberOf TcHmi
     * @preserve (Part of the public API)
     */
var e,r,a,t,o=(
/**
        * Reads the value of the current symbol.
        * Throws an exception if the symbol is not available
        * @function read
        * @returns A copy of the value
        * @preserve (Part of the public API)
        */
s.prototype.read=function(){var r=void 0;return this.__symbol.getExpression().getType()===a.Server?m.Log.warn("[Source=Framework, Module=TcHmi.Symbol] The non static function 'TcHmi.Symbol.read()' does no longer support synchronous access to symbols of type Server. Please use the non static function 'TcHmi.Symbol.readEx(callback ?: (this: TcHmi.Symbol, data: TcHmi.Symbol.IReadResultObject | TcHmi.Symbol.IServerReadResultObject) => void)' instead."):this.__symbol.read(function(e){e.error===m.Errors.NONE&&(r=e.value)}),r},
/**
        * Reads the value of the current symbol and raises a callback with a copy of the result.
        * @param {string} expression
        * @param callback with gets a copy of the value
        * @returns
        * @preserve (Part of the public API)
        */
s.prototype.readEx=function(r){var t=this;this.__symbol.read(function(e){e.response?m.Callback.callSafe(r,t,{error:e.error,value:e.value,response:e.response,details:e.details}):m.Callback.callSafe(r,t,{error:e.error,value:e.value,details:e.details})})},
/**
         * Writes the value of the current symbol.
         * @param value
         * @param callback
         * @preserve (Part of the public API)
         */
s.prototype.write=function(e,r){var t=this;this.__symbol.write(e,function(e){e.response?m.Callback.callSafe(r,t,{error:e.error,value:e.value,response:e.response,details:e.details}):m.Callback.callSafe(r,t,{error:e.error,value:e.value,details:e.details})})},
/**
         * Watches for changes of the current symbol and raises the callback in case of a change.
         * @param callback
         * @preserve (Part of the public API)
         */
s.prototype.watch=function(r){var t=this;return this.__symbol.watch(function(e){e.response?m.Callback.callSafe(r,t,{error:e.error,value:e.value,response:e.response,destroy:e.destroy,details:e.details}):m.Callback.callSafe(r,t,{error:e.error,value:e.value,destroy:e.destroy,details:e.details})})},
/**
         * Returns the underlying TcHmi.SymbolExpression object.
         * @preserve (Part of the public API)
         */
s.prototype.getExpression=function(){return this.__symbol.getExpression()},
/**
         * Resolves the schema of the current symbol.
         * @param callback
         * @preserve (Part of the public API)
         */
s.prototype.resolveSchema=function(r){var t=this;this.__symbol.resolveSchema(function(e){e.error===m.Errors.NONE?m.Callback.callSafe(r,t,{error:m.Errors.NONE,schema:e.schema}):m.Callback.callSafe(r,t,{error:e.error,details:e.details})})},
/**
         *
         * @param callback
         * @preserve (Part of the public API)
         */
s.prototype.exists=function(r){var t=this;this.__symbol.exists(function(e){e.error===m.Errors.NONE?m.Callback.callSafe(r,t,{error:m.Errors.NONE,result:e.result}):m.Callback.callSafe(r,t,{error:e.error,details:e.details})})},
/**
         * Destroys the current symbol object.
         * @preserve (Part of the public API)
         */
s.prototype.destroy=function(){null!==this.__symbol&&(this.__symbol.destroy(),this.__symbol=null)},
/**
         * Reads the value of a symbol by name and type.
         * @param {string} name
         * @param type
         * @returns
         * @preserve (Part of the public API)
         */
s.read=function(e,r){var t;switch(r){case a.Internal:t="i";break;case a.LocalizedText:t="l";break;case a.PartialParam:t="pp";break;case a.Server:t="s";break;case a.TemplateParam:t="tp";break;case a.Control:t="ctrl";break;default:throw new TypeError((m.SymbolType[r],m.SymbolType[r]))}var o=void 0;if(r===a.Server)return m.Log.warn("The static function 'TcHmi.Symbol.read(name: string, type: TcHmi.SymbolType)' does no longer support synchronous access to symbols of type Server. Please use the non static function 'TcHmi.Symbol.readEx2(expression: string, callback?: (this: void, data: TcHmi.Symbol.IReadResultObject)' instead."),o;var i=new s("%"+t+"%"+e+"%/"+t+"%");return i.readEx(function(e){e.error===m.Errors.NONE&&(o=e.value),i.destroy(),i=null}),o},
/**
         * Reads the value of a symbol by expression.
         * @function readEx
         * @param {string} expression
         * @returns
         * @preserve (Part of the public API)
         */
s.readEx=function(e){var r=new s(e);if(r.getExpression().getType()===a.Server)return m.Log.warn("[Source=Framework, Module=TcHmi.Symbol] The static function 'TcHmi.Symbol.readEx(expression: string)' does no longer support synchronous access to symbols of type Server. Please use the non static function 'TcHmi.Symbol.readEx2(expression: string, callback?: (this: void, data: TcHmi.Symbol.IReadResultObject)' instead."),r.destroy(),void(r=null);var t=r.read();return r.destroy(),r=null,t},
/**
         * Reads the value of a symbol by expression and raises a callback with the result.
         * @param {string} expression
         * @param callback
         * @returns
         * @preserve (Part of the public API)
         */
s.readEx2=function(e,r){var t=new s(e);t.readEx(function(e){e.response?m.Callback.callSafe(r,null,{error:e.error,value:e.value,response:e.response,details:e.details}):m.Callback.callSafe(r,null,{error:e.error,value:e.value,details:e.details}),t.destroy(),t=null})},
/**
         * Writes the value of a symbol by name and type.
         * @param {string} name
         * @param type
         * @param value
         * @param callback
         * @preserve (Part of the public API)
         */
s.write=function(e,r,t,o){var i;switch(r){case a.Internal:i="i";break;case a.LocalizedText:i="l";break;case a.PartialParam:i="pp";break;case a.Server:i="s";break;case a.TemplateParam:i="tp";break;case a.Control:i="ctrl";break;default:throw new TypeError((m.SymbolType[r],m.SymbolType[r]))}var n=new s("%"+i+"%"+e+"%/"+i+"%");n.write(t,function(e){e.response?m.Callback.callSafe(o,null,{error:e.error,response:e.response,details:e.details}):m.Callback.callSafe(o,null,{error:e.error,value:e.value,details:e.details}),n.destroy(),n=null})},
/**
         * Writes the value of a symbol by expression.
         * @function writeEx
         * @param {string} expression
         * @param value
         * @param callback
         * @preserve (Part of the public API)
         */
s.writeEx=function(e,r,t){var o=new s(e);o.write(r,function(e){e.response?m.Callback.callSafe(t,null,{error:e.error,response:e.response,details:e.details}):m.Callback.callSafe(t,null,{error:e.error,value:e.value,details:e.details}),o.destroy(),o=null})},
/**
         * Resolves the schema of the current symbol.
         * @param {string} expression
         * @param callback
         * @preserve (Part of the public API)
         */
s.resolveSchema=function(e,r){var t=new s(e);t.resolveSchema(function(e){e.error===m.Errors.NONE?m.Callback.callSafe(r,null,{error:m.Errors.NONE,schema:e.schema}):m.Callback.callSafe(r,null,{error:e.error,details:e.details}),t.destroy(),t=null})},
/**
        *
        * @param callback
        * @preserve (Part of the public API)
        */
s.exists=function(e,r){var t=new s(e);t.exists(function(e){e.error===m.Errors.NONE?m.Callback.callSafe(r,null,{error:m.Errors.NONE,result:e.result}):m.Callback.callSafe(r,null,{error:e.error,details:e.details}),t.destroy(),t=null})},
/**
         * @function isSymbolExpression
         * @param {string} expression
         * @preserve (Part of the public API)
         */
s.isSymbolExpression=function(e){if("string"!=typeof e)return!1;var r=e.match(m.SymbolExpression.RegExpExpression);return null!=r&&0===r.index},s);function s(e){this.__symbol=null,this.__symbol=new m.System.Symbol(e)}function _(e){this.__obj=null,this.__obj=e}m.Symbol=o,e=o=m.Symbol||(m.Symbol={}),_.prototype.__resolve=function(e,r){function n(){0<c||(s===m.Errors.NONE?m.Callback.callSafe(r,null,{error:m.Errors.NONE,value:tchmi_clone_object(t)}):m.Callback.callSafe(r,null,{error:s,details:a}))}var a,t=tchmi_clone_object(e),s=m.Errors.NONE,l=new Map,c=0,u=function(e,r,t){if(t)if("object"==typeof t)if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)u(t,o,t[o]);else for(var n in t)u(t,n,t[n]);else if("string"==typeof t&&m.Symbol.isSymbolExpression(t)){var a=l.get(t);if(a)a.occurences.push({o:e,k:r});else{var s=new m.Symbol(t);l.set(t,{obj:s,occurences:[{o:e,k:r}]})}}};return u(null,null,t),0===(c=l.size)?n():l.forEach(function(i,e){i.obj.readEx(function(e){e.error===m.Errors.NONE?new _(e.value).resolve(function(e){if(0<c&&c--,e.error===m.Errors.NONE)for(var r=0,t=i.occurences.length;r<t;r++){var o=i.occurences[r];o.o[o.k]=e.value}else s=m.Errors.ERROR,a=a||{code:m.Errors.ERROR,message:m.Errors[m.Errors.ERROR],domain:"TcHmi.Symbol.ObjectResolver"},e.details&&(a.errors||(a.errors=[]),a.errors.push(e.details));n()}):(0<c&&c--,s=m.Errors.ERROR,a=a||{code:m.Errors.ERROR,message:m.Errors[m.Errors.ERROR],domain:"TcHmi.Symbol.ObjectResolver"},e.details&&(a.errors||(a.errors=[]),a.errors.push(e.details)),n())})}),function(){l.forEach(function(e,r){e.obj.destroy()}),l.clear()}},
/**
            * Resolves all symbol expression occurences in the current object.
            * @param callback
            * @preserve (Part of the public API)
            */
_.prototype.resolve=function(e){return"object"==typeof this.__obj&&null!==this.__obj?this.__resolve(this.__obj,e):(m.Callback.callSafe(e,null,{error:m.Errors.NONE,value:this.__obj}),function(){})},_.prototype.__watch=function(e,r){function t(){c.forEach(function(e,r){e.unwatch&&e.unwatch(),e.obj&&e.obj.destroy(),e.resolverunwatch&&e.resolverunwatch(),e.resolver&&e.resolver.destroy()}),c.clear()}function o(){if(!(0<u))if(l===m.Errors.NONE){if(tchmi_equal(n,s))return;n=s,m.Callback.callSafe(r,null,{error:m.Errors.NONE,value:tchmi_clone_object(s),destroy:t})}else m.Callback.callSafe(r,null,{error:l,details:i,destroy:t})}var i,n,a=this,s=tchmi_clone_object(e),l=m.Errors.NONE,c=new Map,u=0,d=function(e,r,t){if(t)if("object"==typeof t)if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)d(t,o,t[o]);else for(var n in t)d(t,n,t[n]);else if("string"==typeof t&&m.Symbol.isSymbolExpression(t)&&!c.get(t)){var a=new m.Symbol(t);c.set(t,{obj:a})}};return d(null,null,s),0===(u=c.size)?o():c.forEach(function(r,e){r.unwatch=r.obj.watch(function(e){e.error===m.Errors.NONE?(r.resolverunwatch&&r.resolverunwatch(),r.resolver&&r.resolver.destroy(),r.resolver=new _(e.value),r.resolverunwatch=r.resolver.watch(function(e){var r=new _(a.__obj);r.resolve(function(e){0<u&&u--,e.error===m.Errors.NONE?s=e.value:(l=m.Errors.ERROR,i=i||{code:m.Errors.ERROR,message:m.Errors[m.Errors.ERROR],domain:"TcHmi.Symbol.ObjectResolver"},e.details&&(i.errors||(i.errors=[]),i.errors.push(e.details))),o()}),r.destroy()})):(0<u&&u--,l=m.Errors.ERROR,i=i||{code:m.Errors.ERROR,message:m.Errors[m.Errors.ERROR],domain:"TcHmi.Symbol.ObjectResolver"},e.details&&(i.errors||(i.errors=[]),i.errors.push(e.details)),o())})}),t},
/**
             * Watches for changes of symbol expressions in the current object und returns the object with updated values.
             * @param callback
             * @preserve (Part of the public API)
             */
_.prototype.watch=function(e){return"object"==typeof this.__obj&&null!==this.__obj?this.__watch(this.__obj,e):(m.Callback.callSafe(e,null,{error:m.Errors.NONE,value:this.__obj}),function(){})},
/**
             * Destroys the current object.
             * @preserve (Part of the public API)
             */
_.prototype.destroy=function(){this.__obj=null},r=_,e.ObjectResolver=r,(t=a=m.SymbolType||(m.SymbolType={}))[t.Invalid=0]="Invalid",t[t.Server=10]="Server",t[t.Internal=20]="Internal",t[t.LocalizedText=30]="LocalizedText",t[t.PartialParam=40]="PartialParam",t[t.TemplateParam=50]="TemplateParam",t[t.Function=60]="Function",t[t.Control=70]="Control"}(TcHmi=TcHmi||{}),function(t){
/**
    * Provides functions to set partials as view.
    * @class View
    * @preserve (Part of the public API)
    */
var e=(
/**
         * Loads a view partial into the dom.
         * @function load
         * @param {string} url
         * @param {null | function} callback
         * @preserve (Part of the public API)
         */
r.load=function(e,r){void 0===r&&(r=null),!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER?(t.Log.warn("[Source=Framework, Module=TcHmi.Symbol] Loading an additional view level element in designer context is not allowed and therefore blocked."),"function"==typeof r&&r.call(this,{error:t.Errors.E_NOT_ALLOWED})):t.System.Services.viewManager.loadView(e,r)},
/**
         * Returns the current view object.
         * @function get
         * @returns {TcHmi.Controls.System.baseTcHmiContro}
         * @preserve (Part of the public API)
         */
r.get=function(){return!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER?(t.Log.warn("[Source=Framework, Module=TcHmi.Symbol] Accessing a view level element is not allowed in designer context and therefore blocked."),null):t.System.Services.viewManager.getView()},r);function r(){}t.View=e}(TcHmi=TcHmi||{}),function(r){var e;(e=r.Type||(r.Type={})).getSchema=function(e){return r.System.Services.typeManager.getSchema(e)},(e.Schema||(e.Schema={})).resolveDefault=function(e){return r.System.Type.Schema.resolveDefault(e)}}(TcHmi=TcHmi||{}),function(u){var e;((e=u.System||(u.System={})).Callback||(e.Callback={})).callSafeCallbacks1Param=function(e,r,t){for(var o=[],i=0,n=e.length;i<n;i++)o.push(e[i]);for(var a=0,s=o;a<s.length;a++){var l=s[a];if(-1!==e.indexOf(l)){var c=u.Callback.callSafe(l,r,t);if(void 0!==c)return c}}}}(TcHmi=TcHmi||{}),function(m){var e,r;function t(e){this.__entries={}}e=m.System||(m.System={}),t.prototype.add=function(e,r){var t=r;if(void 0===(this.__entries[e]=t).value){var o=m.Type.getSchema(r.type);o&&(t.value=m.Type.Schema.resolveDefault(o))}if(t.persist&&"undefined"!=typeof Storage&&window.localStorage){var i=window.localStorage.getItem("TCHMI_INTERNALSYMBOL_"+e);if(null!==i)try{t.value=JSON.parse(i)}catch(e){}}t.callbacks||(t.callbacks=[])},t.prototype.remove=function(e){delete this.__entries[e]},t.prototype.update=function(e,r){var t=this.__entries[e];if(t){var o=!1;tchmi_equal(t.type,r.type)||(t.type=r.type,o=!0);var i=r.value;if(void 0===i){var n=m.Type.getSchema(r.type);n&&(i=m.Type.Schema.resolveDefault(n))}if(tchmi_equal(t.value,i)||(t.value=i,o=!0),tchmi_equal(t.persist,r.persist)||(t.persist=r.persist,o=!0),tchmi_equal(t.readonly,r.readonly)||(t.readonly=r.readonly,o=!0),o){for(var a=[],s=0,l=t.callbacks.length;s<l;s++)a.push(t.callbacks[s]);for(var c=0,u=a;c<u.length;c++){var d=u[c];-1!==t.callbacks.indexOf(d)&&m.Callback.callSafe(d.callback,this,{error:m.Errors.NONE,value:t.value,destroy:d.destroy})}}}},t.prototype.write=function(e,r,t){var o=this.__entries[e];if(o)if(o.readonly)m.Callback.callSafe(t,this,{error:m.Errors.E_SYMBOL_READONLY,details:{code:m.Errors.E_SYMBOL_READONLY,message:m.Errors[m.Errors.E_SYMBOL_READONLY],reason:"Internal symbol with name="+e+" is readonly.",domain:"TcHmi.System.InternalSymbolManager"}});else if(tchmi_equal(o.value,r))m.Callback.callSafe(t,this,{error:m.Errors.NONE});else{var i=o.value;if(o.value=r,o.persist){if("undefined"!=typeof Storage&&window.localStorage)try{window.localStorage.setItem("TCHMI_INTERNALSYMBOL_"+e,JSON.stringify(o.value))}catch(e){m.Log.error("[Source=Framework, Module=TcHmi.System.InternalSymbolManager] Unexpected exception="+e+".")}}else!0===i&&window.localStorage.removeItem("TCHMI_INTERNALSYMBOL_"+e);for(var n=[],a=0,s=o.callbacks.length;a<s;a++)n[a]=o.callbacks[a];for(var l=0,c=n;l<c.length;l++){var u=c[l];-1!==o.callbacks.indexOf(u)&&m.Callback.callSafe(u.callback,this,{error:m.Errors.NONE,value:o.value,destroy:u.destroy})}m.Callback.callSafe(t,this,{error:m.Errors.NONE})}else m.Callback.callSafe(t,this,{error:m.Errors.E_SYMBOL_UNKNOWN,details:{code:m.Errors.E_SYMBOL_UNKNOWN,message:m.Errors[m.Errors.E_SYMBOL_UNKNOWN],reason:"Internal symbol with name="+e+" does not exist.",domain:"TcHmi.System.InternalSymbolManager"}})},t.prototype.read=function(e,r){var t=this.__entries[e];if(t)return m.Callback.callSafe(r,this,{error:m.Errors.NONE,value:t.value}),null;m.Callback.callSafe(r,this,{error:m.Errors.E_SYMBOL_UNKNOWN,details:{code:m.Errors.E_SYMBOL_UNKNOWN,message:m.Errors[m.Errors.E_SYMBOL_UNKNOWN],reason:"Internal symbol with name="+e+" does not exist.",domain:"TcHmi.System.InternalSymbolManager"}})},t.prototype.getType=function(e,r){var t=this.__entries[e];if(t)return m.Callback.callSafe(r,this,{error:m.Errors.NONE,type:t.type}),null;m.Callback.callSafe(r,this,{error:m.Errors.E_SYMBOL_UNKNOWN,details:{code:m.Errors.E_SYMBOL_UNKNOWN,message:m.Errors[m.Errors.E_SYMBOL_UNKNOWN],reason:"Internal symbol with name="+e+" does not exist.",domain:"TcHmi.System.InternalSymbolManager"}})},t.prototype.watch=function(e,r){var t=this.__entries[e];if(!t)return m.Callback.callSafe(r,this,{error:m.Errors.E_SYMBOL_UNKNOWN,details:{code:m.Errors.E_SYMBOL_UNKNOWN,message:m.Errors[m.Errors.E_SYMBOL_UNKNOWN],reason:"Internal symbol with name="+e+" does not exist.",domain:"TcHmi.System.InternalSymbolManager"}}),function(){};function o(){var e=t.callbacks.indexOf(i);-1!==e&&(t.callbacks.splice(e,1),i.callback=null)}var i={callback:r,destroy:o};return t.callbacks.push(i),m.Callback.callSafe(r,this,{error:m.Errors.NONE,value:t.value,destroy:o}),o},r=t,e.InternalSymbolManager=r}(TcHmi=TcHmi||{}),function(a){var e,r;function t(e){this.__entries={}}e=a.System||(a.System={}),t.prototype.add=function(e,r,t){var o;if(void 0===t){var i=a.Type.getSchema(r);i&&(o=a.Type.Schema.resolveDefault(i))}else o=t;var n={name:e,type:r,value:o,callbacks:[]};this.__entries[e]=n},t.prototype.remove=function(e){var r=this.__entries[e];r&&(r.value instanceof a.System.Symbol&&r.value.destroy(),r.value=null,delete this.__entries[e])},t.prototype.get=function(e){return this.__entries[e]},t.prototype.destroy=function(){this.__entries=null},t.prototype.keepAlive=function(e){var r=this.__entries[e];return!!(r&&0<r.callbacks.length)},r=t,e.TemplateParamSymbolManager=r}(TcHmi=TcHmi||{}),function(e){
/**
     *  @preserve (Part of the public API)
     */
var r;function t(e,r,t){}((r=e.Controls||(e.Controls={})).System||(r.System={})).baseTcHmiControl=t}(TcHmi=TcHmi||{}),function(E){var e,r;function t(e){var t=this;this.__lastUserInteraction=Date.now(),this.__lastUserInteractionSentToServer=this.__lastUserInteraction,this.__autoLogoffTimeoutID=0,this.__oldName=null,this.__accessCache=new Map,this.__onAccessConfigChanged=function(e,r){t.__accessCache.clear()},this.__onControlDetached=function(e,r){t.__accessCache.delete(r)},this.__updateLastUserinteraction=function(e){t.__sendHeartBeat(),t.__lastUserInteraction=Date.now()},this.__sendHeartBeat=function(){Date.now()-t.__lastUserInteractionSentToServer>t.__userConfigOnServer.autoLogOffMilliSeconds/2&&(t.__lastUserInteractionSentToServer=Date.now(),E.Server.requestEx({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:"Heartbeat"}]},null))},this.__logoutIfNoInteraction=function(){Date.now()-t.__lastUserInteraction>t.__userConfigOnServer.autoLogOffMilliSeconds&&(E.Server.logout(),t.__rearmAutoLogoffTimer())},this.__userConfigOnServer={state:0,userIsInGroups:[],name:null,domain:null,locale:void 0,timeFormatLocale:void 0,timeZone:void 0,autoLogOffMilliSeconds:null,session:null,clientCertificate:null,clientIp:"",errorMessage:"",defaultAuthExtension:"TcHmiUserManagement"},E.EventProvider.register("onWebSocketOpened",this.__onWebsocketOpen()),E.EventProvider.register("onWebSocketClosed",this.__onWebsocketClosed()),E.EventProvider.register("System.AccessConfigChanged",this.__onAccessConfigChanged),E.EventProvider.register("onControlDetached",this.__onControlDetached)}e=E.System||(E.System={}),t.prototype.getCurrentUserConfig=function(){return this.__userConfigOnServer},t.prototype.__onWebsocketClosed=function(){var r=this;return function(e){r.__oldName=r.__userConfigOnServer.name,r.__userConfigOnServer={state:0,userIsInGroups:[],name:null,domain:null,locale:void 0,timeFormatLocale:void 0,timeZone:void 0,autoLogOffMilliSeconds:null,session:null,clientCertificate:null,clientIp:"",errorMessage:"",defaultAuthExtension:"TcHmiUserManagement"},"__TcHmiViewAccess"===E.System.Services.dialogManager.getDialogOwner()&&E.System.Services.dialogManager.updateText("__TcHmiViewAccess","Connection to server lost. Reopening connection...",E.DialogManager.DialogSeverity.Error)}},t.prototype.__onWebsocketOpen=function(){var r=this;return function(e){E.Server.readSymbol(["IsAuthRequired","GetCurrentUser","DefaultAuthExtension"],r.__handleServerAnswer)}},t.prototype.__handleServerAnswer=function(e){var r=!1,t=E.System.Services.accessManager.__userConfigOnServer;if(e.error===E.Errors.E_WEBSOCKET_CLOSED)t.state=1,t.errorMessage="Websocket was closed.",r=!0;else if(e.error===E.Errors.E_WEBSOCKET_NOT_READY)t.state=1,t.errorMessage="Communication not ready.",r=!0;else if(e.error===E.Errors.NONE&&void 0!==e.response.error)t.state=1,t.errorMessage="Unknown Server error: "+e.response.error.message,r=!0,e.response.error.code===E.Server.Error.HMI_E_MISSING_LICENSE_HANDSHAKE&&(!0===TCHMI_ENABLE_DESIGNER_MODE?t.errorMessage="Server is not licensed. Please try in a few seconds again.":t.errorMessage="Server is not licensed.");else if(e.error===E.Errors.NONE){0===t.state&&(t.state=1),t.errorMessage="Got no valid answer.";var o=e.response.commands;void 0===o&&(o=[]);for(var i=0,n=o.length;i<n;i++){var a=o[i];if("GetCurrentUser"===a.symbol){if(void 0!==a.error){t.errorMessage="Got no valid answer for "+a.symbol+". Error code: "+a.error.code,r=!0;break}if(void 0===a.readValue){t.errorMessage="Got no valid answer for "+a.symbol+".",r=!0;break}if(void 0!==a.readValue.name&&t.name!==a.readValue.name){if(4===t.state&&"__SystemGuest"===a.readValue.name)return void(window.location.href="/Login?Location="+window.location.pathname);if("ReadWrite"===e.response.requestType&&null!==E.System.Services.accessManager.__oldName&&E.System.Services.accessManager.__oldName!==a.readValue.name)return t.state=1,E.System.Services.dialogManager.showDialog(null,!1),E.System.Services.dialogManager.updateText("__AccessManager",'Connection to Server recovered but Authentification is not valid anymore. <input type="submit" value="Relogin" style="padding:10px;" onclick="window.location = \'/Logout?Location='+window.location.pathname+"&Name="+encodeURIComponent(E.System.Services.accessManager.__oldName)+"'\">",E.DialogManager.DialogSeverity.Error),void E.System.Services.dialogManager.showDialog("__AccessManager",!0,E.DialogManager.DialogType.SYSTEMLoading);r=!0,t.name=a.readValue.name}if(t.autoLogOffMilliSeconds=null,a.readValue.autoLogoff){var s=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/.exec(a.readValue.autoLogoff);if(null===s)break;var l=parseInt(s[2],10)||0,c=parseInt(s[3],10)||0,u=parseInt(s[4],10)||0,d=parseInt(s[5],10)||0,m=parseInt(s[6],10)||0,_=parseInt(s[7],10)||0,h=1e3*((parseFloat(s[8])||0)+60*(_+60*(m+24*(d+30*c+7*u)+365*l)));t.autoLogOffMilliSeconds!==h&&(t.autoLogOffMilliSeconds=h,r=!0,E.System.Services.accessManager.__rearmAutoLogoffTimer())}void 0===a.readValue.groups||tchmi_equal(t.userIsInGroups.sort(),a.readValue.groups.sort())||(r=!0,t.userIsInGroups=a.readValue.groups),void 0!==a.readValue.domain&&t.domain!==a.readValue.domain&&(r=!0,t.domain=a.readValue.domain),void 0!==a.readValue.session&&t.session!==a.readValue.session&&(r=!0,t.session=a.readValue.session),void 0!==a.readValue.clientCertificate&&t.clientCertificate!==a.readValue.clientCertificate&&(r=!0,t.clientCertificate=a.readValue.clientCertificate),void 0!==a.readValue.clientIp&&t.clientIp!==a.readValue.clientIp&&(r=!0,t.clientIp=a.readValue.clientIp),void 0!==a.readValue.locale&&t.locale!==a.readValue.locale&&(a.readValue.locale&&"client"!==a.readValue.locale&&"project"!==a.readValue.locale?t.locale=a.readValue.locale:t.locale=void 0,"Subscription"===e.response.requestType&&E.System.Services.localizationManager.__loadLocale(a.readValue.locale,null)),t.timeFormatLocale!==a.readValue.timeFormatLocale&&(r=!0,a.readValue.timeFormatLocale&&"client"!==a.readValue.timeFormatLocale&&"project"!==a.readValue.timeFormatLocale?t.timeFormatLocale=a.readValue.timeFormatLocale:t.timeFormatLocale=void 0),t.timeZone!==a.readValue.timeZone&&(r=!0,a.readValue.timeZone&&"client"!==a.readValue.timeZone&&"project"!==a.readValue.timeZone?t.timeZone=a.readValue.timeZone:t.timeZone=void 0),E.Localization.__rebuildLocalizationCache()}else if("IsAuthRequired"===a.symbol){if(r=!0,void 0!==a.error){t.errorMessage="Got no valid answer for "+a.symbol+". Error code: "+a.error.code;break}if(void 0===a.readValue){t.errorMessage="Got no valid answer for "+a.symbol+".";break}if(!0===a.readValue)t.state=4,t.errorMessage="";else{if(!1!==a.readValue){t.state=1,t.errorMessage="Got no valid answer for "+a.symbol+".";break}t.state=2,t.errorMessage=""}}else"DefaultAuthExtension"===a.symbol&&void 0===a.error&&a.readValue&&a.readValue!==t.defaultAuthExtension&&(t.defaultAuthExtension=a.readValue)}4===t.state&&(t.name?0===t.userIsInGroups.length&&(r=!0,t.state=1,t.errorMessage="Got no group membership but should have one."):(r=!0,t.state=1,t.errorMessage="Got no user login but should have one.")),"Subscription"!==e.response.requestType&&1!==t.state&&E.Server.subscribe([{symbol:"IsAuthRequired"},{symbol:"GetCurrentUser"}],1e3,E.System.Services.accessManager.__handleServerAnswer)}!0===r&&E.System.Services.accessManager.__handleUsergroupChanged()},t.prototype.__handleUsergroupChanged=function(){if(this.__accessCache.clear(),1===this.__userConfigOnServer.state){var e=E.System.Services.dialogManager.getDialogOwner();"__TcHmiMain"!==e&&"__TcHmiViewAccess"!==e||E.System.Services.dialogManager.showDialog(e,!1),E.System.Services.dialogManager.updateText("__AccessManager","Loading User Login Config from Server failed"+(this.__userConfigOnServer.errorMessage?": "+this.__userConfigOnServer.errorMessage:".")+' <input type="submit" value="Logout" style="padding:10px;" onclick="window.location = \'/Logout?Location='+window.location.pathname+"'\">",E.DialogManager.DialogSeverity.Error),E.System.Services.dialogManager.showDialog("__AccessManager",!0,E.DialogManager.DialogType.SYSTEMLoading),E.Log.error("[Source=Framework, Module=TcHmi.System.AccessManager] Internal Error. Loading User Login Config from Server failed"+(this.__userConfigOnServer.errorMessage?": "+this.__userConfigOnServer.errorMessage:"."))}2!==this.__userConfigOnServer.state&&4!==this.__userConfigOnServer.state||E.EventProvider.raise("onUserInGroupChanged",this.__userConfigOnServer.userIsInGroups);var r=E.System.Services.viewManager.getView();null!==r&&r.__processAccessConfig(),E.EventProvider.raise("System.onUserConfigOnServerChanged",this.__userConfigOnServer)},t.prototype.checkAccess=function(e,r){if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER)return!0;if(2===this.__userConfigOnServer.state)return!0;if(-1!==this.__userConfigOnServer.userIsInGroups.indexOf("__SystemAdministrators"))return!0;if(1===this.__userConfigOnServer.state)return!1;if(0===this.__userConfigOnServer.state)return null;if(!e.getIsAttached())return null;var t=this.__accessCache.get(e);if(t){var o=t.get(r);if(void 0!==o)return o}else t=new Map,this.__accessCache.set(e,t);var i=!1,n=r,a=e;do{for(var s=!1,l=0,c=a.getVirtualControlRightMappings();l<c.length;l++){var u=c[l];if(u.controlRight===n){n=u.virtualControlRight;break}}for(var d=0,m=a.getAccessConfig();d<m.length;d++){var _=m[d];if(_.accessright===n&&-1!==this.__userConfigOnServer.userIsInGroups.indexOf(_.group)){if("Allow"===_.permission)return t.set(r,!0),!0;if("Deny"===_.permission)s=!0;else if("Inherit"!==_.permission)return E.Log.error("[Source=Framework, Module=TcHmi.System.AccessManager] Access check failed on control "+e.getId()+": Invalid config found! Access rejected!"),!1}}if(!0===s){a=null;break}var h=a.getType(),g=E.System.Services.controlManager.getDescriptionAccessByName(h,n);if(null===g&&"function"==typeof a.getDescriptionAccessByName&&(g=a.getDescriptionAccessByName(n)),null===g||!0!==g.defaultValueInternal&&!1!==g.defaultValueInternal||(i=g.defaultValueInternal),null===a.getParent()){if("tchmi-view"===h){a=null;break}a=null,i=!1;break}a=a.getParent()}while(null!==a);return t.set(r,i),i},t.prototype.__rearmAutoLogoffTimer=function(){if(4===this.__userConfigOnServer.state&&null!==this.__userConfigOnServer.autoLogOffMilliSeconds&&0!==this.__userConfigOnServer.autoLogOffMilliSeconds){window.clearTimeout(this.__autoLogoffTimeoutID);var e={passive:!0,capture:!0};document.removeEventListener("keydown",this.__updateLastUserinteraction,e),document.removeEventListener("mouseover",this.__updateLastUserinteraction,e),document.removeEventListener("touchstart",this.__updateLastUserinteraction,e),document.addEventListener("keydown",this.__updateLastUserinteraction,e),document.addEventListener("mouseover",this.__updateLastUserinteraction,e),document.addEventListener("touchstart",this.__updateLastUserinteraction,e);var r=this.__lastUserInteraction+this.__userConfigOnServer.autoLogOffMilliSeconds-Date.now();r<0?this.__logoutIfNoInteraction():(2147483647<r&&(r=2147483647),this.__autoLogoffTimeoutID=window.setTimeout(this.__logoutIfNoInteraction,r))}},r=t,e.AccessManager=r}(TcHmi=TcHmi||{}),function(_){!function(t){var e=(r.prototype.create=function(e,r){return new _.Animation(e,r)},r.prototype.createAnimationController=function(e,r){return new(e.useCss()?o:n)(e,r)},r);function r(e){}t.AnimationProvider=e;var o=(i.prototype.isValid=function(){return this.__animation.useCss()},i.prototype.run=function(){function e(){if(_.Controls.get(r.__animation.controlName()))if(r.__animation.state()===_.Animation.Status.CONFIGURE||r.__animation.state()===_.Animation.Status.INITIALIZED){r.__statusChangeCallback(_.Animation.Status.INITIALIZED);var e=r.__animation.animationName();r.__getElement().on("animationstart."+e+".animationcontrol",r.__onAnimationStart()).on("animationiteration."+e+".animationcontrol",r.__onAnimationIteration()).on("animationend."+e+".animationcontrol",r.__onAnimationEnd()),r.__writeAnimationToCss()}else r.__animation.state()===_.Animation.Status.PAUSED&&(r.__setPlayState("running"),r.__hasStarted?r.__statusChangeCallback(_.Animation.Status.RUNNING):r.__statusChangeCallback(_.Animation.Status.INITIALIZED))}var r=this;this.__animation.state()===_.Animation.Status.ENDED?(this.reset(e),this.__statusChangeCallback(_.Animation.Status.INITIALIZED)):e()},i.prototype.pause=function(){this.__animation.state()!==_.Animation.Status.RUNNING&&this.__animation.state()!==_.Animation.Status.INITIALIZED||(this.__setPlayState("paused"),this.__statusChangeCallback(_.Animation.Status.PAUSED))},i.prototype.skip=function(){this.cleanup(!0),this.__statusChangeCallback(_.Animation.Status.ENDED),this.__getElement().off("animationstart."+this.__animation.animationName()+".animationcontrol").off("animationiteration."+this.__animation.animationName()+".animationcontrol").off("animationend."+this.__animation.animationName()+".animationcontrol")},i.prototype.reset=function(o){var i=this,n=this.__styleManager.expandSelector(this.__animation.selector(),this.__animation.controlName()),a=this.__styleManager.getExistingStyleOverwrites(this.__animation.controlName());if(void 0!==a[n]&&void 0!==a[n]["animation-name"]){var s=a[n]["animation-name"][0].split(",").map(function(e){return e.trim()}).indexOf(this.__animation.animationName());if(-1!==s){for(var e=0,r=a[n]["animation-name"].length;e<r;e++)(t=a[n]["animation-name"][e].split(",").map(function(e){return e.trim()})).splice(s,1,"reset"),a[n]["animation-name"][e]=t.join(", ");for(e=0,r=a[n]["animation-play-state"].length;e<r;e++){var t;(t=a[n]["animation-play-state"][e].split(",").map(function(e){return e.trim()})).splice(s,1,"paused"),a[n]["animation-play-state"][e]=t.join(", ")}this.__styleManager.writeStyles(this.__animation.controlName(),a),requestAnimationFrame(function(){requestAnimationFrame(function(){if(void 0!==_.Controls.get(i.__animation.controlName())){for(var e=0,r=a[n]["animation-name"].length;e<r;e++){var t=a[n]["animation-name"][e].split(",").map(function(e){return e.trim()});t.splice(s,1,i.__animation.animationName()),a[n]["animation-name"][e]=t.join(", ")}i.__styleManager.writeStyles(i.__animation.controlName(),a),i.__statusChangeCallback(_.Animation.Status.CONFIGURE)}"function"==typeof o&&o()})}),this.__hasStarted=!1}else requestAnimationFrame(function(){requestAnimationFrame(function(){i.__statusChangeCallback(_.Animation.Status.CONFIGURE),"function"==typeof o&&o()})})}else requestAnimationFrame(function(){requestAnimationFrame(function(){i.__statusChangeCallback(_.Animation.Status.CONFIGURE),"function"==typeof o&&o()})})},i.prototype.cleanup=function(e){void 0===e&&(e=!1);var r=null;if("forwards"===this.__animation.fillMode()||"both"===this.__animation.fillMode()||e)switch(this.__animation.direction()){case"normal":r=1;break;case"reverse":r=0;break;case"alternate":r=this.__animation.iterationCount()%2==0?0:1;break;case"alternate-reverse":r=this.__animation.iterationCount()%2==0?1:0}var i=this.__styleManager.expandSelector(this.__animation.selector(),this.__animation.controlName()),n=this.__styleManager.getExistingStyleOverwrites(this.__animation.controlName());if(void 0!==n[i]&&void 0!==n[i]["animation-name"]){var a=n[i]["animation-name"][0].split(",").map(function(e){return e.trim()}).indexOf(this.__animation.animationName());if(-1!==a&&(s("animation-name"),s("animation-duration"),s("animation-delay"),s("animation-iteration-count"),s("animation-direction"),s("animation-timing-function"),s("animation-fill-mode"),s("animation-play-state"),delete n["@keyframes "+this.__animation.animationName()],this.__styleManager.writeStyles(this.__animation.controlName(),n),null!==r)){var t=this.__animation.keyframes().filter(function(e){return e.progressPoint===r});if(0===t.length)return;var o=t[0].styles;_.StyleProvider.setSimpleElementStyle(this.__getElement(),o)}}function s(e){if(void 0!==n[i][e])for(var r=0,t=n[i][e].length;r<t;r++){var o=n[i][e][r].split(",").map(function(e){return e.trim()});o.splice(a,1),n[i][e][r]=o.join(", ")}}},i.prototype.__writeAnimationToCss=function(e){void 0===e&&(e=!0);var n=this.__styleManager.expandSelector(this.__animation.selector(),this.__animation.controlName()),a=this.__styleManager.getExistingStyleOverwrites(this.__animation.controlName());void 0===a[n]&&(a[n]={});var s=-1;if(void 0!==a[n]["animation-name"]){var r=a[n]["animation-name"][0].split(",").map(function(e){return e.trim()});s=r.indexOf(this.__animation.animationName())}function t(e,r){if(void 0===a[n][e])a[n][e]=[r];else for(var t=0,o=a[n][e].length;t<o;t++){var i=l(a[n][e][t],",").map(function(e){return e.trim()});-1===s?i.push(r):i.splice(s,1,r),a[n][e][t]=i.join(", ")}}function l(e,r){for(var t=0,o=0,i=[],n=0,a=e.length;n<a;n++)switch(e.charAt(n)){case"(":o++;break;case")":0<o&&o--;break;case r:0===o&&t<n&&i.push(e.substring(t,n).trim()),t=n+1}return(0===e.length||t<e.length)&&i.push(e.substring(t).trim()),i}t("animation-name",this.__animation.animationName()),t("animation-duration",this.__animation.duration()+"ms"),t("animation-delay",this.__animation.delay()+"ms"),t("animation-iteration-count",this.__animation.iterationCount().toString()),t("animation-direction",this.__animation.direction()),t("animation-timing-function",this.__animation.timingFunction()),t("animation-fill-mode",this.__animation.fillMode()),t("animation-play-state",e?"running":"paused");for(var o={},i=this.__animation.keyframes(),c=0,u=i.length;c<u;c++)o[100*i[c].progressPoint+"%"]=i[c].styles;a["@keyframes "+this.__animation.animationName()]=o,this.__styleManager.writeStyles(this.__animation.controlName(),a)},i.prototype.__setPlayState=function(e){var r=this.__styleManager.expandSelector(this.__animation.selector(),this.__animation.controlName()),t=this.__styleManager.getExistingStyleOverwrites(this.__animation.controlName());if(void 0!==t[r]["animation-name"]){var o=t[r]["animation-name"][0].split(",").map(function(e){return e.trim()}).indexOf(this.__animation.animationName());if(-1!==o){for(var i=0,n=t[r]["animation-play-state"].length;i<n;i++){var a=t[r]["animation-play-state"][i].split(",").map(function(e){return e.trim()});a.splice(o,1,e),t[r]["animation-play-state"][i]=a.join(", ")}this.__styleManager.writeStyles(this.__animation.controlName(),t)}}},i.prototype.__onAnimationStart=function(){var e=this;return function(r){var t=r.originalEvent;t.animationName===e.__animation.animationName()&&(e.__statusChangeCallback(_.Animation.Status.RUNNING),e.__animation.eventHandlers().filter(function(e){return"animationstart"===e.name}).forEach(function(e){return e.callback({error:_.Errors.NONE,animationName:t.animationName,elapsedTime:t.elapsedTime,JQueryEvent:r})}))}},i.prototype.__onAnimationIteration=function(){var e=this;return function(r){var t=r.originalEvent;t.animationName===e.__animation.animationName()&&e.__animation.eventHandlers().filter(function(e){return"animationiteration"===e.name}).forEach(function(e){return e.callback({error:_.Errors.NONE,animationName:t.animationName,elapsedTime:t.elapsedTime,JQueryEvent:r})})}},i.prototype.__onAnimationEnd=function(){var e=this;return function(r){var t=r.originalEvent;t.animationName===e.__animation.animationName()&&(e.__statusChangeCallback(_.Animation.Status.ENDED),e.__getElement().off("animationstart."+e.__animation.animationName()+".animationcontrol").off("animationiteration."+e.__animation.animationName()+".animationcontrol").off("animationend."+e.__animation.animationName()+".animationcontrol"),e.__animation.cleanup()&&e.cleanup(),e.__animation.eventHandlers().filter(function(e){return"animationend"===e.name}).forEach(function(e){return e.callback({error:_.Errors.NONE,animationName:t.animationName,elapsedTime:t.elapsedTime,JQueryEvent:r})}))}},i.prototype.__getElement=function(){return $(this.__styleManager.expandSelector(this.__animation.selector(),this.__animation.controlName()))},i);function i(e,r){this.__hasStarted=!1,this.__animation=e,this.__statusChangeCallback=r,this.__styleManager=t.Services.styleManager}t.CssAnimationController=o;var n=(a.prototype.isValid=function(){return!this.__animation.useCss()},a.prototype.run=function(){var r=this;if(this.__animation.state()===_.Animation.Status.CONFIGURE||this.__animation.state()===_.Animation.Status.ENDED){this.__animationRunner=this.__getAnimationRunner(),this.__iteration=0,this.__start=null,this.__elapsedTime=0,this.__resetToInitial=!0,0<this.__animation.delay()?this.__delayTimer=new s(function(){r.__animationFrameID=window.requestAnimationFrame(r.__animationRunner),r.__delayTimer=null},this.__animation.delay()):this.__animationFrameID=window.requestAnimationFrame(this.__animationRunner),this.__statusChangeCallback(_.Animation.Status.INITIALIZED),this.__animatedStyles={};for(var e=this.__animation.keyframes(),t=0,o=e.length;t<o;t++)for(var i in e[t].styles)e[t].styles.hasOwnProperty(i)&&(void 0===this.__animatedStyles[i]&&(this.__animatedStyles[i]=[]),this.__animatedStyles[i].push({progressPoint:e[t].progressPoint,values:e[t].styles[i].map(function(e){return r.__parseKeyframeStyle(e)})}));var n=_.StyleProvider.getSimpleElementStyle(this.__element);for(var i in this.__initialStyles={},this.__animatedStyles)if(this.__animatedStyles.hasOwnProperty(i)){if(this.__animatedStyles[i].sort(function(e,r){return e.progressPoint-r.progressPoint}),0!==this.__animatedStyles[i][0].progressPoint||1!==this.__animatedStyles[i][this.__animatedStyles[i].length-1].progressPoint)throw new Error("Start and end keyframes with progress points 0 and 1 must be defined for all animated properties.");this.__initialStyles[i]=n&&void 0!==n[i]?n[i]:null}var a=this.__animation.fillMode();if("backwards"===a||"both"===a)switch(this.__animation.direction()){case"normal":case"alternate":_.StyleProvider.setSimpleElementStyle(this.__element,e.filter(function(e){return 0===e.progressPoint})[0].styles);break;case"reverse":case"alternate-reverse":_.StyleProvider.setSimpleElementStyle(this.__element,e.filter(function(e){return 1===e.progressPoint})[0].styles)}}else this.__animation.state()===_.Animation.Status.PAUSED&&(null!==this.__delayTimer?this.__delayTimer.resume():this.__animationFrameID=window.requestAnimationFrame(this.__animationRunner))},a.prototype.pause=function(){this.__animation.state()===_.Animation.Status.RUNNING?(null!==this.__animationFrameID&&window.cancelAnimationFrame(this.__animationFrameID),this.__statusChangeCallback(_.Animation.Status.PAUSED)):this.__animation.state()===_.Animation.Status.INITIALIZED&&null!==this.__delayTimer&&(this.__delayTimer.pause(),this.__statusChangeCallback(_.Animation.Status.PAUSED))},a.prototype.skip=function(){this.__animation.state()!==_.Animation.Status.ENDED&&(null!==this.__animationFrameID&&window.cancelAnimationFrame(this.__animationFrameID),this.cleanup(!0),this.__statusChangeCallback(_.Animation.Status.ENDED))},a.prototype.reset=function(e){if(this.__resetToInitial&&this.__animation.state()!==_.Animation.Status.CONFIGURE)for(var r in this.__initialStyles)this.__initialStyles.hasOwnProperty(r)&&_.StyleProvider.setSimpleElementStyle(this.__element,r,this.__initialStyles[r]);this.__statusChangeCallback(_.Animation.Status.CONFIGURE),"function"==typeof e&&e()},a.prototype.cleanup=function(e){void 0===e&&(e=!1);var r=null;if("forwards"===this.__animation.fillMode()||"both"===this.__animation.fillMode()||e)switch(this.__animation.direction()){case"normal":r=1;break;case"reverse":r=0;break;case"alternate":r=this.__animation.iterationCount()%2==0?0:1;break;case"alternate-reverse":r=this.__animation.iterationCount()%2==0?1:0}null===r?_.StyleProvider.setSimpleElementStyle(this.__element,this.__initialStyles):_.StyleProvider.setSimpleElementStyle(this.__element,this.__animation.keyframes().filter(function(e){return e.progressPoint===r})[0].styles)},a.prototype.__parseKeyframeStyle=function(e){var r=/^(-?\d*\.?\d+)(?:%|px)?$/.exec(e);if(null!==r)return[parseFloat(r[1]),e.substring(r[1].length)];for(var t=[],o=/#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3}/g,i=o.exec(e);null!==i;){var n=i[0].slice(1);t.push({value:N.fromHexString(n),replaceIndex:i.index,replaceLength:i[0].length}),i=o.exec(e)}for(var a=/rgba?\( *(-?\d+) *, *(-?\d+) *, *(-?\d+) *(?:, *(-?\d*\.?\d+) *)?\)/g,s=a.exec(e);null!==s;){var l=parseInt(s[1],10),c=parseInt(s[2],10),u=parseInt(s[3],10),d=s[4]?parseFloat(s[4]):1;t.push({value:N.fromRgb(l,c,u,d),replaceIndex:s.index,replaceLength:s[0].length}),s=a.exec(e)}for(var m=/hsla?\( *(-?\d*\.?\d+) *, *(-?\d*\.?\d+)% *, *(-?\d*\.?\d+)% *(?:, *(-?\d*\.?\d+) *)?\)/g,_=m.exec(e);null!==_;){var h=parseFloat(_[1]),g=parseFloat(_[2])/100,E=parseFloat(_[3])/100;d=_[4]?parseFloat(_[4]):1,t.push({value:N.fromHsl(h,g,E,d),replaceIndex:_.index,replaceLength:_[0].length}),_=m.exec(e)}var p=[];if(0<t.length){t.sort(function(e,r){return e.replaceIndex-r.replaceIndex});for(var f=t.length-1,S=0;S<=f;f--){var v=t[f].replaceIndex+t[f].replaceLength,y=f<t.length-1?t[f+1].replaceIndex:void 0;v!==y&&v<e.length&&p.unshift(e.substring(v,y)),p.unshift(t[f].value)}0<t[0].replaceIndex&&p.unshift(e.substring(0,t[0].replaceIndex-1))}else p.push(e);var T=/-?\d*\.?\d+/;for(f=0,S=p.length;f<S;f++){var C=p[f];if("string"==typeof C){var M=T.exec(C);if(null!==M){var b=[],R=0;0<M.index&&(b.push(C.substring(0,M.index)),S++,R++),b.push(parseFloat(M[0])),M.index+M[0].length<C.length&&(b.push(C.substring(M.index+M[0].length)),S++),p.splice.apply(p,[f,1].concat(b)),f+=R}}}return p},a.prototype.__getTimingFunction=function(){var e=this.__animation.timingFunction();if("function"==typeof e)return e;function r(e,r,t,o){var s=[{x:0,y:0},{x:e,y:r},{x:t,y:o},{x:1,y:1}];return function(e){function a(e,r){for(var t=[],o=0;o<e.length-1;o++){var i=e[o].x+(e[o+1].x-e[o].x)*r,n=e[o].y+(e[o+1].y-e[o].y)*r;t.push({x:i,y:n})}return 1===t.length?t[0]:a(t,r)}for(var r={x:0,y:0},t=.5,o=0,i=1,n=0;n<10;n++){if(r=a(s,t),Math.abs(r.x-e)<5e-4)return r.y;r.x<e?o=t:i=t,t=o+(i-o)/2}return r.y}}function t(e,r){var t=1/e;return function(e){return r?Math.ceil(e/t)*t:Math.floor(e/t)*t}}switch(e){case"linear":return function(e){return e};case"ease":return r(.25,.1,.25,1);case"ease-in":return r(.42,0,1,1);case"ease-out":return r(0,0,.58,1);case"ease-in-out":return r(.42,0,.58,1);case"step-start":return t(1,!0);case"step-end":return t(1,!1);default:var o=/cubic-bezier\( *(1(?:.0+)?|0|0?\.\d+) *, *(-?\d*\.?\d+) *, *(1(?:.0+)?|0|0?\.\d+) *, *(-?\d*\.?\d+) *\)/.exec(e);if(null!==o)return r(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4]));var i=/steps\( *([1-9][0-9]*) *(?:, *(start|end) *)?\)/.exec(e);if(null!==i)return t(parseInt(i[1],10),"start"===i[2])}return _.Log.error("[Source=Framework, Module=TcHmi.System.AnimationProvider] Unknown timing function "+e+"."),r(.25,.1,.25,1)},a.prototype.__getAnimationRunner=function(){var l,c=this,u=this.__animation.duration(),d=this.__getTimingFunction();switch(this.__animation.direction()){case"normal":l=function(e){return e};break;case"reverse":l=function(e){return 1-e};break;case"alternate":l=function(e){return c.__iteration%2==0?e:1-e};break;case"alternate-reverse":l=function(e){return c.__iteration%2==0?1-e:e}}var m=function(r){if(null===c.__start)c.__started=c.__start=r,c.__statusChangeCallback(_.Animation.Status.RUNNING),c.__animation.eventHandlers().filter(function(e){return"animationstart"===e.name}).forEach(function(e){return e.callback({error:_.Errors.NONE,animationName:c.__animation.animationName(),elapsedTime:0})});else if(c.__animation.state()===_.Animation.Status.PAUSED){var e=r-c.__elapsedTime-c.__start;c.__start+=e,c.__started+=e,c.__statusChangeCallback(_.Animation.Status.RUNNING)}c.__elapsedTime=r-c.__start;var t=c.__elapsedTime/u;t=l(t);var o={};for(var i in c.__animatedStyles)if(c.__animatedStyles.hasOwnProperty(i)){var n=c.__getBorderingKeyframes(i,t);if(1===n.length)o[i]=n[0].values.map(function(e){return e.join("")});else{var a=(t-n[0].progressPoint)/(n[1].progressPoint-n[0].progressPoint);o[i]=c.__interpolate(n[0].values,n[1].values,d(a))}}try{_.StyleProvider.setSimpleElementStyle(c.__element,o)}catch(e){return void c.__statusChangeCallback(_.Animation.Status.PAUSED)}if(0<=t&&t<=1)c.__animationFrameID=window.requestAnimationFrame(m);else{c.__iteration++;var s=c.__animation.iterationCount();"infinite"===s||c.__iteration<s?(c.__start=r,c.__animationFrameID=window.requestAnimationFrame(m),c.__animation.eventHandlers().filter(function(e){return"animationiteration"===e.name}).forEach(function(e){return e.callback({error:_.Errors.NONE,animationName:c.__animation.animationName(),elapsedTime:(r-c.__started)/1e3})})):(c.__animationFrameID=null,c.__statusChangeCallback(_.Animation.Status.ENDED),c.__animation.cleanup()&&(c.__resetToInitial=!1),c.cleanup(),c.__animation.eventHandlers().filter(function(e){return"animationend"===e.name}).forEach(function(e){return e.callback({error:_.Errors.NONE,animationName:c.__animation.animationName(),elapsedTime:(r-c.__started)/1e3})}))}};return m},a.prototype.__getBorderingKeyframes=function(e,r){for(var t=this.__animatedStyles[e],o=0,i=t.length;o<i;o++){if(t[o].progressPoint===r)return[t[o]];if(t[o].progressPoint>r)return o<1?[t[o]]:[t[o-1],t[o]]}return[t[t.length-1]]},a.prototype.__interpolate=function(e,r,t){var o=[];function i(e,r){return e+(r-e)*t}for(var n=0,a=Math.min(e.length,r.length);n<a;n++){for(var s=[],l=0,c=Math.max(e[n].length,r[n].length);l<c;l++){var u=e[n][l],d=r[n][l],m=typeof u,_=typeof d;if(void 0===u){switch(_){case"string":u=d;break;case"number":u=0;break;case"object":u=N.fromRgb(0,0,0,0)}m=_}if(void 0===d){switch(m){case"string":d=u;break;case"number":d=0;break;case"object":d=N.fromRgb(0,0,0,0)}_=m}if(m!==_||"string"===m)s.push(t<.5?u:d);else switch(m){case"number":s.push(i(u,d));break;case"object":s.push(N.fromRgb(i(u.red,d.red),i(u.green,d.green),i(u.blue,d.blue),i(u.alpha,d.alpha)))}}o.push(s.join(""))}return o},a);function a(e,r){this.__animationFrameID=null,this.__start=null,this.__iteration=0,this.__elapsedTime=0,this.__resetToInitial=!0,this.__delayTimer=null,this.__animation=e,this.__statusChangeCallback=r,this.__element=$(t.Services.styleManager.expandSelector(this.__animation.selector(),this.__animation.controlName()))}t.JavaScriptAnimationController=n;var s=(l.prototype.pause=function(){window.clearTimeout(this.__timerId),this.__remaining-=Date.now()-this.__start},l.prototype.resume=function(){this.__start=Date.now(),window.clearTimeout(this.__timerId),this.__timerId=window.setTimeout(this.__callback,this.__remaining)},l);function l(e,r){this.__timerId=0,this.__callback=e,this.__delay=r,this.__remaining=r,this.resume()}var N=(d.fromRgb=function(e,r,t,o){return void 0===o&&(o=1),new d(e,r,t,o)},d.fromHsl=function(e,r,t,o){function i(e,r,t){return e<=r?r:t<=e?t:e}var n,a,s;if(void 0===o&&(o=1),e=i(e%360/360,0,1),r=i(r,0,1),t=i(t,0,1),0===r)n=a=s=t;else{function l(e,r,t){return t<0&&(t+=1),1<t&&--t,t<1/6?e+6*(r-e)*t:t<.5?r:t<2/3?e+(r-e)*(2/3-t)*6:e}var c=t<.5?t*(1+r):t+r-t*r,u=2*t-c;n=l(u,c,e+1/3),a=l(u,c,e),s=l(u,c,e-1/3)}return new d(255*n,255*a,255*s,o)},d.fromHexString=function(e){return 3===e.length&&(e=e.replace(/./g,"$&$&")),new d(parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16),1)},d.prototype.toString=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},d);function d(e,r,t,o){function i(e,r,t){return e<=r?r:t<=e?t:e}this.red=Math.round(i(e,0,255)),this.green=Math.round(i(r,0,255)),this.blue=Math.round(i(t,0,255)),this.alpha=i(o,0,1)}}(_.System||(_.System={}))}(TcHmi=TcHmi||{}),function(u){var l,e,r,t;function d(e,r,t){if(this.__state=d.State.Invalid,this.__attr=null,this.__attrSchema=null,this.__onControlAttachedDestroyCallback=null,this.__onControlDetachedDestroyCallback=null,this.__onBindingEventDestroyCallbacks=[],this.__onFunctionResultChangedDestroyCallback=null,!e)throw new Error("Invalid value: '"+e+"' for parameter: 'expression'.");if(!r)throw new Error("Invalid value: '"+r+"' for parameter: 'propertyName'.");if(!t)throw new Error("Invalid value: '"+t+"' for parameter: 'control'.");if(this.__expression=e,this.__propertyName=r,this.__control=t,this.__state=d.State.Initializing,this.__symbol=new l.Symbol(e),this.__attr=u.System.Services.controlManager.getAttributeByPropertyName(this.__control,this.__propertyName),!this.__attr)throw new Error("The attribute property name: '"+this.__propertyName+"' does not exist for control: '"+this.__control.getId()+"'.");this.__attrSchema=u.System.Services.typeManager.getSchema(this.__attr.type),this.__onControlAttachedDestroyCallback=u.EventProvider.register(this.__control.getId()+".System.onAttached",this.__onControlAttached()),this.__onControlDetachedDestroyCallback=u.EventProvider.register(this.__control.getId()+".System.onDetached",this.__onControlDetached()),this.__control.getIsAttached()&&this.__resume()}l=u.System||(u.System={}),d.prototype.destroy=function(){if(this.__state!==d.State.Destroyed){if(this.__propertyName=null,this.__control=null,this.__destroyWatch&&(this.__destroyWatch(),this.__destroyWatch=null),this.__watchCallback=null,this.__symbol&&(this.__symbol.destroy(),this.__symbol=null),null!==this.__onFunctionResultChangedDestroyCallback&&(this.__onFunctionResultChangedDestroyCallback(),this.__onFunctionResultChangedDestroyCallback=null),this.__onBindingEventDestroyCallbacks)for(;0<this.__onBindingEventDestroyCallbacks.length;){var e=this.__onBindingEventDestroyCallbacks.shift();e(),e=null}null!==this.__onControlAttachedDestroyCallback&&(this.__onControlAttachedDestroyCallback(),this.__onControlAttachedDestroyCallback=null),null!==this.__onControlDetachedDestroyCallback&&(this.__onControlDetachedDestroyCallback(),this.__onControlDetachedDestroyCallback=null),this.__state=d.State.Destroyed}},d.prototype.__resume=function(){if(this.__state===d.State.Initializing||this.__state===d.State.Suspended){if(this.__state=d.State.Resuming,TCHMI_ENABLE_DESIGNER_MODE_MASTER&&this.__symbol.getExpression().getType()===u.SymbolType.Server)return this.__state=d.State.Ready,void this.__callSetter(null);if(TCHMI_ENABLE_DESIGNER_MODE_MASTER&&this.__symbol.getExpression().getType()===u.SymbolType.PartialParam&&!this.__symbol.getExpression().getPathTokens()){for(var e=null,r=this.__control;r;){if(r.getParent()&&"tchmi-user-control-host"===r.getParent().getType()&&"tchmi-user-control"===r.getType()){e=r.getParent();break}r=r.getParent()}if(!e)return this.__state=d.State.Ready,void this.__callSetter(null)}if(this.__attrSchema&&"TcHmi.Symbol"===this.__attrSchema.frameworkInstanceOf)this.__state=d.State.Ready,this.__callSetter(new u.Symbol(this.__symbol.getExpression().toString()));else{var t=this.__symbol.getExpression().getOptions().BindingMode,o=u.System.Services.controlManager.getAttributeTypeByPropertyName(this.__control,this.__propertyName);if("TwoWay"===t||!t&&o===l.ControlAttributeType.UserControlParameter){var i=this.__symbol.getExpression().getOptions().BindingEvents;if(i)for(var n=0,a=i.length;n<a;n++){var s=i[n];this.__onBindingEventDestroyCallbacks.push(u.EventProvider.register(this.__control.getId()+"."+s,this.__onBindingEvent()))}else this.__onFunctionResultChangedDestroyCallback=u.EventProvider.register(this.__control.getId()+".onFunctionResultChanged",this.__onFunctionResultChanged())}this.__watchCallback=this.__onWatchCallback(),this.__destroyWatch=this.__symbol.watch(this.__watchCallback)}}},d.prototype.__suspend=function(){if(this.__destroyWatch&&(this.__destroyWatch(),this.__destroyWatch=null),(this.__watchCallback=null)!==this.__onFunctionResultChangedDestroyCallback&&(this.__onFunctionResultChangedDestroyCallback(),this.__onFunctionResultChangedDestroyCallback=null),this.__onBindingEventDestroyCallbacks)for(;0<this.__onBindingEventDestroyCallbacks.length;){var e=this.__onBindingEventDestroyCallbacks.shift();e(),e=null}this.__state=d.State.Suspended},d.prototype.getExpression=function(){return this.__expression},d.prototype.getSymbol=function(){return this.__symbol},d.prototype.getPropertyName=function(){return this.__propertyName},d.prototype.getControl=function(){return this.__control},d.prototype.__onControlAttached=function(){var t=this;return function(e,r){t.__resume()}},d.prototype.__onControlDetached=function(){var t=this;return function(e,r){t.__suspend()}},d.prototype.__onBindingEvent=function(){var t=this;return function(){if(t.__state===d.State.Ready&&void 0!==t.__control[t.__attr.propertyGetterName]){if(t.__lock)return;var e=t.__control[t.__attr.propertyGetterName].call(t.__control);t.__symbol.write(tchmi_clone_object(e),function(e){if(e.error!==u.Errors.NONE){var r="[Source=Framework, Module=TcHmi.System.Binding, Control="+t.__control.getId()+", Property="+t.__propertyName+", Symbol="+t.__symbol.getExpression().toString()+"] ";e.details?r+=u.Log.buildMessage(e.details):r+=u.Log.buildMessage({code:e.error,message:u.Errors[e.error]}),u.Log.error(r)}})}}},d.prototype.__onFunctionResultChanged=function(){var c=this;return function(e,r,t){if(c.__state===d.State.Ready&&r){var o,i=!1;if(t)for(a=0,s=t.length;a<s;a++){var n=t[a].propertyName;if(c.__attr&&c.__attr.propertyName===n){i=!0,o=t[a].dirtyPaths;break}}else for(var a=0,s=r.length;a<s;a++)if(c.__attr&&c.__attr.propertyGetterName===r[a]){i=!0;break}if(i&&void 0!==c.__control[c.__attr.propertyGetterName]){if(c.__lock)return;var l=c.__control[c.__attr.propertyGetterName].call(c.__control);c.__symbol.writeEx(tchmi_clone_object(l),o,function(e){if(e.error!==u.Errors.NONE){var r="[Source=Framework, Module=TcHmi.System.Binding, Control="+c.__control.getId()+", Property="+c.__propertyName+", Symbol="+c.__symbol.getExpression().toString()+"] ";e.details?r+=u.Log.buildMessage(e.details):r+=u.Log.buildMessage({code:e.error,message:u.Errors[e.error]}),u.Log.error(r)}})}}}},d.prototype.__onWatchCallback=function(){var t=this;return function(e){if((t.__state===d.State.Ready||t.__state===d.State.Resuming)&&!t.__lock)if(e.error===u.Errors.NONE)t.__state===d.State.Resuming&&(t.__state=d.State.Ready),t.__callSetter(e.value,e.dirtyPaths);else{var r="[Source=Framework, Module=TcHmi.System.Binding, Control="+t.__control.getId()+", Property="+t.__propertyName+", Symbol="+t.__symbol.getExpression().toString()+"] ";e.details?r+=u.Log.buildMessage(e.details):r+=u.Log.buildMessage({code:e.error,message:u.Errors[e.error]}),u.Log.error(r),t.__callSetter(null)}}},d.prototype.__callSetter=function(e,r){if(void 0===e&&(e=void 0),void 0===r&&(r=void 0),void 0!==e){var t;this.__lock=!0;try{t=u.System.Services.controlManager.setControlPropertyByAttribute(this.__control,this.__attr,e,r)}catch(r){try{u.Log.error("[Source=Framework, Module=TcHmi.System.Binding, Control="+this.__control.getId()+", Property="+this.__propertyName+", Symbol="+this.__symbol.getExpression().toString()+"] Unexpected exception="+r+" in setter function of attribute with propertyName="+this.__propertyName+" of control="+this.__control.getId()+".")}catch(e){u.Log.error("[Source=Framework, Module=TcHmi.System.Binding, Control="+this.__control.getId()+", Property="+this.__propertyName+", Symbol="+this.__symbol.getExpression().toString()+"] Unexpected exception="+r+".")}}finally{this.__lock=!1}t&&t.code!==u.Errors.NONE&&u.Log.error("[Source=Framework, Module=TcHmi.System.Binding, Control="+this.__control.getId()+", Property="+this.__propertyName+", Symbol="+this.__symbol.getExpression().toString()+"] "+u.Log.buildMessage(t))}},t=d,l.Binding=t,e=t=l.Binding||(l.Binding={}),(r=e.State||(e.State={}))[r.Invalid=0]="Invalid",r[r.Initializing=5]="Initializing",r[r.Resuming=7]="Resuming",r[r.Ready=10]="Ready",r[r.Suspended=15]="Suspended",r[r.Destroyed=20]="Destroyed"}(TcHmi=TcHmi||{}),function(l){var a,e;function r(e){this.__bindingsByControl=new Map}a=l.System||(l.System={}),r.prototype.getBinding=function(e,r){var t=null,o=r.getId(),i=this.__bindingsByControl.get(o);if(void 0===i)return t;if(!l.System.Services.controlManager.getAttributeByPropertyName(r,e))return t;var n=i.get(e);return void 0===n?t:t=n},r.prototype.getBindingsByControl=function(e){var r=e.getId();return this.__bindingsByControl.get(r)},r.prototype.createBinding=function(e,r,t){this.removeBinding(r,t,!1);var o=t.getId(),i=this.__bindingsByControl.get(o);void 0===i&&(i=new Map,this.__bindingsByControl.set(o,i));var n=new a.Binding(e,r,t);return i.set(r,n),n},r.prototype.removeBinding=function(e,r,t){void 0===t&&(t=!0);var o=r.getId(),i=this.__bindingsByControl.get(o);if(void 0!==i){var n=l.System.Services.controlManager.getAttributeByPropertyName(r,e);if(n){var a=i.get(e);if(a&&(i.delete(e),a.destroy(),t)){var s=void 0;try{s=l.System.Services.controlManager.setControlPropertyByAttribute(r,n,null)}catch(r){try{l.Log.error("[Source=Framework, Module=TcHmi.System.BindingManager] Unexpected exception="+r+" in setter function of attribute with propertyName="+e+" of control="+o+".")}catch(e){l.Log.error("[Source=Framework, Module=TcHmi.System.BindingManager] Unexpected exception="+r+".")}}s&&s.code!==l.Errors.NONE&&l.Log.error("[Source=Framework, Module=TcHmi.System.BindingManager] "+l.Log.buildMessage(s))}}}},e=r,a.BindingManager=e}(TcHmi=TcHmi||{}),function(N){var w,e;function O(e){var f=this;if(this.__usercontrolAttrDescrByPropertyName=new Map,this.__usercontrolAttrDescrBySetterName=new Map,this.resolveUcAttributes=function(){f.__usercontrolAttrDescrByPropertyName.clear(),f.__usercontrolAttrDescrBySetterName.clear(),N.System.Caches.partialCompositeConfigCache.forEach(function(e,r){if(e&&e.parameters){var t=new Map;f.__usercontrolAttrDescrByPropertyName.set(r,t);var o=new Map;f.__usercontrolAttrDescrBySetterName.set(r,o);for(var i=e.parameters,n=0,a=i.length;n<a;n++)t.set(i[n].propertyName,i[n]),o.set(i[n].propertySetterName,i[n])}})},this.__onAttributeMutation=function(e,r){for(var t=new Map,o=0,i=e.length;o<i;o++){var n=e[o].target;if(n.nodeType===Node.ELEMENT_NODE){var a=f.__controlsGeoMap.get(n.id);a&&!t.has(n.id)&&t.set(n.id,a);for(var s=n.querySelectorAll("div[id][data-tchmi-type]"),l=0,c=s.length;l<c;l++){var u=f.__controlsGeoMap.get(s[l].id);u&&!t.has(s[l].id)&&t.set(s[l].id,u)}}}f.checkControlGeometry(t)},this.__onDomMutation=function(e,r){for(var i=!1,o=[],n=[],a=[],s=[],t=[],l=[],c=0,u=e.length;c<u;c++){for(var d=e[c],m=0,_=d.removedNodes.length;m<_;m++){if((E=d.removedNodes[m]).nodeType===Node.ELEMENT_NODE){for(var h=0,g=(p=E.querySelectorAll("div[id][data-tchmi-type]")).length;h<g;h++)t.push(p[h].id);E.id&&t.push(E.id)}}for(m=0,_=d.addedNodes.length;m<_;m++){var E;if((E=d.addedNodes[m]).nodeType===Node.ELEMENT_NODE){E.id&&l.push(f.__controls.get(E.id)),f.__attributeMutationObserver.observe(E,{attributes:!0,attributeFilter:["style","class"],subtree:!0});var p;for(h=0,g=(p=E.querySelectorAll("div[id][data-tchmi-type]")).length;h<g;h++)l.push(f.__controls.get(p[h].id))}}}t.forEach(function(e){var r=f.__controlsGeoMap.get(e);if(r){f.__controlsGeoMap.delete(e);var t=r.ctrl;if(t){var o=t.getElement();if(!(o.length<1))if(!1===(void 0!==o[0].isConnected?o[0].isConnected:!!document.getElementById(e))&&!0===t.getIsAttached()){N.EventProvider.raise("System.onPrevControlDetached",t),N.EventProvider.raise(e+".System.onPrevDetached",t);try{t.__detach()}catch(e){N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Control __detach of "+t.getId()+" failed with exception="+e+".")}n.push(t),i=!0}}}}),l.forEach(function(e){if(e&&!(e.getElement().length<1)){var r=e.getId(),t={ctrl:e,layoutData:{moved:!1,resized:!1,bounds:{offsetLeft:null,offsetTop:null,width:null,height:null},computedStyles:{left:null,top:null,right:null,bottom:null,width:null,height:null}}};f.__controlsGeoMap.set(r,t);var o=f.checkControlGeometry(t,!0);a=a.concat(o.skippedMovedEventList),s=s.concat(o.skippedResizedEventList)}}),l.forEach(function(e){if(e){var r=e.getElement();if(!(r.length<1)){var t=e.getId();if(!0===(void 0!==r[0].isConnected?r[0].isConnected:!!document.getElementById(t))&&!1===e.getIsAttached()){N.EventProvider.raise("System.onPrevControlAttached",e),N.EventProvider.raise(t+".System.onPrevAttached",e);try{e.__attach()}catch(e){N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Control __attach of "+t+" failed with exception="+e+".")}o.push(e),i=!0}}}}),s.length&&N.EventProvider.raise("System.onControlsResized",s),s.length&&N.EventProvider.raise("System.onControlsMoved",s),a.forEach(function(e){N.EventProvider.raise(e.getId()+".onMoved",e)}),s.forEach(function(e){N.EventProvider.raise(e.getId()+".onResized",e)}),i&&f.checkControlGeometry(),0!==n.length&&N.EventProvider.raise("System.onPrevControlsDetached",n),0!==o.length&&N.EventProvider.raise("System.onPrevControlsAttached",o)},this.__descriptions=new Map,this.__controls=new Map,this.__controlsGeoMap=new Map,"function"==typeof Proxy){var o=this;N.control=new Proxy(N.control,{get:function(e,r){return o.__controls.get(r)},ownKeys:function(e){var t=[];return o.__controls.forEach(function(e,r){t.push(r)}),t},getOwnPropertyDescriptor:function(e,r){return{enumerable:!0,configurable:!0}}})}if("function"==typeof MutationObserver||"object"==typeof MutationObserver)this.__domMutationObserver=new MutationObserver(this.__onDomMutation),this.__domMutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.__attributeMutationObserver=new MutationObserver(this.__onAttributeMutation);else if("function"==typeof e){var r={servicesName:"ControlManager",error:N.Errors.E_NOT_SUPPORTED,dialogManagerMessage:"Browser support for MutationObserver missing."};return void e.call(null,r)}window.addEventListener("resize",this.__onWindowResized()),N.EventProvider.register("System.onUserControlConfigCreated",this.resolveUcAttributes),N.EventProvider.register("System.onUserControlConfigChanged",this.resolveUcAttributes),N.EventProvider.register("System.onUserControlConfigRemoved",this.resolveUcAttributes)}w=N.System||(N.System={}),O.prototype.__onWindowResized=function(){var r=this;return function(e){r.checkControlGeometry()}},O.prototype.checkControlGeometry=function(e,r){function t(e){var r=e.ctrl;if(r&&!r.getIsDestroyed()){var t=r.getElement()[0],o=t.getBoundingClientRect();e.layoutData.computedStyles=N.StyleProvider.getComputedElementStyle(t,["left","top","right","bottom","width","height"]);var i=t.offsetLeft,n=t.offsetTop,a=r.getParent();if(a)if("tchmi-grid"!==a.getType()){var s=N.StyleProvider.getComputedElementStyle(a.getElement(),["border-left-width","border-top-width"]);i+=parseFloat(s["border-left-width"]),n+=parseFloat(s["border-top-width"])}else{var l=N.StyleProvider.getComputedElementStyle(r.getElement().parent().parent(),["border-left-width","padding-left","border-top-width","padding-top"]);i+=parseFloat(l["border-left-width"])+parseFloat(l["padding-left"]),n+=parseFloat(l["border-top-width"])+parseFloat(l["padding-top"])}var c=!1;u.__checkResize(e.layoutData,o.width,o.height)&&(e.layoutData.resized=!0,d.push(e),c=!0),u.__checkMoved(e.layoutData,i,n)&&(e.layoutData.moved=!0,m.push(e),c=!0),c&&r.__injectRenderedDimensions(e.layoutData)}}void 0===e&&(e=this.__controlsGeoMap),void 0===r&&(r=!1);var u=this,d=[],m=[],o=[],i=[];e instanceof Map?e.forEach(t):t(e);for(var n=0,a=d.length;n<a;n++){var s=d[n];N.EventProvider.raise(s.ctrl.getId()+".System.onPrevResized",s),r?i.push(s.ctrl):(N.EventProvider.raise(s.ctrl.getId()+".onResized",s.ctrl),N.EventProvider.raise("System.onControlsResized",[s.ctrl]))}for(n=0,a=m.length;n<a;n++){var l=m[n];N.EventProvider.raise(l.ctrl.getId()+".System.onPrevMoved",l),r?o.push(l.ctrl):(N.EventProvider.raise(l.ctrl.getId()+".onMoved",l.ctrl),N.EventProvider.raise("System.onControlsMoved",[l.ctrl]))}return{skippedResizedEventList:i,skippedMovedEventList:o}},O.prototype.__checkResize=function(e,r,t){var o=!1;return r=Math.round(r),t=Math.round(t),(null!==e.bounds.width||null!==e.bounds.height)&&e.bounds.width===r&&e.bounds.height===t||(e.bounds.width=r,e.bounds.height=t,o=!0),o},O.prototype.__checkMoved=function(e,r,t){var o=!1;return(null!==e.bounds.offsetTop||null!==e.bounds.offsetLeft)&&e.bounds.offsetTop===r&&e.bounds.offsetLeft===t||(e.bounds.offsetTop=r,e.bounds.offsetLeft=t,o=!0),o},O.prototype.getControlsCache=function(){return this.__controls},O._procConstructor=function(r,e,t,o){try{return new o(r,e,t)}catch(e){return void N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Control constructor of "+r.attr("id")+" failed with exception="+e+".")}},O._procPrevinit=function(r,e){try{return r.__previnit(),!0}catch(e){try{N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Control previnit of "+r.getId()+" failed with exception="+e+"."),r.destroy()}catch(e){}return!1}},O._procInit=function(r,e){try{return r.__init(),!0}catch(e){try{N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Control init of "+r.getId()+" failed with exception="+e+"."),r.destroy()}catch(e){}return!1}},O.prototype.setControlProperty=function(e,r,t,o){var i=this.getAttributeByPropertyName(e,r);if(i)return i.readOnly?{code:N.Errors.E_SYMBOL_READONLY,message:N.Errors[N.Errors.E_SYMBOL_READONLY],reason:"Property: "+r+" of control type: "+e.getType()+" is readonly.",domain:"TcHmi.System.ControlManager"}:i.propertySetterName?this.setControlPropertyByAttribute(e,i,t,o):{code:N.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION,message:N.Errors[N.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION],reason:"Missing propertySetterName in configuration of attribute property: "+r+" of control type: "+e.getType()+".",domain:"TcHmi.System.ControlManager"};var n="";return r&&(n="Missing attribute description of attribute property: "+r+" for control type: "+e.getType()+"."),{code:N.Errors.E_PARAMETER_INVALID,message:N.Errors[N.Errors.E_PARAMETER_INVALID],reason:n,domain:"TcHmi.System.ControlManager"}},O.prototype.setControlPropertyByAttribute=function(r,t,e,o){var i=r[t.propertySetterName];if(void 0===i)return{code:N.Errors.E_PARAMETER_INVALID,message:N.Errors[N.Errors.E_PARAMETER_INVALID],reason:"Missing implementation of setter function: "+t.propertySetterName+" for attribute property: "+t.propertyName+" of control type: "+r.getType()+".",domain:"TcHmi.System.ControlManager"};var n=!1,a=e;if(null===a&&(a=w.Services.themeManager.getDefaultPropertyValue(r,t.propertyName).value,n=!0),null===(a=N.ValueConverter.toType(a,t.type))&&(null!==a||null!==e))return{code:N.Errors.E_VALUE_INVALID,message:N.Errors[N.Errors.E_VALUE_INVALID],reason:"Unable to convert value of type: "+typeof e+" to type: "+t.type+" for attribute property: "+t.propertyName+" of control of type: "+r.getType()+" with id: "+r.getId()+".",domain:"TcHmi.System.ControlManager"};try{i.call(r,a,o)}catch(e){return{code:N.Errors.E_EXCEPTION,message:N.Errors[N.Errors.E_EXCEPTION],reason:"Unexpected exception in setter function: "+t.propertySetterName+" of attribute property: "+t.propertyName+" of control of type: "+r.getType()+" with id: "+r.getId()+". Exception: "+e,domain:"TcHmi.System.ControlManager"}}return n?w.Services.themeManager.watchAttributeDefaults(r,t.propertyName):w.Services.themeManager.unwatchAttributeDefaults(r,t.propertyName),{code:N.Errors.NONE,message:N.Errors[N.Errors.NONE],domain:"TcHmi.System.ControlManager"}},O.prototype.destruct=function(e){this.__controls.has(e.getId())?(this.__controls.delete(e.getId()),"function"!=typeof Proxy&&delete N.control[e.getId()]):N.Log.warn("[Source=Framework, Module=TcHmi.System.ControlManager] Unable to destroy control with id="+e.getId()+" because its already destroyed!")},O.prototype.compile=function(e,r,t){var o;if(1===(o="string"==typeof e?$(e):e).length||1===(o=o.filter("div[data-tchmi-type]")).length){var i=o[0].getAttribute("data-tchmi-type");if(i){var n=o[0].id;if(n){var a=N.System.Caches.registeredControls.get(i);if(void 0===a){var s="[Source=Framework, Module=TcHmi.System.ControlManager] Internal Error: Compile of control "+n+" not successful: Control class "+i+" was not loaded. Mostly this is the case if the control source files are not included or not included in proper order in the document. ";return TCHMI_ENABLE_DESIGNER_MODE||(s+='If a control uses a foreign control this information must be added in your controls description as description.json#uses: ["'+i+'"]'),void N.Log.error(s)}var l=$(o[0].cloneNode(!0));o[0].textContent="";var c=N.System.resolveAttributesFromControlElement(l),u=this.__controls.get(n);if(void 0===u){var d=O._procConstructor(o,l,c,a.constructor);if(void 0!==d){if(r?d.__setParent(r):d.__setParent(null),this.__controls.set(n,d),"function"!=typeof Proxy&&(N.control[n]=d),r&&r.__addChild(d,t),null!==a.templatePath&&void 0!==a.templatePath){var m=N.System.Caches.templateMarkupCache.get(a.templatePath);if(void 0!==m){var _=document.createElement("div");_.innerHTML=m.replace(/{Id}/g,n);var h=_.firstElementChild;if(h){var g=this,E=function(e){for(var r=e.children,t=0,o=r.length;t<o;t++){var i=r[t];if(i.hasAttribute("data-tchmi-type")){var n=g.compile($(i),d);d.__addChild(n)}else i.hasChildNodes()&&E(i)}};E(h),o[0].appendChild(h)}}else N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Template markup for control type="+d.getType()+" is not available.")}if(!0!==O._procPrevinit(d,l))return this.__controls.delete(n),void("function"!=typeof Proxy&&delete N.control[n]);var p=new Map;p.set("data-tchmi-trigger",!0);var f=d.getAttrs();if(null!=f)for(var S in f){var v=f[S];void 0!==v.descr&&null!==v.descr&&"data-tchmi-trigger"!==S&&(p.set(S,!0),!0!==v.descr.readOnly)&&(N.Symbol.isSymbolExpression(v.value)?(this.setControlPropertyByAttribute(d,v.descr,null),N.System.Services.bindingManager.createBinding(v.value,v.descr.propertyName,d)):(b=this.setControlPropertyByAttribute(d,v.descr,v.value))&&b.code!==N.Errors.NONE&&N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] "+N.Log.buildMessage(b)))}N.Engineering.ErrorPane.remove(n+".requiredAttributeMissing");for(var y=0,T=this.getDescriptionAttributes(i);y<T.length;y++){var C=T[y];if(!p.get(C.name.toLowerCase())&&!C.readOnly){if(C.requiredOnCompile)return N.Engineering.ErrorPane.add(n+".requiredAttributeMissing","Error compiling control id="+n+" type="+d.getType()+". Attribute "+C.propertyName+" is required but has not been set in HTML.",N.Engineering.ErrorPane.MessageType.Error),this.__controls.delete(n),void("function"!=typeof Proxy&&delete N.control[n]);(b=this.setControlPropertyByAttribute(d,C,null))&&b.code!==N.Errors.NONE&&N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] "+N.Log.buildMessage(b))}}w.Services.themeManager.startAttributeSetterWatcher(d);var M=f["data-tchmi-trigger"];if(null!=M&&void 0!==M.descr&&null!==M.descr&&!0!==M.descr.readOnly)if(N.Symbol.isSymbolExpression(M.value))N.System.Services.bindingManager.createBinding(M.value,M.descr.propertyName,d);else{var b;(b=this.setControlPropertyByAttribute(d,M.descr,M.value))&&b.code!==N.Errors.NONE&&N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] "+N.Log.buildMessage(b))}return!0!==O._procInit(d,l)?(this.__controls.delete(n),void("function"!=typeof Proxy&&delete N.control[n])):d}}else{var R=u.getElement().attr("data-tchmi-partial-url");!N.System.isInitialized&&R&&R===o.attr("data-tchmi-partial-url")||N.Log.error('[Source=Framework, Module=TcHmi.System.ControlManager] Failed to create instance of control. Id: "'+n+'" does already exist.')}}else N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Error compiling control. Missing required attribute=id in html="+o[0].outerHTML+".")}else N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Error compiling control. Missing required attribute=data-tchmi-type in html="+o[0].outerHTML+".")}else N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Error compiling control. Only one control is allowed but got "+o.length+".")},O.prototype.addDescription=function(e,r){this.__descriptions.set(r.name,{type:r.name,path:e,fullDescription:r})},O.prototype.__resolveDescriptionTypes=function(e){e.fullDescription.inheritedTypes=[];var r=e.fullDescription.base;if(null!=r){var t=this.getDescriptionCacheEntry(r);if(!t)return void N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Base class of "+e.fullDescription.name+" ("+e.fullDescription.base+") not loaded.");this.__resolveDescriptionTypes(t);for(var o=this.getDescriptionTypes(r),i=0,n=o.length;i<n;i++){var a=o[i];e.fullDescription.inheritedTypes.push(a)}}e.fullDescription.inheritedTypes.push(e.type)},O.prototype.__resolveDescriptionAttributes=function(e){var r=[],t=[];e.fullDescription.inheritedAttributes=[],e.fullDescription.inheritedAttributesNameMap=new Map,e.fullDescription.inheritedAttributesPropertyNameMap=new Map,e.fullDescription.inheritedAttributesPropertyGetterNameMap=new Map,e.fullDescription.inheritedAttributesPropertySetterNameMap=new Map,e.fullDescription.inheritedAccess=[];var o=e.fullDescription.base;if(null!=o){var i=this.getDescriptionCacheEntry(o);if(!i)return void N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Base class of "+e.fullDescription.name+" ("+e.fullDescription.base+") not loaded.");this.__resolveDescriptionAttributes(i);var n=i.fullDescription.inheritedAttributes;if(void 0!==n)for(var a=0,s=n.length;a<s;a++)!1!==n[a].heritable&&r.push(n[a]);var l=i.fullDescription.inheritedAccess;void 0!==l&&0!==l.length&&(t=t.concat(l))}var c=tchmi_clone_object(e.fullDescription.attributes);for(null==c&&(c=[]),a=0,s=r.length;a<s;a++){for(var u=!1,d=0,m=c.length;d<m;d++)if(c[d].name===r[a].name){u=!0;break}!1===u&&e.fullDescription.inheritedAttributes.push(r[a])}e.fullDescription.inheritedAttributes=e.fullDescription.inheritedAttributes.concat(c);for(var _=0,h=e.fullDescription.inheritedAttributes.length;_<h;_++){var g=e.fullDescription.inheritedAttributes[_];e.fullDescription.inheritedAttributesNameMap.set(g.name.toLowerCase(),g),g.propertyName?e.fullDescription.inheritedAttributesPropertyNameMap.set(g.propertyName.toLowerCase(),g):N.Log.error('[Source=Framework, Module=TcHmi.System.ControlManager] Description.json of control type "'+e.fullDescription.displayName+'" attribute "'+g.name+'" has no propertyName entry. Handling this attribute will not work.'),g.propertyGetterName?e.fullDescription.inheritedAttributesPropertyGetterNameMap.set(g.propertyGetterName.toLowerCase(),g):N.Log.error('[Source=Framework, Module=TcHmi.System.ControlManager] Description.json of control type "'+e.fullDescription.displayName+'" attribute "'+g.name+'" has no propertyGetterName entry. Handling this attribute will not work.'),g.propertySetterName?e.fullDescription.inheritedAttributesPropertySetterNameMap.set(g.propertySetterName.toLowerCase(),g):g.readOnly||N.Log.error('[Source=Framework, Module=TcHmi.System.ControlManager] Description.json of control type "'+e.fullDescription.displayName+'" attribute "'+g.name+'" has no propertySetterName entry. Handling this attribute will not work.')}var E=e.fullDescription.access;for(null==E&&(E=[]),a=0,s=t.length;a<s;a++){for(u=!1,d=0,m=E.length;d<m;d++)if(E[d].name===t[a].name){u=!0;break}!1===u&&e.fullDescription.inheritedAccess.push(t[a])}0!==E.length&&(e.fullDescription.inheritedAccess=e.fullDescription.inheritedAccess.concat(E))},O.prototype.__resolveInheritanceHierarchy=function(i){var n=this;if(!i)return null;var e={controlType:i.type,children:[]};if(i.fullDescription.base){var a=function(e,r){if(!r)return n.__resolveInheritanceHierarchy(n.getDescriptionCacheEntry(i.fullDescription.base));if(e===r.controlType)return r;for(var t=0;t<r.children.length;t++){var o=r.children[t];return o.controlType===e?o:a(e,o)}return null},r=a(i.fullDescription.base,this.__inheritanceHierarchyTree);if(r){for(var t=0;t<r.children.length;t++){var o=r.children[t];if(o.controlType===i.type)return o}r.children.push(e)}else{var s=this.__resolveInheritanceHierarchy(this.getDescriptionCacheEntry(i.fullDescription.base));if(!s)return null;s.children.push(e)}}else{if(this.__inheritanceHierarchyTree)return this.__inheritanceHierarchyTree;this.__inheritanceHierarchyTree=e}return e},O.prototype.resolveDescriptionInheritation=function(){try{var t=this;this.__descriptions.forEach(function(e,r){N.Log.debug("[Source=Framework, Module=TcHmi.System.ControlManager] Resolving "+r),t.__resolveDescriptionTypes(e),t.__resolveDescriptionAttributes(e),t.__resolveInheritanceHierarchy(e)})}catch(e){N.Log.error("[Source=Framework, Module=TcHmi.System.ControlManager] Unexpected exception="+e)}},O.prototype.getInheritanceTree=function(){return this.__inheritanceHierarchyTree},O.prototype.getDescriptionCache=function(){return this.__descriptions},O.prototype.getDescriptionTypes=function(e){var r=this.getDescriptionCacheEntry(e);return r&&r.fullDescription&&r.fullDescription.inheritedTypes?r.fullDescription.inheritedTypes:[]},O.prototype.isRegisteredDescriptionType=function(e){if(e)return this.__descriptions.has(e)},O.prototype.getDescriptionCacheEntry=function(e){if(!e)return null;var r=this.__descriptions.get(e);return r||null},O.prototype.getDescription=function(e){var r=this.getDescriptionCacheEntry(e);return r?r.fullDescription:null},O.prototype.getDescriptionPath=function(e){var r=this.getDescriptionCacheEntry(e);return null===r?null:r.path},O.prototype.getDescriptionAttributes=function(e){var r=this.getDescriptionCacheEntry(e);return r&&r.fullDescription&&r.fullDescription.inheritedAttributes?r.fullDescription.inheritedAttributes:null},O.prototype.getDescriptionAccess=function(e){var r=this.getDescriptionCacheEntry(e);return r&&r.fullDescription&&r.fullDescription.inheritedAccess?r.fullDescription.inheritedAccess:null},O.prototype.getDescriptionAttributeByName=function(e,r){if(!r)return null;var t=r.toLowerCase(),o=this.getDescriptionCacheEntry(e);if(o&&o.fullDescription){var i=o.fullDescription.inheritedAttributesNameMap.get(t);return i||null}return null},O.prototype.getDescriptionAttributeByPropertyName=function(e,r){if(!r)return null;var t=r.toLowerCase(),o=this.getDescriptionCacheEntry(e);if(o&&o.fullDescription){var i=o.fullDescription.inheritedAttributesPropertyNameMap.get(t);return i||null}return null},O.prototype.getUserControlConfigAttributeByPropertyName=function(e,r){var t=this.__usercontrolAttrDescrByPropertyName.get(e);if(!t)return null;var o=t.get(r);return o||null},O.prototype.getDescriptionAttributeByPropertySetterName=function(e,r){if(null==r)return null;var t=r.toLowerCase(),o=this.getDescriptionCacheEntry(e);if(o&&o.fullDescription){var i=o.fullDescription.inheritedAttributesPropertySetterNameMap.get(t);return i||null}return null},O.prototype.getDescriptionAttributeByPropertyGetterName=function(e,r){if(!r)return null;var t=r.toLowerCase(),o=this.getDescriptionCacheEntry(e);if(o&&o.fullDescription){var i=o.fullDescription.inheritedAttributesPropertyGetterNameMap.get(t);return i||null}return null},O.prototype.getAttributeByPropertyName=function(e,r){var t=e.getType(),o=this.getDescriptionAttributeByPropertyName(t,r);if(o)return o;if("tchmi-user-control-host"===t){var i=e.getTargetUserControl();if(i){var n=tchmi_path(i.replace(".usercontrol",".usercontrol.json"));if(o=this.getUserControlConfigAttributeByPropertyName(n,r))return o}}return null},O.prototype.getAttributeTypeByPropertyName=function(e,r){if(!e)return w.ControlAttributeType.Invalid;var t=e.getType(),o=this.getDescriptionAttributeByPropertyName(t,r);if(o)return w.ControlAttributeType.Control;if("tchmi-user-control-host"===t){var i=e.getTargetUserControl();if(i){var n=tchmi_path(i.replace(".usercontrol",".usercontrol.json"));if(o=this.getUserControlConfigAttributeByPropertyName(n,r))return w.ControlAttributeType.UserControlParameter}}return w.ControlAttributeType.Invalid},O.prototype.getAttributeByPropertySetterName=function(e,r){if(!e)return null;var t=e.getType(),o=N.System.Services.controlManager.getDescriptionAttributeByPropertySetterName(t,r);if(o)return o;if("tchmi-user-control-host"===t){var i=e.getTargetUserControl();if(i){var n=tchmi_path(i.replace(".usercontrol",".usercontrol.json")),a=this.__usercontrolAttrDescrBySetterName.get(n);if(a){var s=a.get(r);if(s)return s}}}return null},O.prototype.getDescriptionAccessByName=function(e,r){var t=null;if(!r)return null;var o=this.getDescriptionAccess(e);if(null!=o)for(var i=0,n=o.length;i<n;i++){var a=o[i];if(a.name===r){t=a;break}}return t},O.prototype.resolveTemplateInheritation=function(){var o=function(e){var r=N.System.Services.controlManager.getDescription(e);if(r){var t=N.System.Caches.registeredControls.get(r.base);if(t)return t.templatePath?t.templatePath:o(r.base)}return null};N.System.Caches.registeredControls.forEach(function(e,r){e&&!e.templatePath&&(e.templatePath=o(r))})},e=O,w.ControlManager=e}(TcHmi=TcHmi||{}),function(l){var e,r;function t(){this.__currentDialogType=0;var e=document.createElement("style");e.id="tchmi-dialogmanager-loading-styles",e.innerHTML="\nbody {\n    margin:0;\n}\n/**\n * LoadingDialog\n */\n#tchmi-loadingsystemdialog-container {\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n\n#tchmi-loadingsystemdialog-container #tchmi-loadingsystemdialog-progress {\n    width: 100%;\n    height: 5px;\n    display: block;\n    background: #7493CC;\n}\n\n#tchmi-loadingsystemdialog-container #tchmi-loadingsystemdialog-progress[value] {\n    display: block;\n    color: #7493CC;\n    background: #ccc;\n    border:0px;\n}\n\n#tchmi-loadingsystemdialog-container #tchmi-loadingsystemdialog-progress::-moz-progress-bar {\n    display: block;\n    background: #7493CC;\n}\n\n#tchmi-loadingsystemdialog-container #tchmi-loadingsystemdialog-progress::-webkit-progress-bar {\n    background: #ccc;\n}\n\n#tchmi-loadingsystemdialog-container #tchmi-loadingsystemdialog-progress::-webkit-progress-value {\n    background: #7493CC;\n}\n\n#tchmi-loadingsystemdialog-container.tchmi-systemdialog-error #tchmi-loadingsystemdialog-progress[value] {\n    color: rgb(230, 80, 80);\n}\n\n#tchmi-loadingsystemdialog-container.tchmi-systemdialog-error #tchmi-loadingsystemdialog-progress {\n    background: rgb(230, 80, 80);\n}\n\n#tchmi-loadingsystemdialog-container.tchmi-systemdialog-error #tchmi-loadingsystemdialog-progress::-moz-progress-bar {\n    background: rgb(230, 80, 80);\n}\n\n#tchmi-loadingsystemdialog-container.tchmi-systemdialog-error #tchmi-loadingsystemdialog-progress::-webkit-progress-value {\n    background: rgb(230, 80, 80);\n} \n\n#tchmi-loadingsystemdialog-container .tchmi-systemdialog-message {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n\n    /* we have no other css loaded and thus no defined font */\n    font-family: sans-serif;\n    font-style: normal;\n    font-weight: normal;\n    font-size: x-large;\n    text-align: center;\n    padding: 5px;\n    width: 100%;\n    word-wrap: break-word;\n    z-index: 20000; /* We have to be on top of all select containers */\n\n    /** Reenable Text Selection for Errors */\n    -webkit-touch-callout: text;\n    -webkit-user-select: text;\n    -moz-user-select: text;\n    -ms-user-select: text;\n    user-select: text;\n}\n",document.head.appendChild(e),this.__dialogOwner=null,this.__jqLoadingDialogContainer=$('<div id="tchmi-loadingsystemdialog-container"><progress id="tchmi-loadingsystemdialog-progress"></progress><div class="tchmi-systemdialog-message"></div><div style="color: transparent;" id="trigger_font_load_at_least_for_numbers">0123</div></div>'),this.__progressElem=this.__jqLoadingDialogContainer[0].getElementsByTagName("progress")[0],this.__jqOverlayDialogContainer=$('<div id="tchmi-overlaysystemdialog-container" class="tchmi-box"><div id="tchmi-overlaysystemdialog-background" class="tchmi-box"></div><div class="tchmi-systemdialog-message tchmi-box"></div><input id="tchmi-systemdialog-dismissbutton" type="button" value="Close" style="display:none;"></input></div>');function r(e){e.stopPropagation()}var t,o=this.__jqOverlayDialogContainer.find("#tchmi-overlaysystemdialog-background")[0];t=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!1,capture:!1},o.addEventListener("mousedown",r,t),o.addEventListener("click",r,t),o.addEventListener("mouseup",r,t),o.addEventListener("touchstart",r,t),o.addEventListener("touchend",r,t)}e=l.System||(l.System={}),t.prototype.showDialog=function(e,r,t,o){if(null!==e&&null!==this.__dialogOwner&&this.__dialogOwner!==e)return!1;if(!0===r){if((this.__currentDialogType=t)===l.DialogManager.DialogType.SYSTEMLoading){if(document.body&&!document.body.contains(this.__jqLoadingDialogContainer[0])){if(window.localStorage&&window.performance&&window.performance.timing&&window.performance.timing.domInteractive){var i=window.localStorage.getItem("TCHMI_LAST_LOADING_TIME"),n=parseFloat(i);if(!isNaN(n)){this.__progressElem.max=n;var a=Date.now()-window.performance.timing.domInteractive;this.__progressElem.value=a}}this.__jqOverlayDialogContainer.detach(),l.System.SharedResources.jqBody.append(this.__jqLoadingDialogContainer)}}else if(t===l.DialogManager.DialogType.Overlay){var s=this.__jqOverlayDialogContainer.find("#tchmi-systemdialog-dismissbutton");o&&!0===o.cancelable?(s.on("click.DialogManager",function(e){l.System.Services.dialogManager.showDialog(null,!1)}),s.css("display","")):s.css("display","none"),document.body&&!document.body.contains(this.__jqOverlayDialogContainer[0])&&(this.__jqLoadingDialogContainer.detach(),l.System.SharedResources.jqBody.append(this.__jqOverlayDialogContainer))}}else if(!1===r&&(this.__jqLoadingDialogContainer.detach(),this.__jqOverlayDialogContainer.detach(),this.__jqOverlayDialogContainer.find("#tchmi-systemdialog-dismissbutton").off("click.DialogManager"),this.__dialogOwner=null,this.__currentDialogType===l.DialogManager.DialogType.SYSTEMLoading&&window.performance&&window.performance.timing&&window.performance.timing.domInteractive&&window.localStorage)){n=Date.now()-window.performance.timing.domInteractive;try{window.localStorage.setItem("TCHMI_LAST_LOADING_TIME",n.toString())}catch(e){}}return!0},t.prototype.updateText=function(e,r,t){if(void 0===t&&(t=l.DialogManager.DialogSeverity.Info),null!==e&&null!==this.__dialogOwner&&this.__dialogOwner!==e)return!1;switch(this.__dialogOwner=e,this.__jqLoadingDialogContainer.find(".tchmi-systemdialog-message").add(this.__jqOverlayDialogContainer.find(".tchmi-systemdialog-message")).html(r),this.updateProgress(),t){case l.DialogManager.DialogSeverity.Info:this.__jqLoadingDialogContainer[0].classList.remove("tchmi-systemdialog-error"),this.__jqOverlayDialogContainer[0].classList.remove("tchmi-systemdialog-error");break;case l.DialogManager.DialogSeverity.Error:this.__jqLoadingDialogContainer[0].classList.add("tchmi-systemdialog-error"),this.__jqOverlayDialogContainer[0].classList.add("tchmi-systemdialog-error"),this.__progressElem.max=1,this.__progressElem.value=1}return!0},t.prototype.updateProgress=function(){if(-1!==this.__progressElem.position&&window.performance&&window.performance.timing&&window.performance.timing.domInteractive){var e=Date.now()-window.performance.timing.domInteractive;this.__progressElem.value=e}},t.prototype.getDialogOwner=function(){return this.__dialogOwner},r=t,e.DialogManager=r}(TcHmi=TcHmi||{}),function(f){var u,e;function S(e){this.__comparisons=[],this.__subfilters=[],this.__parent=null,this.__logic=e}u=f.System||(f.System={}),S.parse=function(e,o){var i=this;if(o&&("array"!==o.type||!o.items))throw new Error("Filter schema must describe an array.");if(!e||0===e.length)return new S("AND");if(!Array.isArray(e))throw new Error("Filter must be an array.");if(1===e.length){var r=e[0];if(f.isComparison(r)){var t=new S("AND");return o&&(r=this.__parseComparison(r,o)),t.__comparisons.push(r),t}if(Array.isArray(r))return this.parse(r,o);throw new Error("Invalid filter. Expected comparison or nested filter at position 0.")}var n=e[0],a=e[1];if(!f.isLogicOperator(a))throw new Error("Invalid filter. Expected logic operator at position 1.");function s(e,r,t){if(f.isComparison(r))o&&(r=i.__parseComparison(r,o)),e.__comparisons.push(r);else{if(!Array.isArray(r))throw new Error("Invalid filter. Expected comparison or nested filter at position "+t+".");e.__subfilters.push(i.parse(r,o))}}var l=new S(a.logic);s(l,n,0);for(var c=l,u=null,d="comparison",m=2,_=e.length;m<_;m++)switch(d){case"comparison":u=e[m],d="logic";break;case"logic":var h=e[m];if(!f.isLogicOperator(h))throw new Error("Invalid filter. Expected logic operator at position "+m+".");var g=h.logic;if(g===c.__logic)s(c,u,m-1);else if("OR"===g)if(s(c,u,m-1),c.__parent&&c.__parent.__logic===g)c=c.__parent;else{var E=new S(g);E.__subfilters.push(c),E.__parent=c.__parent,null===(c.__parent=E).__parent&&(l=E),c=E}else if("AND"===g){var p=new S(g);s(p,u,m-1),(p.__parent=c).__subfilters.push(p),c=p}d="comparison"}if("comparison"===d)throw new Error("Filter must not end with a logic operator.");return s(c,u,e.length-1),l},S.prototype.test=function(e){for(var r=0,t=this.__comparisons.length;r<t;r++){if((o=this.__resolveComparison(this.__comparisons[r],e))&&"OR"===this.__logic)return!0;if(!o&&"AND"===this.__logic)return!1}for(r=0,t=this.__subfilters.length;r<t;r++){var o;if((o=this.__subfilters[r].test(e))&&"OR"===this.__logic)return!0;if(!o&&"AND"===this.__logic)return!1}return"AND"===this.__logic},S.__parseComparison=function(i,e){i=tchmi_clone_object(i);var n=function(e){if(e.oneOf){for(var r=0,t=e.oneOf.length;r<t;r++)if(o=n(e.oneOf[r]))return o}else if(e.anyOf)for(r=0,t=e.anyOf.length;r<t;r++){var o;if(o=n(e.anyOf[r]))return o}else if("object"===e.type&&e.properties){if(e.properties.path){if("string"!==e.properties.path.type)return null;if(-1!==e.required.indexOf("path")){if(!i.path)return null;if(e.properties.path.enum&&-1===e.properties.path.enum.indexOf(i.path))return null}}return e.properties.comparator&&e.properties.comparator.enum&&-1!==e.properties.comparator.enum.indexOf(i.comparator)&&e.properties.value&&e.properties.value.type===typeof i.value?e:null}return null},r=null;if(Array.isArray(e.items))for(var t=0,o=e.items.length;t<o;t++){var a=n(e.items[t]);if(a){r=a;break}}else r=n(e.items);if(r&&"date-time"===r.properties.value.format&&"string"==typeof i.value){var s=new Date(i.value);if(isNaN(s.getTime()))throw new Error('Filter contains an invalid date: "'+i.value+'".');i.value=new Date(i.value)}return i},S.prototype.__resolveComparison=function(e,r){var t=r,o=e.value;if(e.path)for(var i=u.resolveSymbolPathToTokenArray(e.path),n=0,a=i.length;n<a;n++){var s=i[n],l=!1;if(s.match(/\[.*\]/)&&(s=s.slice(1,-1),l=!0),Array.isArray(t)&&l){var c=parseInt(s,10);t=t[isNaN(c)?s:c.toString()]}else{if("object"!=typeof t)throw new Error("Could not read property "+s+" of type "+typeof t);t=t[s]}}switch(t instanceof Date&&(t=t.getTime()),o instanceof Date&&(o=o.getTime()),e.comparator){case"==":return t===o;case"!=":return t!==o;case"<":if("number"==typeof t&&"number"==typeof o)return t<o;throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using <.");case">":if("number"==typeof t&&"number"==typeof o)return o<t;throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using >.");case"<=":if("number"==typeof t&&"number"==typeof o)return t<=o;throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using <=.");case">=":if("number"==typeof t&&"number"==typeof o)return o<=t;throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using >=.");case"contains":if("string"==typeof t&&"string"==typeof o)return-1!==t.indexOf(o);throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using contains.");case"contains not":if("string"==typeof t&&"string"==typeof o)return-1===t.indexOf(o);throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using contains not.");case"== [ignore case]":if("string"==typeof t&&"string"==typeof o)return t.toLowerCase()===o.toLowerCase();throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using == [ignore case].");case"!= [ignore case]":if("string"==typeof t&&"string"==typeof o)return t.toLowerCase()!==o.toLowerCase();throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using != [ignore case].");case"contains [ignore case]":if("string"==typeof t&&"string"==typeof o)return-1!==t.toLowerCase().indexOf(o.toLowerCase());throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using contains [ignore case].");case"contains not [ignore case]":if("string"==typeof t&&"string"==typeof o)return-1===t.toLowerCase().indexOf(o.toLowerCase());throw new Error("Cannot compare "+typeof t+" with "+typeof o+" using contains not [ignore case].")}},e=S,u.Filter=e}(TcHmi=TcHmi||{}),function(V){var i,e;function r(e,r){void 0===r&&(r=!1);var l=this;this.__isDestroyed=!1,this.__symbolExpressions=[],this.__functionCallExpressions=[],this.__watchMap={},this.__callbacks=[],this.__expression=e,this.__enableWatchMode=r;try{this.__originalAst=acorn.parse(e,{plugins:{symbolExpression:{onSymbol:this.__symbolExpressions,onCallExpression:function(e){if("Identifier"===e.callee.type){var r=e.callee.name;if(V.System.Services.functionProvider.isFunctionRegistered(r)){var t=V.System.Services.functionProvider.getFunctionDescription(r),o=0;if(!t){var i={code:V.Errors.E_FUNCTION_INVALID_CONFIGURATION,message:V.Errors[V.Errors.E_FUNCTION_INVALID_CONFIGURATION],reason:'Target function expression: "'+l.__expression+'", Missing description file (*.function.json) for function with registered name: "'+r+'".',domain:"TcHmi.System.FunctionExpression"};l.__error?l.__error.errors?l.__error.errors.push(i):l.__error.errors=[i]:l.__error={code:V.Errors.E_FUNCTION_EXPRESSION_PARSER_ERROR,message:V.Errors[V.Errors.E_FUNCTION_EXPRESSION_PARSER_ERROR],reason:'Target function expression: "'+l.__expression+'", At least one error occured while parsing the function expression.',domain:"TcHmi.System.FunctionExpression",errors:[i]}}if(t&&!t.function){i={code:V.Errors.E_FUNCTION_INVALID_CONFIGURATION,message:V.Errors[V.Errors.E_FUNCTION_INVALID_CONFIGURATION],reason:'Target function expression: "'+l.__expression+'", Invalid description file(*.function.json) for function with registered name: "'+r+'".Missing  property: "function".',domain:"TcHmi.System.FunctionExpression"};l.__error?l.__error.errors?l.__error.errors.push(i):l.__error.errors=[i]:l.__error={code:V.Errors.E_FUNCTION_EXPRESSION_PARSER_ERROR,message:V.Errors[V.Errors.E_FUNCTION_EXPRESSION_PARSER_ERROR],reason:'Target function expression: "'+l.__expression+'", At least one error occured while parsing the function expression.',domain:"TcHmi.System.FunctionExpression",errors:[i]}}if(t&&t.function&&!0===t.function.injectContextObject&&o++,t&&t.function&&void 0!==e.arguments&&null!==e.arguments)for(var n=0,a=e.arguments.length;n<a;n++)if("SymbolExpression"===e.arguments[n].type&&t&&t.function&&t.function.arguments){var s=void 0;if(n+o<t.function.arguments.length?s=t.function.arguments[n+o]:!0!==(s=t.function.arguments[t.function.arguments.length-1]).restParameter&&(s=null),s)"TcHmi.Symbol"===V.System.Services.typeManager.getSchema(s.type).frameworkInstanceOf&&(e.arguments[n].passAsSymbol=!0)}l.__functionCallExpressions.push(e)}}}}}})}catch(e){var t={code:V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,message:V.Errors[V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION],reason:'Target function expression: "'+this.__expression+'", Exception: "'+e+'"',domain:"TcHmi.System.FunctionExpression"};this.__error?this.__error.errors?this.__error.errors.push(t):this.__error.errors=[t]:this.__error={code:V.Errors.E_FUNCTION_EXPRESSION_PARSER_ERROR,message:V.Errors[V.Errors.E_FUNCTION_EXPRESSION_PARSER_ERROR],reason:'Target function expression: "'+this.__expression+'", At least one error occured while parsing the function expression.',domain:"TcHmi.System.FunctionExpression",errors:[t]}}r&&!this.__error&&(this.__fillWatchMap(),this.__doWatch())}i=V.System||(V.System={}),r.prototype.__fillWatchMap=function(){for(var e,r=this,t=0,o=this.__symbolExpressions.length;t<o;t++)e=this.__symbolExpressions[t],r.__watchMap[e.expression]||(r.__watchMap[e.expression]={symbol:new i.Symbol(e.expression),ready:!1,error:V.Errors.NONE})},r.prototype.__doWatch=function(){for(var e in this.__watchMap){var r=this.__watchMap[e];r.destroy=r.symbol.watch(this.__onSubSymbolWatch())}},r.prototype.__onSubSymbolWatch=function(){var c=this;return function(e){var r=c.__watchMap[this.getExpression().toString()];if(r){e.error===V.Errors.NONE?(r.value=e.value,r.error=null,r.details=null):(r.value=null,r.error=e.error,r.details=e.details);var t=r.ready=!0;for(var o in c.__watchMap)if(!1===c.__watchMap[o].ready){t=!1;break}if(t){var l=!1;c.execute({success:function(e){if(!l){l=!0;for(var r=[],t=0,o=c.__callbacks.length;t<o;t++)r.push(c.__callbacks[t]);for(var i=0,n=r;i<n.length;i++){var a=n[i];-1!==c.__callbacks.indexOf(a)&&V.Callback.callSafe(a.callback,c,{error:V.Errors.NONE,value:tchmi_clone_object(e),destroy:a.destroy})}}},error:function(e,r){if(!l){l=!0;for(var t=[],o=0,i=c.__callbacks.length;o<i;o++)t.push(c.__callbacks[o]);for(var n=0,a=t;n<a.length;n++){var s=a[n];-1!==c.__callbacks.indexOf(s)&&V.Callback.callSafe(s.callback,c,{error:e,details:r,destroy:s.destroy})}}}})}}}},r.prototype.execute=function(i){if(void 0===i&&(i={success:function(){},error:function(){}}),!this.__error){var I=this,c=void 0,A=[],D=[];if(TCHMI_ENABLE_DESIGNER_MODE_MASTER){var e=!1;if(this.__symbolExpressions)for(var r=0,t=this.__symbolExpressions.length;r<t;r++){var o=new V.SymbolExpression(this.__symbolExpressions[r].expression);if(!o){e=!0;break}if(o.getType()===V.SymbolType.Server){e=!0;break}}if(e)return void i.success(null)}function n(o){var i=function(r){var t=!1;!function(t,e){if(e){var r=e.callee.name,o=[],i=V.System.Services.functionProvider.isFunctionRegistered(r);if(i){var n=V.System.Services.functionProvider.getFunctionDescription(e.callee.name);if(!i||n){var a=V.System.Services.functionProvider.getFunction(e.callee.name);if(!i||a){var s=0;if("Asynchronous"===n.function.waitMode){if(!0!==n.function.injectContextObject)return t.error(V.Errors.E_FUNCTION_INVALID_CONFIGURATION,{code:V.Errors.E_FUNCTION_INVALID_CONFIGURATION,message:V.Errors[V.Errors.E_FUNCTION_INVALID_CONFIGURATION],reason:'Target function expression: "'+I.__expression+'", Invalid configuration for hmi function with name='+r+". Setting waitMode=Asynchronous and injectContextObject="+n.function.injectContextObject+" is an invalid function configuration. Please define a context object if you want to use waitMode=Asynchronous.",domain:"TcHmi.System.FunctionExpression"});var l=!1;o.unshift({success:function(e){l||(l=!0,t.success(e))},error:function(e,r){l||(l=!0,t.error(e,r))}}),s++}else!0===n.function.injectContextObject&&(o.unshift({}),s++);e.start,e.end;for(var c,u=0,d=e.arguments.length;u<d;u++){var m=null;if(i)if(u+s<n.function.arguments.length)m=n.function.arguments[u+s];else if(!0!==(m=n.function.arguments[n.function.arguments.length-1]).restParameter)return t.error(V.Errors.E_FUNCTION_RESTPARAMETER_DEFINITION_MISSING,{code:V.Errors.E_FUNCTION_RESTPARAMETER_DEFINITION_MISSING,message:V.Errors[V.Errors.E_FUNCTION_RESTPARAMETER_DEFINITION_MISSING],domain:"TcHmi.System.FunctionExpression"});if(!m)return t.error(V.Errors.E_FUNCTION_INVALID_CONFIGURATION,{code:V.Errors.E_FUNCTION_INVALID_CONFIGURATION,message:V.Errors[V.Errors.E_FUNCTION_INVALID_CONFIGURATION],domain:"TcHmi.System.FunctionExpression"});var _=V.System.Services.typeManager.getSchema(m.type);if(!_)return t.error(V.Errors.E_UNKNOWN_TYPE,{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],domain:"TcHmi.System.FunctionExpression"});var h=e.arguments[u].start,g=e.arguments[u].end,E=I.__expression.substr(h,g-h);if(V.Symbol.isSymbolExpression(E)){for(var p=void 0,f=0,S=I.__symbolExpressions.length;f<S;f++){var v=(R=I.__symbolExpressions[f]).start,y=R.end;if(h<=v&&y<=g){p=A[f],R.handled=!0;break}}if("TcHmi.Symbol"===_.frameworkInstanceOf){if(!(p instanceof V.Symbol))return t.error(V.Errors.E_TYPE_INVALID,{code:V.Errors.E_TYPE_INVALID,message:V.Errors[V.Errors.E_TYPE_INVALID],domain:"TcHmi.System.FunctionExpression"});o[u+s]=p}else{if(null===(w=V.ValueConverter.toSchemaType(p,_))&&null!==p)return t.error(V.Errors.E_TYPE_INVALID,{code:V.Errors.E_TYPE_INVALID,message:V.Errors[V.Errors.E_TYPE_INVALID],reason:'Target function expression: "'+I.__expression+'", Unable to cast value: "'+p+'" of type: "'+typeof p+'" for parameter: "'+m.name+'" of function: "'+n.function.name+'" to type "'+m.type+'".',domain:"TcHmi.System.FunctionExpression"});o[u+s]=w}}else{var T=E.split("");for(f=0,S=I.__symbolExpressions.length;f<S;f++){var C=(N=(v=(R=I.__symbolExpressions[f]).start)-h)+((y=R.end)-v);if(h<=v&&y<=g){for(var M=N,b=C;M<b;M++)T[M]="";T[N]=A[f],R.handled=!0}}for(f=0,S=I.__functionCallExpressions.length;f<S;f++){var R,N;if(C=(N=(v=(R=I.__functionCallExpressions[f]).start)-h)+((y=R.end)-v),h<=v&&y<=g){for(M=N,b=C;M<b;M++)T[M]="";T[N]=D[f],R.handled=!0}}p=void 0;var w,O="";for(f=0,S=T.length;f<S;f++)O+=T[f];O+="\n//# sourceURL=TcHmi_System_FunctionExpression_resolveExpression_Eval";try{p=gIsolatedEval_TcHmi_System_FunctionExpression(O)}catch(e){return V.Log.error(e),t.error(V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,{code:V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,message:V.Errors[V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION],reason:'Target function expression: "'+I.__expression+'", Exception: "'+e+'"',domain:"TcHmi.System.FunctionExpression"})}if(null===(w=V.ValueConverter.toSchemaType(p,_))&&null!==p)return t.error(V.Errors.E_TYPE_INVALID,{code:V.Errors.E_TYPE_INVALID,message:V.Errors[V.Errors.E_TYPE_INVALID],reason:'Target function expression: "'+I.__expression+'", Unable to cast value: "'+p+'" of type: "'+typeof p+'" for parameter: "'+m.name+'" of function: "'+n.function.name+'" to type: "'+m.type+'".',domain:"TcHmi.System.FunctionExpression"});o[u+s]=w}}try{c=a.apply(void 0,o)}catch(e){return V.Log.error(e),t.error(V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,{code:V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,message:V.Errors[V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION],reason:'Target function expression: "'+I.__expression+'", Exception: "'+e+'"',domain:"TcHmi.System.FunctionExpression"})}"Asynchronous"===n.function.waitMode||t.success(c)}else t.error(V.Errors.E_FUNCTION_MISSING_FUNCTION_REFERENCE,{code:V.Errors.E_FUNCTION_MISSING_FUNCTION_REFERENCE,message:V.Errors[V.Errors.E_FUNCTION_MISSING_FUNCTION_REFERENCE],reason:I.__expression,domain:"TcHmi.System.FunctionExpression"})}else t.error(V.Errors.E_FUNCTION_MISSING_FUNCTION_DESCRIPTION,{code:V.Errors.E_FUNCTION_MISSING_FUNCTION_DESCRIPTION,message:V.Errors[V.Errors.E_FUNCTION_MISSING_FUNCTION_DESCRIPTION],reason:I.__expression,domain:"TcHmi.System.FunctionExpression"})}else t.error(V.Errors.E_FUNCTION_UNKNOWN,{code:V.Errors.E_FUNCTION_UNKNOWN,message:V.Errors[V.Errors.E_FUNCTION_UNKNOWN],reason:I.__expression,domain:"TcHmi.System.FunctionExpression"})}else t.error(V.Errors.E_PARAMETER_INVALID,{code:V.Errors.E_PARAMETER_INVALID,message:V.Errors[V.Errors.E_PARAMETER_INVALID],reason:I.__expression,domain:"TcHmi.System.FunctionExpression"})}({success:function(e){t||(t=!0,D[r]=e,r+1<I.__functionCallExpressions.length?i(r+1):o.success())},error:function(e,r){t||(t=!0,o.error(e,r))}},I.__functionCallExpressions[r])};0<I.__functionCallExpressions.length?i(0):o.success()}var a,s,l=!1;return a={success:function(e){if(!l){var o=!(l=!0);n({success:function(e){if(!o){var t=!(o=!0);!function(r){for(var e=I.__expression.split(""),t=0,o=I.__symbolExpressions.length;t<o;t++)if((s=I.__symbolExpressions[t])&&!s.handled){for(var i=[],n=0,a=s.end-s.start;n<a;n++)i.push("");e.splice.apply(e,[s.start,s.end-s.start].concat(i)),e[s.start]="resSE["+t+"]"}for(t=0,o=I.__functionCallExpressions.length;t<o;t++){var s;if((s=I.__functionCallExpressions[t])&&!s.handled){for(i=[],n=0,a=s.end-s.start;n<a;n++)i.push("");e.splice.apply(e,[s.start,s.end-s.start].concat(i)),e[s.start]="resFCE["+t+"]"}}try{var l="";for(n=0,a=e.length;n<a;n++)l+=e[n];c=gIsolatedEval_TcHmi_System_FunctionExpression_Results(l+="\n//# sourceURL=TcHmi_System_FunctionExpression_resolveExpression_Results_Eval",A,D)}catch(e){return V.Log.error(e),r.error(V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,{code:V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION,message:V.Errors[V.Errors.E_FUNCTION_EXPRESSION_EXCEPTION],reason:'Target function expression: "'+I.__expression+'", Exception: "'+e+'"',domain:"TcHmi.System.FunctionExpression"})}r.success(c)}({success:function(e){t||(t=!0,c=e,i.success(e))},error:function(e,r){t||(t=!0,i.error(e,r))}})}},error:function(e,r){o||(o=!0,i.error(e,r))}})}},error:function(e,r){l||(l=!0,i.error(e,r))}},s=function(r){var e=I.__symbolExpressions[r],t=!1;!function(r,e){if(e)if(e.passAsSymbol){var t=new V.Symbol(e.expression);r.success(t)}else{if(!0===I.__enableWatchMode){var o=I.__watchMap[e.expression];return o&&(o.error?r.error(o.error,o.details):r.success(tchmi_clone_object(o.value)))}var i=new V.System.Symbol(e.expression);i.read(function(e){return e.error?r.error(e.error,e.details):r.success(e.value),i.destroy(),void(i=null)})}else r.error(V.Errors.E_PARAMETER_INVALID,{code:V.Errors.E_PARAMETER_INVALID,message:V.Errors[V.Errors.E_PARAMETER_INVALID],reason:I.__expression,domain:"TcHmi.System.FunctionExpression"})}({success:function(e){t||(t=!0,A[r]=e,r+1<I.__symbolExpressions.length?s(r+1):a.success())},error:function(e,r){t||(t=!0,a.error(e,r))}},e)},0<I.__symbolExpressions.length?s(0):a.success(),c}i.error(this.__error.code,this.__error)},r.prototype.watch=function(t){if(!0===this.__isDestroyed)return V.Callback.callSafe(t,this,{error:V.Errors.ERROR,destroy:function(){},details:{code:V.Errors.ERROR,message:V.Errors[V.Errors.ERROR],reason:"Function Expression already destroyed",domain:"TcHmi.System.FunctionExpression"}}),function(){};if(!1===this.__enableWatchMode)return V.Callback.callSafe(t,this,{error:V.Errors.ERROR,destroy:function(){},details:{code:V.Errors.ERROR,message:V.Errors[V.Errors.ERROR],reason:"Function Expression has no watch mode",domain:"TcHmi.System.FunctionExpression"}}),function(){};function o(){var e=r.__callbacks.indexOf(i);-1!==e&&r.__callbacks.splice(e,1)}var r=this,i={callback:t,destroy:o};this.__callbacks.push(i);var e=!0;for(var n in r.__watchMap)if(!1===r.__watchMap[n].ready){e=!1;break}if(e){var a=!1;this.execute({success:function(e){a||(a=!0,V.Callback.callSafe(t,this,{error:V.Errors.NONE,value:tchmi_clone_object(e),destroy:o}))},error:function(e,r){a||(a=!0,V.Callback.callSafe(t,this,{error:e,details:r,destroy:o}))}})}return o},r.prototype.destroy=function(){if(!0!==this.__isDestroyed){if(!0===this.__enableWatchMode)for(var e in this.__watchMap){var r=this.__watchMap[e];r.destroy&&r.destroy(),r.symbol.destroy(),r=null,delete this.__watchMap[e]}this.__isDestroyed=!0}},e=r,i.FunctionExpression=e}(TcHmi=TcHmi||{}),function(R){var e,r;function t(e){this.__styleOverwriteCache=new Map,R.EventProvider.register("System.onPrevControlsAttached",this.__onPrevControlsAttached()),R.EventProvider.register("System.onPrevControlsDetached",this.__onPrevControlsDetached()),R.EventProvider.register("onControlDestroyed",this.__onControlDestroyed())}e=R.System||(R.System={}),t.prototype.__onPrevControlsAttached=function(){var t=this;return function(e,r){t.writeStylesFromCache(r)}},t.prototype.__onPrevControlsDetached=function(){var t=this;return function(e,r){t.removeStylesFromDom(r)}},t.prototype.__onControlDestroyed=function(){var i=this;return function(e,r){if(r){var t=i.__styleOverwriteCache.get(r);if(t){var o=t[0].elementInHead;null!==o&&document.head.removeChild(o),i.__styleOverwriteCache.delete(r)}}}},t.prototype.__getElementStyle=function(e,r,t){void 0===t&&(t=!1);var o,i,n={};if(!e||"object"!=typeof e)return n;if(void 0!==e.length){if(!e[0])return n;o=e[0]}else o=e;if(i=t?window.getComputedStyle(o):o.style)if(null!=r){if(i.getPropertyValue)if("string"==typeof r){var a=i.getPropertyValue(r);a&&(n[r]=a)}else if(Array.isArray(r))for(var s=0;s<r.length;s++){var l=r[s],c=i.getPropertyValue(l);c&&(n[l]=c)}}else if(void 0!==i.length&&0!==i.length&&i.getPropertyValue)for(var u=0;u<i.length;u++){var d=i[u];n[d]=i.getPropertyValue(d)}return n},t.prototype.__setSimpleElementStyle=function(e,r,t){var o;if(void 0===t&&(t=null),e&&"object"==typeof e){if(void 0!==e.length){if(!e[0])return;o=e}else o=[e];for(var i=0,n=o.length;i<n;i++){var a=o[i].style;if(a&&a.removeProperty&&a.setProperty){if("string"==typeof r)if("string"==typeof t&&""!==t)a.setProperty(r,t);else if(Array.isArray(t))for(var s=0;s<t.length;s++)a.setProperty(r,t[s]);else a.removeProperty(r);else if(null!==r)for(var l in r)if(r.hasOwnProperty(l)){var c=r[l];if("string"==typeof c&&""!==c)a.setProperty(l,c);else if(Array.isArray(c))for(var u=0;u<c.length;u++)a.setProperty(l,c[u]);else a.removeProperty(l)}}else o[i].nodeType===Node.ELEMENT_NODE?o[i].id?R.Log.error("[Source=Framework, Module=TcHmi.System.StyleManager] Internal error: Element with the id "+o[i].id+" has no CSSStyleDeclaration in this browser."):R.Log.error("[Source=Framework, Module=TcHmi.System.StyleManager] Internal error: Element of type "+o[i].nodeName+" has no CSSStyleDeclaration in this browser."):R.Log.error("[Source=Framework, Module=TcHmi.System.StyleManager] Internal error: Setting style for Elements of type "+o[i].nodeName+" not supported.")}}},t.prototype.writeStylesFromCache=function(e){for(var r=document.createDocumentFragment(),t=0,o=e.length;t<o;t++){var i=e[t],n=this.__styleOverwriteCache.get(i);if(n)for(var a=0;a<n.length;a++)if(n[a].strCss){var s=document.createElement("style");s.type="text/css",s.className=n[a].strClass,s.appendChild(document.createTextNode(n[a].strCss)),r.appendChild(s),n[a].elementInHead=s}}r.childElementCount&&document.head.appendChild(r)},t.prototype.removeStylesFromDom=function(e){for(var r=0,t=e.length;r<t;r++){var o=e[r],i=this.__styleOverwriteCache.get(o);if(i){var n=i[0].elementInHead;null!==n&&(document.head.removeChild(n),i[0].elementInHead=null)}}},t.prototype.getExistingStyleOverwrites=function(e){for(var r="",t=this.__styleOverwriteCache.get(R.Controls.get(e))||[{strClass:"",strCss:""}],o=0;o<t.length;o++)-1!==t[o].strClass.indexOf("overwrite")&&(r+=t[o].strCss);return this.__deserializeCss(r)},t.prototype.__deserializeCss=function(e){for(var r={},t=0,o=(e=this.__removeComments(e.trim())).indexOf("@charset",t);-1!==o;){var i=this.__splitOutsideOfBraces(e.substring(o),";")[0];void 0===r["@-rules"]&&(r["@-rules"]=[]),r["@-rules"].push(i),t=o+i.length+1,o=e.indexOf("@charset",t)}for(var n=e.indexOf("@import",t);-1!==n;){var a=this.__splitOutsideOfBraces(e.substring(n),";")[0];void 0===r["@-rules"]&&(r["@-rules"]=[]),r["@-rules"].push(a),t=n+a.length+1,n=e.indexOf("@import",t)}for(var s=e.indexOf("@namespace",t);-1!==s;){var l=this.__splitOutsideOfBraces(e.substring(s),";")[0];void 0===r["@-rules"]&&(r["@-rules"]=[]),r["@-rules"].push(l),t=s+l.length+1,s=e.indexOf("@namespace",t)}function c(e,r){for(var t in r)if(r.hasOwnProperty(t))if(void 0===e[t])e[t]=r[t];else for(var o=0,i=r[t].length;o<i;o++)-1===e[t].indexOf(r[t][o])&&e[t].push(r[t][o]);return e}for(;t<e.length;){var u=e.indexOf("{",t),d=this.__findMatchingBrace(e,u),m=e.substring(t,u).trim(),_=e.substring(u+1,d);if(0===m.indexOf("@")){var h=this.__deserializeCss(_);if(void 0===r[m])r[m]=h;else for(var g in h)h.hasOwnProperty(g)&&(void 0===r[m][g]?r[m][g]=h[g]:r[m][g]=c(r[m][g],h[g]))}else{var E=this.__getDeclarations(_);void 0===r[m]?r[m]=E:r[m]=c(r[m],E)}t=d+1}return r},t.prototype.__getDeclarations=function(e){for(var r={},t=this.__splitOutsideOfBraces(e,";"),o=0,i=t.length;o<i;o++){var n=t[o].indexOf(":");if(-1<n){var a=t[o].substring(0,n).trim().toLowerCase(),s=t[o].substring(n+1).trim();void 0===r[a]?r[a]=[s]:-1===r[a].indexOf(s)&&r[a].push(s)}}return r},t.prototype.__removeComments=function(e){if(-1===e.indexOf("/*"))return e;var r="",t=!1;function o(e){t||(r+=e)}for(var i=0,n=e.length;i<n;i++){var a=e.charAt(i);switch(a){case"/":i+1<n&&"*"===e.charAt(i+1)&&(t=!0,i++),o(a);break;case"*":o(a),i+1<n&&"/"===e.charAt(i+1)&&(t=!1,i++);break;case'"':case"'":var s=this.__findMatchingQuote(e,i);i<s&&(o(e.substring(i,s+1)),i=s);break;default:o(a)}}return r},t.prototype.__getExistingStyleOverwritesForSelector=function(e,r){var t=e;return t[r]||(t[r]={}),t[r]},t.prototype.getStyle=function(e,r,t){if(!r){var o=R.Controls.get(e);if(void 0!==o&&0!==o.getElement().length){if(null==t)return;return[R.StyleProvider.getSimpleElementStyle(o.getElement(),t)[t]]}}r=this.expandSelector(r,e);var i=this.getExistingStyleOverwrites(e),n=this.__getExistingStyleOverwritesForSelector(i,r);if(void 0!==n)return null!=t?n[t]:n},t.prototype.writeStyles=function(e,r){var t=this.__serializeCss(r),o=R.Controls.get(e),i=this.__styleOverwriteCache.get(o);if(void 0===i)i=[{strClass:"tchmi-theme overwrite "+e,strCss:t,elementInHead:null}],this.__styleOverwriteCache.set(o,i);else{for(var n=!1,a=0;a<i.length;a++)if(-1!==i[a].strClass.indexOf("overwrite")){i[a].strCss=t,n=!0;break}n||i.push({strClass:"tchmi-theme overwrite "+e,strCss:t,elementInHead:null})}for(a=0;a<i.length;a++)if(-1!==i[a].strClass.indexOf("overwrite"))if(null===i[a].elementInHead){if(!o||!o.getIsAttached()||!i[a].strClass)continue;var s=document.createElement("style");s.className=i[a].strClass,s.appendChild(document.createTextNode(i[a].strCss)),document.head.appendChild(s),i[a].elementInHead=s}else i[a].elementInHead.innerHTML=i[a].strCss},t.prototype.__serializeCss=function(e){var a="";function s(e,r,t){for(var o in void 0===t&&(t=""),a+=t+e+" {\n",r)if(r.hasOwnProperty(o)&&void 0!==r[o]&&null!==r[o]&&"@-rules"!==o)if(0===e.indexOf("@"))s(o,r[o],t+"\t");else for(var i=0,n=r[o].length;i<n;i++)void 0!==r[o][i]&&null!==r[o][i]&&""!==r[o][i]&&(a+=t+"\t"+o+": "+r[o][i]+";\n");a+=t+"}\n\n"}if(void 0!==e["@-rules"])for(var r=0,t=e["@-rules"].length;r<t;r++)a+=e["@rules"][r]+";\n";for(var o in a+="\n",e)e.hasOwnProperty(o)&&void 0!==e[o]&&null!==e[o]&&"@-rules"!==o&&0!==Object.keys(e[o]).length&&s(o,e[o]);return a=a.trim()},t.prototype.expandSelector=function(e,r){0!==(r=tchmi_css_escape_selector(r)).indexOf(".")&&0!==r.indexOf("#")&&(r="#"+r);for(var t=this.__splitOutsideOfBraces(e,",",["(","["]),o=0,i=t.length;o<i;o++)-1===t[o].indexOf(r)&&(-1===t[o].indexOf("%id%")?t[o]=r+" "+t[o]:t[o]=t[o].replace("%id%",r));return t.join(", ").trim()},t.prototype.__splitOutsideOfBraces=function(e,r,t){void 0===t&&(t=["("]);for(var o=0,i=[],n=0,a=e.length;n<a;n++){var s=e.charAt(n);if(-1!==t.indexOf(s)){var l=this.__findMatchingBrace(e,n);n<l&&(n=l)}else if('"'===s||"'"===s){var c=this.__findMatchingQuote(e,n);n<c&&(n=c)}else s===r&&(o<n&&i.push(e.substring(o,n).trim()),o=n+1)}return(0===e.length||o<e.length)&&i.push(e.substring(o).trim()),i},t.prototype.__findMatchingBrace=function(e,r){var t=e.charAt(r),o="";switch(t){case"(":o=")";break;case"{":o="}";break;case"[":o="]";break;case"<":o=">";break;default:return-1}for(var i=0,n=r+1,a=e.length;n<a;n++)switch(e.charAt(n)){case t:i++;break;case o:if(0===i)return n;i--;break;case'"':case"'":var s=this.__findMatchingQuote(e,n);0<s&&(n=s)}return-1},t.prototype.__findMatchingQuote=function(e,r){for(var t=e.charAt(r),o=r+1,i=e.length;o<i;o++)switch(e.charAt(o)){case"\\":o++;break;case t:return o}return-1},t.prototype.processGenericStyle=function(e,r,t,o){if(void 0===o&&(o=null),!r){var i=R.Controls.get(e);if(void 0!==i&&0!==i.getElement().length){if(null==t)return;return void R.StyleProvider.setSimpleElementStyle(i.getElement(),t,o)}}r=this.expandSelector(r,e);var n=this.getExistingStyleOverwrites(e),a=this.__getExistingStyleOverwritesForSelector(n,r);if("string"==typeof t)"string"==typeof o?""===o?delete a[t]:a[t]=[o]:null===o?delete a[t]:a[t]=o;else if(null!=t)for(var s in t)if(t.hasOwnProperty(s)){var l=t[s];"string"==typeof l?""===l?delete a[s]:a[s]=[l]:null===l?delete a[s]:a[s]=l}this.writeStyles(e,n)},t.prototype.processBackground=function(a,s){var l=this,c={};if(s){function e(e,r){u?(c[e]=[r],d&&c[e].push(r)):c[e]=null}var u=!1,d=!1;!function(){if(void 0!==s.color)if(R.isSolidColor(s.color)){var e=R.StyleProvider.resolveSolidColorAsCssValue(s.color);c["background-color"]=null!==e?[e]:null}else c["background-color"]=null}(),function(){var e=null,r=null,t=R.StyleProvider.getSimpleElementStyle(a,"background-image")["background-image"],o=[];if(void 0!==t&&(o=l.__splitOutsideOfBraces(t,",")),void 0!==s.image?e=null!==s.image&&""!==s.image?'url("'+s.image+'")':null:0<o.length&&0===o[0].indexOf("url(")&&(e=o[0]),void 0!==s.color)r=null!==s.color?R.isLinearGradientColor(s.color)?R.StyleProvider.resolveLinearGradientColorAsCssValue(s.color):"none":null;else if(0<o.length){var i=1<o.length?o[1]:o[0];0!==i.indexOf("linear-gradient(")&&0!==i.indexOf("radial-gradient(")||(r=i)}if(u=null!==e,d=null!==r&&"none"!==r,null===e&&null===r)0<o.length&&(c["background-image"]=null);else{var n=[];u&&n.push(e),(d||"none"===r&&!u&&null!==c["background-color"])&&n.push(r),c["background-image"]=0<n.length?n:null}}(),function(){if(u){var e="auto",r="auto";if(void 0!==s.imageWidth&&null!==s.imageWidth&&(e=s.imageWidth+(s.imageWidthUnit||"px")),void 0!==s.imageHeight&&null!==s.imageHeight&&(r=s.imageHeight+(s.imageHeightUnit||"px")),void 0!==s.imagePadding&&null!==s.imagePadding){if("%"===s.imageWidthUnit&&s.imageWidth){var t="";0<s.imagePadding.left&&(t+=" - "+s.imagePadding.left*(s.imageWidth?s.imageWidth/100:1)+(s.imagePadding.leftUnit||"px")),0<s.imagePadding.right&&(t+=" - "+s.imagePadding.right*(s.imageWidth?s.imageWidth/100:1)+(s.imagePadding.rightUnit||"px")),""!==t&&(e="calc("+e+t+")")}if("%"===s.imageHeightUnit&&s.imageHeight){var o="";0<s.imagePadding.top&&(o+=" - "+s.imagePadding.top*(s.imageHeight?s.imageHeight/100:1)+(s.imagePadding.topUnit||"px")),0<s.imagePadding.bottom&&(o+=" - "+s.imagePadding.bottom*(s.imageHeight?s.imageHeight/100:1)+(s.imagePadding.bottomUnit||"px")),""!==o&&(r="calc("+r+o+")")}}c["background-size"]=[e+" "+r],d&&c["background-size"].push("auto auto")}else c["background-size"]=null}(),function(){if(u){var e="50%",r="50%";switch(s.imageHorizontalAlignment){case"Left":e="0%";break;case"Center":e="50%";break;case"Right":e="100%"}switch(s.imageVerticalAlignment){case"Top":r="0%";break;case"Center":r="50%";break;case"Bottom":r="100%"}if(void 0!==s.imagePadding&&null!==s.imagePadding){var t="";0<s.imagePadding.left&&"Right"!==s.imageHorizontalAlignment&&(t+=" + "+s.imagePadding.left*("Center"===s.imageHorizontalAlignment?.5:1)+(s.imagePadding.leftUnit||"px")),0<s.imagePadding.right&&"Left"!==s.imageHorizontalAlignment&&(t+=" - "+s.imagePadding.right*("Center"===s.imageHorizontalAlignment?.5:1)+(s.imagePadding.rightUnit||"px")),""!==t&&(e="calc("+e+t+")");var o="";0<s.imagePadding.top&&"Bottom"!==s.imageVerticalAlignment&&(o+=" + "+s.imagePadding.top*("Center"===s.imageVerticalAlignment?.5:1)+(s.imagePadding.topUnit||"px")),0<s.imagePadding.bottom&&"Top"!==s.imageVerticalAlignment&&(o+=" - "+s.imagePadding.bottom*("Center"===s.imageVerticalAlignment?.5:1)+(s.imagePadding.bottomUnit||"px")),""!==o&&(r="calc("+r+o+")")}c["background-position"]=[e+" "+r],d&&c["background-position"].push("50% 50%")}else c["background-position"]=null}(),e("background-repeat","no-repeat"),e("background-attachment","scroll"),e("background-clip","border-box"),e("background-origin","padding-box")}else for(var r=["color","image","size","position","repeat","origin","clip","attachment"],t=0,o=r.length;t<o;t++)c["background-"+r[t]]=null;var i={};for(var n in c)c.hasOwnProperty(n)&&(null===c[n]?i[n]=null:i[n]=c[n].join(", "));R.StyleProvider.setSimpleElementStyle(a,i)},t.prototype.processFillColor=function(e,r){var t,o="tchmi-styleprovider-linear-gradient";if(e&&"object"==typeof e){if(void 0!==e.length){if(!e[0])return;t=e}else t=[e];for(var i=0,n=t.length;i<n;i++){var a=t[i];if(a instanceof a.ownerDocument.defaultView.SVGElement){var s=a.ownerSVGElement||a,l=s.querySelector("defs");if(l){var c="",u=R.StyleProvider.getSimpleElementStyle(a,"fill").fill;if(u){c=u.replace(/url\('?"?\#|'?"?\)/g,"");for(var d=l.querySelectorAll("linearGradient."+o),m=0;m<d.length;m++){var _=d[m];if(c===_.id){_.parentElement.removeChild(_);break}}}}else R.isLinearGradientColor(r)&&(l=a.ownerDocument.createElementNS("http://www.w3.org/2000/svg","defs"),s.insertBefore(l,s.firstElementChild));if(r){if(R.isSolidColor(r))R.StyleProvider.setSimpleElementStyle(a,"fill",R.StyleProvider.resolveSolidColorAsCssValue(r));else if(R.isLinearGradientColor(r)){var h=r,g=a.ownerDocument.createElementNS("http://www.w3.org/2000/svg","linearGradient");g.setAttribute("x1","0"),g.setAttribute("y1","1"),g.setAttribute("x2","0"),g.setAttribute("y2","0"),g.classList.add(o),g.id="tchmi-styleprovider-"+tchmi_create_guid(),g.setAttribute("gradientTransform","rotate("+h.angle+", 0.5, 0.5)");for(var E=0,p=h.stopPoints.length;E<p;E++){var f=h.stopPoints[E];if(void 0===f.stop||null===f.stop)if(0===E)f.stop="0%";else if(E===p-1)f.stop="100%";else{var S=0;h.stopPoints[E-1].stop&&(S=parseFloat(h.stopPoints[E-1].stop));for(var v=null,y=E+1,T=h.stopPoints.length;y<T;y++){var C=h.stopPoints[y].stop;if(null!=C){v=parseFloat(C);break}}null===v&&(v=100,y--);var M="";h.stopPoints[E-1].stop&&(M=h.stopPoints[E-1].stop.replace(/[0-9\.]/g,"")),f.stop=S+(v-S)/(y-E)+M}var b=document.createElementNS("http://www.w3.org/2000/svg","stop");b.setAttribute("offset",f.stop),b.setAttribute("stop-color",f.color),g.appendChild(b)}l.appendChild(g),R.StyleProvider.setSimpleElementStyle(a,"fill","url(#"+g.id+")")}}else R.StyleProvider.setSimpleElementStyle(a,"fill",null)}}}},t.prototype.processStrokeColor=function(e,r){R.isSolidColor(r)?R.StyleProvider.setSimpleElementStyle(e,"stroke",R.StyleProvider.resolveSolidColorAsCssValue(r)):R.StyleProvider.setSimpleElementStyle(e,"stroke",null)},t.prototype.processTextColor=function(e,r){R.isSolidColor(r)?R.StyleProvider.setSimpleElementStyle(e,"color",R.StyleProvider.resolveSolidColorAsCssValue(r)):R.StyleProvider.setSimpleElementStyle(e,"color",null)},t.prototype.processBorderColor=function(e,r){var t={};if(R.isSolidColor(r))t["border-color"]=R.StyleProvider.resolveSolidColorAsCssValue(r),t["border-image-source"]=null,t["border-image-slice"]=null;else if(R.isLinearGradientColor(r))t["border-image-source"]=R.StyleProvider.resolveLinearGradientColorAsCssValue(r),t["border-image-slice"]="1",t["border-color"]=null;else for(var o=["color","image","image-source","image-slice"],i=0,n=o.length;i<n;i++)t["border-"+o[i]]=null;R.StyleProvider.setSimpleElementStyle(e,t)},t.prototype.processBorderWidth=function(e,r){for(var t=["top","right","bottom","left"],o={},i=0,n=t.length;i<n;i++)if(r){var a=r[t[i]];o["border-"+t[i]+"-width"]=null==a?"0":a+"px"}else o["border-"+t[i]+"-width"]="0";R.StyleProvider.setSimpleElementStyle(e,o)},t.prototype.processBorderRadius=function(e,r){for(var t=["topLeft","topRight","bottomRight","bottomLeft"],o=["top-left","top-right","bottom-right","bottom-left"],i={},n=0,a=t.length;n<a;n++)if(r){var s=r[t[n]],l=r[t[n]+"Unit"];l=l||"px",i["border-"+o[n]+"-radius"]=null==s?"":s+l}else i["border-"+o[n]+"-radius"]="";R.StyleProvider.setSimpleElementStyle(e,i)},t.prototype.processBorderStyle=function(e,r){for(var t=["top","right","bottom","left"],o={},i=0,n=t.length;i<n;i++)if(r){var a,s=r[t[i]];switch(s){case"Solid":case"Dotted":case"Dashed":case"None":a=s.toLowerCase();break;default:a=""}o["border-"+t[i]+"-style"]=a}else o["border-"+t[i]+"-style"]="";R.StyleProvider.setSimpleElementStyle(e,o)},t.prototype.processBoxShadow=function(e,r){if(r)if(0===r.length)R.StyleProvider.setSimpleElementStyle(e,"box-shadow","none");else{for(var t=[],o=0,i=r.length;o<i;o++){var n="";r[o].inset&&(n+="inset "),r[o].offsetX?n+=r[o].offsetX+(r[o].offsetXUnit||"px")+" ":n+="0px ",r[o].offsetY?n+=r[o].offsetY+(r[o].offsetYUnit||"px")+" ":n+="0px ",r[o].blur?n+=r[o].blur+(r[o].blurUnit||"px")+" ":n+="0px ",r[o].spread?n+=r[o].spread+(r[o].spreadUnit||"px")+" ":n+="0px ",R.isSolidColor(r[o].color)?n+=R.StyleProvider.resolveSolidColorAsCssValue(r[o].color):n+="transparent",t.push(n)}R.StyleProvider.setSimpleElementStyle(e,"box-shadow",t.join(", "))}else R.StyleProvider.setSimpleElementStyle(e,"box-shadow",null)},t.prototype.processFontFamily=function(e,r){R.StyleProvider.setSimpleElementStyle(e,"font-family",r)},t.prototype.processFontSize=function(e,r,t){null==r?R.StyleProvider.setSimpleElementStyle(e,"font-size",null):R.StyleProvider.setSimpleElementStyle(e,"font-size",r+t)},t.prototype.processFontStyle=function(e,r){var t;switch(r){case"Normal":case"Italic":case"Oblique":t=r.toLowerCase();break;case"Auto":default:t=null}R.StyleProvider.setSimpleElementStyle(e,"font-style",t)},t.prototype.processFontWeight=function(e,r){var t;switch(r){case"Normal":case"Bold":t=r.toLowerCase();break;case"Auto":default:t=null}R.StyleProvider.setSimpleElementStyle(e,"font-weight",t)},t.prototype.processVisibility=function(e,r){var t={};switch(r){case"Collapsed":t.display="none",t.visibility="";break;case"Hidden":t.display="",t.visibility="hidden";break;case"Visible":default:t.display="",t.visibility=""}R.StyleProvider.setSimpleElementStyle(e,t)},t.prototype.processContentHorizontalAlignment=function(e,r){R.StyleProvider.setSimpleElementStyle(e,"display",["-ms-flexbox","-webkit-flex","flex"]);var t={};switch(r){case"Center":t["-ms-flex-pack"]="center",t["-webkit-justify-content"]="center",t["justify-content"]="center";break;case"Right":t["-ms-flex-pack"]="end",t["-webkit-justify-content"]="flex-end",t["justify-content"]="flex-end";break;case"Left":default:t["-ms-flex-pack"]="start",t["-webkit-justify-content"]="flex-start",t["justify-content"]="flex-start"}R.StyleProvider.setSimpleElementStyle(e,t)},t.prototype.processContentVerticalAlignment=function(e,r){R.StyleProvider.setSimpleElementStyle(e,"display",["-ms-flexbox","-webkit-flex","flex"]);var t={};switch(r){case"Center":t["-ms-flex-align"]="center",t["-webkit-align-items"]="center",t["align-items"]="center";break;case"Bottom":t["-ms-flex-align"]="end",t["-webkit-align-items"]="flex-end",t["align-items"]="flex-end";break;case"Top":default:t["-ms-flex-align"]="start",t["-webkit-align-items"]="flex-start",t["align-items"]="flex-start"}R.StyleProvider.setSimpleElementStyle(e,t)},t.prototype.processContentPadding=function(e,r){for(var t=["top","right","bottom","left"],o={},i=0,n=t.length;i<n;i++)if(r){var a=r[t[i]],s=r[t[i]+"Unit"];s=s||"px",o["padding-"+t[i]]=null==a?"":a+s}else o["padding-"+t[i]]="";R.StyleProvider.setSimpleElementStyle(e,o)},t.prototype.processTransform=function(e,r,t){var o={};if(void 0===t&&(o={"transform-origin":"","-webkit-transform-origin":"",perspective:"","-webkit-perspective":"","perspective-origin":"","-webkit-perspective-origin":""}),r){for(var i,n=[],a=0,s=(i=Array.isArray(r)?r:[r]).length;a<s;a++){var l="",c=i[a];switch(c.transformType){case"Translate":c.x=c.x||0,c.xUnit=c.xUnit||"px",c.y=c.y||0,c.yUnit=c.yUnit||"px",c.z=c.z||0,c.zUnit=c.zUnit||"px",l="translate3d("+c.x+c.xUnit+", "+c.y+c.yUnit+", "+c.z+c.zUnit+")";break;case"Rotate":l=void 0===c.vector?"rotate(":"rotate3d("+c.vector.x+", "+c.vector.y+", "+c.vector.z+", ",l+=c.angle+(void 0!==c.angleUnit?c.angleUnit:"deg"),l+=")";break;case"Scale":l="scale3d(",l+=(void 0!==c.x?c.x:1)+", ",l+=(void 0!==c.y?c.y:1)+", ",l+=void 0!==c.z?c.z:1,l+=")";break;case"Skew":for(var u=[c.xAngle,c.yAngle],d=[c.xAngleUnit,c.xAngleUnit],m=0,_=u.length;m<_;m++)switch(u[m]=u[m]||0,d[m]){case"grad":u[m]=u[m]*(Math.PI/200);break;case"turn":u[m]=u[m]*(Math.PI/.5);break;case"rad":break;case"deg":default:u[m]=u[m]*(Math.PI/180)}l="matrix(1, "+Math.tan(u[1])+", "+Math.tan(u[0])+", 1, 0, 0)";break;case"Origin":void 0===c.x&&(c.x=50,c.xUnit="%"),void 0===c.y&&(c.y=50,c.yUnit="%"),void 0===c.z&&(c.z=0,c.zUnit=void 0),o["-webkit-transform-origin"]=c.x+(void 0!==c.xUnit?c.xUnit:"px")+" "+c.y+(void 0!==c.yUnit?c.yUnit:"px")+" "+c.z+(void 0!==c.zUnit?c.zUnit:"px"),o["transform-origin"]=o["-webkit-transform-origin"];break;case"Perspective":o["-webkit-perspective"]=c.distance+(void 0!==c.distanceUnit?c.distanceUnit:"px"),o.perspective=o["-webkit-perspective"],void 0!==c.origin&&(void 0===c.origin.x&&(c.origin.x=50,c.origin.xUnit="%"),void 0===c.origin.y&&(c.origin.y=50,c.origin.yUnit="%"),o["-webkit-perspective-origin"]=c.origin.x+(void 0!==c.origin.xUnit?c.origin.xUnit:"px")+" "+c.origin.y+(void 0!==c.origin.yUnit?c.origin.yUnit:"px"),o["perspective-origin"]=o["-webkit-perspective-origin"])}n.push(l)}n=n.reverse(),o["-webkit-transform"]=n.join(" "),o.transform=o["-webkit-transform"]}else o["-webkit-transform"]="",o.transform="";R.StyleProvider.setSimpleElementStyle(e,o)},r=t,e.StyleManager=r}(TcHmi=TcHmi||{}),function(c){var e,r,_,t;function o(e){this.__types={},this.__error=c.Errors.NONE,this.__watching=!1,this.__subscrId=null,this.__subscrCommands=[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"GetDefinitions",writeValue:{resolve:"MergeRefs",type:"general"}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"GetDefinitions",writeValue:{resolve:"MergeRefs",type:"framework"}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"GetDefinitions",writeValue:{resolve:"MergeRefs",type:"server"}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"GetDefinitions",writeValue:{resolve:"MergeRefs",type:"project"}}],this.__TypesInitializing={general:!0,server:!0,framework:!0,project:!0},c.EventProvider.register("onWebsocketOpened",this.__onWebsocketOpened()),c.EventProvider.register("onWebsocketClosed",this.__onWebsocketClosed())}e=c.System||(c.System={}),r=e.Type||(e.Type={}),o.prototype.__onWebsocketOpened=function(){var t=this;return function(e,r){t.__error=c.Errors.NONE,t.doWatchTypeDefinitions()}},o.prototype.__onWebsocketClosed=function(){var t=this;return function(e,r){t.__error=c.Errors.E_WEBSOCKET_NOT_READY}},o.prototype.__cacheSchema=function(e,r){if(void 0!==e.definitions)for(var t in e.definitions){var o="tchmi:"+r+"#/definitions/"+t,i=!1;void 0!==this.__types[o]&&(i=!0),this.__types[o]=e.definitions[t],this.__types[o].id=o,!1===i?(c.EventProvider.raise("System.onTypeDefinitionCreated<"+o+">",{typeId:o,typeSchema:e.definitions[t]}),c.EventProvider.raise("System.onTypeDefinitionCreated",{typeId:o,typeSchema:e.definitions[t]})):(c.EventProvider.raise("System.onTypeDefinitionChanged<"+o+">",{typeId:o,typeSchema:e.definitions[t]}),c.EventProvider.raise("System.onTypeDefinitionChanged",{typeId:o,typeSchema:e.definitions[t]}))}},o.prototype.__processTypeDefinitions=function(e){if(this.__error!==c.Errors.NONE)return{code:this.__error,message:c.Errors[this.__error],domain:"TcHmi.System.Type.TypeManager"};if(!e)return{code:c.Errors.ERROR,reason:"Failed to resolve types due to invalid response. Missing data.",domain:"TcHmi.System.Type.TypeManager"};if(e.error!==c.Errors.NONE)return e.details?e.details:{code:e.error};var r=e.response;if(!r)return{code:c.Errors.E_SERVER_RESPONSE_MISSING,message:c.Errors[c.Errors.E_SERVER_RESPONSE_MISSING],domain:"TcHmi.System.Type.TypeManager"};if(r.error)return{code:c.Errors.ERROR,reason:"Failed to resolve types due to invalid response. Received an error from server.",domain:"TcHmi.System.Type.TypeManager",errors:[r.error]};var t=r.commands;if(!t)return{code:c.Errors.E_SERVER_COMMANDS_MISSING,message:c.Errors[c.Errors.E_SERVER_COMMANDS_MISSING],reason:"Failed to resolve types due to invalid response. Missing commands property.",domain:"TcHmi.System.Type.TypeManager"};for(var o=0,i=t.length;o<i;o++){var n=t[o];if(!n)return{code:c.Errors.E_SERVER_COMMAND_MISSING,message:c.Errors[c.Errors.E_SERVER_COMMAND_MISSING],reason:"Failed to resolve types due to invalid response. Missing command property.",domain:"TcHmi.System.Type.TypeManager"};if(n.error)return{code:c.Errors.ERROR,reason:"Failed to resolve types due to invalid response. Received an command error from server.",domain:"TcHmi.System.Type.TypeManager",errors:[n.error]};var a=n.writeValue;if(a)if(a.type){var s=n.readValue;if(s)switch(a.type){case"general":this.__cacheSchema(s,a.type),delete this.__TypesInitializing.general;break;case"framework":this.__cacheSchema(s,a.type),delete this.__TypesInitializing.framework;break;case"server":this.__cacheSchema(s,a.type),delete this.__TypesInitializing.server;break;case"project":this.__cacheSchema(s,a.type),delete this.__TypesInitializing.project}else c.Log.error("[Source=Framework, Module=TcHmi.System.Type.TypeManager] Failed to resolve types for namespace="+a.type+" due to invalid response command for symbol="+n.symbol+". Missing readValue property.")}else c.Log.error("[Source=Framework, Module=TcHmi.System.Type.TypeManager] Failed to resolve type due to invalid response command for symbol="+n.symbol+". Missing type property in writeValue.");else c.Log.error("[Source=Framework, Module=TcHmi.System.Type.TypeManager] Failed to resolve type due to invalid response command for symbol="+n.symbol+". Missing writeValue property.")}var l=Object.keys(this.__TypesInitializing);return l.length?{code:c.Errors.ERROR,reason:"Failed to resolve type definitions for namespace="+l.join(", "),domain:"TcHmi.System.Type.TypeManager"}:{code:c.Errors.NONE}},o.prototype.doWatchTypeDefinitions=function(t){if(this.__watching)c.Callback.callSafe(t,this,{error:c.Errors.ERROR,details:{code:c.Errors.ERROR,reason:"Multiple calls to watch for Typedefinition change detected.",domain:"TcHmi.System.Type.TypeManager"}});else if(!1!==c.Server.isWebsocketReady()){var o=this,i=!1,e=5e3;TCHMI_ENABLE_DESIGNER_MODE&&(e=1e3),this.__watching=!0,this.__subscrId=c.Server.subscribeEx(this.__subscrCommands,e,{},function(e){var r=o.__processTypeDefinitions(e);i||(c.Callback.callSafe(t,o,{error:r.code,details:r}),i=!0)})}else c.Callback.callSafe(t,this,{error:c.Errors.E_WEBSOCKET_NOT_READY,details:{code:c.Errors.E_WEBSOCKET_NOT_READY,reason:"Websocket connetion not ready.",domain:"TcHmi.System.Type.TypeManager"}})},o.prototype.getSchema=function(e){var r=this.__types[e];return void 0===r?(c.Log.error("[Source=Framework, Module=TcHmi] Failed to resolve type="+e+". Type is not known."),null):r},t=o,r.TypeManager=t,(_=r.Schema||(r.Schema={})).resolveType=function(e){var r=e.type;if(!r){var t=e.oneOf;if(t=t||e.anyOf){r=[];for(var o=0,i=t.length;o<i;o++){var n=_.resolveType(t[o]);if(Array.isArray(n))for(var a=0,s=n.length;a<s;a++)-1===r.indexOf(n[a])&&r.push(n[a]);else n&&-1===r.indexOf(n)&&r.push(n)}0===r.length?r=void 0:1===r.length&&(r=r[0])}else r=["string","number","object","boolean","integer","array","null"]}return r},_.resolveDefault=function(e){if(e){if(void 0!==e.default)return tchmi_clone_object(e.default);if(e.type){var r=void 0;if(Array.isArray(e.type)){var t=e.type[0];t&&(r=t)}else r=e.type;switch(r){case"object":var o={},i=e.properties;if(i)for(var n in i){var a=i[n];o[n]=_.resolveDefault(a)}return o;case"array":o=[];var s=e.items,l=e.minItems;if(s){var c=void 0;c=Array.isArray(s)?s[0]:s;for(var u=_.resolveDefault(c),d=0,m=l;d<m;d++)o.push(u)}return o;case"string":return"";case"integer":case"number":return 0;case"boolean":return!1}}return e.oneOf?_.resolveDefault(e.oneOf[0]):e.anyOf?_.resolveDefault(e.anyOf[0]):void 0}}}(TcHmi=TcHmi||{}),function(V){!function(D){var l,e;(e=l=D.SymbolState||(D.SymbolState={}))[e.Invalid=0]="Invalid",e[e.Ready=10]="Ready",e[e.Destroyed=20]="Destroyed";var r=(M.resolveServerSymbolSchemaCache=function(i){var n=this;V.Server.requestEx({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:"ListSymbols"}]},null,V.Server.__handleServerAnswer(i,function(e){var r=e.response.commands[0].readValue;if(r){for(var t in r){var o=r[t].SCHEMA;o&&o.$ref&&(n.__SERVER_SYMBOL_SCHEMA_REF_CACHE[t]=o.$ref)}V.Callback.callSafe(i,n,{error:V.Errors.NONE})}else V.Callback.callSafe(i,n,{error:V.Errors.E_SERVER_READVALUE_MISSING,details:{code:V.Errors.E_SERVER_READVALUE_MISSING,message:V.Errors[V.Errors.E_SERVER_READVALUE_MISSING],reason:"ListSymbols had no valid content.",domain:"TcHmi.System.Symbol"}})}))},M.prototype.__onTypeDefinitionChanged=function(){var o=this;return function(e,r){o.__schema=null;var t=V.System.Services.typeManager.getSchema(r.typeId);t&&o.resolveSubSchema(t,o.__expression.getPathTokens(),function(e){e.error===V.Errors.NONE&&(o.__schema=tchmi_clone_object(e.schema))})}},M.prototype.getExpression=function(){return this.__expression},M.prototype.getState=function(){return this.__state},M.prototype.isDestroyed=function(){return this.__state===l.Destroyed},M.prototype.isReady=function(){return this.__state===l.Ready},M.prototype.destroy=function(){this.isDestroyed()||(this.__destroyTypeDefinitionChanged&&(this.__destroyTypeDefinitionChanged(),this.__destroyTypeDefinitionChanged=null),this.__expression=null,this.__state=l.Destroyed)},M.prototype.__readSubValue=function(e,r,t){if(e&&"object"==typeof e){for(var o=e,i=tchmi_clone_object(r),n="",a=i.shift();;){var s=!1;if("["===a[0]&&"]"===a[a.length-1]&&(s=!0,a=a.replace("[","").replace("]","")),void 0===o[a])return void V.Callback.callSafe(t,this,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:this.__expression.toString()+": Failed to read value by path because the token: '"+a+"' does not exist below path: '"+this.__expression.getName()+n+"' in current value.",domain:"TcHmi.System.Symbol"}});if(!(0<i.length))break;o=o[a],n+=s?"["+a+"]":"::"+a,a=i.shift()}void 0!==o[a]?V.Callback.callSafe(t,this,{error:V.Errors.NONE,value:o[a]}):V.Callback.callSafe(t,this,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:this.__expression.toString()+": Failed to read value by path because the token: '"+a+"' does not exist below path: '"+this.__expression.getName()+n+"' in current value.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(t,this,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:this.__expression.toString()+": Failed to read value by path because current value is not a valid object. Are all default values and written values valid for this schema?",domain:"TcHmi.System.Symbol"}})},M.prototype.__writeSubValue=function(e,r,t,o){if(e&&"object"==typeof e){for(var i=e,n=tchmi_clone_object(t),a="",s=n.shift();;){var l=!1;if("["===s[0]&&"]"===s[s.length-1]&&(l=!0,s=s.replace("[","").replace("]","")),void 0===i[s])return void V.Callback.callSafe(o,this,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:this.__expression.toString()+": Failed to read value by path because the token: '"+s+"' does not exist below path: '"+this.__expression.getName()+a+"' in current value.",domain:"TcHmi.System.Symbol"}});if(!(0<n.length))break;i=i[s],a+=l?"["+s+"]":"::"+s,s=n.shift()}void 0!==i[s]?(i[s]=r,V.Callback.callSafe(o,this,{error:V.Errors.NONE})):V.Callback.callSafe(o,this,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:this.__expression.toString()+": Failed to read value by path because the token: '"+s+"' does not exist below path: '"+this.__expression.getName()+a+"' in current value.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(o,this,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:this.__expression.toString()+": Failed to read value by path because current value is not a valid object. Are all default values and written values valid for this schema?",domain:"TcHmi.System.Symbol"}})},M.prototype.resolveSchema=function(n){var a=this;if(null===this.__schema){var e=this.__expression.getType();if(e===V.SymbolType.Server){var r=this.__expression.getName(),t=M.__SERVER_SYMBOL_SCHEMA_REF_CACHE[r];if(t)return(l=V.Type.getSchema(t))?(this.__schema=l,this.__destroyTypeDefinitionChanged&&(this.__destroyTypeDefinitionChanged(),this.__destroyTypeDefinitionChanged=null),this.__destroyTypeDefinitionChanged=V.EventProvider.register("System.onTypeDefinitionChanged<"+t+">",this.__onTypeDefinitionChanged()),void V.Callback.callSafe(n,this,{error:V.Errors.NONE,schema:l})):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString()+", Definition for type: '"+t+"' is unknown.",domain:"TcHmi.System.Symbol"}});var o={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:"GetSchema",writeValue:{resolve:"MergeRefs",symbol:r}}]},i=this.__expression.getOptions().Timeout,s=this.__expression.getOptions().Parallel;s=s||!1,V.Server.requestEx(o,{timeout:i,parallel:s},function(e){if(void 0===e.error||e.error===V.Errors.NONE){var r=e.response;if(void 0!==r)if(r&&r.error&&r.error)V.Callback.callSafe(n,a,{error:V.Errors.E_SERVER_RESPONSE_ERROR,details:{code:V.Errors.E_SERVER_RESPONSE_ERROR,message:V.Errors[V.Errors.E_SERVER_RESPONSE_ERROR],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol",errors:[r.error]}});else{var t=r.commands;t||V.Callback.callSafe(n,a,{error:V.Errors.E_SERVER_COMMANDS_MISSING,details:{code:V.Errors.E_SERVER_COMMANDS_MISSING,message:V.Errors[V.Errors.E_SERVER_COMMANDS_MISSING],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}});var o=t[0];if(o||V.Callback.callSafe(n,a,{error:V.Errors.E_SERVER_COMMAND_MISSING,details:{code:V.Errors.E_SERVER_COMMANDS_MISSING,message:V.Errors[V.Errors.E_SERVER_COMMANDS_MISSING],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}}),!o.error){var i=o.readValue;return i?(a.__schema=i,a.__destroyTypeDefinitionChanged&&(a.__destroyTypeDefinitionChanged(),a.__destroyTypeDefinitionChanged=null),a.__destroyTypeDefinitionChanged=V.EventProvider.register("System.onTypeDefinitionChanged<"+i.id+">",a.__onTypeDefinitionChanged()),void V.Callback.callSafe(n,a,{error:V.Errors.NONE,schema:i})):void V.Callback.callSafe(n,a,{error:V.Errors.E_SERVER_READVALUE_MISSING,details:{code:V.Errors.E_SERVER_READVALUE_MISSING,message:V.Errors[V.Errors.E_SERVER_READVALUE_MISSING],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}V.Callback.callSafe(n,a,{error:V.Errors.E_SERVER_COMMAND_ERROR,details:{code:V.Errors.E_SERVER_COMMAND_ERROR,message:V.Errors[V.Errors.E_SERVER_COMMAND_ERROR],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol",errors:[o.error]}})}else V.Callback.callSafe(n,a,{error:V.Errors.E_SERVER_INVALID_RESPONSE,details:{code:V.Errors.E_SERVER_INVALID_RESPONSE,message:V.Errors[V.Errors.E_SERVER_INVALID_RESPONSE],reason:a.__expression.toString()+": Missing response from server.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(n,a,{error:e.error,details:e.details})})}else{if(e!==V.SymbolType.Internal){var l;if(e===V.SymbolType.LocalizedText)return(l=V.System.Services.typeManager.getSchema("tchmi:general#/definitions/String"))?(this.__schema=l,void V.Callback.callSafe(n,a,{error:V.Errors.NONE,schema:this.__schema})):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}});if(e===V.SymbolType.Function)return void V.Callback.callSafe(n,a,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}});if(e===V.SymbolType.Control){var c=this.__expression.getName(),u=this.__expression.getPathTokens(),d=V.Controls.get(c);if(!d)return void V.Callback.callSafe(n,a,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:a.__expression.toString()+", Cant find control instance with id: '"+c+"'.",domain:"TcHmi.System.Symbol"}});var m=null;if(u&&0<u.length){var _=tchmi_clone_object(u);m=_.shift();var h=V.System.Services.controlManager.getAttributeByPropertyName(d,m);return null==h?void V.Callback.callSafe(n,a,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}}):(S=V.System.Services.typeManager.getSchema(h.type))?void a.resolveSubSchema(S,_,function(e){if(e.error===V.Errors.NONE){var r=tchmi_clone_object(e.schema);return r?(a.__schema=r,a.__destroyTypeDefinitionChanged&&(a.__destroyTypeDefinitionChanged(),a.__destroyTypeDefinitionChanged=null),a.__destroyTypeDefinitionChanged=V.EventProvider.register("System.onTypeDefinitionChanged<"+h.type+">",a.__onTypeDefinitionChanged()),void V.Callback.callSafe(n,a,{error:V.Errors.NONE,schema:a.__schema})):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}V.Callback.callSafe(n,a,{error:e.error,details:e.details})}):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}return void V.Callback.callSafe(n,a,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}if(e===V.SymbolType.PartialParam){var g=this.__expression.getName().split("."),E=(m=g.pop(),g.join(".")),p=(u=this.__expression.getPathTokens(),V.Controls.get(E));if(!p)return void V.Callback.callSafe(n,a,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:a.__expression.toString()+", Cant find control instance with id: "+E+".",domain:"TcHmi.System.Symbol"}});var f=V.System.Services.controlManager.getAttributeByPropertyName(p,m);return null==f?void V.Callback.callSafe(n,a,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}}):(S=V.System.Services.typeManager.getSchema(f.type))?void a.resolveSubSchema(S,u,function(e){if(e.error===V.Errors.NONE){var r=tchmi_clone_object(e.schema);return r?(a.__schema=r,a.__destroyTypeDefinitionChanged&&(a.__destroyTypeDefinitionChanged(),a.__destroyTypeDefinitionChanged=null),a.__destroyTypeDefinitionChanged=V.EventProvider.register("System.onTypeDefinitionChanged<"+f.type+">",a.__onTypeDefinitionChanged()),void V.Callback.callSafe(n,a,{error:V.Errors.NONE,schema:a.__schema})):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}V.Callback.callSafe(n,a,{error:e.error,details:e.details})}):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}if(e!==V.SymbolType.TemplateParam)return void V.Callback.callSafe(n,a,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}});var S,v=this.__expression.getName(),y=(u=this.__expression.getPathTokens(),D.Services.templateParamSymbolManager.get(v));return y&&y.type?(S=V.System.Services.typeManager.getSchema(y.type))?void a.resolveSubSchema(S,u,function(e){if(e.error===V.Errors.NONE){var r=tchmi_clone_object(e.schema);return r?(a.__schema=r,a.__destroyTypeDefinitionChanged&&(a.__destroyTypeDefinitionChanged(),a.__destroyTypeDefinitionChanged=null),a.__destroyTypeDefinitionChanged=V.EventProvider.register("System.onTypeDefinitionChanged<"+y.type+">",a.__onTypeDefinitionChanged()),void V.Callback.callSafe(n,a,{error:V.Errors.NONE,schema:a.__schema})):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}V.Callback.callSafe(n,a,{error:e.error,details:e.details})}):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}}):void V.Callback.callSafe(n,a,{error:V.Errors.E_SYMBOL_UNKNOWN,details:{code:V.Errors.E_SYMBOL_UNKNOWN,message:V.Errors[V.Errors.E_SYMBOL_UNKNOWN],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}var T=this.__expression.getName(),C=this.__expression.getPathTokens();V.System.Services.internalSymbolManager.getType(T,function(e){if(e.error===V.Errors.NONE){var t=e.type,r=V.System.Services.typeManager.getSchema(t);return r?void a.resolveSubSchema(r,C,function(e){if(e.error===V.Errors.NONE){var r=tchmi_clone_object(e.schema);return r?(a.__schema=r,a.__destroyTypeDefinitionChanged&&(a.__destroyTypeDefinitionChanged(),a.__destroyTypeDefinitionChanged=null),a.__destroyTypeDefinitionChanged=V.EventProvider.register("System.onTypeDefinitionChanged<"+t+">",a.__onTypeDefinitionChanged()),void V.Callback.callSafe(n,a,{error:V.Errors.NONE,schema:a.__schema})):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}V.Callback.callSafe(n,a,{error:e.error,details:e.details})}):void V.Callback.callSafe(n,a,{error:V.Errors.E_UNKNOWN_TYPE,details:{code:V.Errors.E_UNKNOWN_TYPE,message:V.Errors[V.Errors.E_UNKNOWN_TYPE],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol"}})}V.Callback.callSafe(n,a,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:a.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}}else V.Callback.callSafe(n,a,{error:V.Errors.NONE,schema:this.__schema})},M.prototype.resolveSubSchema=function(e,r,t){var o=e,i="",n=tchmi_clone_object(r);if(r&&0!==r.length)if(null!=o&&"object"==typeof o){for(;0<n.length;){var a=n.shift();if(o&&"TcHmi.Controls.System.TcHmiControl"===o.frameworkInstanceOf)if(o.frameworkUserControlConfig){if(!(s=V.System.Services.controlManager.getUserControlConfigAttributeByPropertyName(o.frameworkUserControlConfig,a))){o=null;break}if(o=V.Type.getSchema(s.type),0===n.length)break}else{var s;if(!(s=V.System.Services.controlManager.getDescriptionAttributeByPropertyName(o.frameworkControlType,a))){o=null;break}if(o=V.Type.getSchema(s.type),0===n.length)break}if(!o||"TcHmi.Controls.System.TcHmiControl"!==o.frameworkInstanceOf){for(var l=[],c=a.split(""),u=0;0<c.length;){var d=c.shift();"["===d&&void 0!==l[u]&&0<l[u].length&&u++,void 0===l[u]&&(l[u]=""),l[u]=l[u]+d,"]"===d&&u++}for(var m=!1;0<l.length;){var _=l.shift();if(_.match(/\[*.\]/g)){if(void 0!==o.items&&"object"==typeof o.items&&!Array.isArray(o.items)){o=o.items,m=!0,i+="["+a+"]";continue}}else if(void 0!==o.properties&&"object"==typeof o.properties&&!1===Array.isArray(o.properties)&&void 0!==o.properties[_]){o=o.properties[_],m=!0,i+="::"+a;continue}}if(!1===m)return void V.Callback.callSafe(t,this,{error:V.Errors.E_SCHEMA_INVALID_PATH,details:{code:V.Errors.E_SCHEMA_INVALID_PATH,message:V.Errors[V.Errors.E_SCHEMA_INVALID_PATH],reason:this.__expression.toString()+", Failed to read schema by path because token: '"+a+"' does not exist below path: '"+i+"' in schema with id: '"+e.id+"'.",domain:"TcHmi.System.Symbol"}})}}null!=o&&"object"==typeof o?V.Callback.callSafe(t,this,{error:V.Errors.NONE,schema:o}):V.Callback.callSafe(t,this,{error:V.Errors.E_SCHEMA_INVALID,details:{code:V.Errors.E_SCHEMA_INVALID,message:V.Errors[V.Errors.E_SCHEMA_INVALID],reason:this.__expression.toString()+", Failed to read schema by path because there is no valid schema below path: '"+i+"' in schema with id: '"+e.id+"'.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(t,this,{error:V.Errors.E_SCHEMA_INVALID,details:{code:V.Errors.E_SCHEMA_INVALID,message:V.Errors[V.Errors.E_SCHEMA_INVALID],reason:this.__expression.toString(),domain:"TcHmi.System.Symbol"}});else V.Callback.callSafe(t,this,{error:V.Errors.NONE,schema:o})},M.prototype.read=function(e){V.Log.debug("[Source=Framework, Module=TcHmi.System.Symbol, Expression="+this.__expression.toString()+"] read symbol="+this.__expression.toString());var r=this.__expression.getType();return r===V.SymbolType.Server?void this.__readSymbolTypeServer(e):r===V.SymbolType.Internal?void this.__readSymbolTypeInternal(e):r===V.SymbolType.LocalizedText?void this.__readSymbolTypeLocalizedText(e):r===V.SymbolType.Function?void this.__readSymbolTypeFunction(e):r===V.SymbolType.Control?void this.__readSymbolTypeControl(e):r===V.SymbolType.PartialParam?void this.__readSymbolTypePartialParam(e):r===V.SymbolType.TemplateParam?void this.__readSymbolTypeTemplateParam(e):void V.Callback.callSafe(e,this,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:this.__expression.toString(),domain:"TcHmi.System.Symbol"}})},M.prototype.__readSymbolTypeServer=function(i){var n=this,e={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:this.__expression.getName()}]},r=this.__expression.getOptions().Timeout,t=n.__expression.getOptions().Parallel;t=t||!1,V.Server.requestEx(e,{timeout:r,parallel:t},function(e){if(e.error===V.Errors.NONE){var r=e.response;if(void 0!==r)if(r&&r.error&&r.error)V.Callback.callSafe(i,n,{error:V.Errors.E_SERVER_RESPONSE_ERROR,details:{code:V.Errors.E_SERVER_COMMAND_ERROR,message:V.Errors[V.Errors.E_SERVER_COMMAND_ERROR],reason:n.__expression.toString(),domain:"TcHmi.System.Symbol",errors:[r.error]},response:r});else{var t=r.commands;if(t){var o=t[0];if(o)return o.error?void V.Callback.callSafe(i,n,{error:V.Errors.E_SERVER_COMMAND_ERROR,details:{code:V.Errors.E_SERVER_COMMAND_ERROR,message:V.Errors[V.Errors.E_SERVER_COMMAND_ERROR],reason:n.__expression.toString(),domain:"TcHmi.System.Symbol",errors:[o.error]},value:o.readValue,response:r}):void V.Callback.callSafe(i,n,{error:V.Errors.NONE,value:o.readValue,response:r});V.Callback.callSafe(i,n,{error:V.Errors.E_SERVER_COMMAND_MISSING,details:{code:V.Errors.E_SERVER_COMMAND_MISSING,message:V.Errors[V.Errors.E_SERVER_COMMAND_MISSING],reason:n.__expression.toString(),domain:"TcHmi.System.Symbol"},response:r})}else V.Callback.callSafe(i,n,{error:V.Errors.E_SERVER_COMMANDS_MISSING,details:{code:V.Errors.E_SERVER_COMMANDS_MISSING,message:V.Errors[V.Errors.E_SERVER_COMMANDS_MISSING],reason:n.__expression.toString(),domain:"TcHmi.System.Symbol"},response:r})}else V.Callback.callSafe(i,n,{error:V.Errors.E_SERVER_INVALID_RESPONSE,details:{code:V.Errors.E_SERVER_INVALID_RESPONSE,message:V.Errors[V.Errors.E_SERVER_INVALID_RESPONSE],reason:n.__expression.toString()+": Missing response from server.",domain:"TcHmi.System.Symbol"},response:r})}else V.Callback.callSafe(i,n,{error:e.error})})},M.prototype.__readSymbolTypeInternal=function(t){var e=this.__expression.getName();try{var o=this;D.Services.internalSymbolManager.read(e,function(e){if(e.error===V.Errors.NONE){var r=o.__expression.getPathTokens();return r&&0<r.length?void o.__readSubValue(e.value,r,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(t,o,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(t,o,{error:e.error,details:e.details})}):void V.Callback.callSafe(t,o,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)})}V.Callback.callSafe(t,o,{error:e.error})})}catch(e){return V.Log.error(e),void V.Callback.callSafe(t,this,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:this.__expression.toString()+", Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}},M.prototype.__readSymbolTypeLocalizedText=function(r){var e=this.__expression.getName(),t=D.Services.localizationManager.get(e);if(void 0!==t)try{return void V.Callback.callSafe(r,this,{error:V.Errors.NONE,value:t.text})}catch(e){return V.Log.error(e),void V.Callback.callSafe(r,this,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:this.__expression.toString()+", Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(r,this,{error:V.Errors.E_SYMBOL_UNKNOWN,details:{code:V.Errors.E_SYMBOL_UNKNOWN,message:V.Errors[V.Errors.E_SYMBOL_UNKNOWN],reason:this.__expression.toString(),domain:"TcHmi.System.Symbol"}})},M.prototype.__readSymbolTypeFunction=function(t){var o=this,e=new D.FunctionExpression(this.__expression.getContent()),i=!1;e.execute({success:function(e){i||(i=!0,V.Callback.callSafe(t,o,{error:V.Errors.NONE,value:e}))},error:function(e,r){i||(i=!0,V.Callback.callSafe(t,o,{error:e,details:{code:V.Errors.ERROR,message:V.Errors[V.Errors.ERROR],reason:o.__expression.toString()+", could not read function value",domain:"TcHmi.System.Symbol",errors:[r]}}))}})},M.prototype.__readSymbolTypeControl=function(r){var t=this,e=this.__expression.getName(),o=this.__expression.getPath(),i=tchmi_clone_object(this.__expression.getPathTokens()),n=V.Controls.get(e);if(n)if(null!==i){var a=null;i&&0<i.length&&(a=i.shift());var s=V.System.Services.controlManager.getAttributeByPropertyName(n,a);if(null!=s)try{var l=tchmi_clone_object(n[s.propertyGetterName].call(n));if(i&&0<i.length){var c=V.Type.getSchema(s.type);if(c&&c.frameworkInstanceOf&&"TcHmi.Controls.System.TcHmiControl"===c.frameworkInstanceOf){o=o.replace(a,"").replace("::::","::");var u=l.getId();return void new V.System.Symbol("%ctrl%"+u+o+"%/ctrl%").read(function(e){e.error===V.Errors.NONE?V.Callback.callSafe(r,t,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(r,t,{error:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,details:{code:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,message:V.Errors[V.Errors.E_SYMBOL_SUBSYMBOL_ERROR],reason:t.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}return void this.__readSubValue(l,i,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(r,t,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(r,t,{error:e.error,details:e.details})})}return void V.Callback.callSafe(r,this,{error:V.Errors.NONE,value:l})}catch(e){return V.Log.error(e),void V.Callback.callSafe(r,this,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:this.__expression.toString()+", Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(r,this,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND],reason:this.__expression.toString()+", Cant find control attribute with propertyName: '"+a+"'.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(r,this,{error:V.Errors.NONE,value:n});else V.Callback.callSafe(r,this,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:this.__expression.toString()+", Cant find control instance with id: '"+e+"'.",domain:"TcHmi.System.Symbol"}})},M.prototype.__readSymbolTypePartialParam=function(r){var t=this,e=this.__expression.getName().split("."),o=e.pop(),i=e.join("."),n=this.__expression.getPath(),a=this.__expression.getPathTokens(),s=V.Controls.get(i);if(s){var l=V.System.Services.controlManager.getAttributeByPropertyName(s,o);if(null!=l)try{var c=s[l.propertyGetterName].call(s);if(a&&0<a.length){var u=V.Type.getSchema(l.type);if(u&&u.frameworkInstanceOf&&"TcHmi.Controls.System.TcHmiControl"===u.frameworkInstanceOf){var d=c.getId();return void new V.System.Symbol("%ctrl%"+d+n+"%/ctrl%").read(function(e){e.error===V.Errors.NONE?V.Callback.callSafe(r,t,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(r,t,{error:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,details:{code:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,message:V.Errors[V.Errors.E_SYMBOL_SUBSYMBOL_ERROR],reason:t.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}return void this.__readSubValue(c,a,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(r,t,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(r,t,{error:e.error,details:e.details})})}return void V.Callback.callSafe(r,this,{error:V.Errors.NONE,value:tchmi_clone_object(c)})}catch(e){return V.Log.error(e),void V.Callback.callSafe(r,this,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:this.__expression.toString()+", Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(r,this,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND],reason:this.__expression.toString()+", Cant find control attribute with propertyName: '"+o+"'.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(r,this,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:this.__expression.toString()+", Cant find control instance with id: '"+i+"'.",domain:"TcHmi.System.Symbol"}})},M.prototype.__readSymbolTypeTemplateParam=function(r){var t=this,e=this.__expression.getName(),o=this.__expression.getPath(),i=this.__expression.getPathTokens(),n=D.Services.templateParamSymbolManager.get(e);try{if(!(n.value instanceof V.SymbolExpression))return i&&0<i.length?void t.__readSubValue(n.value,i,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(r,t,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(r,t,{error:e.error,details:e.details})}):void V.Callback.callSafe(r,t,{error:V.Errors.NONE,value:tchmi_clone_object(n.value)});var a=n.value,s=a.getTag(),l=a.getName(),c=a.getPath(),u="%"+s+"%"+l;null!==c&&(u+=c),i&&0<i.length&&(u+=o),u+="%/"+s+"%";var d=new V.System.Symbol(u);d.read(function(e){e.error===V.Errors.NONE?V.Callback.callSafe(r,t,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(r,t,{error:e.error,details:e.details}),d.destroy(),d=null})}catch(e){return V.Log.error(e),void V.Callback.callSafe(r,t,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:t.__expression.toString()+": Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}},M.prototype.write=function(e,r){this.writeEx(e,null,r)},M.prototype.writeEx=function(e,r,t){switch(V.Log.debug("[Source=Framework, Module=TcHmi.System.Symbol, Expression="+this.__expression.toString()+"] Write symbol="+this.__expression.toString()+(r?"":" (no dirtyPaths)")+" with value:"),V.Log.debug(e,!0),r&&(V.Log.debug("[Source=Framework, Module=TcHmi.System.ServerManager] Write dirtyPaths:"),V.Log.debug(r,!0)),this.__expression.getType()){case V.SymbolType.Server:return void this.__writeSymbolTypeServer(e,r,t);case V.SymbolType.Internal:return void this.__writeSymbolTypeInternal(e,r,t);case V.SymbolType.LocalizedText:return void V.Callback.callSafe(t,this,{error:V.Errors.E_SYMBOL_READONLY,details:{code:V.Errors.E_SYMBOL_READONLY,message:V.Errors[V.Errors.E_SYMBOL_READONLY],reason:this.__expression.toString()+": LocalizedText symbols are readonly.",domain:"TcHmi.System.Symbol"}});case V.SymbolType.Function:return void V.Callback.callSafe(t,this,{error:V.Errors.E_SYMBOL_READONLY,details:{code:V.Errors.E_SYMBOL_READONLY,message:V.Errors[V.Errors.E_SYMBOL_READONLY],reason:this.__expression.toString()+": Function symbols are readonly.",domain:"TcHmi.System.Symbol"}});case V.SymbolType.Control:return void this.__writeSymbolTypeControl(e,r,t);case V.SymbolType.PartialParam:return void this.__writeSymbolTypePartialParam(e,r,t);case V.SymbolType.TemplateParam:return void this.__writeSymbolTypeTemplateParam(e,r,t);default:return void V.Callback.callSafe(t,this,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:this.__expression.toString(),domain:"TcHmi.System.Symbol"}})}},M.prototype.__writeSymbolTypeServer=function(e,g,s){var E=this,p=this.__expression.getName(),f=tchmi_clone_object(e);this.resolveSchema(function(e){if(E.__state===l.Ready)if(e.error===V.Errors.NONE){var d,m={requestType:"ReadWrite",commands:[]},_=V.Errors.NONE,h=E.__schema;if(g){function r(e,r){var t,o,i,n=g[e],a=D.resolveSymbolPathToTokenArray(n),s=V.Errors.NONE;E.resolveSubSchema(h,a,function(e){e.error===V.Errors.NONE?t=tchmi_clone_object(e.schema):(s=e.error,o=e.details)});var l,c=V.Errors.NONE;if(E.__readSubValue(f,a,function(e){e.error===V.Errors.NONE?i=tchmi_clone_object(e.value):(c=e.error,l=e.details)}),s===V.Errors.NONE&&c===V.Errors.NONE){var u=V.ValueConverter.toSchemaType(i,t);m.commands.push({commandOptions:["SendErrorMessage"],symbol:p+n,writeValue:u})}else _=V.Errors.ERROR,d=d||{code:V.Errors.ERROR,message:V.Errors[V.Errors.ERROR],reason:E.__expression.toString(),domain:"TcHmi.System.Symbol"},s===V.Errors.NONE&&(d.errors||(d.errors=[]),d.errors.push(o)),c===V.Errors.NONE&&(d.errors||(d.errors=[]),d.errors.push(l))}for(var t=0,o=g.length;t<o;t++)r(t)}else{var i=V.ValueConverter.toSchemaType(f,h);m.commands.push({commandOptions:["SendErrorMessage"],symbol:p,writeValue:i})}if(_===V.Errors.NONE){var n=E.__expression.getOptions().Timeout,a=E.__expression.getOptions().Parallel;a=a||!1,V.Server.requestEx(m,{timeout:n,parallel:a},function(e){if(e.error===V.Errors.NONE){var r=e.response;if(r)if(r&&r.error&&r.error)V.Callback.callSafe(s,E,{error:V.Errors.E_SERVER_RESPONSE_ERROR,details:{code:V.Errors.E_SERVER_RESPONSE_ERROR,message:V.Errors[V.Errors.E_SERVER_RESPONSE_ERROR],reason:E.__expression.toString(),domain:"TcHmi.System.Symbol",errors:[r.error]},response:r});else{var t=r.commands;if(t){var o=t[0];if(o)return o.error?void V.Callback.callSafe(s,E,{error:V.Errors.E_SERVER_COMMAND_ERROR,details:{code:V.Errors.E_SERVER_COMMAND_ERROR,message:V.Errors[V.Errors.E_SERVER_COMMAND_ERROR],reason:E.__expression.toString(),domain:"TcHmi.System.Symbol",errors:[o.error]},response:r}):void V.Callback.callSafe(s,E,{error:V.Errors.NONE,value:o.readValue,response:r});V.Callback.callSafe(s,E,{error:V.Errors.E_SERVER_COMMAND_MISSING,details:{code:V.Errors.E_SERVER_COMMAND_MISSING,message:V.Errors[V.Errors.E_SERVER_COMMAND_MISSING],reason:E.__expression.toString(),domain:"TcHmi.System.Symbol"},response:r})}else V.Callback.callSafe(s,E,{error:V.Errors.E_SERVER_COMMANDS_MISSING,details:{code:V.Errors.E_SERVER_COMMANDS_MISSING,message:V.Errors[V.Errors.E_SERVER_COMMANDS_MISSING],reason:E.__expression.toString(),domain:"TcHmi.System.Symbol"},response:r})}else V.Callback.callSafe(s,E,{error:V.Errors.E_SERVER_RESPONSE_MISSING,details:{code:V.Errors.E_SERVER_RESPONSE_MISSING,message:V.Errors[V.Errors.E_SERVER_RESPONSE_MISSING],reason:E.__expression.toString()+": Missing response from server.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(s,E,{error:e.error,details:e.details})})}else V.Callback.callSafe(s,E,{error:_,details:d})}else V.Callback.callSafe(s,E,{error:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,details:{code:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,message:V.Errors[V.Errors.E_SYMBOL_RESOLVE_SCHEMA],reason:E.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}});else V.Callback.callSafe(s,E,{error:V.Errors.E_SYMBOL_STATE_INVALID,details:{code:V.Errors.E_SYMBOL_STATE_INVALID,message:V.Errors[V.Errors.E_SYMBOL_STATE_INVALID],reason:E.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})},M.prototype.__writeSymbolTypeInternal=function(n,l,c){var u=this,d=this.__expression.getName(),m=this.__expression.getPath(),_=this.__expression.getPathTokens();try{this.resolveSchema(function(e){if(e.error===V.Errors.NONE){var a=u.__schema,s=tchmi_clone_object(n),r=[];if(_&&0<_.length){if(l)for(var t=0,o=l.length;t<o;t++)r.push(m+l[t]);else r.push(m);D.Services.internalSymbolManager.read(d,function(e){if(e.error===V.Errors.NONE){var r,t,o=tchmi_clone_object(e.value),i=V.Errors.NONE;if(u.__readSubValue(o,_,function(e){e.error===V.Errors.NONE?r=tchmi_clone_object(e.value):(i=e.error,t=e.details)}),i)V.Callback.callSafe(c,u,{error:i,details:t});else{var n=V.ValueConverter.toSchemaType(s,a);tchmi_equal(r,n)?V.Callback.callSafe(c,u,{error:V.Errors.NONE}):u.__writeSubValue(o,n,_,function(e){e.error===V.Errors.NONE?D.Services.internalSymbolManager.write(d,o,function(e){V.Callback.callSafe(c,u,{error:e.error,details:e.details})}):V.Callback.callSafe(c,u,{error:e.error,details:e.details})})}}else V.Callback.callSafe(c,u,{error:e.error})})}else{var i=V.ValueConverter.toSchemaType(s,a);D.Services.internalSymbolManager.write(d,i,function(e){V.Callback.callSafe(c,u,{error:e.error,details:e.details})})}}else V.Callback.callSafe(c,u,{error:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,details:{code:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,message:V.Errors[V.Errors.E_SYMBOL_RESOLVE_SCHEMA],reason:u.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}catch(e){return V.Log.error(e),void V.Callback.callSafe(c,u,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:u.__expression.toString()+": Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}},M.prototype.__writeSymbolTypeControl=function(h,g,E){var p=this,e=this.__expression.getName(),f=tchmi_clone_object(this.__expression.getPath()),S=tchmi_clone_object(this.__expression.getPathTokens()),v=V.Controls.get(e);if(v)if(null!==S){var y=null;S&&0<S.length&&(y=S.shift());var T=V.System.Services.controlManager.getAttributeByPropertyName(v,y);if(null!=T)if(T.readOnly)V.Callback.callSafe(E,p,{error:V.Errors.E_SYMBOL_READONLY,details:{code:V.Errors.E_SYMBOL_READONLY,message:V.Errors[V.Errors.E_SYMBOL_READONLY],reason:p.__expression.toString()+", Writing to readonly symbol is not allowed. Symbol is readonly because attribute with property name: '"+y+"' in control: '"+v.getId()+"' is readonly.",domain:"TcHmi.System.Symbol"}});else try{this.resolveSchema(function(e){if(e.error===V.Errors.NONE){var r=p.__schema,t=tchmi_clone_object(h),o=tchmi_clone_object(v[T.propertyGetterName].call(v));if(S&&0<S.length){var i=V.Type.getSchema(T.type);if(i&&i.frameworkInstanceOf&&"TcHmi.Controls.System.TcHmiControl"===i.frameworkInstanceOf){if(!(o instanceof V.Controls.System.baseTcHmiControl))return void V.Callback.callSafe(E,p,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:p.__expression.toString()+", Missing control instance for parameter: '"+T.propertyName+"'.",domain:"TcHmi.System.Symbol"}});f=f.replace(y,"").replace("::::","::");var n=o.getId();return void new V.System.Symbol("%ctrl%"+n+f+"%/ctrl%").writeEx(h,g,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(E,p,{error:V.Errors.NONE}):V.Callback.callSafe(E,p,{error:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,details:{code:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,message:V.Errors[V.Errors.E_SYMBOL_SUBSYMBOL_ERROR],reason:p.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}var a,s=[];if(g)for(var l=0,c=g.length;l<c;l++)s.push(f+g[l]);else s.push(f);var u,d=V.Errors.NONE;if(p.__readSubValue(o,S,function(e){e.error===V.Errors.NONE?a=tchmi_clone_object(e.value):(d=e.error,u=e.details)}),d)return void V.Callback.callSafe(E,p,{error:d,details:u});var m=V.ValueConverter.toSchemaType(t,r);return tchmi_equal(a,m)?void V.Callback.callSafe(E,p,{error:V.Errors.NONE}):void p.__writeSubValue(o,m,S,function(e){if(e.error===V.Errors.NONE){var r=V.System.Services.controlManager.setControlPropertyByAttribute(v,T,o,s);r&&r.code!==V.Errors.NONE?V.Callback.callSafe(E,p,{error:r.code,details:r}):V.Callback.callSafe(E,p,{error:V.Errors.NONE})}else V.Callback.callSafe(E,p,{error:e.error,details:e.details})})}if(tchmi_equal(o,t))V.Callback.callSafe(E,p,{error:V.Errors.NONE});else{m=V.ValueConverter.toSchemaType(t,r);var _=V.System.Services.controlManager.setControlPropertyByAttribute(v,T,tchmi_clone_object(m));_&&_.code!==V.Errors.NONE?V.Callback.callSafe(E,p,{error:_.code,details:_}):V.Callback.callSafe(E,p,{error:V.Errors.NONE})}}else V.Callback.callSafe(E,p,{error:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,details:{code:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,message:V.Errors[V.Errors.E_SYMBOL_RESOLVE_SCHEMA],reason:p.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}catch(e){return V.Log.error(e),void V.Callback.callSafe(E,p,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:p.__expression.toString()+": Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(E,p,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND],reason:p.__expression.toString()+", Cant find attribute with property name: '"+y+"' in control: '"+v.getId()+"'.",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(E,p,{error:V.Errors.E_NOT_ALLOWED,details:{code:V.Errors.E_NOT_ALLOWED,message:V.Errors[V.Errors.E_NOT_ALLOWED],reason:p.__expression.toString()+", Writing on control instance symbol is not allowed.",domain:"TcHmi.System.Symbol"}});else V.Callback.callSafe(E,p,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:p.__expression.toString()+", Cant find control instance with id: '"+e+"'.",domain:"TcHmi.System.Symbol"}})},M.prototype.__writeSymbolTypePartialParam=function(g,E,p){var f=this,e=this.__expression.getName().split("."),S=e.pop(),r=e.join("."),v=this.__expression.getPath(),y=this.__expression.getPathTokens(),T=V.Controls.get(r);if(T){var C=V.System.Services.controlManager.getAttributeByPropertyName(T,S);if(null!=C)try{this.resolveSchema(function(e){if(e.error===V.Errors.NONE){var r=f.__schema,t=tchmi_clone_object(g),o=tchmi_clone_object(T[C.propertyGetterName].call(T)),i=tchmi_clone_object(o);if(y&&0<y.length){var n=V.Type.getSchema(C.type);if(n&&n.frameworkInstanceOf&&"TcHmi.Controls.System.TcHmiControl"===n.frameworkInstanceOf){if(!(i instanceof V.Controls.System.baseTcHmiControl))return void V.Callback.callSafe(p,f,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:f.__expression.toString()+", Missing control instance for parameter: '"+S+"'.",domain:"TcHmi.System.Symbol"}});var a=i.getId();return void new V.System.Symbol("%ctrl%"+a+v+"%/ctrl%").writeEx(g,E,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(p,f,{error:V.Errors.NONE}):V.Callback.callSafe(p,f,{error:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,details:{code:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,message:V.Errors[V.Errors.E_SYMBOL_SUBSYMBOL_ERROR],reason:f.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}var s,l=[];if(E)for(var c=0,u=E.length;c<u;c++)l.push(v+E[c]);else l.push(v);var d,m=V.Errors.NONE;if(f.__readSubValue(i,y,function(e){e.error===V.Errors.NONE?s=tchmi_clone_object(e.value):(m=e.error,d=e.details)}),m)return void V.Callback.callSafe(p,f,{error:m,details:d});var _=V.ValueConverter.toSchemaType(t,r);return tchmi_equal(s,_)?void V.Callback.callSafe(p,f,{error:V.Errors.NONE}):void f.__writeSubValue(i,_,y,function(e){e.error===V.Errors.NONE?(V.System.Services.controlManager.setControlPropertyByAttribute(T,C,i,l),V.Callback.callSafe(p,f,{error:V.Errors.NONE})):V.Callback.callSafe(p,f,{error:e.error,details:e.details})})}if(_=V.ValueConverter.toSchemaType(t,r),tchmi_equal(i,_))V.Callback.callSafe(p,f,{error:V.Errors.NONE});else{var h=V.System.Services.controlManager.setControlPropertyByAttribute(T,C,_);h&&h.code!==V.Errors.NONE?V.Callback.callSafe(p,f,{error:h.code,details:h}):V.Callback.callSafe(p,f,{error:V.Errors.NONE})}}else V.Callback.callSafe(p,f,{error:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,details:{code:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,message:V.Errors[V.Errors.E_SYMBOL_RESOLVE_SCHEMA],reason:f.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}catch(e){return V.Log.error(e),void V.Callback.callSafe(p,f,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:f.__expression.toString()+": Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}else V.Callback.callSafe(p,f,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND})}else V.Callback.callSafe(p,f,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:f.__expression.toString()+", Cant find control instance with id: '"+r+"'.",domain:"TcHmi.System.Symbol"}})},M.prototype.__writeSymbolTypeTemplateParam=function(m,_,h){var g=this,e=this.__expression.getName(),E=this.__expression.getPath(),p=this.__expression.getPathTokens(),f=D.Services.templateParamSymbolManager.get(e);try{if(f.value instanceof V.SymbolExpression){var r=f.value,t=r.getTag(),o=r.getName(),i=r.getPath(),n="%"+t+"%"+o;null!==i&&(n+=i),p&&0<p.length&&(n+=E),n+="%/"+t+"%";var a=new V.System.Symbol(n);a.writeEx(m,_,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(h,g,{error:V.Errors.NONE}):V.Callback.callSafe(h,g,{error:e.error,details:e.details}),a.destroy(),a=null})}else this.resolveSchema(function(e){if(e.error===V.Errors.NONE){var r=g.__schema,t=tchmi_clone_object(m),o=tchmi_clone_object(f.value),i=tchmi_clone_object(o);if(p&&0<p.length){var n,a=[];if(_)for(var s=0,l=_.length;s<l;s++)a.push(E+_[s]);else a.push(E);var c,u=V.Errors.NONE;if(g.__readSubValue(i,p,function(e){e.error===V.Errors.NONE?n=tchmi_clone_object(e.value):(u=e.error,c=e.details)}),u)return void V.Callback.callSafe(h,g,{error:u,details:c});var d=V.ValueConverter.toSchemaType(t,r);return tchmi_equal(n,d)?void V.Callback.callSafe(h,g,{error:V.Errors.NONE}):void g.__writeSubValue(i,d,p,function(e){e.error===V.Errors.NONE?(f.value=i,V.System.Callback.callSafeCallbacks1Param(f.callbacks,g,{error:V.Errors.NONE,value:tchmi_clone_object(f.value),dirtyPaths:a}),V.Callback.callSafe(h,g,{error:V.Errors.NONE})):V.Callback.callSafe(h,g,{error:e.error,details:e.details})})}return d=V.ValueConverter.toSchemaType(t,r),tchmi_equal(i,d)||(f.value=d,V.System.Callback.callSafeCallbacks1Param(f.callbacks,g,{error:V.Errors.NONE,value:tchmi_clone_object(f.value)})),void V.Callback.callSafe(h,g,{error:V.Errors.NONE})}V.Callback.callSafe(h,g,{error:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,details:{code:V.Errors.E_SYMBOL_RESOLVE_SCHEMA,message:V.Errors[V.Errors.E_SYMBOL_RESOLVE_SCHEMA],reason:g.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}catch(e){return V.Log.error(e),void V.Callback.callSafe(h,g,{error:V.Errors.E_EXCEPTION,details:{code:V.Errors.E_EXCEPTION,message:V.Errors[V.Errors.E_EXCEPTION],reason:g.__expression.toString()+": Exception: '"+e+"'",domain:"TcHmi.System.Symbol"}})}},M.prototype.watch=function(u){function d(){switch(V.Log.debug("[Source=Framework, Module=TcHmi.System.Symbol, Expression="+m.__expression.toString()+"] Unwatching..."),n){case V.SymbolType.Server:case V.SymbolType.Internal:case V.SymbolType.LocalizedText:t&&(t(),t=null);break;case V.SymbolType.Function:t&&(t(),t=null),r&&(r.destroy(),r=null);break;case V.SymbolType.Control:case V.SymbolType.PartialParam:null!==i&&(i(),i=null);break;case V.SymbolType.TemplateParam:var e=m.__expression.getName();D.Services.templateParamSymbolManager.get(e).value instanceof V.SymbolExpression&&(D.Services.templateParamSymbolManager.keepAlive(e)||D.Services.templateParamSymbolManager.remove(e)),t&&(t(),t=null),o&&(o.destroy(),o=null)}}V.Log.debug("[Source=Framework, Module=TcHmi.System.Symbol, Expression="+this.__expression.toString()+"] Watching...");var t,r,o,m=this,i=null,n=this.__expression.getType();if(n===V.SymbolType.Server)t=V.System.Services.serverManager.watch(this.__expression,function(e){t=t||e.destroy,e.error===V.Errors.NONE?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:e.value,destroy:d}):V.Callback.callSafe(u,m,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})});else if(n===V.SymbolType.Internal)t=V.System.Services.internalSymbolManager.watch(this.__expression.getName(),function(e){if(t=t||e.destroy,e.error===V.Errors.NONE){var r=m.__expression.getPathTokens();return r&&0<r.length?void m.__readSubValue(e.value,r,function(e){e.error===V.Errors.NONE?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d}):V.Callback.callSafe(u,m,{error:e.error,details:e.details})}):void V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d})}V.Callback.callSafe(u,m,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})});else if(n===V.SymbolType.LocalizedText)t=V.System.Services.localizationManager.watch(this.__expression.getName(),function(e){if(t=t||e.destroy,e.error===V.Errors.NONE){if(e.error!==V.Errors.NONE)return void V.Callback.callSafe(u,m,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d});var r=m.__expression.getPathTokens();return r&&0<r.length?void V.Callback.callSafe(u,m,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:m.__expression.toString()+': Reading by path is not supported on symbols of type "LocalizedText".',domain:"TcHmi.System.Symbol"},destroy:d}):void V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d})}V.Callback.callSafe(u,m,{error:e.error,destroy:d})});else if(n===V.SymbolType.Function)r=new V.System.FunctionExpression(this.__expression.getContent(),!0),t=r.watch(function(e){if(t=t||e.destroy,e.error===V.Errors.NONE){var r=m.__expression.getPathTokens();return r&&0<r.length?void V.Callback.callSafe(u,m,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:m.__expression.toString()+': Reading by path is not supported on symbols of type "Function".',domain:"TcHmi.System.Symbol"},destroy:d}):void V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d})}V.Callback.callSafe(u,m,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})});else if(n===V.SymbolType.Control){var e=m.__expression.getName();if(!e)return V.Callback.callSafe(u,m,{error:V.Errors.E_INVALID,details:{code:V.Errors.E_INVALID,message:V.Errors[V.Errors.E_INVALID],reason:m.__expression.toString()+", Expression does not contain a valid name token.",domain:"TcHmi.System.Symbol"},destroy:d}),d;var a=tchmi_clone_object(m.__expression.getPathTokens()),s=V.Controls.get(e);if(!s)return V.Callback.callSafe(u,m,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:m.__expression.toString()+": Can't find control instance with name: '"+e+"'.",domain:"TcHmi.System.Symbol"},destroy:d}),d;var l=null,_="";if(a&&0<a.length&&(l=a.shift(),0<a.length&&(_="::"+a.join("::"))),l){var h=V.System.Services.controlManager.getAttributeByPropertyName(s,l);if(!h)return V.Callback.callSafe(u,m,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND],reason:m.__expression.toString()+", Can't find attribute definition for property: '"+l+"' of control: '"+e+"' of type: '"+s.getType()+"'.",domain:"TcHmi.System.Symbol"},destroy:d}),d;if(!h.propertyGetterName)return V.Callback.callSafe(u,m,{error:V.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION],reason:m.__expression.toString()+", Can't find valid 'propertyGetterName' in attribute definition for property: '"+l+"' of control: '"+e+"' of type: '"+s.getType()+"'. Please check Description.json.",domain:"TcHmi.System.Symbol"},destroy:d}),d;i=V.EventProvider.register(e+".onFunctionResultChanged",function(e,r,t){if(r){var o,i=!1;if(t){for(l=0,c=t.length;l<c;l++)if(t[l].propertyName===h.propertyName){if(o=t[l].dirtyPaths,_&&o&&0<o.length)for(var n=0,a=o.length;n<a;n++){var s=o[n];_===s&&(i=!0)}else i=!0;break}}else for(var l=0,c=r.length;l<c;l++)if(r[l]===h.propertyGetterName){i=!0;break}i&&m.read(function(e){return e.error===V.Errors.NONE?void(o?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),dirtyPaths:o,destroy:d}):V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d})):void V.Callback.callSafe(u,m,{error:V.Errors.ERROR,details:{code:V.Errors.ERROR,message:V.Errors[V.Errors.ERROR],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})})}})}this.read(function(e){return e.error===V.Errors.NONE?void V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d}):void V.Callback.callSafe(u,m,{error:V.Errors.ERROR,details:{code:V.Errors.ERROR,message:V.Errors[V.Errors.ERROR],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})})}else if(n===V.SymbolType.PartialParam){var c=this.__expression.getName(),g=c.split("."),E=(l=g.pop(),g.join(".")),p=this.__expression.getPath(),f=(a=this.__expression.getPathTokens(),V.Controls.get(E));if(!f)return V.Callback.callSafe(u,m,{error:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_INSTANCE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_INSTANCE_NOT_FOUND],reason:m.__expression.toString()+", Cant find control instance with id: '"+c+"'.",domain:"TcHmi.System.Symbol"},destroy:d}),d;var S=V.System.Services.controlManager.getAttributeByPropertyName(f,l);if(!S)return V.Callback.callSafe(u,m,{error:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_NOT_FOUND],reason:m.__expression.toString()+", Can't find attribute definition for property: '"+l+"' of control: '"+c+"' of type: '"+f.getType()+"'.",domain:"TcHmi.System.Symbol"},destroy:d}),d;if(!S.propertyGetterName)return V.Callback.callSafe(u,m,{error:V.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION,details:{code:V.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION,message:V.Errors[V.Errors.E_CONTROL_ATTRIBUTE_INVALID_CONFIGURATION],reason:m.__expression.toString()+", Can't find valid 'propertyGetterName' in attribute definition for property: '"+l+"' of control: '"+c+"' of type: '"+f.getType()+"'. Please check Description.json.",domain:"TcHmi.System.Symbol"},destroy:d}),d;i=V.EventProvider.register(E+".onFunctionResultChanged",function(e,r,t){if(r){var o,i=!1;if(t){for(l=0,c=t.length;l<c;l++)if(t[l].propertyName===S.propertyName){if(o=t[l].dirtyPaths,p&&o&&0<o.length)for(var n=0,a=o.length;n<a;n++){var s=o[n];p===s&&(i=!0)}else i=!0;break}}else for(var l=0,c=r.length;l<c;l++)if(r[l]===S.propertyGetterName){i=!0;break}i&&m.read(function(e){return e.error===V.Errors.NONE?void(o?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),dirtyPaths:o,destroy:d}):V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d})):void V.Callback.callSafe(u,m,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})})}});var v=!1;if(a&&0<a.length){var y=V.Type.getSchema(S.type);if(y&&y.frameworkInstanceOf&&"TcHmi.Controls.System.TcHmiControl"===y.frameworkInstanceOf){v=!0;var T=f[S.propertyGetterName].call(f);if(T instanceof V.Controls.System.baseTcHmiControl){var C=T.getId();new V.System.Symbol("%ctrl%"+C+p+"%/ctrl%").watch(function(e){e.error===V.Errors.NONE?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value)}):V.Callback.callSafe(u,m,{error:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,details:{code:V.Errors.E_SYMBOL_SUBSYMBOL_ERROR,message:V.Errors[V.Errors.E_SYMBOL_SUBSYMBOL_ERROR],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0}})})}else V.Callback.callSafe(u,m,{error:V.Errors.E_SYMBOL_INVALID_PATH,details:{code:V.Errors.E_SYMBOL_INVALID_PATH,message:V.Errors[V.Errors.E_SYMBOL_INVALID_PATH],reason:m.__expression.toString()+", Missing control instance for parameter: '"+l+"'.",domain:"TcHmi.System.Symbol"}})}}v||this.read(function(e){e.error===V.Errors.NONE?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d}):V.Callback.callSafe(u,m,{error:e.error,details:{code:V.Errors.ERROR,message:V.Errors[V.Errors.ERROR],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:[e.details]},destroy:d})})}else if(n===V.SymbolType.TemplateParam){var M=this.__expression.getName(),b=this.__expression.getPath(),R=(a=this.__expression.getPathTokens(),D.Services.templateParamSymbolManager.get(M));if(R.value instanceof V.SymbolExpression){R.callbacks.push(u);var N=R.value,w=N.getTag(),O=N.getName(),I=N.getPath(),A="%"+w+"%"+O;null!==I&&(A+=I),a&&0<a.length&&(A+=b),A+="%/"+w+"%",o=new V.System.Symbol(A),t=o.watch(function(e){t=t||e.destroy,e.error===V.Errors.NONE?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d}):V.Callback.callSafe(u,m,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})}),this.read(function(e){e.error===V.Errors.NONE?V.Callback.callSafe(u,m,{error:V.Errors.NONE,value:tchmi_clone_object(e.value),destroy:d}):V.Callback.callSafe(u,m,{error:e.error,details:{code:e.error,message:V.Errors[e.error],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol",errors:e.details?[e.details]:void 0},destroy:d})})}else V.Callback.callSafe(u,m,{error:V.Errors.E_SYMBOL_INVALID_DATA_PROVIDER_ENTRY,details:{code:V.Errors.E_SYMBOL_INVALID_DATA_PROVIDER_ENTRY,message:V.Errors[V.Errors.E_SYMBOL_INVALID_DATA_PROVIDER_ENTRY],reason:m.__expression.toString(),domain:"TcHmi.System.Symbol"},destroy:d})}else V.Callback.callSafe(u,m,{error:V.Errors.E_NOT_SUPPORTED,details:{code:V.Errors.E_NOT_SUPPORTED,message:V.Errors[V.Errors.E_NOT_SUPPORTED],reason:m.__expression.toString()+", SymbolType: '"+n+"' does not support watching.",domain:"TcHmi.System.Symbol"},destroy:d});return d},M.isServerSymbol=function(e){return!!e.getExpression()&&e.getExpression().getType()===V.SymbolType.Server},M.isInternalSymbol=function(e){return!!e.getExpression()&&e.getExpression().getType()===V.SymbolType.Internal},M.isLocalizedTextSymbol=function(e){return!!e.getExpression()&&e.getExpression().getType()===V.SymbolType.LocalizedText},M.isPartialParamSymbol=function(e){return!!e.getExpression()&&e.getExpression().getType()===V.SymbolType.PartialParam},M.isTemplateParamSymbol=function(e){return!!e.getExpression()&&e.getExpression().getType()===V.SymbolType.TemplateParam},M.isFunctionSymbol=function(e){return!!e.getExpression()&&e.getExpression().getType()===V.SymbolType.Function},M.isControlSymbol=function(e){return!!e.getExpression()&&e.getExpression().getType()===V.SymbolType.Control},M.prototype.exists=function(o){this.read(function(e){if(e.error===V.Errors.NONE||e.error!==V.Errors.E_SYMBOL_UNKNOWN)if(M.isServerSymbol(this)){var r=e.response;if(r&&r.commands&&0<r.commands.length){var t=r.commands[0];return t.error&&t.error.code===V.Server.Error.HMI_E_SYMBOL_NOT_MAPPED?void V.Callback.callSafe(o,this,{error:V.Errors.NONE,result:!1}):void V.Callback.callSafe(o,this,{error:V.Errors.NONE,result:!0})}V.Callback.callSafe(o,this,{error:e.error,details:e.details})}else V.Callback.callSafe(o,this,{error:V.Errors.NONE,result:!0});else V.Callback.callSafe(o,this,{error:V.Errors.NONE,result:!1})})},M.__SERVER_SYMBOL_SCHEMA_REF_CACHE={},M);function M(e){if(this.__expression=null,this.__state=l.Invalid,this.__schema=null,this.__destroyTypeDefinitionChanged=null,this.__expression=new V.SymbolExpression(e),this.__expression.getType()===V.SymbolType.Invalid)throw new Error("Expression="+e+" is not a valid symbol expression.");this.__state=l.Ready}D.Symbol=r}(V.System||(V.System={}))}(TcHmi=TcHmi||{}),function(i){var e,r;function t(e){var t=this;this.__functions={},this.__functionsDescription={};var o=i.EventProvider.register("System.onInitializedServices",function(){o();for(var e=0;e<i.System.Caches.registeredFrameworkFunctionDescription.length;e++){var r=i.System.Caches.registeredFrameworkFunctionDescription[e];t.registerFunction(r.name,r.func)}})}e=i.System||(i.System={}),t.prototype.registerFunction=function(e,r){this.__functions[e]&&i.Log.error("[Source=Framework, Module=TcHmi.System.FunctionProvider] Multiple register of hmi functions with the name "+e+" detected."),this.__functions[e]=r},t.prototype.addDescription=function(e,r){null!=r&&void 0!==r.function&&null!==r.function&&(this.__functionsDescription[r.function.name]=r)},t.prototype.isFunctionRegistered=function(e){return void 0!==this.__functions[e]&&null!==this.__functions[e]},t.prototype.getFunction=function(e){return this.__functions[e]},t.prototype.getFunctionDescription=function(e){return this.__functionsDescription[e]},r=t,e.FunctionProvider=r}(TcHmi=TcHmi||{}),function(E){var e,r,t;function o(e){this.__text=null,this.__text=e}e=E.System||(E.System={}),r=e.Parser||(e.Parser={}),o.prototype.loadText=function(e){this.__text=e},o.prototype.__parseExpressionFromString=function(e,r,t){for(var o=r.length,i=e.length,n=0;n<=i;n++)if("%"===e[n]){var a="";if(n+o+2<=i&&(a=e.substr(n,o+2)),a==="%"+r+"%")for(var s=0,l=0,c=e.substr(n+a.length,i-(n+a.length)),u=i-(n+a.length),d=0;d<=u;d++)if("%"===c[d]){var m="";d+o+2<=u&&(m=c.substr(d,o+2));var _="";if(d+o+3<=u&&(_=c.substr(d,o+3)),_==="%/"+r+"%"){if(l===s){var h=e.substr(n,a.length+_.length+d),g=new E.SymbolExpression(h);g.getType()!==E.SymbolType.Invalid&&t.push(g);break}l++}else m==="%"+r+"%"&&s++}}return t},o.prototype.resolveExpressionsBySymbolType=function(e){var r=[],t=null;switch(e){case E.SymbolType.Internal:t="i";break;case E.SymbolType.Server:t="s";break;case E.SymbolType.LocalizedText:t="l";break;case E.SymbolType.PartialParam:t="pp";break;case E.SymbolType.TemplateParam:t="tp";break;case E.SymbolType.Control:t="ctrl";break;case E.SymbolType.Function:t="f";break;default:return r}return null===t||null===this.__text||""===this.__text||(r=this.__parseExpressionFromString(this.__text,t,r)).sort(function(e,r){var t=e.toString().length,o=r.toString().length;return o<t?-1:t<o?1:0}),r},o.prototype.resolveExpressions=function(){var e=[];if(null===this.__text||0===this.__text.length)return e;for(var r=["i","s","l","pp","tp","ctrl","f"],t=0,o=r.length;t<o;t++)e=this.__parseExpressionFromString(this.__text,r[t],e);return e.sort(function(e,r){return e.toString().length>r.toString().length?-1:e.toString().length<r.toString().length?1:0}),e},t=o,r.SymbolExpressionParser=t}(TcHmi=TcHmi||{}),function(l){!function(e){var o,r;(r=o=e.ScaleMode||(e.ScaleMode={}))[r.None=0]="None",r[r.ScaleToFit=1]="ScaleToFit",r[r.ScaleToFitWidth=2]="ScaleToFitWidth",r[r.ScaleToFitHeight=3]="ScaleToFitHeight",r[r.ScaleToFill=4]="ScaleToFill";var t=(i.prototype.__onWindowResized=function(){var e=this;return function(){e.__scale()}},i.prototype.__onViewDestroyed=function(){var t=this;return function(e,r){t.__view===r&&(l.System.SharedResources.jqBody.children().detach(),null!==t.__onViewResizedEventDestroyEvent&&(t.__onViewResizedEventDestroyEvent(),t.__onViewResizedEventDestroyEvent=null),null!==t.__onViewDestroyedEventDestroyEvent&&(t.__onViewDestroyedEventDestroyEvent(),t.__onViewDestroyedEventDestroyEvent=null),t.__view=null,t.__viewUrl=null)}},i.prototype.__onViewResized=function(){var t=this;return function(e,r){t.__scaleMode!==o.None&&t.__scale(),l.EventProvider.raise("System.onViewResized",r)}},i.prototype.__scale=function(){this.__animationFrameTimeId||window.requestAnimationFrame(function(){l.System.Services.viewManager.__doesScaling()})},i.prototype.__doesScaling=function(){if(!(this.__animationFrameTimeId=0)!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&void 0!==this.__view&&null!==this.__view)switch(this.__scaleMode){case o.ScaleToFit:var e=l.System.SharedResources.jqBody.width()/this.__view.getElement().width(),r=(t=l.System.SharedResources.jqBody.height()/this.__view.getElement().height())<e?t:e;l.StyleProvider.setSimpleElementStyle(this.__view.getElement(),{"-webkit-transform":"scale("+r+")",transform:"scale("+r+")","-webkit-transform-origin":"0 0","transform-origin":"0 0"});break;case o.ScaleToFitWidth:r=l.System.SharedResources.jqBody.width()/this.__view.getElement().width(),l.StyleProvider.setSimpleElementStyle(this.__view.getElement(),{"-webkit-transform":"scale("+r+")",transform:"scale("+r+")","-webkit-transform-origin":"0 0","transform-origin":"0 0"});break;case o.ScaleToFitHeight:r=l.System.SharedResources.jqBody.height()/this.__view.getElement().height(),l.StyleProvider.setSimpleElementStyle(this.__view.getElement(),{"-webkit-transform":"scale("+r+")",transform:"scale("+r+")","-webkit-transform-origin":"0 0","transform-origin":"0 0"});break;case o.ScaleToFill:e=l.System.SharedResources.jqBody.width()/this.__view.getElement().width();var t=l.System.SharedResources.jqBody.height()/this.__view.getElement().height();l.StyleProvider.setSimpleElementStyle(this.__view.getElement(),{"-webkit-transform":"scale("+e+","+t+")",transform:"scale("+e+","+t+")","-webkit-transform-origin":"0 0","transform-origin":"0 0"});break;case o.None:l.StyleProvider.setSimpleElementStyle(this.__view.getElement(),{"-webkit-transform":"",transform:"","-webkit-transform-origin":"","transform-origin":""})}},i.prototype.setScaleMode=function(e){var r=l.System.ScaleMode.None;switch(e){case"ScaleToFit":r=l.System.ScaleMode.ScaleToFit;break;case"ScaleToFitWidth":r=l.System.ScaleMode.ScaleToFitWidth;break;case"ScaleToFitHeight":r=l.System.ScaleMode.ScaleToFitHeight;break;case"ScaleToFill":r=l.System.ScaleMode.ScaleToFill}this.__scaleMode=r,this.__scale()},i.prototype.getView=function(){return this.__view},i.prototype.loadView=function(e,n){if(void 0===n&&(n=null),!0!==this.__pending){var r=tchmi_path(e);if(this.__viewUrl!==r){function t(e,r){var t=$(r),o=t[0].id,i=l.Controls.get(o);if(null==i&&(i=e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL?l.System.Services.controlManager.compile(t.attr("data-tchmi-partial-url",e).attr("data-tchmi-creator-partial-key",TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)):l.System.Services.controlManager.compile(t.attr("data-tchmi-partial-url",e))),null==i)return a.__pending=!1,void l.Callback.callSafe(n,a,{error:l.Errors.ERROR,details:{code:l.Errors.ERROR,message:l.Errors[l.Errors.ERROR],reason:"Compiling "+e+" failed.",domain:"TcHmi.System.ViewManager"}});a.__view=i,a.__viewUrl=e,a.__onViewResizedEventDestroyEvent=l.EventProvider.register(a.__view.getId()+".onResized",a.__onViewResized()),a.__onViewDestroyedEventDestroyEvent=l.EventProvider.register(a.__view.getId()+".onDestroyed",a.__onViewDestroyed()),"__TcHmiMain"===l.System.Services.dialogManager.getDialogOwner()&&l.System.Services.dialogManager.showDialog("__TcHmiMain",!1),null===l.System.Services.dialogManager.getDialogOwner()?(l.System.SharedResources.jqBody.children().detach(),!0===TCHMI_ENABLE_DESIGNER_MODE&&!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER?l.System.SharedResources.jqBody.append(l.System.Services.Engineering.designerModeManager.rootControlManager.getViewPortSimulator().empty().append(a.__view.getElement())):l.System.SharedResources.jqBody.append(a.__view.getElement()),a.__scale(),a.__pending=!1,l.Callback.callSafe(n,a,{error:l.Errors.NONE})):l.Callback.callSafe(n,a,{error:l.Errors.ERROR,details:{code:l.Errors.ERROR,message:l.Errors[l.Errors.ERROR],reason:"Internal error while loading "+e+".",domain:"TcHmi.System.ViewManager"}})}this.__pending=!0,void 0!==this.__view&&null!==this.__view&&(l.System.SharedResources.jqBody.children().detach(),null!==this.__onViewResizedEventDestroyEvent&&(this.__onViewResizedEventDestroyEvent(),this.__onViewResizedEventDestroyEvent=null),null!==this.__onViewDestroyedEventDestroyEvent&&(this.__onViewDestroyedEventDestroyEvent(),this.__onViewDestroyedEventDestroyEvent=null),this.__view.destroy(),this.__view=null,this.__viewUrl=null);var a=this,o=l.System.Caches.partialMarkupCache.get(r);if(null!=o)t(r,o),o=null;else{var i=new XMLHttpRequest;i.open("GET",r+(TCHMI_ENABLE_DESIGNER_MODE?"?preventcache="+Math.random():""));var s=function(e){a.__pending=!1,l.Callback.callSafe(n,a,{error:l.Errors.E_PARAMETER_INVALID,details:{code:l.Errors.E_PARAMETER_INVALID,message:l.Errors[l.Errors.E_PARAMETER_INVALID],reason:"Loading "+r+" failed: "+i.statusText,domain:"TcHmi.System.ViewManager"}})};i.addEventListener("load",function(e){200===i.status?t(r,i.responseText):s(e)}),i.addEventListener("error",s),i.send()}}else l.Callback.callSafe(n,this,{error:l.Errors.NONE})}else l.Callback.callSafe(n,this,{error:l.Errors.ERROR,details:{code:l.Errors.ERROR,message:l.Errors[l.Errors.ERROR],reason:"Loading "+e+" failed because we have already another load pending.",domain:"TcHmi.System.ViewManager"}})},i.prototype.loadViewObject=function(e,r){void 0===r&&(r=null),!0!==this.__pending?(this.__pending=!0,void 0!==this.__view&&null!==this.__view&&(l.System.SharedResources.jqBody.children().detach(),null!==this.__onViewResizedEventDestroyEvent&&(this.__onViewResizedEventDestroyEvent(),this.__onViewResizedEventDestroyEvent=null),null!==this.__onViewDestroyedEventDestroyEvent&&(this.__onViewDestroyedEventDestroyEvent(),this.__onViewDestroyedEventDestroyEvent=null),this.__view.destroy(),this.__view=null,this.__viewUrl=null),this.__view=e,this.__viewUrl=null,this.__onViewResizedEventDestroyEvent=l.EventProvider.register(this.__view.getId()+".onResized",this.__onViewResized()),this.__onViewDestroyedEventDestroyEvent=l.EventProvider.register(this.__view.getId()+".onDestroyed",this.__onViewDestroyed()),l.System.SharedResources.jqBody.children().detach(),!0===TCHMI_ENABLE_DESIGNER_MODE&&!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER?l.System.SharedResources.jqBody.append(l.System.Services.Engineering.designerModeManager.rootControlManager.getViewPortSimulator().empty().append(this.__view.getElement())):l.System.SharedResources.jqBody.append(this.__view.getElement()),this.__scale(),this.__pending=!1,l.Callback.callSafe(r,this,{error:l.Errors.NONE})):"function"==typeof r&&r.call(this,{error:l.Errors.ERROR})},i);function i(e){this.__scaleMode=o.None,this.__view=null,this.__animationFrameTimeId=0,this.__viewUrl=null,this.__onViewResizedEventDestroyEvent=null,this.__onViewDestroyedEventDestroyEvent=null,this.__pending=!1,window.addEventListener("resize",this.__onWindowResized())}e.ViewManager=t}(l.System||(l.System={}))}(TcHmi=TcHmi||{}),function(M){var y,e;function r(e){var c=this;this.__activeThemes="Base",this.__registered_themedValueFiles_fromControl=new Map,this.__registered_styleCheets_fromControl=new Map,this.__control_themeFiles=new Map,this.__project_themeFiles=new Map,this.retriggerUserControls=function(){var t=[];M.System.Services.controlManager.getControlsCache().forEach(function(e,r){"tchmi-user-control-host"===e.getType()&&t.push(e)}),c.__triggerControlsWithImplicitValues(t)},this.__watchAttributeDefaults=new Map,this.__destroyFunctionResultChanged=new Map,this.__settingThemeValueInProgess=!1,this.__onControlDestroyed=function(e,r){if(c.__watchAttributeDefaults.has(r)){c.__watchAttributeDefaults.delete(r);var t=c.__destroyFunctionResultChanged.get(r);t&&(t(),c.__destroyFunctionResultChanged.delete(r))}},this.__onControlClassNamesChanged=function(e,r){var t=c.__project_themeFiles.get(c.__activeThemes);if(t){if(r.oldClassNames)for(var o=0,i=r.oldClassNames;o<i.length;o++){var n=i[o];if(t.controlClassValues&&t.controlClassValues[n])return void c.__triggerControlsWithImplicitValues([r.control])}for(var a=0,s=r.newClassName;a<s.length;a++){var l=s[a];if(t.controlClassValues&&t.controlClassValues[l])return void c.__triggerControlsWithImplicitValues([r.control])}}},M.EventProvider.register("System.onControlDestroyed",this.__onControlDestroyed),M.EventProvider.register("System.onControlClassNamesChanged",this.__onControlClassNamesChanged),M.EventProvider.register("System.onUserControlConfigCreated",this.retriggerUserControls),M.EventProvider.register("System.onUserControlConfigChanged",this.retriggerUserControls),M.EventProvider.register("System.onUserControlConfigRemoved",this.retriggerUserControls),this.__clearCaches(),M.System.config.themes||(M.System.config.themes={}),M.System.config.activeTheme&&this.setTheme(M.System.config.activeTheme,!1);var r=document.fonts;r&&r.addEventListener&&r.addEventListener("loadingdone",function(){M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] System has loaded another font file. Triggering a onThemeDataChanged."),M.EventProvider.raise("onThemeDataChanged")})}y=M.System||(M.System={}),r.prototype.__clearCaches=function(){this.__control_themeFiles.clear(),this.__project_themeFiles.clear()},r.prototype.getTheme=function(){return this.__activeThemes},r.prototype.setTheme=function(e,r){return"string"!=typeof e||""===e?M.Errors.E_PARAMETER_INVALID:(tchmi_equal(this.__activeThemes,e)||(this.__activeThemes=e,r&&this.processActiveTheme()),M.Errors.NONE)},r.prototype.registerControlThemeFiles=function(e){var r=e.name,t=e.themes;if(t)for(var o in t)for(var i=0;i<t[o].resources.length;i++){var n=t[o].resources[i];if(n.name){if("ThemedValues"===n.type)(a=this.__registered_themedValueFiles_fromControl.get(o))||(a=new Map,this.__registered_themedValueFiles_fromControl.set(o,a)),(s=a.get(r))||(s=[],a.set(r,s)),s.push(n);else if("Stylesheet"===n.type){var a,s;(a=this.__registered_styleCheets_fromControl.get(o))||(a=new Map,this.__registered_styleCheets_fromControl.set(o,a)),(s=a.get(r))||(s=[],a.set(r,s)),s.push(n)}}else M.Log.warn("[Source=Framework, Module=TcHmi.System.ThemeManager] No file path found for theme entry  ("+o+") and control ("+r+") in Description.json:"),M.Log.warn(n)}},r.prototype.processActiveTheme=function(){function l(e){--d<=0&&(c.__triggerControlsWithImplicitValues(null),M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] System has loaded and parsed all async files. Triggering a control resize check and event onThemeDataChanged."),M.System.Services.controlManager.checkControlGeometry(),M.EventProvider.raise("onThemeDataChanged"))}var c=this,u=!1,d=0;for(var e in M.Engineering.ErrorPane.remove("ThemeManager_multipleThemes"),M.System.config.themes)if(this.__activeThemes===e)for(var r="",t=0;t<M.System.config.themes[e].resources.length;t++)if("Stylesheet"!==(p=M.System.config.themes[e].resources[t]).type)if("ThemedValues"===p.type)if(p.name){if(r){M.Engineering.ErrorPane.add("ThemeManager_multipleThemes","Only one ThemedValues entry per theme ("+e+") allowed in tchmiconfig.json. Only "+r+" will be used.",M.Engineering.ErrorPane.MessageType.Error);break}r=p.name;var o=this.__project_themeFiles.get(e);null!==o&&(void 0===o?(this.__project_themeFiles.set(e,null),function(t,o){var i=new XMLHttpRequest;function e(e){c.__project_themeFiles.delete(t),0===i.status||M.Log.warn("Failed to load "+o),l()}i.addEventListener("load",function(e){if(200!==i.status)c.__project_themeFiles.delete(t),M.Log.warn("[Source=Framework, Module=TcHmi.System.ThemeManager] Loading "+o+" failed: "+i.statusText);else{var r=M.ValueConverter.toObject(i.responseText,null);null!==r?(c.__project_themeFiles.set(t,r),M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] Fetched and parsed "+o)):(c.__project_themeFiles.delete(t),M.Log.warn("[Source=Framework, Module=TcHmi.System.ThemeManager] Failed to parse "+o+". Change log verbosity to debug to get further information about the object."),M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] "+i.responseText))}l()}),i.addEventListener("error",e),i.addEventListener("abort",e),i.addEventListener("timeout",e),i.open("GET",tchmi_path(o)),i.send(),d++,M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] Fetching "+o+" async.")}(e,p.name)):u=!0)}else M.Log.error("[Source=Framework, Module=TcHmi.System.ThemeManager] Entry missing name property in tchmiconfig.json. Change log verbosity to debug to get further information about the object."),M.Log.debug(p);else M.Log.error("[Source=Framework, Module=TcHmi.System.ThemeManager] Type value of entry invalid in tchmiconfig.json (has to be ThemedValues or Stylesheet). Change log verbosity to debug to get further information about the object."),M.Log.debug(p);var i=[this.__activeThemes];"Base"!==this.__activeThemes&&i.push("Base"),this.__registered_themedValueFiles_fromControl.forEach(function(e,s){-1!==i.indexOf(s)&&e.forEach(function(e,r){if(M.System.Caches.registeredControls.get(r)&&M.System.Caches.registeredControls.get(r).directory)for(var t=!1,o=0;o<e.length;o++){var i=e[o],n=c.__control_themeFiles.get(s);if(n||(n=new Map,c.__control_themeFiles.set(s,n)),t){M.Log.error("[Source=Framework, Module=TcHmi.System.ThemeManager] Only one ThemedValues entry per theme ("+s+") and control ("+r+") allowed in Description.json."),M.Log.debug(c.__registered_themedValueFiles_fromControl.get(s).get(r));break}t=!0;var a=n.get(r);null!==a&&(void 0===a?(n.set(r,null),function(t,o,i){var n=new XMLHttpRequest;function e(e){c.__control_themeFiles.get(t).delete(o),0===n.status||M.Log.warn("[Source=Framework, Module=TcHmi.System.ThemeManager] Failed to load "+i),l()}n.addEventListener("load",function(e){if(200!==n.status)c.__control_themeFiles.get(t).delete(o),M.Log.warn("[Source=Framework, Module=TcHmi.System.ThemeManager] Loading "+i+" failed: "+n.statusText);else{var r=M.ValueConverter.toObject(n.responseText);null!==r?(c.__control_themeFiles.get(t).set(o,r),M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] Fetched and parsed "+i)):(c.__control_themeFiles.get(t).delete(o),M.Log.warn("[Source=Framework, Module=TcHmi.System.ThemeManager] Failed to parse "+i+". Change log verbosity to debug to get further information about the object."),M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] "+n.responseText))}l()}),n.addEventListener("error",e),n.addEventListener("abort",e),n.addEventListener("timeout",e),n.open("GET",tchmi_path(M.System.config.basePath+"/Controls/"+M.System.Caches.registeredControls.get(o).directory+"/"+i)),n.send(),d++,M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] Fetching "+i+" async.")}(s,r,i.name)):u=!0)}else M.Log.error("[Source=Framework, Module=TcHmi.System.ThemeManager] Did not find "+r+" in control type cache. Skipping...")})});for(var n=document.head.querySelectorAll("link[data-tchmi-from-theme]"),a=0;a<n.length;a++)(T=n[a]).parentElement.removeChild(T),M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] Removing CSS styles from "+T.getAttribute("href")+".");var s=[],m=function(e){if(M.System.Caches.registeredControls.has(e.controlType)&&M.System.Caches.registeredControls.get(e.controlType).directory){!function(e){if(!M.System.config.themes[c.__activeThemes]||!M.System.config.themes[c.__activeThemes].replacesThemeForControls||-1===M.System.config.themes[c.__activeThemes].replacesThemeForControls.indexOf(e)){var r=[],t=c.__activeThemes,o=c.__registered_styleCheets_fromControl.get(c.__activeThemes),i=o?o.get(e):void 0;if(i)r=i;else{if(!c.__registered_styleCheets_fromControl.has("Base")||!c.__registered_styleCheets_fromControl.get("Base").has(e))return;r=c.__registered_styleCheets_fromControl.get("Base").get(e),t="Base"}for(var n=0;n<r.length;n++)s.push({theme:t,url:tchmi_path(M.System.config.basePath+"/Controls/"+M.System.Caches.registeredControls.get(e).directory+"/"+r[n].name)})}}(e.controlType);for(var r=0;r<e.children.length;r++){var t=e.children[r];m(t)}}else M.Log.error("[Source=Framework, Module=TcHmi.System.ThemeManager] Did not find "+e.controlType+" in control type cache. Skipping...")},_=M.System.Services.controlManager.getInheritanceTree();if(_&&m(_),M.System.config.dependencyFiles)for(var h=0;h<M.System.config.dependencyFiles.length;h++){var g=M.System.config.dependencyFiles[h];"Stylesheet"===g.type&&s.push({theme:"theme-independent-project-file",url:tchmi_path(g.name)})}for(var E in M.System.config.themes)if(this.__activeThemes===E)for(t=0;t<M.System.config.themes[E].resources.length;t++){var p;"Stylesheet"===(p=M.System.config.themes[E].resources[t]).type&&(p.name?s.push({theme:E,url:tchmi_path(p.name)}):(M.Log.error("[Source=Framework, Module=TcHmi.System.ThemeManager] Entry missing name property in tchmiconfig.json. Change log verbosity to debug to get further information about the object."),M.Log.debug(p)))}for(var f=0;f<s.length;f++){var S=!0,v=s[f],y=document.head.getElementsByTagName("link");for(a=0;a<y.length;a++){var T;if(tchmi_path((T=y[a]).getAttribute("href"))===v.url){S=!1,T.dataset.tchmiFromTheme||(T.dataset.tchmiFromTheme=v.theme,M.Log.warn("[Source=Framework, Module=TcHmi.System.ThemeManager] CSS file "+v.url+" is already loaded. Adjusted include order.")),document.head.appendChild(T);break}}if(S){var C=document.createElement("link");C.rel="stylesheet",C.type="text/css",C.href=v.url,C.dataset.tchmiFromTheme=v.theme,C.addEventListener("load",l),C.addEventListener("error",l),document.head.appendChild(C),d++,M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] Adding CSS styles from "+v.url+".")}}d<=0&&(u&&this.__triggerControlsWithImplicitValues(null),M.Log.debug("[Source=Framework, Module=TcHmi.System.ThemeManager] System has loaded and parsed all sync files. Triggering a onThemeDataChanged."),M.EventProvider.raise("onThemeDataChanged"))},r.prototype.__triggerControlsWithImplicitValues=function(e){function t(e,i){e.forEach(function(e,r,t){n.__settingThemeValueInProgess=!0;var o=M.System.Services.controlManager.setControlProperty(i,r,null);o&&o.code!==M.Errors.NONE&&M.Log.error("[Source=Framework, Module=TcHmi.System.ThemeManager] "+M.Log.buildMessage(o)),n.__settingThemeValueInProgess=!1})}var n=this;if(null===e)this.__watchAttributeDefaults.forEach(function(e,r){t(e,r)});else for(var r=0,o=e;r<o.length;r++){var i=o[r],a=this.__watchAttributeDefaults.get(i);a&&t(a,i)}},r.prototype.getDefaultPropertyValue=function(e,r){var t=null,o=this.__project_themeFiles.get(this.__activeThemes),i=e.getClassNames();if(i&&0<i.length){for(var n=0,a=i;n<a.length;n++){var s=a[n];o&&o.controlClassValues&&o.controlClassValues[s]&&void 0!==o.controlClassValues[s].attributes[r]&&null!==o.controlClassValues[s].attributes[r]&&(t=o.controlClassValues[s].attributes[r])}if(null!==t)return{error:M.Errors.NONE,origin:"project",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)}}var l=e.getType();if(o&&o.controlTypeValues&&o.controlTypeValues[l]&&void 0!==o.controlTypeValues[l].attributes[r]&&null!==o.controlTypeValues[l].attributes[r])return t=o.controlTypeValues[l].attributes[r],{error:M.Errors.NONE,origin:"project",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)};if(!M.System.config.themes[this.__activeThemes]||!M.System.config.themes[this.__activeThemes].replacesThemeForControls||-1===M.System.config.themes[this.__activeThemes].replacesThemeForControls.indexOf(l)){var c=[this.__activeThemes];"Base"!==this.__activeThemes&&c.push("Base");for(var u=0,d=c;u<d.length;u++){var m=d[u],_=this.__control_themeFiles.get(m),h=_?_.get(l):void 0;if(h&&h.controlTypeValues&&h.controlTypeValues[l]&&h.controlTypeValues[l].attributes&&void 0!==h.controlTypeValues[l].attributes[r]&&null!==h.controlTypeValues[l].attributes[r])return t=h.controlTypeValues[l].attributes[r],{error:M.Errors.NONE,origin:"control",originThemeName:m,value:tchmi_clone_object(t)}}}var g=M.System.Services.controlManager.getDescriptionAttributeByPropertyName(l,r);if(g){if(void 0!==g.defaultValueInternal)return t=g.defaultValueInternal,{error:M.Errors.NONE,origin:"control",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)};if(S=M.Type.getSchema(g.type))return t=M.Type.Schema.resolveDefault(S),{error:M.Errors.NONE,origin:"control",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)}}if("tchmi-user-control-host"===l){var E=e.getTargetUserControl();if(E){var p=tchmi_path(E.replace(".usercontrol",".usercontrol.json")),f=y.Services.controlManager.getUserControlConfigAttributeByPropertyName(p,r);if(f&&void 0!==f.defaultValueInternal)return t=f.defaultValueInternal,{error:M.Errors.NONE,origin:"control",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)};if(f){var S,v=f.type;if(v&&(S=M.Type.getSchema(v)))return t=M.Type.Schema.resolveDefault(S),{error:M.Errors.NONE,origin:"control",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)}}}}return{error:M.Errors.NONE,origin:"control",originThemeName:this.__activeThemes,value:null}},r.prototype.getThemeResource=function(e,r){var t=null,o=this.__project_themeFiles.get(this.__activeThemes),i=e.getClassNames();if(i&&0<i.length){for(var n=0,a=i;n<a.length;n++){var s=a[n];o&&o.controlClassValues&&o.controlClassValues[s]&&void 0!==o.controlClassValues[s].themedResources[r]&&null!==o.controlClassValues[s].themedResources[r]&&(t=o.controlClassValues[s].themedResources[r])}if(null!==t)return{error:M.Errors.NONE,origin:"project",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)}}var l=e.getType();if(o&&o.controlTypeValues&&o.controlTypeValues[l]&&o.controlTypeValues[l].themedResources&&void 0!==o.controlTypeValues[l].themedResources[r]&&null!==o.controlTypeValues[l].themedResources[r])return t=o.controlTypeValues[l].themedResources[r],{error:M.Errors.NONE,origin:"project",originThemeName:this.__activeThemes,value:tchmi_clone_object(t)};if(M.System.config.themes[this.__activeThemes]&&M.System.config.themes[this.__activeThemes].replacesThemeForControls&&-1!==M.System.config.themes[this.__activeThemes].replacesThemeForControls.indexOf(l))return{error:M.Errors.NONE,origin:"project",originThemeName:this.__activeThemes,value:null};var c=[this.__activeThemes];"Base"!==this.__activeThemes&&c.push("Base");for(var u=0,d=c;u<d.length;u++){var m=d[u],_=this.__control_themeFiles.get(m),h=_?_.get(l):void 0;if(h&&h.controlTypeValues&&h.controlTypeValues[l]&&h.controlTypeValues[l].themedResources&&void 0!==h.controlTypeValues[l].themedResources[r]&&null!==h.controlTypeValues[l].themedResources[r])return t=h.controlTypeValues[l].themedResources[r],{error:M.Errors.NONE,origin:"control",originThemeName:m,value:tchmi_clone_object(t)}}return{error:M.Errors.ERROR,origin:"control",originThemeName:this.__activeThemes,value:null}},r.prototype.watchAttributeDefaults=function(e,r){var t=this.__watchAttributeDefaults.get(e);t||(t=new Map,this.__watchAttributeDefaults.set(e,t)),t.set(r,!0)},r.prototype.startAttributeSetterWatcher=function(e){this.__watchAttributeDefaults.has(e)&&(this.__destroyFunctionResultChanged.has(e)||this.__destroyFunctionResultChanged.set(e,M.EventProvider.register(e.getId()+".onFunctionResultChanged",this.__handleFunctionResultChanged(e))))},r.prototype.unwatchAttributeDefaults=function(e,r){var t=this.__watchAttributeDefaults.get(e);if(t&&t.delete(r)&&0===t.size){this.__watchAttributeDefaults.delete(e);var o=this.__destroyFunctionResultChanged.get(e);o&&(o(),this.__destroyFunctionResultChanged.delete(e))}},r.prototype.__handleFunctionResultChanged=function(s){var l=this;return function(e,r){if(!l.__settingThemeValueInProgess)for(var t=s.getType(),o=0,i=r;o<i.length;o++){var n=i[o],a=y.Services.controlManager.getDescriptionAttributeByPropertyGetterName(t,n);a&&!a.readOnly&&l.unwatchAttributeDefaults(s,a.propertyName)}}},e=r,y.ThemeManager=e}(TcHmi=TcHmi||{}),function(S){var e,r;function t(e){var f=this;if(this.__optionsList=new Map,this.__detachEventDestroy=null,this.__abortClick=function(e){if(e.target===f.__masterDiv.lastElementChild&&f.__masterDiv.lastElementChild){var r=f.__masterDiv.lastElementChild.lastElementChild,t=f.__optionsList.get(r);t&&!1!==t.closeOnBackground&&f.remove(t.origin,$(r),!0)}},this.__checkDetachedControls=function(e,t){f.__optionsList.forEach(function(e,r){e.origin===t&&f.remove(t,$(r),!0)})},this.__updateAllChildPosition=function(e,r){if(e&&Array.isArray(e)){for(var o=!1,t=new Map,i=0,n=e.length;i<n;i++){var a=e[i],s=a.target;if(s instanceof HTMLElement)if("attributes"===a.type){if("style"!==a.attributeName){o=!0,t.clear();break}t.has(s)||t.set(s,a.oldValue)}else if("childList"===a.type){o=!0,t.clear();break}}if(!1===o&&t.forEach(function(e,r,t){e!==r.getAttribute("style")&&(o=!0),t.clear()}),!1===o)return}var l=[],c=f.__masterDiv.children;for(i=0;i<c.length;i++)if(c[i]instanceof HTMLElement){var u=c[i],d=u.firstElementChild,m=f.__optionsList.get(d);if(m){var _=!0===m.centerVertical||!0===m.centerHorizontal;if(_||m.resizeCb){var h=!1;if(_){var g=u.firstElementChild.getBoundingClientRect();if(!0===m.centerVertical){var E=(document.documentElement.clientHeight-g.height)/2;d.style.top!==E+"px"&&(d.style.top=E+"px",h=!0)}if(!0===m.centerHorizontal){var p=(document.documentElement.clientWidth-g.width)/2;d.style.left!==p+"px"&&(d.style.left=p+"px",h=!0)}}!1!=_&&!0!==h||!m.resizeCb||l.push({callback:m.resizeCb,thisArg:m.origin,args:{error:S.Errors.NONE,element:$(d),parentPixelSize:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}})}}}for(i=0;i<l.length;i++)S.Callback.callSafe(l[i].callback,l[i].thisArg,l[i].args)},this.__dimLastContainer=function(){for(var e,r=f.__masterDiv.children,t=0;t<r.length;t++)if(r[t].firstElementChild instanceof HTMLElement){var o=r[t];o.classList.remove("tchmi-topmostlayer-non-modal");var i=f.__optionsList.get(o.firstElementChild);i&&(!1!==i.dimBackground&&(e=o),o.style.backgroundColor="",!1===i.modal&&o.classList.add("tchmi-topmostlayer-non-modal"))}e&&(e.style.backgroundColor="rgba(0, 0, 0, 0.5)")},this.__masterDiv=document.createElement("div"),this.__masterDiv.id="tchmi-system-top-layer-master",this.__masterDiv.style.zIndex="5000",this.__masterDiv.style.position="absolute",this.__masterDiv.addEventListener("click",this.__abortClick,!1),"function"==typeof MutationObserver||"object"==typeof MutationObserver)this.__mutationObserver=new MutationObserver(this.__updateAllChildPosition);else if("function"==typeof e){var r={servicesName:"TopMostLayer",error:S.Errors.E_NOT_SUPPORTED,dialogManagerMessage:"Browser support for MutationObserver missing."};e.call(null,r)}}e=S.System||(S.System={}),t.prototype.add=function(e,r,t){if(!r)return!1;if(1!==r.length)return!1;var o=r[0];if(!(o instanceof HTMLElement))return!1;if(o.hasAttribute("data-tchmi-type"))return!1;if(this.__optionsList.has(o))return!1;o.classList.add("tchmi-in-topmostlayer");var i=document.createElement("div");if(i.classList.add("tchmi-system-topmostlayer-container"),i.style.position="fixed",i.style.width="100%",i.style.height="100%",i.style.overscrollBehavior="contain",i.appendChild(o),this.__masterDiv.appendChild(i),t){var n=tchmi_clone_object(t);this.__optionsList.set(o,n),n.origin=e,n.styleBackup={},!0!==n.centerVertical&&!0!==n.centerHorizontal||(!0===n.centerHorizontal&&(n.styleBackup.left=o.style.left),!0===n.centerVertical&&(n.styleBackup.top=o.style.top),n.styleBackup.position=o.style.position,o.style.position="absolute",this.__mutationObserver.observe(o,{attributes:!0,attributeFilter:["style","class","id"],attributeOldValue:!0,childList:!0,subtree:!0}))}return this.__dimLastContainer(),this.__masterDiv.parentElement||(window.addEventListener("resize",this.__updateAllChildPosition,{passive:!0,capture:!1}),this.__detachEventDestroy=S.EventProvider.register("System.onControlDetached",this.__checkDetachedControls),document.body.appendChild(this.__masterDiv)),this.__updateAllChildPosition(),!0},t.prototype.remove=function(e,r,t){if(!r)return r;if(1!==r.length)return r;var o=r[0],i=this.__optionsList.get(o);if(!i)return r;o.classList.remove("tchmi-in-topmostlayer");var n=o.parentElement;this.__masterDiv.removeChild(n),n.removeChild(o),this.__masterDiv.firstElementChild||(document.body.removeChild(this.__masterDiv),window.removeEventListener("resize",this.__updateAllChildPosition,{passive:!0,capture:!1}),this.__detachEventDestroy&&(this.__detachEventDestroy(),this.__detachEventDestroy=null),this.__mutationObserver.disconnect());var a={error:S.Errors.NONE,element:r,canceled:t};return!0!==i.centerVertical&&!0!==i.centerHorizontal||(o.style.position=i.styleBackup.position,!0===i.centerHorizontal&&(o.style.left=i.styleBackup.left),!0===i.centerVertical&&(o.style.top=i.styleBackup.top)),this.__optionsList.delete(o),i.removeCb&&S.Callback.callSafe(i.removeCb,i.origin,a),this.__dimLastContainer(),r},r=t,e.TopMostLayer=r}(TcHmi=TcHmi||{}),function(r){var e,t,o;function i(e){this.__cmd=e,this.__result=r.Errors.NONE,this.sendSynchronousConfirmation=!0}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),i.prototype.confirmRequest=function(e){new r.System.Engineering.SyncCmdToCreatorConfirmation({name:"Confirmation",confirmId:e,errorCode:this.__result,replyTo:null}).send()},o=i,t.SyncCmdToFramework=o}(TcHmi=TcHmi||{}),function(i){var e,n,r,t;function o(e){return r.call(this,e)||this}e=i.System||(i.System={}),n=e.Engineering||(e.Engineering={}),r=n.SyncCmdToFramework,__extends(o,r),o.prototype.run=function(){if(!1!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&tchmi_path(this.__cmd.targetPartial)===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL){for(var e=this.__cmd.controls,r=0,t=e.length;r<t;r++){var o=i.Controls.get(e[r]);if(!o){i.Log.error('[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkRemoveControls] Failed to remove control "'+e[r]+'": Not found in control cache.\n');break}null!==o.getParent()&&o.getParent().getPcElement().children("#"+tchmi_css_escape_selector(o.getId())).remove(),i.Engineering.ErrorPane.remove(o.getId()+"requiredAttributeTouched"),o.destroy()}new n.SyncCmdToCreatorSyncControls({name:"SyncControls",targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,controls:[],replyTo:null}).send()}},t=o,n.SyncCmdToFrameworkRemoveControls=t}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){var r=o.call(this,e)||this;return r.sendSynchronousConfirmation=!1,r}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){},i=n,t.SyncCmdToFrameworkConfirmation=i}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){return o.call(this,e)||this}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.System.Services.Engineering.designerModeManager.setControlLocked(this.__cmd.targetControl,this.__cmd.locked)},i=n,t.SyncCmdToFrameworkControlLocked=i}(TcHmi=TcHmi||{}),function(n){var a,e,t,r;function o(e){var r=t.call(this,e)||this;return r.__controlsToSelect=[],r.__createsPending=0,r}a=n.System||(n.System={}),e=a.Engineering||(a.Engineering={}),t=e.SyncCmdToFramework,__extends(o,t),o.prototype.createCallback=function(){var i=this;return function(e){if(i.__createsPending--,i.__createsPending<=0&&!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&0<i.__controlsToSelect.length){n.System.Services.Engineering.designerModeManager.unselectEach(!0);for(var r=0,t=i.__controlsToSelect.length;r<t;r++){var o=i.__controlsToSelect[r];n.System.Services.Engineering.designerModeManager.select(o,!0)}!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&n.System.Services.Engineering.designerModeManager.resyncSelectedControls()}}},o.prototype.run=function(){if(!1!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&tchmi_path(this.__cmd.targetPartial)===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL){var e=this.__cmd.controls;if(null!=e)for(var r=0,t=e.length;r<t;r++){var o=this.__cmd.controls[r],i=null;void 0!==o.controlHtml&&null!==o.controlHtml&&(i=a.tchmi_utf8str_base64decode(o.controlHtml)),null!==i?(this.__createsPending++,!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&!0===o.select&&this.__controlsToSelect.push(o.controlId),n.System.Services.Engineering.designerModeManager.createControl(this.__cmd.targetPartial,o.targetParentControl,o.domPosition,i,this.createCallback())):(n.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkCreateControls] Failed to decode base64 encoded html content of "+o.controlId),this.__result=n.Errors.E_PARAMETER_INVALID),i=o=null}else this.__result=n.Errors.E_PARAMETER_INVALID}},r=o,e.SyncCmdToFrameworkCreateControls=r}(TcHmi=TcHmi||{}),function(c){var u,e,r,t;function o(e){return r.call(this,e)||this}u=c.System||(c.System={}),e=u.Engineering||(u.Engineering={}),r=e.SyncCmdToFramework,__extends(o,r),o.prototype.run=function(){if(void 0===this.__cmd.targetPartial||null===this.__cmd.targetPartial)return c.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkCurrentPartialContent] Failed to synchronize partial. Command property targetPartial="+this.__cmd.targetPartial+"."),void(this.__result=c.Errors.E_PARAMETER_INVALID);var r=tchmi_path(this.__cmd.targetPartial),e=c.ValueConverter.toObject(u.tchmi_utf8str_base64decode(this.__cmd.piggyBack),null);if(null===e||!0!==e.broadcast||e.requestInstance!==TCHMI_DYNAMIC_INSTANCE_ID){var t=this.__cmd.content;if(null==t||""===t)return c.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkCurrentPartialContent] Failed to synchronize partial="+r+". Command property content="+t+"."),void(this.__result=c.Errors.E_PARAMETER_INVALID);var o=u.tchmi_utf8str_base64decode(t);if(null===o)return c.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkCurrentPartialContent] Failed to synchronize partial="+r+". Failed to decode base64 encoded html content."),void(this.__result=c.Errors.E_PARAMETER_INVALID);t=null;var i=$(o);if(0===i.length||void 0===i[0].id)return c.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkCurrentPartialContent] Failed to synchronize partial="+r+". Failed to read attribute=id."),void(this.__result=c.Errors.E_PARAMETER_INVALID);if(c.Controls.get(i[0].id))try{c.System.Services.Engineering.designerModeManager.syncControl(r,i[0].id,i[0].outerHTML)}catch(e){return c.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkCurrentPartialContent] Failed to synchronize partial="+r+". Unexpected exception="+e+"."),void(this.__result=c.Errors.E_PARAMETER_INVALID)}var n=c.PartialType.Invalid;try{var a=[];-1<r.indexOf(".view")?(a=u.config.views,n=c.PartialType.View):-1<r.indexOf(".content")?(a=u.config.content,n=c.PartialType.Content):-1<r.indexOf(".usercontrol")&&(a=u.config.userControls,n=c.PartialType.UserControl);for(var s=0,l=a.length;s<l;s++)if(a[s].url===r){n!==c.PartialType.UserControl&&(n!==c.PartialType.View&&n!==c.PartialType.Content||!0!==a[s].preload)||c.System.Caches.partialMarkupCache.set(r,o);break}}catch(e){c.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkCurrentPartialContent] Failed to synchronize partial="+r+". Unexpected exception="+e+".")}switch(n){case c.PartialType.View:c.EventProvider.raise("System.onViewChanged",{url:r,content:o});break;case c.PartialType.Content:c.EventProvider.raise("System.onContentChanged",{url:r,content:o});break;case c.PartialType.UserControl:c.EventProvider.raise("System.onUserControlChanged",{url:r,content:o});break;case c.PartialType.Invalid:}!0===TCHMI_ENABLE_DESIGNER_MODE&&!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&c.System.Services.Engineering.designerModeManager.highlightManager.processDomVisibility()}},t=o,e.SyncCmdToFrameworkCurrentPartialContent=t}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&!0===TCHMI_ENABLE_DESIGNER_MODE_SLAVE&&tchmi_path(this.__cmd.targetPartial)===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&!0===this.__cmd.locked&&r.Services.Engineering.designerModeManager.lock()},i=n,t.SyncCmdToFrameworkCurrentPartialEditorLockState=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&tchmi_path(this.__cmd.targetPartial)===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.Services.Engineering.designerModeManager.highlightManager.setHighlightContainerVisibility(this.__cmd.state)},i=n,t.SyncCmdToFrameworkCurrentPartialHighlightContainerState=i}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){return o.call(this,e)||this}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.System.Services.Engineering.designerModeManager.highlightManager.setCreatorVisibilityAttribute(this.__cmd.targetControl,this.__cmd.visibility)},i=n,t.SyncCmdToFrameworkDomVisibility=i}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){var r=o.call(this,e)||this;return r.sendSynchronousConfirmation=!1,r}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){if(!1!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&tchmi_path(this.__cmd.targetPartial)===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL){var e=this.__cmd.states;null!=e?(void 0!==e.leftCtrl&&null!==e.leftCtrl&&void 0!==e.leftCtrl.down&&!0===e.leftCtrl.down||void 0!==e.rightCtrl&&null!==e.rightCtrl&&void 0!==e.rightCtrl.down&&!0===e.rightCtrl.down?r.System.Services.Engineering.designerModeManager.interactionManager.setCtrlModifierKeyState(!0):r.System.Services.Engineering.designerModeManager.interactionManager.setCtrlModifierKeyState(!1),void 0!==e.leftShift&&null!==e.leftShift&&void 0!==e.leftShift.down&&!0===e.leftShift.down||void 0!==e.rightShift&&null!==e.rightShift&&void 0!==e.rightShift.down&&!0===e.rightShift.down?r.System.Services.Engineering.designerModeManager.interactionManager.setShiftModifierKeyState(!0):r.System.Services.Engineering.designerModeManager.interactionManager.setShiftModifierKeyState(!1)):this.__result=r.Errors.E_PARAMETER_INVALID}},i=n,t.SyncCmdToFrameworkKeyStates=i}(TcHmi=TcHmi||{}),function(o){var e,i,r,t;function n(e){return r.call(this,e)||this}e=o.System||(o.System={}),i=e.Engineering||(e.Engineering={}),r=i.SyncCmdToFramework,__extends(n,r),n.prototype.run=function(){if(!1!==TCHMI_ENABLE_DESIGNER_MODE_MASTER){var e=tchmi_path(this.__cmd.targetPartial);if(e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)if(void 0!==this.__cmd.type&&null!==this.__cmd.type){var r=o.System.Services.Engineering.designerModeManager.hierarchyManager.getContainerFromPoint({left:this.__cmd.position.left+window.scrollX,top:this.__cmd.position.top+window.scrollY});if(r){var t={name:"DropControlPosition",targetPartial:e,controls:[{piggyBack:this.__cmd.piggyBack,targetParentControl:r.tco.getId(),type:this.__cmd.type,position:{centerX:r.centerX,centerY:r.centerY}}],replyTo:null};null===r.rowIndex||null===r.cellIndex||0===r.rowIndex&&0===r.cellIndex||(t.controls[0].attributes=[{name:"data-tchmi-grid-row-index",value:r.rowIndex},{name:"data-tchmi-grid-column-index",value:r.cellIndex}]),new i.SyncCmdToCreatorDropControlPosition(t).send()}else this.__result=o.Errors.ERROR}else this.__result=o.Errors.E_PARAMETER_INVALID}},t=n,i.SyncCmdToFrameworkRequestDropControlPosition=t}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){return o.call(this,e)||this}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.System.Services.Engineering.designerModeManager.rootControlManager.scroll(this.__cmd.position)},i=n,t.SyncCmdToFrameworkScrollPositionChanged=i}(TcHmi=TcHmi||{}),function(n){var e,r,t,o;function i(e){return t.call(this,e)||this}e=n.System||(n.System={}),r=e.Engineering||(e.Engineering={}),t=r.SyncCmdToFramework,__extends(i,t),i.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL){!0===this.__cmd.forcePrevUnselectEach&&n.System.Services.Engineering.designerModeManager.unselectEach(!0);for(var r=this.__cmd.controls,t=0,o=r.length;t<o;t++){var i=r[t];n.System.Services.Engineering.designerModeManager.select(i,!0)}n.System.Services.Engineering.designerModeManager.resyncSelectedControls()}},o=i,r.SyncCmdToFrameworkSelectControls=o}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){return o.call(this,e)||this}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.System.Services.Engineering.designerModeManager.selectEach(!1)},i=n,t.SyncCmdToFrameworkSelectEachControl=i}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){return o.call(this,e)||this}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.System.Services.serverManager.setServerAddress(this.__cmd.host,this.__cmd.port,this.__cmd.protocol)},i=n,t.SyncCmdToFrameworkServerAddress=i}(TcHmi=TcHmi||{}),function(s){var l,e,r,t;function o(e){return r.call(this,e)||this}l=s.System||(s.System={}),e=l.Engineering||(l.Engineering={}),r=e.SyncCmdToFramework,__extends(o,r),o.prototype.run=function(){if(!1!==TCHMI_ENABLE_DESIGNER_MODE_MASTER){var e=tchmi_path(this.__cmd.targetPartial);if(e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL){for(var r=!1,t=this.__cmd.controls,o=0,i=t.length;o<i;o++){var n=t[o];try{var a=l.tchmi_utf8str_base64decode(n.controlHtml);null===a&&s.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkSyncControls] Failed to decode base64 encoded html content of "+n.targetControl+"."),!0===s.System.Services.Engineering.designerModeManager.syncControl(e,n.targetControl,a)&&(r=!0)}catch(e){s.Log.error(e),this.__result=s.Errors.ERROR}}!0===r&&s.System.Services.Engineering.designerModeManager.highlightManager.processDomVisibility()}}},t=o,e.SyncCmdToFrameworkSyncControls=t}(TcHmi=TcHmi||{}),function(g){var e,r,t,o;function i(e){return t.call(this,e)||this}e=g.System||(g.System={}),r=e.Engineering||(e.Engineering={}),t=r.SyncCmdToFramework,__extends(i,t),i.prototype.__refreshBaseConfig=function(e,r){e.scaleMode!==r.scaleMode&&g.System.Services.viewManager.setScaleMode(e.scaleMode),!1===TCHMI_ENABLE_DESIGNER_MODE_MASTER?e.startupView!==r.startupView&&g.System.Services.viewManager.loadView(e.startupView):e.creatorSettings&&e.creatorSettings.viewport&&(e.creatorSettings.viewport.defaultHeight!==r.creatorSettings.viewport.defaultHeight||e.creatorSettings.viewport.defaultWidth!==r.creatorSettings.viewport.defaultWidth)&&g.System.Services.Engineering.designerModeManager.rootControlManager.setCreatorViewPortPosition(g.System.Services.viewManager.getView()),e.activeTheme!==r.activeTheme?g.System.Services.themeManager.setTheme(e.activeTheme,!0):tchmi_equal(e.dependencyFiles,r.dependencyFiles)&&tchmi_equal(e.themes,r.themes)||g.System.Services.themeManager.processActiveTheme(),TCHMI_ENABLE_DESIGNER_MODE&&TCHMI_ENABLE_DESIGNER_MODE_SLAVE&&!tchmi_equal(e.tcHmiServer,r.tcHmiServer)&&g.System.Services.serverManager.refreshGlobalSubscriptionRequests()},i.prototype.__loadViewPartial=function(r,t){var o=null;if(!0===r.preload&&!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER){var i=new XMLHttpRequest;i.open("GET",r.url+"?preventcache="+Math.random()),i.addEventListener("load",function(e){200===i.status?o=i.responseText:g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+r.url+", status="+i.status),g.Callback.callSafe(t,null,r,o)}),i.addEventListener("error",function(e){g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+r.url+", status="+i.status),g.Callback.callSafe(t,null,r,o)}),i.send()}},i.prototype.__loadViewPartialCallback=function(e,r){if(null!=r){var t=tchmi_path(e.url);if(void 0!==e.url&&null!==e.url&&!0===e.preload&&g.System.Caches.partialMarkupCache.set(t,r),!0===e.preload&&void 0!==e.url&&null!==e.url&&!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER){var o=g.System.Services.controlManager.compile(r);void 0!==o&&(o.__setKeepAlive(!0),o.getElement().attr("data-tchmi-partial-url",e.url))}g.EventProvider.raise("System.onViewCreated",{url:t})}},i.prototype.__refreshViewPartials=function(e,r){if(null!=e&&null!=r){for(var t=[],o=0,i=r.length;o<i;o++){for(var n=r[o],a=!1,s=0,l=e.length;s<l;s++)if(e[s].url===n.url){a=!0;break}!1===a&&t.push(n)}var c=[];for(o=0,i=e.length;o<i;o++){var u=e[o],d=!1;for(s=0,l=r.length;s<l;s++)if(n=r[s],u.url===n.url){d=!0;break}!1===d&&c.push(u)}for(o=0,i=t.length;o<i;o++)if(void 0!==(_=t[o]).url&&null!==_.url){var m=tchmi_path(_.url);g.System.Caches.partialMarkupCache.delete(m),g.EventProvider.raise("System.onViewRemoved",{url:m})}for(o=0,i=c.length;o<i;o++){var _=c[o];this.__loadViewPartial(_,this.__loadViewPartialCallback)}}},i.prototype.__loadContentPartial=function(r,t){if(!0===r.preload&&!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER){var o=new XMLHttpRequest;o.open("GET",r.url+"?preventcache="+Math.random()),o.addEventListener("load",function(e){200===o.status?r=g.ValueConverter.toObject(o.responseText):g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+r.url+", status="+o.status),g.Callback.callSafe(t,null,r,null)}),o.addEventListener("error",function(e){g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+r.url+", status="+o.status),g.Callback.callSafe(t,null,r,null)}),o.send()}},i.prototype.__loadContentPartialCallback=function(e,r){var t=tchmi_path(e.url);if(null!=r&&void 0!==e.url&&null!==e.url&&!0===e.preload&&g.System.Caches.partialMarkupCache.set(t,r),!0===e.preload&&void 0!==e.url&&null!==e.url&&!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER){var o=g.System.Services.controlManager.compile(r);void 0!==o&&o.getElement().attr("data-tchmi-partial-url",e.url)}g.EventProvider.raise("System.onContentCreated",{url:t})},i.prototype.__refreshContentPartials=function(e,r){if(null!=e&&null!=r){for(var t=[],o=0,i=r.length;o<i;o++){for(var n=r[o],a=!1,s=0,l=e.length;s<l;s++)if(e[s].url===n.url){a=!0;break}!1===a&&t.push(n)}var c=[];for(o=0,i=e.length;o<i;o++){var u=e[o],d=!1;for(s=0,l=r.length;s<l;s++)if(n=r[s],u.url===n.url){d=!0;break}!1===d&&c.push(u)}for(o=0,i=t.length;o<i;o++){var m=t[o];if(void 0!==m.url&&null!==m.url){var _=tchmi_path(m.url);g.System.Caches.partialMarkupCache.delete(_),g.EventProvider.raise("System.onContentRemoved",{url:_})}}for(o=0,i=c.length;o<i;o++){var h=c[o];this.__loadViewPartial(h,this.__loadViewPartialCallback)}}},i.prototype.__loadUserControlPartial=function(t,o){var i=null,n=null,a=t.url.replace(".usercontrol",".usercontrol.json"),s=new XMLHttpRequest;s.open("GET",t.url+"?preventcache="+Math.random()),s.addEventListener("load",function(e){if(200===s.status){i=s.responseText;var r=new XMLHttpRequest;r.open("GET",a+"?preventcache="+Math.random()),r.addEventListener("load",function(e){200===r.status?n=g.ValueConverter.toObject(r.responseText):g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+a+", status="+r.status),g.Callback.callSafe(o,null,t,i,n)}),r.addEventListener("error",function(e){g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+a+", status="+r.status),g.Callback.callSafe(o,null,t,i,n)}),r.send()}else g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+t.url+", status="+s.status),g.Callback.callSafe(o,null,t,i,n)}),s.addEventListener("error",function(e){g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Failed to load file="+t.url+", status="+s.status),g.Callback.callSafe(o,null,t,i,n)}),s.send()},i.prototype.__loadUserControlPartialCallback=function(e,r,t){if(null!=r){var o=tchmi_path(e.url),i=tchmi_path(e.url.replace(".usercontrol",".usercontrol.json"));void 0!==e.url&&null!==e.url&&g.System.Caches.partialMarkupCache.set(o,r),null!=t&&void 0!==e.url&&null!==e.url&&g.System.Caches.partialCompositeConfigCache.set(i,t),g.EventProvider.raise("System.onUserControlCreated",{url:o}),g.EventProvider.raise("System.onUserControlConfigCreated",{url:i})}},i.prototype.__refreshUserControlPartials=function(e,r){if(null!=e&&null!=r){for(var t=[],o=0,i=r.length;o<i;o++){for(var n=r[o],a=!1,s=0,l=e.length;s<l;s++)(u=e[s]).url===n.url&&(a=!0);!1===a&&t.push(n)}var c=[];for(o=0,i=e.length;o<i;o++){var u=e[o];for(a=!1,s=0,l=r.length;s<l;s++)n=r[s],u.url===n.url&&(a=!0);!1===a&&c.push(u)}for(o=0,i=t.length;o<i;o++)if(void 0!==(_=t[o]).url&&null!==_.url){var d=tchmi_path(_.url),m=tchmi_path(_.url.replace(".usercontrol",".usercontrol.json"));g.System.Caches.partialMarkupCache.delete(d),g.System.Caches.partialCompositeConfigCache.delete(m),g.EventProvider.raise("System.onUserControlRemoved",{url:d}),g.EventProvider.raise("System.onUserControlConfigRemoved",{url:m})}for(o=0,i=c.length;o<i;o++){var _=c[o];this.__loadUserControlPartial(_,this.__loadUserControlPartialCallback)}}},i.prototype.__refreshSymbols=function(e,r){var t=0,o=0,i=e.internal,n=r.internal,a=null,s=null,l=!1,c=[],u=!1,d=[],m=[];if(null!=n&&null!=i)for(s in n)if(n.hasOwnProperty(s)){for(a in l=!0,i)if(i.hasOwnProperty(a)){if(s===a){l=!1;break}a=null}!0===l&&c.push(s),l=!1,s=null}for(t=0,o=c.length;t<o;t++)g.System.Services.internalSymbolManager.remove(c[t]);if(null!=n&&null!=i)for(a in i)if(i.hasOwnProperty(a)){for(s in u=!0,n)if(n.hasOwnProperty(s)&&a===s){u=!1,tchmi_equal(i[a].value,n[s].value)&&i[a].persist===n[s].persist&&i[a].type===n[s].type&&i[a].readonly===n[s].readonly||m.push({key:a,item:i[a]});break}!0===u&&d.push({key:a,item:i[a]})}for(t=0,o=d.length;t<o;t++)g.System.Services.internalSymbolManager.add(d[t].key,d[t].item);for(t=0,o=m.length;t<o;t++)g.System.Services.internalSymbolManager.update(m[t].key,m[t].item)},i.prototype.__doReloadTcHmiConfig=function(e){var r=null,t=g.System.config,o=this,i=new XMLHttpRequest;i.open("GET","Properties/tchmiconfig.json?preventcache="+Math.random()),i.addEventListener("load",function(e){if(200===i.status){if(null===(r=g.ValueConverter.toObject(i.responseText)))return;o.__doRefreshTcHmiConfig(r,t)}else g.Log.error('[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Error while rereading tchmiconfig.json while performing "TcHmiConfigChanged" command! Command will be ignored. Errordetail: '+i.statusText)}),i.addEventListener("error",function(e){g.Log.error('[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Error while rereading tchmiconfig.json while performing "TcHmiConfigChanged" command! Command will be ignored. Errordetail: '+i.statusText)}),i.send()},i.prototype.__doRefreshTcHmiConfig=function(e,r){g.System.config=e,g.System.config.basePath=r.basePath,this.__refreshBaseConfig(e,r),this.__refreshViewPartials(e.views,r.views),this.__refreshContentPartials(e.content,r.content),this.__refreshUserControlPartials(e.userControls,r.userControls),this.__refreshSymbols(e.symbols,r.symbols)},i.prototype.__doReloadUserControlConfig=function(t){var o=this,i=new XMLHttpRequest;i.open("GET",t+"?preventcache="+Math.random()),i.addEventListener("load",function(e){if(200===i.status){var r=g.ValueConverter.toObject(i.responseText);o.__doRefreshUserControlConfig(t,r)}else g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Error while rereading config "+t+' while performing "TcHmiConfigChanged" command! Errordetail: '+i.statusText)}),i.addEventListener("error",function(e){g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Error while rereading config "+t+' while performing "TcHmiConfigChanged" command! Errordetail: '+i.statusText)}),i.send()},i.prototype.__doRefreshUserControlConfig=function(e,r){g.System.Caches.partialCompositeConfigCache.set(e,r),g.EventProvider.raise("System.onUserControlConfigChanged",{url:e})},i.prototype.__doReloadLocalizationFile=function(t){var o=this,i=new XMLHttpRequest;i.open("GET",t+"?preventcache="+Math.random()),i.addEventListener("load",function(e){if(200===i.status){var r=g.ValueConverter.toObject(i.responseText);o.__doRefreshLocalizationFile(t,r)}else g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Error while rereading config "+t+' while performing "TcHmiConfigChanged" command! Errordetail: '+i.statusText)}),i.addEventListener("error",function(e){g.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.SyncCmdToFrameworkTcHmiConfigChanged] Error while rereading config "+t+' while performing "TcHmiConfigChanged" command! Errordetail: '+i.statusText)}),i.send()},i.prototype.__doRefreshLocalizationFile=function(e,r){var t=r.locale;null!=t&&g.Locale.get()===t&&g.System.Services.localizationManager.processLocalizationData(r)},i.prototype.__doRefreshThemeFile=function(e){g.System.Services.themeManager.__clearCaches(),g.System.Services.themeManager.processActiveTheme()},i.prototype.run=function(){var e=this.__cmd,r=tchmi_path(e.configPath);switch(e.type){case"TcHmiConfig":this.__doReloadTcHmiConfig(r);break;case"UserControlConfig":this.__doReloadUserControlConfig(r);break;case"Localization":this.__doReloadLocalizationFile(r);break;case"ThemeConfig":this.__doRefreshThemeFile(r)}},o=i,r.SyncCmdToFrameworkTcHmiConfigChanged=o}(TcHmi=TcHmi||{}),function(n){var e,r,t,o;function i(e){return t.call(this,e)||this}e=n.System||(n.System={}),r=e.Engineering||(e.Engineering={}),t=r.SyncCmdToFramework,__extends(i,t),i.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL){for(var r=this.__cmd.controls,t=0,o=r.length;t<o;t++){var i=r[t];n.System.Services.Engineering.designerModeManager.unselect(i,!0)}n.System.Services.Engineering.designerModeManager.resyncSelectedControls()}},o=i,r.SyncCmdToFrameworkUnselectControls=o}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){return o.call(this,e)||this}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.System.Services.Engineering.designerModeManager.unselectEach(!1)},i=n,t.SyncCmdToFrameworkUnselectEachControl=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){tchmi_path(this.__cmd.targetPartial)===tchmi_path(TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)&&e.System.Services.Engineering.designerModeManager.lock()},i=n,t.SyncCmdToFrameworkPartialEditorLocked=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){tchmi_path(this.__cmd.targetPartial)===tchmi_path(TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)&&void 0!==window.location&&null!==window.location&&window.location.reload(!0)},i=n,t.SyncCmdToFrameworkPartialEditorUnlocked=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){var r=o.call(this,e)||this;return r.sendSynchronousConfirmation=!1,r}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){e.System.Services.Engineering.designerModeManager.syncManager.beginTransaction(this.__cmd.transactionName)},i=n,t.SyncCmdToFrameworkTransactionBegin=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){var r=o.call(this,e)||this;return r.sendSynchronousConfirmation=!1,r}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){e.System.Services.Engineering.designerModeManager.syncManager.commitTransaction(this.__cmd.transactionName)},i=n,t.SyncCmdToFrameworkTransactionCommit=i}(TcHmi=TcHmi||{}),function(r){var e,t,o,i;function n(e){return o.call(this,e)||this}e=r.System||(r.System={}),t=e.Engineering||(e.Engineering={}),o=t.SyncCmdToFramework,__extends(n,o),n.prototype.run=function(){var e=tchmi_path(this.__cmd.targetPartial);!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&e===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&r.System.Services.Engineering.designerModeManager.rootControlManager.setCreatorZoom(this.__cmd.factor)},i=n,t.SyncCmdToFrameworkZoom=i}(TcHmi=TcHmi||{}),function(e){var r,t,o;function i(e){this.__cmd=e}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),i.prototype.send=function(){e.System.Services.Engineering.designerModeComManager.sendCommand(this.__cmd)},o=i,t.SyncCmdToCreator=o}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorConfirmation=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorControlDoubleClick=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorCopyMoveControls=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorMessages=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorDropControlPosition=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorRegisterSyncView=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorRequestCurrentPartialContent=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorRequestCurrentPartialEditorLockState=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorRequestRequiredViewPortSize=i}(TcHmi=TcHmi||{}),function(e){var r,t,o,i;function n(e){return o.call(this,e)||this}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),o=t.SyncCmdToCreator,__extends(n,o),i=n,t.SyncCmdToCreatorSyncControls=i}(TcHmi=TcHmi||{}),function(e){var r,a,t;function o(){this.__messages={}}r=e.System||(e.System={}),a=r.Engineering||(r.Engineering={}),o.prototype.add=function(e,r,t){if(!1!==TCHMI_ENABLE_DESIGNER_MODE&&!1!==TCHMI_ENABLE_DESIGNER_MODE_MASTER){this.remove(e);var o=tchmi_create_guid(),i={identifier:o,type:t,content:r},n={append:!0,identifier:o,targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,targetInstance:TCHMI_DYNAMIC_INSTANCE_ID,type:t,content:r,line:null,position:null,unixTimestamp:Math.round(Date.now()/1e3)};this.__messages[e]=i,new a.SyncCmdToCreatorMessages({name:"Messages",messages:[n],replyTo:null}).send()}},o.prototype.remove=function(e){var r=this.__messages[e];if(r){var t={remove:!0,identifier:r.identifier};new a.SyncCmdToCreatorMessages({name:"Messages",messages:[t],replyTo:null}).send(),delete this.__messages[e]}},t=o,a.ErrorPane=t}(TcHmi=TcHmi||{}),function(n){var a,s,e;function t(e){var r=this;this.__websocket=void 0,this.__pendingSyncCommandMessageRequests=[],this.__pendingSyncCommandMessageResponses=[],this.__connectionWatcherInterval=0,this.__pendingMessageWatcherInterval=0,this.__pendingSyncCommandMessageRequestWatcherInterval=0,this.__unloaded=!1,this.__readyForSynchronization=!1,this.__onUnload=function(e){r.__unloaded=!0,r.__websocket&&(r.__websocket.close(),r.__websocket=void 0)},this.__connectionWatcherTick=function(){return function(){void 0===r.__websocket&&r.__open()}},this.__pendingSyncCommandMessageResponseWatcherTick=function(){return function(){void 0!==r.__websocket&&r.__websocket.readyState===WebSocket.OPEN&&!0===r.__readyForSynchronization&&(r.__pendingMessageWatcherInterval&&(window.clearInterval(r.__pendingMessageWatcherInterval),r.__pendingMessageWatcherInterval=0),r.__handlePendingSyncCommandMessageResponses())}},this.__pendingSyncCommandMessageRequestWatcherTick=function(){return function(){void 0!==r.__websocket&&r.__websocket.readyState===WebSocket.OPEN&&!0===r.__readyForSynchronization&&(r.__pendingSyncCommandMessageRequestWatcherInterval&&(window.clearInterval(r.__pendingSyncCommandMessageRequestWatcherInterval),r.__pendingSyncCommandMessageRequestWatcherInterval=0),r.__handlePendingSyncCommandMessageRequests())}},n.EventProvider.register("System.onUnload",this.__onUnload),this.__open(e)}a=n.System||(n.System={}),s=a.Engineering||(a.Engineering={}),t.prototype.__handlePendingSyncCommandMessageResponses=function(){for(;void 0!==this.__pendingSyncCommandMessageResponses&&0<this.__pendingSyncCommandMessageResponses.length;)this.__handleSyncCommandMessageResponse(this.__pendingSyncCommandMessageResponses.shift())},t.prototype.__handlePendingSyncCommandMessageRequests=function(){for(;void 0!==this.__pendingSyncCommandMessageRequests&&0<this.__pendingSyncCommandMessageRequests.length;){if(!0===TCHMI_CONSOLE_LOG_DESIGNER_MODE_COM_MESSAGES)try{n.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Request to TwinCAT HMI Creator."),n.Log.debug(this.__pendingSyncCommandMessageRequests[0])}catch(e){}void 0!==this.__websocket&&this.__websocket.send(this.__pendingSyncCommandMessageRequests.shift())}},t.prototype.__handleSyncCommandMessageResponse=function(r){if(r.command){var e,t=!0;switch(r.command.name){case"Messages":break;case"Confirmation":t=!1,e=new s.SyncCmdToFrameworkConfirmation(r.command);break;case"TransactionBegin":t=!1,e=new s.SyncCmdToFrameworkTransactionBegin(r.command);break;case"TransactionCommit":t=!1,e=new s.SyncCmdToFrameworkTransactionCommit(r.command);break;case"ScrollPositionChanged":t=!1,e=new s.SyncCmdToFrameworkScrollPositionChanged(r.command);break;case"RequestDropControlPosition":e=new s.SyncCmdToFrameworkRequestDropControlPosition(r.command);break;case"CreateControls":e=new s.SyncCmdToFrameworkCreateControls(r.command);break;case"SyncControls":e=new s.SyncCmdToFrameworkSyncControls(r.command);break;case"RemoveControls":e=new s.SyncCmdToFrameworkRemoveControls(r.command);break;case"SelectControl":var o={name:"SelectControls",targetPartial:(i=r.command).targetPartial,controls:[i.control],forcePrevUnselectEach:!1,replyTo:i.replyTo};e=new s.SyncCmdToFrameworkSelectControls(o);break;case"SelectControls":e=new s.SyncCmdToFrameworkSelectControls(r.command);break;case"UnselectControl":var i;o={name:"UnselectControls",targetPartial:(i=r.command).targetPartial,controls:[i.control],replyTo:i.replyTo},e=new s.SyncCmdToFrameworkUnselectControls(o);break;case"UnselectControls":e=new s.SyncCmdToFrameworkUnselectControls(r.command);break;case"SelectEachControl":e=new s.SyncCmdToFrameworkSelectEachControl(r.command);break;case"ServerAddress":t=!1,e=new s.SyncCmdToFrameworkServerAddress(r.command);break;case"UnselectEachControl":e=new s.SyncCmdToFrameworkUnselectEachControl(r.command);break;case"DomVisibility":e=new s.SyncCmdToFrameworkDomVisibility(r.command);break;case"ControlLocked":e=new s.SyncCmdToFrameworkControlLocked(r.command);break;case"KeyStates":t=!1,e=new s.SyncCmdToFrameworkKeyStates(r.command);break;case"CurrentPartialContent":e=new s.SyncCmdToFrameworkCurrentPartialContent(r.command);break;case"TcHmiConfigChanged":e=new s.SyncCmdToFrameworkTcHmiConfigChanged(r.command);break;case"Zoom":t=!1,e=new s.SyncCmdToFrameworkZoom(r.command);break;case"PartialEditorLocked":t=!1,e=new s.SyncCmdToFrameworkPartialEditorLocked(r.command);break;case"PartialEditorUnlocked":t=!1,e=new s.SyncCmdToFrameworkPartialEditorUnlocked(r.command);break;case"CurrentPartialEditorLockState":e=new s.SyncCmdToFrameworkCurrentPartialEditorLockState(r.command);break;case"CurrentPartialHighlightContainerState":e=new s.SyncCmdToFrameworkCurrentPartialHighlightContainerState(r.command)}if(!t||!0!==a.Services.Engineering.designerModeManager.isLocked())if(void 0!==e){try{e.run()}catch(e){n.Log.error('[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Unexpected exception handled while performing "'+r.command.name+'" command: \n'+e.toString())}e.sendSynchronousConfirmation&&e.confirmRequest(r.id)}else n.Log.debug('[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Command "'+r.command.name+'" not implemented.')}},t.prototype.__websocketOnOpen=function(){var r=this;return function(e){n.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] WebSocket with url="+r.__websocket.url+" opened.")}},t.prototype.__websocketOnClose=function(){var r=this;return function(e){!0!==r.__unloaded&&(e.code&&!e.reason?n.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] WebSocket with url="+r.__websocket.url+" was closed with code="+e.code+"."):e.code&&e.reason?n.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] WebSocket with url="+r.__websocket.url+" was closed with code="+e.code+" and reason="+e.reason+"."):n.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] WebSocket with url="+r.__websocket.url+" was closed."),r.__websocket=void 0,r.__connectionWatcherInterval&&window.clearInterval(r.__connectionWatcherInterval),r.__connectionWatcherInterval=window.setInterval(r.__connectionWatcherTick(),t.RECONNECT_INTERVAL))}},t.prototype.__websocketOnMessage=function(){var t=this;return function(e){if(!0!==t.__unloaded&&(t.__handlePendingSyncCommandMessageResponses(),void 0!==e&&void 0!==e.data)){var r=n.ValueConverter.toObject(e.data,null);if(null===r||!r.command)return n.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Failed to parse JSON message from TcHmiCreator!"),void n.Log.debug(r);try{!0===TCHMI_CONSOLE_LOG_DESIGNER_MODE_COM_MESSAGES&&"KeyStates"!==r.command.name&&(n.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Response from TwinCAT HMI Creator."),n.Log.debug(r))}catch(e){}t.__handleSyncCommandMessageResponse(r)}}},t.prototype.__open=function(r){if(!0!==this.__unloaded)if(void 0!==TCHMI_ENABLE_DESIGNER_MODE_WEBSOCKET_URL){if(void 0===this.__websocket){try{this.__websocket=new WebSocket(TCHMI_ENABLE_DESIGNER_MODE_WEBSOCKET_URL+"/DesignerWebsocketname="+TCHMI_ENABLE_DESIGNER_MODE_WEBSOCKET_URL)}catch(e){var t="Opening connection to Engineering failed";return e instanceof DOMException&&(t=t+": "+e.message),n.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] "+t),void n.Callback.callSafe(r,null,{error:n.Errors.E_EXCEPTION,dialogManagerMessage:t,servicesName:"DesignerModeComManager"})}this.__websocket.onopen=this.__websocketOnOpen(),this.__websocket.onclose=this.__websocketOnClose(),this.__websocket.onmessage=this.__websocketOnMessage()}}else n.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Missing flag=TCHMI_ENABLE_DESIGNER_MODE_WEBSOCKET_URL.")},t.prototype.sendCommand=function(e){var r={id:tchmi_create_guid(),timestamp:Date.now(),command:e},t=JSON.stringify(r);!1!==this.__readyForSynchronization?void 0!==this.__websocket&&this.__websocket.readyState===WebSocket.OPEN?("RegisterSyncView"!==e.name&&this.__handlePendingSyncCommandMessageRequests(),!0===TCHMI_CONSOLE_LOG_DESIGNER_MODE_COM_MESSAGES&&(n.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Request to TwinCAT HMI Creator."),n.Log.debug(r)),this.__websocket.send(t),"RegisterSyncView"===e.name&&this.__handlePendingSyncCommandMessageRequests()):(this.__pendingSyncCommandMessageRequestWatcherInterval||(this.__pendingSyncCommandMessageRequestWatcherInterval=window.setInterval(this.__pendingSyncCommandMessageRequestWatcherTick(),250)),"RegisterSyncView"===e.name?this.__pendingSyncCommandMessageRequests.unshift(t):this.__pendingSyncCommandMessageRequests.push(t)):"RegisterSyncView"===e.name?this.__pendingSyncCommandMessageRequests.unshift(t):this.__pendingSyncCommandMessageRequests.push(t)},t.prototype.makeReadyForSynchronization=function(){this.__readyForSynchronization=!0,this.__pendingSyncCommandMessageRequestWatcherInterval||(this.__pendingSyncCommandMessageRequestWatcherInterval=window.setInterval(this.__pendingSyncCommandMessageRequestWatcherTick(),250))},t.prototype.isReadyForSynchronization=function(){return this.__readyForSynchronization},t.RECONNECT_INTERVAL=5e3,e=t,s.DesignerModeComManager=e}(TcHmi=TcHmi||{}),function(Y){var K,a,e;function r(e){if(this.__locked=!1,this.metaDataManager=new a.DesignerModeControlMetaDataManager(this),!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER){this.hierarchyManager=new a.DesignerModeMasterHierarchyManager(this),this.rootControlManager=new a.DesignerModeMasterRootControlManager(this),this.highlightManager=new a.DesignerModeMasterControlHighlightManager(this),this.syncManager=new a.DesignerModeMasterSyncManager(this),this.interactionManager=new a.DesignerModeMasterInteractionManager(this),this.controlMoveManager=new a.DesignerModeMasterControlMoveManager(this),this.rectSelectManager=new a.DesignerModeMasterRectSelectManager(this),this.controlResizeManager=new a.DesignerModeMasterControlResizeManager(this);var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=tchmi_path(Y.System.config.basePath+"/StyleEngineering.css"),document.head.appendChild(r),Y.EventProvider.register("onThemeDataChanged",this.__onThemeDataChanged())}Y.EventProvider.register("onControlAttached",this.__onControlAttached())}K=Y.System||(Y.System={}),a=K.Engineering||(K.Engineering={}),r.prototype.__onControlAttached=function(){var C=this;return function(e,r){var t;if(null!=r){if(t=r.getElement()[0].getAttribute("data-tchmi-partial-url"),!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&!0===C.hierarchyManager.isDesignerModeControl(r.getId())){var o=!1;tchmi_path(t)===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&(o=!0);var i=void 0,n=!0;"Collapsed"===(i=(i=r.getElement()[0].getAttribute("data-tchmi-creator-visibility"))&&Y.ValueConverter.toType(i,"tchmi:framework#/definitions/Visibility"))&&(n=!1);var a=!1;(i=r.getElement()[0].getAttribute("data-tchmi-creator-locked"))&&(a=Y.ValueConverter.toType(i,"tchmi:general#/definitions/Boolean"));var s=!1;"Collapsed"===r.getVisibility()&&(s=!0);var l=C.metaDataManager.getControlMetaData(r.getId());if(null===l){var c=0,u=Y.StyleProvider.getSimpleElementStyle(r.getElement(),"z-index");void 0!==u["z-index"]&&(c=parseInt(u["z-index"],10),isNaN(c)&&(c=0)),l={id:r.getId(),parent:null,jControlPosition:C.highlightManager.createControlPosition(r,2e3+c),jHierarchyControlposition:C.highlightManager.createHierarchyControlPosition(r,2e3+c),jOriginalPosition:C.highlightManager.createOriginalPosition(r,1e3+c),jAnchorContainer:C.highlightManager.createAnchorContainer(r,3e3+c,a),jHierarchyAnchorContainer:C.highlightManager.createHierarchyAnchorContainer(r,3e3+c,a),isSelected:!1,isSelectedPrev:!1,isPartialRoot:o,controlCollapsed:s,isContainerControl:r.getIsContainerControl(),isGridControl:"tchmi-grid"===r.getType(),domVisibility:n,locked:a,controlAttributeDimension:{},controlCssPixelDimension:{},relativeControlRotation:0,absoluteParentRotation:0},!0===o&&(l.jControlPosition[0].classList.add("tchmi-creator-root-partial"),l.jHierarchyControlposition[0].classList.add("tchmi-creator-root-partial"),l.jOriginalPosition[0].classList.add("tchmi-creator-root-partial"),l.jAnchorContainer[0].classList.add("tchmi-creator-root-partial"),l.jHierarchyAnchorContainer[0].classList.add("tchmi-creator-root-partial")),l.jAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",a),l.jHierarchyAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",a),l.jAnchorContainer[0].classList.toggle("tchmi-creator-control-height-inactive","Content"===r.getHeightMode()),l.jAnchorContainer[0].classList.toggle("tchmi-creator-control-width-inactive","Content"===r.getWidthMode()),C.highlightManager.processHighlightType(l),C.highlightManager.processDomVisibility(l),!0===l.isGridControl&&C.highlightManager.createGridHighlighter(r,l),C.metaDataManager.register(l)}else l.isPartialRoot=o,l.controlCollapsed=s,l.domVisibility=n;C.metaDataManager.refreshControlMetaData(l),C.controlMoveManager.registerControl(l),C.hierarchyManager.registerContainerControl(l),C.controlResizeManager.registerControl(l);for(var d=r;null!=d;){if(!0===d.getIsContainerControl()&&void 0!==r.getParent()&&null!==r.getParent()&&r.getParent().getId()===d.getId()){var m=C.metaDataManager.getControlMetaData(d.getId());if(null===m){var _=0;_=parseInt(d.getElement().css("zIndex"),10),isNaN(_)&&(_=0);var h=!0;"Collapsed"===(d.getElement()[0].getAttribute("data-tchmi-creator-visibility")&&Y.ValueConverter.toType(i,"tchmi:framework#/definitions/Visibility"))&&(h=!1);var g=!1;d.getElement()[0].getAttribute("data-tchmi-creator-locked")&&(g=Y.ValueConverter.toType(i,"tchmi:general#/definitions/Boolean"));var E=!1;"Collapsed"===d.getVisibility()&&(E=!0),(m={id:d.getId(),parent:null,jControlPosition:C.highlightManager.createControlPosition(d,2e3+_),jHierarchyControlposition:C.highlightManager.createHierarchyControlPosition(d,2e3+_),jOriginalPosition:C.highlightManager.createOriginalPosition(d,1e3+_),jAnchorContainer:C.highlightManager.createAnchorContainer(d,3e3+_,g),jHierarchyAnchorContainer:C.highlightManager.createHierarchyAnchorContainer(d,3e3+_,g),isSelected:!1,isSelectedPrev:!1,isPartialRoot:!1,controlCollapsed:E,isContainerControl:d.getIsContainerControl(),isGridControl:"tchmi-grid"===d.getType(),domVisibility:h,locked:g,controlAttributeDimension:{},controlCssPixelDimension:{},relativeControlRotation:0,absoluteParentRotation:0}).jAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",g),m.jHierarchyAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",g),C.metaDataManager.refreshControlMetaData(m),!0===m.isGridControl&&C.highlightManager.createGridHighlighter(d,m),C.metaDataManager.register(m)}l.parent=m}d=d.getParent()}if(null!==l.parent&&null!==r.getParent()){var p=r.getElement().next(),f=null;if(0!==p.length&&(f=C.metaDataManager.getControlMetaData(p[0].id)),f)f.jOriginalPosition.before(l.jOriginalPosition),f.jControlPosition.before(l.jControlPosition),f.jControlPosition.before(l.jHierarchyControlposition),f.jAnchorContainer.before(l.jAnchorContainer),f.jAnchorContainer.before(l.jHierarchyAnchorContainer);else if(!1===l.parent.isGridControl)l.parent.jHierarchyControlposition.append(l.jOriginalPosition),l.parent.jHierarchyControlposition.append(l.jControlPosition),l.parent.jHierarchyControlposition.append(l.jHierarchyControlposition),l.parent.jHierarchyAnchorContainer.append(l.jAnchorContainer),l.parent.jHierarchyAnchorContainer.append(l.jHierarchyAnchorContainer);else{var S=r.getGridRowIndex();S>=r.getParent().__rowOptions.length&&(S=0);var v=r.getGridColumnIndex();v>=r.getParent().__columnOptions.length&&(v=0);var y=l.parent.jHierarchyControlposition.children("[data-tchmi-creator-grid-rowindex="+S+"][data-tchmi-creator-grid-cellindex="+v+"]");0===y.length&&Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Fatal internal error: Could not find target grid cell for "+r.getParent().getId()+" to attach highlight container."),y.append(l.jOriginalPosition),y.append(l.jControlPosition),y.append(l.jHierarchyControlposition),y.append(l.jAnchorContainer),y.append(l.jHierarchyAnchorContainer)}}else{var T=C.rootControlManager.getViewPortHighlightingSimulator();T.append(l.jOriginalPosition),T.append(l.jControlPosition),T.append(l.jHierarchyControlposition),T.append(l.jAnchorContainer),T.append(l.jHierarchyAnchorContainer),Y.System.SharedResources.jqBody.append(T)}C.highlightManager.requestAsyncHighlighterUpdateForControl(r),l.isPartialRoot&&C.rootControlManager.setRootControl(r,l)}t&&(t===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL&&C.__registerSyncView(),C.requestCurrentPartialContent(t,!1))}}},r.prototype.__onThemeDataChanged=function(){var r=this;return function(e){r.metaDataManager.refreshControlMetaData()}},r.prototype.__registerSyncView=function(){if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER||!0===TCHMI_ENABLE_DESIGNER_MODE_SLAVE){var e="Slave";!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&(e="Master"),new a.SyncCmdToCreatorRegisterSyncView({name:"RegisterSyncView",targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,targetInstance:TCHMI_DYNAMIC_INSTANCE_ID,syncViewLevel:e,sessionId:Y.Server.getCurrentUserConfig().session,replyTo:null}).send(),Y.System.Services.Engineering.designerModeComManager.makeReadyForSynchronization(),!1!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&!0!==TCHMI_ENABLE_DESIGNER_MODE_SLAVE||new a.SyncCmdToCreatorRequestCurrentPartialEditorLockState({name:"RequestCurrentPartialEditorLockState",targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,replyTo:TCHMI_DYNAMIC_INSTANCE_ID}).send()}},r.prototype.__resyncControls=function(e){var r={name:"SyncControls",targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,controls:[],replyTo:null};for(var t in e){var o=e[t],i=Y.Controls.get(t);if(i){var n=K.tchmi_utf8str_base64encode(i.getPcElement()[0].outerHTML);null!==n?r.controls.push({targetControl:o.id,descriptionPath:Y.System.Services.controlManager.getDescriptionPath(i.getType()),controlHtml:n}):Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to base64 encode html content of control="+t+".")}else Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to resync control="+t+". Not found in control cache.")}new a.SyncCmdToCreatorSyncControls(r).send()},r.prototype.resyncSelectedControls=function(){this.__resyncControls(this.metaDataManager.getSelectedControlsMetaData())},r.prototype.requestCurrentPartialContent=function(e,r){void 0===r&&(r=!1);var t=TCHMI_DYNAMIC_INSTANCE_ID;!0===r&&(t="*");var o=null;try{o=K.tchmi_utf8str_base64encode(JSON.stringify({requestInstance:TCHMI_DYNAMIC_INSTANCE_ID,broadcast:r}))}catch(e){Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Unexpected exception="+e+".")}new a.SyncCmdToCreatorRequestCurrentPartialContent({name:"RequestCurrentPartialContent",targetPartial:e,piggyBack:o,replyTo:t}).send()},r.prototype.syncControl=function(e,r,t){var o=this;if(!r)return Y.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Invalid target control."),!1;if(!t)return Y.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Invalid or missing html."),!1;var i=Y.Controls.get(r);if(!i)return Y.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Control="+r+" not found in control cache."),!1;var n=$(t);if(0===n.length)return!1;if(1!==n.length&&1!==(n=n.filter("div[data-tchmi-type]")).length)return Y.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Only one control is allowed but got "+n.length),!1;if(!n.attr("data-tchmi-type"))return Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed for control="+r+". Missing attribute=data-tchmi-type."),!1;if(!n[0].id)return Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed for control="+r+". Missing attribute=id."),!1;var a=i.getPcElement().clone();if(0===a.length)return!1;if(n[0].outerHTML===a[0].outerHTML)return!1;var s=i.getAttrs(),l=K.resolveAttributesFromControlElement(n),c=this.metaDataManager.getControlMetaData(r),u=l.id.value;if(r!==u&&i.getParent()){var d=i.getParent().getPcElement().clone();return d.find("#"+tchmi_css_escape_selector(r)).replaceWith($(t)),this.syncControl(e,d[0].id,d[0].outerHTML),c.isSelected&&Y.EventProvider.register(u+".onAttached",function(e,r){o.select(u,!0),e.destroy()}),!0}Y.Engineering.ErrorPane.remove(i.getId()+"requiredAttributeTouched");var m={"data-tchmi-creator-visibility":!0,"data-tchmi-creator-locked":!0,"data-tchmi-creator-viewport-width":!0,"data-tchmi-creator-viewport-height":!0,"data-tchmi-zindex":!0},_=[],h=[];for(var g in l){var E=l[g];if(void 0===(f=s[g])||!tchmi_equal(E.value,f.value)){if(E.descr&&!0===E.descr.requiredOnCompile){Y.Engineering.ErrorPane.add(i.getId()+"requiredAttributeTouched","Synchronization problem while changing attribute "+E.descr.name+" of control="+i.getId()+". It is not possible to change this attribute in runtime. Please save and reload this window.",Y.Engineering.ErrorPane.MessageType.Error);continue}_.push(E)}m[E.name]&&delete m[E.name]}for(var p in s){var f;if(void 0===l[(f=s[p]).name]){if(f.descr&&!0===f.descr.requiredOnCompile){Y.Engineering.ErrorPane.add(i.getId()+"requiredAttributeTouched","Synchronization problem while removing attribute "+f.descr.name+" of control="+i.getId()+". This attribute is not allowed to be deleted.",Y.Engineering.ErrorPane.MessageType.Error);continue}h.push(f)}}for(var S in m){switch(S){case"data-tchmi-creator-visibility":null!==c&&(c.domVisibility=!0);break;case"data-tchmi-creator-locked":null!==c&&(c.locked=!1);break;case"data-tchmi-zindex":if(null!==c){var v=0;c.jOriginalPosition.css("z-index",1e3+v),c.jControlPosition.css("z-index",2e3+v),c.jHierarchyControlposition.css("z-index",2e3+v),c.jAnchorContainer.css("z-index",3e3+v),c.jHierarchyAnchorContainer.css("z-index",3e3+v)}}i.getElement().removeAttr(S),i.getPcElement().removeAttr(S)}if(null!=_)for(var y=0,T=_.length;y<T;y++)switch((M=_[y]).name.toLowerCase()){case"data-tchmi-creator-visibility":if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&null!==c)switch(Y.ValueConverter.toType(M.value,"tchmi:framework#/definitions/Visibility")){case"Collapsed":c.domVisibility=!1;break;default:c.domVisibility=!0}i.getElement().attr(M.name,M.value);break;case"data-tchmi-creator-locked":!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&null!==c&&(c.locked=Y.ValueConverter.toType(M.value,"tchmi:general#/definitions/Boolean")),i.getElement().attr(M.name,M.value);break;case"data-tchmi-creator-viewport-width":case"data-tchmi-creator-viewport-height":i.getElement().attr(M.name,M.value);break;case"data-tchmi-zindex":!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&null!==c&&(v=parseInt(M.value,10),isNaN(v)&&(v=0),0<=v&&(c.jOriginalPosition.css("z-index",1e3+v),c.jControlPosition.css("z-index",2e3+v),c.jHierarchyControlposition.css("z-index",2e3+v),c.jAnchorContainer.css("z-index",3e3+v),c.jHierarchyAnchorContainer.css("z-index",3e3+v)))}var C=n[0].innerHTML;for("tchmi-html-host"===i.getType()&&null!=C&&i.setContent(C),C=null,y=0,T=h.length;y<T;y++)if(void 0!==(M=h[y]).descr&&null!==M.descr&&(M.valueType===K.ControlAttributeValueType.Simple&&i.getElement().removeAttr(M.name),delete i.getAttrs()[M.name],!0!==M.descr.readOnly))if(!0===Y.Symbol.isSymbolExpression(M.value))try{Y.System.Services.bindingManager.removeBinding(M.descr.propertyName,i,!0)}catch(e){Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Unexpected exception="+e+" while removing binding for attribute="+M.descr.propertyName+" of control="+i.getId()+".")}else(O=Y.System.Services.controlManager.setControlPropertyByAttribute(i,M.descr,null))&&O.code!==Y.Errors.NONE&&Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] "+Y.Log.buildMessage(O));for(y=0,T=_.length;y<T;y++){var M;if(void 0!==(M=_[y]).descr&&null!==M.descr&&(M.valueType===K.ControlAttributeValueType.Simple&&i.getElement().attr(M.name,M.value),!0!==(i.getAttrs()[M.name]=M).descr.readOnly))if(!0===Y.Symbol.isSymbolExpression(M.value)){var b=!0,R=Y.System.Services.bindingManager.getBinding(M.descr.propertyName,i);if(null!=R){var N=R.getSymbol();if(null!=N){var w=N.getExpression();if(null!=w&&M.value===w.toString()){b=!1;break}}}if(!0===b)try{Y.System.Services.bindingManager.removeBinding(M.descr.propertyName,i,!1),Y.System.Services.bindingManager.createBinding(M.value,M.descr.propertyName,i)}catch(e){Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Unexpected exception="+e+" while creating binding for attribute="+M.descr.propertyName+" of control="+i.getId()+".")}}else{try{Y.System.Services.bindingManager.removeBinding(M.descr.propertyName,i,!1)}catch(e){Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Unexpected exception="+e+" while removing binding from attribute="+M.descr.propertyName+" of control="+i.getId()+".")}var O;(O=Y.System.Services.controlManager.setControlPropertyByAttribute(i,M.descr,M.value))&&O.code!==Y.Errors.NONE&&Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] "+Y.Log.buildMessage(O))}}if(!0===i.getIsContainerControl()){var I=n.children(),A=a.children("div[data-tchmi-type]"),D=[];for(y=0,T=A.length;y<T;y++){for(var V=A.eq(y),P=!0,L=0,k=I.length;L<k;L++)if("DIV"===I[L].nodeName&&!1!==I[L].hasAttribute("data-tchmi-type")&&V[0].id===I[L].id){P=!1;break}if(!0===P){D.push(V[0].id);var H=Y.Controls.get(V[0].id);H&&H.destroy()}}for(y=0,T=I.length;y<T;y++)if("DIV"===I[y].nodeName&&!1!==I[y].hasAttribute("data-tchmi-type")){var x=!1;for(L=0,k=D.length;L<k;L++)if(I[y].id===D[L]){x=!0;break}if(!0!==x)try{this.syncControl(e,I[y].id,I[y].outerHTML)}catch(e){Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Unexpected exception="+e+" while syncing control="+I[y].id+".")}}var F=[],U=-1;for(y=0,T=I.length;y<T;y++)if("DIV"===I[y].nodeName&&!1!==I[y].hasAttribute("data-tchmi-type")){U++;var B=!0;for(L=0,k=A.length;L<k;L++)if(A[L].id===I[y].id){B=!1;break}if(!0===B){F.push(I[y].id);try{this.createControl(e,r,U,I[y].outerHTML,null)}catch(e){Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Synchronization failed. Unexpected exception="+e+" while creating control="+I[y].id+".")}}}}var W=i.getPcElement();if(i.__setPcElement(n.clone()),void 0!==i.getParent()&&null!==i.getParent())for(var G=i.getParent();null!==G;)G.getPcElement().find("#"+tchmi_css_escape_selector(W.attr("id"))).replaceWith(i.getPcElement().clone()),G=G.getParent();if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&this.hierarchyManager.isDesignerModeControl(r)){var j=this.metaDataManager.refreshControlMetaData(r);if(null!=j)if(this.highlightManager.requestAsyncHighlighterUpdateForControl(i),!0===j.isPartialRoot)this.rootControlManager.setCreatorViewPortPosition(i);else if(i.getParent()){var q=i.getParent();do{if("Content"===q.getHeightMode()||"Content"===q.getWidthMode()){var z=this.metaDataManager.getControlMetaData(q.getId());if(!z){q=null;break}if(z.isPartialRoot){this.rootControlManager.setCreatorViewPortPosition(q);break}q=q.getParent()}else q=null}while(null!==q)}}return null!==c&&(c.jAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",c.locked),c.jHierarchyAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",c.locked),c.jAnchorContainer[0].classList.toggle("tchmi-creator-control-height-inactive","Content"===i.getHeightMode()),c.jAnchorContainer[0].classList.toggle("tchmi-creator-control-width-inactive","Content"===i.getWidthMode())),!0},r.prototype.createControl=function(e,r,t,o,i){void 0===i&&(i=null);var n=this,a=$(o);if(0!==a.length){var s=a.attr("data-tchmi-type");if(s){var l=a[0].id;if(l)if(Y.Controls.get(l))Y.Log.error('[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create instance of control. Id: "'+l+'" does already exist.');else{var c=null;if(null!=r&&""!==r){if(!(c=Y.Controls.get(r)))return void Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create control. Target parent control="+r+" not found in control cache.")}else{if(!("tchmi-view"===s&&void 0!==a.attr("data-tchmi-view")||"tchmi-content"===s&&void 0!==a.attr("data-tchmi-content")||"tchmi-user-control"===s&&void 0!==a.attr("data-tchmi-user-control")))return void Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create control. Only controls of type 'tchmi-view', 'tchmi-content' or 'tchmi-user-control' are valid as a root element.");a.attr("data-tchmi-partial-url",tchmi_path(TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)).attr("data-tchmi-creator-partial-key",TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)}var u=Y.System.Services.controlManager.compile(a,c,t);if(void 0!==u){if(null!==c){if(!0!==c.getIsContainerControl()||"function"!=typeof c.addChild)return void Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create control. Can't add child to a not 'TcHmiContainerControl' based control! Requested parent target control="+c.getId()+" has type="+c.getType()+".");if(0===t)c.getPcElement().prepend(u.getPcElement().clone());else{for(var d=c.getPcElement().children(),m=-1,_=0,h=0,g=d.length;h<g;h++)if("DIV"===d[h].nodeName&&!1!==d[h].hasAttribute("data-tchmi-type")){if(t===++_){m=h;break}if(t<_)break}-1===m?c.getPcElement().append(u.getPcElement().clone()):d.eq(m).after(u.getPcElement().clone())}}else{var E=u.getType();if("tchmi-view"!==E&&"tchmi-user-control"!==E&&"tchmi-content"!==E)return void Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create control. Can't load root element because it is of type="+E+" but only controls of type tchmi-view, tchmi-content and tchmi-user-control are allowed as root element.");Y.System.Services.viewManager.loadViewObject(u)}var p=u.getId();Y.Engineering.ErrorPane.remove(p+"requiredAttributeTouched"),Y.EventProvider.register(p+".onAttached",function(e,r){e.destroy(),"function"==typeof i&&i.call(n,{error:Y.Errors.NONE})})}}else Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create control. Invalid control html. Missing attribute=id.")}else Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create control. Invalid control html. Missing attribute=data-tchmi-type.")}else Y.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to create control. Invalid control html.")},r.prototype.select=function(e,r){if(void 0===r&&(r=!1),!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER){var t=this.metaDataManager.getControlMetaData(e);if(null!==t){var o=Y.Controls.get(t.id);if(o){if(t.isSelectedPrev=t.isSelected,t.isSelected=!0,this.metaDataManager.selectControl(t),this.highlightManager.processHighlightType(t),o.getParent()&&o.getParent().getChildren&&t.parent){for(var i=!1,n=0,a=o.getParent().getChildren();n<a.length;n++){var s=a[n],l=this.metaDataManager.getControlMetaData(s.getId());if(l&&l.isSelected){i=!0;break}}t.parent.jControlPosition[0].classList.toggle("tchmi-creator-childcontrol-selected",i)}!0!==r&&this.__resyncControls(this.metaDataManager.getSelectedControlsMetaData())}}else Y.Log.debug("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeManager] Failed to select control="+e+".")}},r.prototype.unselect=function(e,r){if(void 0===r&&(r=!1),!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER){var t=this.metaDataManager.getControlMetaData(e);if(null!==t){var o=Y.Controls.get(t.id);if(o){if(t.isSelected=!1,this.metaDataManager.unselectControl(t),t.isSelectedPrev=!1,this.highlightManager.processHighlightType(t),o.getParent()&&o.getParent().getChildren&&t.parent){for(var i=!1,n=0,a=o.getParent().getChildren();n<a.length;n++){var s=a[n],l=this.metaDataManager.getControlMetaData(s.getId());if(l&&l.isSelected){i=!0;break}}t.parent.jControlPosition[0].classList.toggle("tchmi-creator-childcontrol-selected",i)}!0!==r&&this.resyncSelectedControls()}}}},r.prototype.selectEach=function(e){var r=this.unselectEach(!0),t=this.metaDataManager.getControlMetaData();for(var o in t)!1===t[o].isPartialRoot&&(this.select(o,!0),r=!0);return!0!==e&&r&&this.resyncSelectedControls(),r},r.prototype.unselectEach=function(e){var r=!1,t=this.metaDataManager.getControlMetaData();for(var o in t)!0===t[o].isSelected&&(this.unselect(o,!0),r=!0);return!0!==e&&r&&this.resyncSelectedControls(),r},r.prototype.setControlLocked=function(e,r){var t=this.metaDataManager.getControlMetaData(e);null!==t&&(t.locked=r,t.jAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",r),t.jHierarchyAnchorContainer[0].classList.toggle("tchmi-creator-control-locked",r));var o=Y.Controls.get(e);o&&(r?(o.getElement().attr("data-tchmi-creator-locked","True"),o.getPcElement().attr("data-tchmi-creator-locked","True")):(o.getElement().removeAttr("data-tchmi-creator-locked"),o.getPcElement().removeAttr("data-tchmi-creator-locked")))},r.prototype.lock=function(){if((this.__locked=!0)===TCHMI_ENABLE_DESIGNER_MODE_SLAVE)Y.System.Services.dialogManager.updateText("__TcHmiDesignerLock","Target document was locked due to critical changes!<br />This live-view instance will be reloaded if the document state is cleared..."),Y.System.Services.dialogManager.showDialog("__TcHmiDesignerLock",!0,Y.DialogManager.DialogType.Overlay);else if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER){Y.System.Services.dialogManager.updateText("__TcHmiDesignerLock",""),Y.System.Services.dialogManager.showDialog("__TcHmiDesignerLock",!0,Y.DialogManager.DialogType.Overlay),this.unselectEach(!0);var e=K.Services.viewManager.getView();null!=e&&e.getElement().css({filter:"blur(2px)"})}Y.System.SharedResources.jqBody.css({overflow:"hidden"})},r.prototype.unlock=function(){throw new Error("Not implemented!")},r.prototype.isLocked=function(){return this.__locked},e=r,a.DesignerModeManager=e}(TcHmi=TcHmi||{}),function(s){var e,r,t;function o(e){this.__controlsMetaData={},this.__selectedControlsMetaData={},this.__selectedControlIdsWithChildren=[],this.__designerModeManager=e,s.EventProvider.register("onControlDetached",this.__onControlDetached())}e=s.System||(s.System={}),r=e.Engineering||(e.Engineering={}),o.prototype.register=function(e){this.__controlsMetaData[e.id]=e},o.prototype.unregister=function(e){void 0!==this.__controlsMetaData[e]&&(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER&&(this.__designerModeManager.highlightManager.handleControlRemoved(this.__controlsMetaData[e]),this.__designerModeManager.highlightManager.requestAsyncHighlighterUpdate()),delete this.__controlsMetaData[e]),void 0!==this.__selectedControlsMetaData[e]&&(delete this.__selectedControlsMetaData[e],this.__rebuildSelectIdCache())},o.prototype.__onControlDetached=function(){var t=this;return function(e,r){null!=r&&t.unregister(r.getId())}},o.prototype.getControlMetaData=function(e){return null==e?this.__controlsMetaData:void 0!==this.__controlsMetaData[e]?this.__controlsMetaData[e]:null},o.prototype.refreshControlMetaData=function(e){var r,t;if("string"==typeof e)r=this.getControlMetaData(e),t=e;else{if(!e){for(var o in this.__controlsMetaData)this.refreshControlMetaData(this.__controlsMetaData[o]);return null}t=(r=e).id}if(null==r)return null;var i=s.Controls.get(t);if(!i)return s.Log.error('[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeComManager] Failed to refresh Control Meta Data of control "'+t+'": Not found in control cache.\n'),null;var n=i.getElement();return r.controlAttributeDimension=this.__getControlAttributeDimension(i),r.relativeControlRotation=this.__getRelativeRotation(n[0]),r.absoluteParentRotation=this.__getAbsoluteRotation(n.offsetParent()[0]),r.controlCssPixelDimension=this.__getControlCssPixelDimension(i),this.__designerModeManager.highlightManager.requestAsyncHighlighterUpdateForControl(i),r},o.prototype.getSelectedControlsMetaData=function(){return this.__selectedControlsMetaData},o.prototype.selectControl=function(e){var i=this;this.__selectedControlsMetaData[e.id]=e;var r=s.Controls.get(e.id);if(r){var t=s.System.resolveControlHierarchy(r,null),n=function(e){var r=e.ctrl;if(-1===i.__selectedControlIdsWithChildren.indexOf(r.getId())&&i.__selectedControlIdsWithChildren.push(r.getId()),!0===r.getIsContainerControl())for(var t=0,o=e.children_hierarchy.length;t<o;t++)n(e.children_hierarchy[t])};n(t),this.__rebuildSelectIdCache(e)}},o.prototype.unselectControl=function(e){delete this.__selectedControlsMetaData[e.id],this.__rebuildSelectIdCache()},o.prototype.getSelectedControlIdsWithChildren=function(){return this.__selectedControlIdsWithChildren},o.prototype.__rebuildSelectIdCache=function(e){var i=this;if(void 0!==e){if(!0!==e.isPartialRoot){var r=s.Controls.get(e.id);if(r){var t=s.System.resolveControlHierarchy(r,null),n=function(e){var r=e.ctrl;if(-1===i.__selectedControlIdsWithChildren.indexOf(r.getId())&&i.__selectedControlIdsWithChildren.push(r.getId()),!0===r.getIsContainerControl())for(var t=0,o=e.children_hierarchy.length;t<o;t++)n(e.children_hierarchy[t])};n(t)}}}else for(var o in this.__selectedControlIdsWithChildren=[],this.__selectedControlsMetaData){var a=this.__selectedControlsMetaData[o];!1===a.isPartialRoot&&this.__rebuildSelectIdCache(a)}},o.prototype.__getControlAttributeDimension=function(e){return{topValue:e.getTop(),topUnit:e.getTopUnit(),leftValue:e.getLeft(),leftUnit:e.getLeftUnit(),widthValue:e.getWidth(),widthUnit:e.getWidthUnit(),minWidthValue:e.getMinWidth(),minWidthUnit:e.getMinWidthUnit(),maxWidthValue:e.getMaxWidth(),maxWidthUnit:e.getMaxWidthUnit(),widthMode:e.getWidthMode(),rightValue:e.getRight(),rightUnit:e.getRightUnit(),heightValue:e.getHeight(),heightUnit:e.getHeightUnit(),heightMode:e.getHeightMode(),minHeightValue:e.getMinHeight(),minHeightUnit:e.getMinHeightUnit(),maxHeightValue:e.getMaxHeight(),maxHeightUnit:e.getMaxHeightUnit(),bottomValue:e.getBottom(),bottomUnit:e.getBottomUnit()}},o.prototype.__getControlCssPixelDimension=function(e){var r={width:null,height:null,left:null,top:null,right:null,bottom:null},t=e.getElement();if(t){var o=t.css("width");o&&(r.width=parseFloat(o));var i=t.css("height");i&&(r.height=parseFloat(i));var n=t.css("left");n&&(r.left=parseFloat(n));var a=t.css("top");a&&(r.top=parseFloat(a));var s=t.css("right");s&&(r.right=parseFloat(s));var l=t.css("bottom");l&&(r.bottom=parseFloat(l))}return r},o.prototype.__getAbsoluteRotation=function(e){if(!e)return 0;var r=0,t=e.parentElement;return!t||t.nodeName&&"HTML"===t.tagName||(r=this.__getAbsoluteRotation(t)),r+this.__getRelativeRotation(e)},o.prototype.__getRelativeRotation=function(e){if(!e)return 0;var r=s.StyleProvider.getComputedElementStyle(e,"transform").transform,t=0;if(r&&"none"!==r){var o=r.substring(r.indexOf("(")+1,r.lastIndexOf(")")).split(",");if(6===o.length){var i=parseFloat(o[0]),n=parseFloat(o[1]);t=Math.round(Math.atan2(n,i)*(180/Math.PI))}}return t},t=o,r.DesignerModeControlMetaDataManager=t}(TcHmi=TcHmi||{}),function(m){var e,r,t;function o(e){this.__transactionLock=[],this.__designerModeManager=e}e=m.System||(m.System={}),r=e.Engineering||(e.Engineering={}),o.prototype.beginTransaction=function(e){-1===this.__transactionLock.indexOf(e)&&this.__transactionLock.push(e)},o.prototype.commitTransaction=function(e){var r=this.__transactionLock.indexOf(e);-1!==r&&this.__transactionLock.splice(r,1),0===this.__transactionLock.length&&this.__sendPendingCommands()},o.prototype.__sendPendingCommands=function(){},o.prototype.transactionActive=function(){return 0===this.__transactionLock.length},o.prototype.updatePcElementAndSync=function(e){var r=[],t=["top","left","width","right","height","bottom"],o=this.__designerModeManager.metaDataManager.getSelectedControlsMetaData();for(var i in o){var n=o[i];if(null!=n){var a=m.Controls.get(n.id);if(a){function s(e){if(void 0!==c[e]){var r="data-tchmi-"+e,t=l.attr(r);if(m.Symbol.isSymbolExpression(t)){var o=new m.System.Symbol(t);if(o){if(o.getExpression().getType()===m.SymbolType.Server)return o.destroy(),o=null,1;o.read(function(e){e.error===m.Errors.NONE&&(t=e.value),o.destroy(),o=null})}}"string"==typeof t&&(t=parseFloat(t));var i="data-tchmi-"+e+"-unit",n=l.attr(i),a=c[e].replace(/[-.0-9]/g,"");"px"!==a&&"%"!==a&&(a="px"),void 0===n?"px"!==a&&l.attr(i,a):n!==a&&l.attr(i,a);var s=parseFloat(c[e]);Math.round(t)===Math.round(s)||void 0===t&&["height","width"].includes(e)&&["Content","Parent"].includes(l.attr("data-tchmi-"+e+"-mode"))||("px"===a?l.attr(r,s.toFixed(0)):"%"===a&&l.attr(r,s.toFixed(1)))}}r.push(a);for(var l=a.getPcElement().clone(),c=m.StyleProvider.getSimpleElementStyle(a.getElement(),t),u=0,d=t;u<d.length;u++)s(d[u]);!0===n.domVisibility?l.removeAttr("data-tchmi-creator-visibility"):l.attr("data-tchmi-creator-visibility","False"),!1===n.locked?l.removeAttr("data-tchmi-creator-locked"):l.attr("data-tchmi-creator-locked","True"),0===this.__transactionLock.length&&this.__designerModeManager.syncControl(TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,n.id,l[0].outerHTML)}}}m.EventProvider.raise(e,r),this.__designerModeManager.highlightManager.requestAsyncHighlighterUpdate()},t=o,r.DesignerModeMasterSyncManager=t}(TcHmi=TcHmi||{}),function(R){var e,r,t;function o(e){this.__dragtargetContainerHighlighting={},this.__designerModeManager=e,R.System.SharedResources.jqBody.on("dragover.DesignerModeMasterHierarchyManager.body",function(e){e.preventDefault()}).on("dragenter.DesignerModeMasterHierarchyManager.body",this.__onDragEnter()).on("dragleave.DesignerModeMasterHierarchyManager.body",this.__onDragLeave())}e=R.System||(R.System={}),r=e.Engineering||(e.Engineering={}),o.prototype.isDesignerModeControl=function(i){var n=!1,a=function(e){if(e.ctrl.getId()!==i)for(var r=0,t=e.children_hierarchy.length;r<t;r++){var o=e.children_hierarchy[r];if(a(o),!0===n)return}else n=!0},e=void 0,r=$('div[data-tchmi-creator-partial-key="'+TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL+'"]');if(0<r.length&&(e=R.Controls.get(r[0].id)),e){var t=R.System.resolveControlHierarchy(e,null);a(t)}return n},o.prototype.registerContainerControl=function(e){e.jControlPosition.on("dragover.DesignerModeMasterHierarchyManager."+e.id,function(e){e.preventDefault()}),e.jControlPosition.on("dragenter.DesignerModeMasterHierarchyManager."+e.id,this.__onDragEnter()),e.jControlPosition.on("dragleave.DesignerModeMasterHierarchyManager."+e.id,this.__onDragLeave())},o.prototype.registerContainerElement=function(e){e.on("dragenter.DesignerModeMasterHierarchyManager",this.__onDragEnter()).on("dragleave.DesignerModeMasterHierarchyManager",this.__onDragLeave())},o.prototype.__onDragEnter=function(){var r=this;return function(e){e.preventDefault(),r.addHighlightDropTarget({left:e.pageX,top:e.pageY},e.target)}},o.prototype.__onDragLeave=function(){var t=this;return function(e){var r=(e.target.hasAttribute("data-tchmi-creator-target-control")?e.target.getAttribute("data-tchmi-creator-target-control"):"body")+"_r"+(e.target.hasAttribute("data-tchmi-creator-grid-rowindex")?e.target.getAttribute("data-tchmi-creator-grid-rowindex"):null)+"_c"+(e.target.hasAttribute("data-tchmi-creator-grid-cellindex")?e.target.getAttribute("data-tchmi-creator-grid-cellindex"):null);t.__dragtargetContainerHighlighting[r]&&(t.__dragtargetContainerHighlighting[r].classList.remove("tchmi-creator-possibledroptarget"),delete t.__dragtargetContainerHighlighting[r])}},o.prototype.addHighlightDropTarget=function(e,r){var t=this.getContainerFromPoint(e);if(this.removeHighlightDropTarget(),t&&t.jHighlighter){var o=(r.hasAttribute("data-tchmi-creator-target-control")?r.getAttribute("data-tchmi-creator-target-control"):"body")+"_r"+t.rowIndex+"_c"+t.cellIndex;t.jHighlighter[0].classList.add("tchmi-creator-possibledroptarget"),this.__dragtargetContainerHighlighting[o]=t.jHighlighter[0]}},o.prototype.removeHighlightDropTarget=function(){for(var e in this.__dragtargetContainerHighlighting)this.__dragtargetContainerHighlighting[e].classList.remove("tchmi-creator-possibledroptarget"),delete this.__dragtargetContainerHighlighting[e]},o.prototype.getContainerFromPoint=function(e){var s=R.System.Services.viewManager.getView();if(null===s)return null;var r,t=$(document.elementFromPoint(e.left-window.scrollX,e.top-window.scrollY)),o=void 0;if(0===t.length||t[0]===document.body){o=s;var i=this.__designerModeManager.metaDataManager.getControlMetaData(o.getId());i&&(r=i.jControlPosition)}else{var l=function(e){var r=e.ctrl,t=r.getType();if(("data-tchmi-view"===t||"data-tchmi-content"===t||"data-tchmi-user-control"===t)&&r.getId()!==s.getId())return[];var o=[];if(!0===r.getIsContainerControl()){o.push(r);for(var i=0,n=e.children_hierarchy.length;i<n;i++){var a=l(e.children_hierarchy[i]);o=o.concat(a)}}return o},n=R.System.resolveControlHierarchy(s,null),a=l(n),c=t;do{var u=c.attr("data-tchmi-creator-target-control");if(void 0!==u){for(var d=!1,m=0,_=a.length;m<_;m++){var h=a[m];if(h.getId()===u){o=h,r=c,d=!0;break}}if(!0===d)break}c=c.parent()}while(0<c.length);(c=null)==o&&(o=s)}var g=e.left,E=e.top,p=null,f=null;if("tchmi-grid"===o.getType()){if(t[0].classList.contains("tchmi-creator-gridcell"))r=t;else{var S=t.parent();S.length&&S[0].classList.contains("tchmi-creator-hierarchy-gridcellposition")&&(r=S)}var v=parseInt(r.attr("data-tchmi-creator-grid-rowindex"),10),y=parseInt(r.attr("data-tchmi-creator-grid-cellindex"),10);if(!isNaN(y)&&!isNaN(v)){p=v,f=y;var T=r.position();g-=T.left,E-=T.top}}var C=o.getElement();if(0<C.length)do{var M=C.position();g-=M.left,E-=M.top,C=C.offsetParent(),g-=parseFloat(C.css("border-left-width")),E-=parseFloat(C.css("border-top-width"))}while(0<C.length&&!0!==C.is(R.System.SharedResources.jqBody)&&C[0]!==document.documentElement);var b=this.__designerModeManager.rootControlManager.getCreatorZoomFactor();return{tco:o,jHighlighter:r,centerX:Math.round(g/b),centerY:Math.round(E/b),rowIndex:p,cellIndex:f}},t=o,r.DesignerModeMasterHierarchyManager=t}(TcHmi=TcHmi||{}),function(R){var e,g,r;function t(e){this.__rootControlMetaElements=[],this.__scrollPosition={left:0,top:0},this.__creatorZoomFactor=1,this.__viewportCurrentWidth=0,this.__vpCurrentHeight=0,this.__scrollAnimationFrameId=0,this.__zoomAnimationFrameId=0,this.__designerModeManager=e,document.body.classList.add("tchmi-creator-chessboard"),R.System.SharedResources.jqBody.css({overflow:"hidden"}),this.__viewPortSimulator=$('<div class="tchmi-creator-view-port-simulator"></div>'),this.__viewPortHighlightingSimulator=$('<div class="tchmi-creator-view-port-highlighting"></div>'),window.setInterval(this.__onRequiredViewPortSizeWatchTick(),50)}e=R.System||(R.System={}),g=e.Engineering||(e.Engineering={}),t.prototype.getCreatorZoomFactor=function(){return this.__creatorZoomFactor},t.prototype.getViewPortSimulator=function(){return this.__viewPortSimulator},t.prototype.getViewPortHighlightingSimulator=function(){return this.__viewPortHighlightingSimulator},t.prototype.scroll=function(e){var r=this;e.left===this.__scrollPosition.left&&e.top===this.__scrollPosition.top||(this.__scrollPosition.left=e.left,this.__scrollPosition.top=e.top,0!==this.__scrollAnimationFrameId&&window.cancelAnimationFrame(this.__scrollAnimationFrameId),this.__scrollAnimationFrameId=window.requestAnimationFrame(function(){document.scrollingElement.scrollLeft=r.__scrollPosition.left,document.scrollingElement.scrollTop=r.__scrollPosition.top,r.__scrollAnimationFrameId=0}))},t.prototype.setCreatorZoom=function(e){var r=this;void 0!==e&&this.__creatorZoomFactor!==e&&(this.__creatorZoomFactor=e,0!==this.__zoomAnimationFrameId&&window.cancelAnimationFrame(this.__zoomAnimationFrameId),this.__zoomAnimationFrameId=window.requestAnimationFrame(function(){1!==r.__creatorZoomFactor?r.__viewPortSimulator.css("transform","scale("+r.__creatorZoomFactor+")"):r.__viewPortSimulator.css("transform",""),r.__designerModeManager.metaDataManager.refreshControlMetaData(),r.__zoomAnimationFrameId=0}))},t.prototype.setRootControl=function(e,r){this.setCreatorViewPortPosition(e),this.__rootControlMeta=r,this.__rootControlMetaElements[0]=this.__rootControlMeta.jControlPosition,this.__rootControlMetaElements[1]=this.__rootControlMeta.jAnchorContainer},t.prototype.__onRequiredViewPortSizeWatchTick=function(){var h=this;return function(){if(h.__rootControlMeta){for(var e=50,r=50,t=0,o=h.__rootControlMetaElements.length;t<o;t++){var i=h.__rootControlMetaElements[t];if(null!=i){var n=i[0].getBoundingClientRect(),a=n.width,s=n.height,l=i[0].offsetWidth,c=i[0].offsetHeight,u=i[0].scrollWidth-l,d=i[0].scrollHeight-c,m=a+(n.left+window.pageXOffset-document.documentElement.clientLeft)+u,_=s+(n.top+window.pageYOffset-document.documentElement.clientTop)+d;e<m&&(e=m),r<_&&(r=_)}}e=Math.floor(e)+35,r=Math.floor(r)+35,e===h.__viewportCurrentWidth&&r===h.__vpCurrentHeight||(new g.SyncCmdToCreatorRequestRequiredViewPortSize({name:"RequestRequiredViewPortSize",targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,width:e,height:r,replyTo:null}).send(),h.__viewportCurrentWidth=e,h.__vpCurrentHeight=r,document.body.style.width=e+"px",document.body.style.height=r+"px")}}},t.prototype.setCreatorViewPortPosition=function(e){if(e){var r=1024,t=0,o=e.getElement()[0].getAttribute("data-tchmi-creator-viewport-width");o&&(t=R.ValueConverter.toType(o,"tchmi:framework#/definitions/PositiveNumber")),"number"==typeof t&&0<t?r=t:"number"==typeof R.System.config.creatorSettings.viewport.defaultWidth&&0<R.System.config.creatorSettings.viewport.defaultWidth&&(r=R.System.config.creatorSettings.viewport.defaultWidth);var i=!1,n=e.getWidth(),a=e.getWidthUnit(),s=e.getWidthMode();if("Parent"===s?n=null:"Content"===s&&(n=e.__getContentWidth()),"%"!==a&&null!==n||(i=!0),!1===i){var l=e.getMinWidth(),c=e.getMinWidthUnit(),u=l;null!==l&&"%"===c&&(u=l*r/100),null!==u&&n<u&&(i=!0)}if(!1===i){var d=e.getMaxWidth(),m=e.getMaxWidthUnit(),_=d;null!==d&&"%"===m&&(_=d*r/100),null!==_&&_<n&&(i=!0)}!1===i&&(r=parseInt(e.getElement().css("left"),10)+n);var h=768,g=0;(o=e.getElement()[0].getAttribute("data-tchmi-creator-viewport-height"))&&(g=R.ValueConverter.toType(o,"tchmi:framework#/definitions/PositiveNumber")),"number"==typeof g&&0<g?h=g:"number"==typeof R.System.config.creatorSettings.viewport.defaultHeight&&0<R.System.config.creatorSettings.viewport.defaultHeight&&(h=R.System.config.creatorSettings.viewport.defaultHeight);var E=!1,p=e.getHeight(),f=e.getHeightUnit(),S=e.getHeightMode();if("Parent"===S?p=null:"Content"===S&&(p=e.__getContentHeight()),"%"!==f&&null!==p||(E=!0),!1===E){var v=e.getMinHeight(),y=e.getMinHeightUnit(),T=v;null!==v&&"%"===y&&(T=v*h/100),null!==T&&p<T&&(E=!0)}if(!1===E){var C=e.getMaxHeight(),M=e.getMaxHeightUnit(),b=C;null!==C&&"%"===M&&(b=C*h/100),null!==b&&b<p&&(E=!0)}!1===E&&(h=parseInt(e.getElement().css("top"),10)+p),R.StyleProvider.setSimpleElementStyle(this.__viewPortSimulator,{width:r+"px",height:h+"px"}),R.StyleProvider.setSimpleElementStyle(this.__viewPortHighlightingSimulator,{width:r*this.__creatorZoomFactor+"px",height:h*this.__creatorZoomFactor+"px"})}},r=t,g.DesignerModeMasterRootControlManager=r}(TcHmi=TcHmi||{}),function(O){var e,r,t;function o(e){this.__highlightContainerVisibility=!0,this.__asyncWorkData={animationFrameId:0,ctrlList:new Map},this.__selectorGripsId=["TopLeft","TopCenter","TopRight","CenterRight","BottomRight","BottomCenter","BottomLeft","CenterLeft"],this.__selectorGrips=["nwse","ns","nesw","ew","nwse","ns","nesw","ew"],this.__designerModeManager=e,O.EventProvider.register("System.onControlsResized",this.__onControlsResized()),O.EventProvider.register("System.onControlsMoved",this.__onControlsMoved()),O.EventProvider.register("System.onControlVisibilityChanged",this.__onControlVisibilityChanged()),O.EventProvider.register("System.onControlGetRowCountChanged",this.__onGridRowOrColumnChanged()),O.EventProvider.register("System.onControlGetColumnCountChanged",this.__onGridRowOrColumnChanged()),O.EventProvider.register("System.onGridCellResized",this.__onGridCellResized()),O.EventProvider.register("System.onControlGridRowIndexChanged",this.__onGridRowOrColumnIndexChanged()),O.EventProvider.register("System.onControlGridColumnIndexChanged",this.__onGridRowOrColumnIndexChanged())}e=O.System||(O.System={}),r=e.Engineering||(e.Engineering={}),o.prototype.handleControlRemoved=function(e){e.jOriginalPosition.remove(),e.jControlPosition.remove(),e.jHierarchyControlposition.remove(),e.jAnchorContainer.remove(),e.jHierarchyAnchorContainer.remove()},o.prototype.requestAsyncHighlighterUpdate=function(){var o=this;0===this.__asyncWorkData.animationFrameId&&(this.__asyncWorkData.animationFrameId=window.requestAnimationFrame(function(){o.__asyncWorkData.ctrlList.forEach(function(e,r){var t=o.__designerModeManager.metaDataManager.getControlMetaData(r.getId());null!==t&&(r.getParent()&&t.parent&&!0===t.parent.isGridControl&&o.setGridcellContainerPositions(r.getParent(),t.parent),o.setContainerPositions(r,t),e.rowColumnChanged&&o.createGridHighlighter(r,t),t.isGridControl&&o.setGridcellContainerPositions(r,t),e.resized&&t.isPartialRoot&&o.__designerModeManager.rootControlManager.setCreatorViewPortPosition(r),o.updateGripCursors(t))}),o.__designerModeManager.interactionManager.clearControlSnapPositionCache(),o.__designerModeManager.interactionManager.refreshControlSnapPositionCache(),o.__asyncWorkData.ctrlList.clear(),o.__asyncWorkData.animationFrameId=0}))},o.prototype.__onControlsResized=function(){var n=this;return function(e,r){if(!0!==n.__designerModeManager.controlResizeManager.getControlResizing())for(var t=0,o=r;t<o.length;t++){var i=o[t];n.requestAsyncHighlighterUpdateForControl(i).resized=!0}}},o.prototype.__onControlsMoved=function(){var n=this;return function(e,r){if(!0!==n.__designerModeManager.controlMoveManager.getControlMoveActive())for(var t=0,o=r;t<o.length;t++){var i=o[t];n.requestAsyncHighlighterUpdateForControl(i).moved=!0}}},o.prototype.requestAsyncHighlighterUpdateForControl=function(e){this.requestAsyncHighlighterUpdate();var r=this.__asyncWorkData.ctrlList.get(e);return r||(r={resized:!1,moved:!1,rowColumnChanged:!1},this.__asyncWorkData.ctrlList.set(e,r)),r},o.prototype.__onControlVisibilityChanged=function(){var o=this;return function(e,r){var t=o.__designerModeManager.metaDataManager.getControlMetaData(r.getId());null!==t&&("Collapsed"===r.getVisibility()?t.controlCollapsed=!0:t.controlCollapsed=!1,o.requestAsyncHighlighterUpdateForControl(r))}},o.prototype.__onGridRowOrColumnIndexChanged=function(){var a=this;return function(e,r){if(r.getParent()&&"tchmi-grid"===r.getParent().getType()){var t=a.__designerModeManager.metaDataManager.getControlMetaData(r.getId());if(null!==t&&null!==t.parent){var o=r.getGridRowIndex();o>=r.getParent().__rowOptions.length&&(o=0);var i=r.getGridColumnIndex();i>=r.getParent().__columnOptions.length&&(i=0);var n=t.parent.jHierarchyControlposition.children("[data-tchmi-creator-grid-rowindex="+o+"][data-tchmi-creator-grid-cellindex="+i+"]");0===n.length&&O.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeMasterHighlightManager] Fatal internal error: Could not find target grid cell for "+r.getParent().getId()+" to attach highlight container."),n.append(t.jOriginalPosition),n.append(t.jControlPosition),n.append(t.jHierarchyControlposition),n.append(t.jAnchorContainer),n.append(t.jHierarchyAnchorContainer)}}}},o.prototype.__onGridRowOrColumnChanged=function(){var n=this;return function(e,r){if(n.requestAsyncHighlighterUpdateForControl(r).rowColumnChanged=!0,"function"==typeof r.getChildren)for(var t=0,o=r.getChildren();t<o.length;t++){var i=o[t];n.requestAsyncHighlighterUpdateForControl(i).resized=!0}}},o.prototype.__onGridCellResized=function(){var t=this;return function(e,r){!0!==t.__designerModeManager.controlResizeManager.getControlResizing()&&t.requestAsyncHighlighterUpdateForControl(r)}},o.prototype.setHighlightContainerVisibility=function(e){this.__highlightContainerVisibility=e;var r=this.__designerModeManager.metaDataManager.getControlMetaData();for(var t in r){var o=r[t];this.processHighlightType(o)}this.processDomVisibility()},o.prototype.setCreatorVisibilityAttribute=function(e,r){var t=this.__designerModeManager.metaDataManager.getControlMetaData(e);null!==t&&(t.domVisibility=r,this.processDomVisibility(t))},o.prototype.processDomVisibility=function(e){var r;if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER)for(var t in r=e?{singleCtrl:e}:this.__designerModeManager.metaDataManager.getControlMetaData()){var o=r[t],i=O.Controls.get(o.id);i?(i.getElement()[0].classList.toggle("tchmi-creator-controlhidden",!1===o.domVisibility),!1===o.domVisibility?(o.jOriginalPosition.css({display:"none"}),o.jControlPosition.css({display:"none"}),o.jHierarchyControlposition.css({display:"none"}),o.jAnchorContainer.css({display:"none"}),o.jHierarchyAnchorContainer.css({display:"none"})):(o.jOriginalPosition.css({display:""}),o.jControlPosition.css({display:""}),o.jHierarchyControlposition.css({display:""}),o.jAnchorContainer.css({display:""}),o.jHierarchyAnchorContainer.css({display:""}))):O.Log.error('[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeMasterHighlightManager] Failed to handle control "'+o.id+'": Not found in control cache.\n')}},o.prototype.__handleOuterDimension=function(e,r,t,o,i,n,a,s,l){var c=a.getElement(),u=s.jOriginalPosition.children(".tchmi-creator-distance-"+r),d=parseFloat(c.css(r)),m=d*l;if("top"!==r&&30<=m||"top"===r&&57<=m)O.StyleProvider.setSimpleElementStyle(u,{width:m+"px",display:"","background-color":"","border-color":"",opacity:""});else{var _=40;"top"===r&&(_+=20),O.StyleProvider.setSimpleElementStyle(u,{width:_+"px",display:"","background-color":"transparent","border-color":"transparent",opacity:""})}var h=!0;if(null!==t){if("px"===o)e[r]=m+o,!0!==this.__designerModeManager.controlResizeManager.getControlResizing()&&!0!==this.__designerModeManager.controlMoveManager.getControlMoveActive()&&t?u.text(t.toFixed(0)+o):u.text(d.toFixed(0)+o);else if("%"===o){var g=void 0;"top"===r||"bottom"===r?g=parseFloat(c.parent().css("height")):"left"!==r&&"right"!==r||(g=parseFloat(c.parent().css("width")));var E=d/g*100;e[r]=E+o,!0!==this.__designerModeManager.controlResizeManager.getControlResizing()&&!0!==this.__designerModeManager.controlMoveManager.getControlMoveActive()&&t?u.text(t.toFixed(1)+o):u.text(E.toFixed(1)+o)}3!=++i||"right"!==r&&"bottom"!==r||(h=!1,O.StyleProvider.setSimpleElementStyle(u,{width:"45px",display:"",opacity:"0.5"}),"%"!==o&&m<=7&&u.text(t.toFixed(0)+o))}else h=!1,O.StyleProvider.setSimpleElementStyle(u,"display","none");return s.jOriginalPosition[0].classList.toggle("tchmi-creator-control-definedfrom"+r,h),i},o.prototype.__handleInnerDimension=function(e,r,t,o,i,n,a,s,l,c){var u=s.getElement(),d=l.jOriginalPosition.children(".tchmi-creator-distance-"+r);if(l.controlCollapsed)e[r]="0",O.StyleProvider.setSimpleElementStyle(d,{display:"none"}),n++;else{var m=parseFloat(u.css(r));if(O.StyleProvider.setSimpleElementStyle(d,{width:m*c+"px",display:"",opacity:""}),"px"===o){var _=m*c;e[r]=_+o,!0!==this.__designerModeManager.controlResizeManager.getControlResizing()&&!0!==this.__designerModeManager.controlMoveManager.getControlMoveActive()&&t?d.text(t.toFixed(0)+o):d.text(m.toFixed(0)+o),"Parent"!==i&&null!==t&&n++}else"%"===o&&(_=m/parseFloat(u.parent().css(r))*100,e[r]=_+o,!0!==this.__designerModeManager.controlResizeManager.getControlResizing()&&!0!==this.__designerModeManager.controlMoveManager.getControlMoveActive()&&t?d.text(t.toFixed(1)+o):d.text(_.toFixed(1)+o),"Parent"!==i&&null!==t&&n++);"Parent"===i||"Content"===i?null!==t?O.StyleProvider.setSimpleElementStyle(d,{opacity:"0.5"}):O.StyleProvider.setSimpleElementStyle(d,{display:"none"}):"Value"===i&&(null!==t?O.StyleProvider.setSimpleElementStyle(d,{opacity:"1.0"}):O.StyleProvider.setSimpleElementStyle(d,{display:"none"}))}return n},o.prototype.setContainerPositions=function(e,r){if(null!=e){var t=e.getElement();if(t&&0!==t.length&&null!=r&&!1!==r.domVisibility){var o=this.__designerModeManager.rootControlManager.getCreatorZoomFactor(),i={top:"",height:"",bottom:"",left:"",width:"",right:""},n=0,a=t.parent().outerHeight(),s=e.getTop(),l=e.getTopUnit();n=this.__handleOuterDimension(i,"top",s,l,n,a,e,r,o),s=e.getHeight(),l=e.getHeightUnit();var c=e.getHeightMode();n=this.__handleInnerDimension(i,"height",s,l,c,n,a,e,r,o),s=e.getBottom(),l=e.getBottomUnit(),(n=this.__handleOuterDimension(i,"bottom",s,l,n,a,e,r,o))<2&&this.__handleOuterDimension(i,"top",0,"px",n,a,e,r,o),n=0,a=t.parent().outerWidth(),s=e.getLeft(),l=e.getLeftUnit(),n=this.__handleOuterDimension(i,"left",s,l,n,a,e,r,o),s=e.getWidth(),l=e.getWidthUnit(),c=e.getWidthMode(),n=this.__handleInnerDimension(i,"width",s,l,c,n,a,e,r,o),s=e.getRight(),l=e.getRightUnit(),(n=this.__handleOuterDimension(i,"right",s,l,n,a,e,r,o))<2&&this.__handleOuterDimension(i,"left",0,"px",n,a,e,r,o),n=0,O.StyleProvider.setSimpleElementStyle(r.jOriginalPosition,i);var u=t.css("transform");if(1!==o&&0===u.indexOf("matrix")){var d="",m=[],_=u.substring(u.lastIndexOf("(")+1,u.lastIndexOf(")")).split(",");6===_.length?(d="matrix",m=[4,5]):16===_.length&&(d="matrix3d",m=[12,13,14]);for(var h=0,g=m;h<g.length;h++)_[f=g[h]]=(parseInt(_[f],10)*o).toString();i.transform=d+"("+_.join(",")+")"}else i.transform="none"!==u?u:"";if(""!==i.transform){var E=t.css("transform-origin");if(E){for(var p=E.split(" "),f=0,S=p.length;f<S;f++)-1!==p[f].indexOf("px")&&(p[f]=parseInt(p[f],10)*o+"px");i["transform-origin"]=p.join(" ")}else i["transform-origin"]=""}else i["transform-origin"]="";r.jControlPosition.css(i),r.jHierarchyControlposition.css(i),r.jAnchorContainer.css(i),r.jHierarchyAnchorContainer.css(i);var v=O.StyleProvider.getComputedElementStyle(t,["border-width","border-style"]),y=v["border-width"];y=y||"0px";var T=v["border-style"];T=T||"none";var C=y.split("px"),M="";C.forEach(function(e,r){var t=parseFloat(e);isNaN(t)||(M+=t*o+"px ")});var b={"border-width":M,"border-style":T,"border-color":"transparent"};if(O.StyleProvider.setSimpleElementStyle(r.jHierarchyControlposition,b),O.StyleProvider.setSimpleElementStyle(r.jHierarchyAnchorContainer,b),e.getParent()&&r.parent&&!0===r.parent.isGridControl&&0===r.jHierarchyControlposition.parent().length){var R=e.getGridRowIndex();R>=e.getParent().__rowOptions.length&&(R=0);var N=e.getGridColumnIndex();N>=e.getParent().__columnOptions.length&&(N=0);var w=r.parent.jHierarchyControlposition.children("[data-tchmi-creator-grid-rowindex="+R+"][data-tchmi-creator-grid-cellindex="+N+"]");0===w.length&&O.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeMasterHighlightManager] Fatal internal error: Could not find target grid cell for "+e.getParent().getId()+" to attach highlight container."),r.jHierarchyControlposition.parent().is(w)||(w.append(r.jOriginalPosition),w.append(r.jControlPosition),w.append(r.jHierarchyControlposition),w.append(r.jAnchorContainer),w.append(r.jHierarchyAnchorContainer))}!0===r.isGridControl&&this.setGridcellContainerPositions(e,r)}}},o.prototype.setGridcellContainerPositions=function(e,r){if(null!=e){var t=e.getElement();if(t&&0!==t.length&&null!=r&&!1!==r.domVisibility&&!0!==r.controlCollapsed){var o=this.__designerModeManager.rootControlManager.getCreatorZoomFactor(),i=r.jHierarchyControlposition.children(".tchmi-creator-hierarchy-gridcellposition");i=i.add(r.jControlPosition.children(".tchmi-creator-gridcell"));for(var n=0;n<i.length;n++){var a=i.eq(n),s=parseInt(a.attr("data-tchmi-creator-grid-rowindex"),10),l=t.children().children(".tchmi-grid-grid").children().eq(s),c=parseInt(a.attr("data-tchmi-creator-grid-cellindex"),10),u=l.children().eq(c);if(0===l.length||0===u.length)return;var d=void 0,m=void 0;m=a.hasClass("tchmi-creator-gridcell")?(d=parseFloat(t.css("border-top-width")),parseFloat(t.css("border-left-width"))):(d=parseFloat(u.css("border-top-width")),parseFloat(u.css("border-left-width")));var _={height:u[0].offsetHeight*o+"px",width:u[0].offsetWidth*o+"px",top:(d+u[0].offsetTop)*o+"px",left:(m+u[0].offsetLeft)*o+"px"};a.css(_)}}}},o.prototype.updateGripCursors=function(e){var r,t=Math.round((e.relativeControlRotation+e.absoluteParentRotation)*(8/360));for(t<0&&(t+=8),r=0;r<8;r++){var o=(r+t)%8;e.jAnchorContainer.children('[data-tchmi-creator-anchor-name="'+this.__selectorGripsId[r]+'"]').css("cursor",this.__selectorGrips[o]+"-resize")}},o.prototype.processHighlightType=function(e){!0===e.isSelected?e.jControlPosition[0].classList.remove("tchmi-creator-active-highlight"):e.jControlPosition[0].classList.toggle("tchmi-creator-active-highlight",this.__highlightContainerVisibility),e.jControlPosition[0].classList.toggle("tchmi-creator-control-selected",e.isSelected),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-selected",e.isSelected),e.jAnchorContainer[0].classList.toggle("tchmi-creator-control-selected",e.isSelected),e.jOriginalPosition[0].classList.toggle("tchmi-creator-active-highlight",this.__highlightContainerVisibility)},o.prototype.createControlPosition=function(e,r){var t=e.getType(),o=O.System.Services.controlManager.getDescription(t);return o&&(t=o.displayName),$('<div   data-tchmi-creator-target-control="'+e.getId()+'" \n                                class="tchmi-creator-controlposition tchmi-box" \n                                style="z-index:'+r+';">\n                                <div class="tchmi-creator-controlname tchmi-box"\n                                    title="'+e.getId()+": "+t+'">'+e.getId()+"</div>\n                        </div>")},o.prototype.createHierarchyControlPosition=function(e,r){return $('<div   data-tchmi-creator-target-control="'+e.getId()+'" \n                                class="tchmi-creator-hierarchy-controlposition tchmi-box" \n                                style="z-index:'+r+';">\n                        </div>')},o.prototype.createOriginalPosition=function(e,r){return $('<div   data-tchmi-creator-target-control="'+e.getId()+'" \n                                class="tchmi-creator-originalposition tchmi-box" \n                                style="z-index:'+r+';">\n\n                                <div class="tchmi-creator-distance-line tchmi-box tchmi-creator-distance-top"></div>\n                                <div class="tchmi-creator-distance-line tchmi-box tchmi-creator-distance-left"></div>\n                                <div class="tchmi-creator-distance-line tchmi-box tchmi-creator-distance-width"></div>\n                                <div class="tchmi-creator-distance-line tchmi-box tchmi-creator-distance-right"></div>\n                                <div class="tchmi-creator-distance-line tchmi-box tchmi-creator-distance-height"></div>\n                                <div class="tchmi-creator-distance-line tchmi-box tchmi-creator-distance-bottom"></div>\n\n                                <div class="tchmi-creator-snapline tchmi-box tchmi-creator-snapline-top"></div>\n                                <div class="tchmi-creator-snapline tchmi-box tchmi-creator-snapline-left"></div>\n                                <div class="tchmi-creator-snapline tchmi-box tchmi-creator-snapline-right"></div>\n                                <div class="tchmi-creator-snapline tchmi-box tchmi-creator-snapline-bottom"></div>\n\n                        </div>')},o.prototype.createAnchorContainer=function(e,r,t){return $('<div   data-tchmi-creator-target-control="'+e.getId()+'" \n                                class="tchmi-creator-anchorcontainer tchmi-box'+(t?" tchmi-creator-control-locked":"")+'" \n                                style="border-width: 1px;z-index:'+r+';">\n\n                                <div data-tchmi-creator-anchor-name="TopLeft"      class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-top-left"></div>\n                                <div data-tchmi-creator-anchor-name="TopCenter"    class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-top-center"></div>\n                                <div data-tchmi-creator-anchor-name="TopRight"     class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-top-right"></div>\n                                <div data-tchmi-creator-anchor-name="CenterLeft"   class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-center-left"></div>\n                                <div data-tchmi-creator-anchor-name="CenterRight"  class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-center-right"></div>\n                                <div data-tchmi-creator-anchor-name="BottomLeft"   class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-bottom-left"></div>\n                                <div data-tchmi-creator-anchor-name="BottomCenter" class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-bottom-center"></div>\n                                <div data-tchmi-creator-anchor-name="BottomRight"  class="tchmi-creator-anchor-rect tchmi-box tchmi-creator-anchor-bottom-right"></div>\n                        </div>')},o.prototype.createHierarchyAnchorContainer=function(e,r,t){return $('<div   data-tchmi-creator-target-control="'+e.getId()+'" \n                                class="tchmi-creator-hierarchy-anchorcontainer'+(t?" tchmi-creator-control-locked":"")+'" \n                                style="z-index:'+r+';">\n                        </div>')},o.prototype.createGridHighlighter=function(e,r){if(r)if(e.__rowOptions)if(e.__columnOptions){var t=r.jHierarchyControlposition.children(".tchmi-creator-hierarchy-gridcellposition");t.children().detach(),t.remove(),r.jControlPosition.children(".tchmi-creator-gridcell").remove();for(var o=O.StyleProvider.getSimpleElementStyle(r.jControlPosition,"z-index"),i=$(),n=$(),a=0;a<e.__rowOptions.length;a++)for(var s=0;s<e.__columnOptions.length;s++){var l=$('<div data-tchmi-creator-target-control="'+e.getId()+'" \n                            class="tchmi-creator-hierarchy-gridcellposition tchmi-box" \n                            style="z-index:'+o["z-index"]+'"\n                            data-tchmi-creator-grid-rowindex="'+a+'" data-tchmi-creator-grid-cellindex="'+s+'">\n                            </div>');i=i.add(l);var c=$('<div data-tchmi-creator-target-control="'+e.getId()+'" \n                            class="tchmi-creator-gridcell tchmi-box"\n                            style="z-index:'+o["z-index"]+'"\n                            data-tchmi-creator-grid-rowindex="'+a+'" data-tchmi-creator-grid-cellindex="'+s+'">\n                            </div>');this.__designerModeManager.hierarchyManager.registerContainerElement(c),n=n.add(c)}r.jHierarchyControlposition.append(i),r.jControlPosition.append(n)}else O.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeMasterHighlightManager] Grid control "+e.getId()+" has invalid Column Options.");else O.Log.error("[Source=Framework, Module=TcHmi.System.Engineering.DesignerModeMasterHighlightManager] Grid control "+e.getId()+" has invalid Row Options.")},t=o,r.DesignerModeMasterControlHighlightManager=t}(TcHmi=TcHmi||{}),function(g){var c,e,r;function t(e){this.__rectSelecting=!1,this.__lockRectSelect=!1,this.__documentRectSelectMouseMoveNs="mousemove.DesignerModeManager.DocumentRectSelectMouseMove",this.__documentRectSelectMouseUpNs="mouseup.DesignerModeManager.DocumentRectSelectMouseUp",this.__documentRectSelectMouseDownNs="mousedown.DesignerModeManager.DocumentRectSelectMouseDown",this.__designerModeManager=e,this.__selectionDragHighlighter=$('<div class="tchmi-creator-selection-drag-container"></div>'),g.System.SharedResources.jqDocument.on(this.__documentRectSelectMouseDownNs,this.__onDocumentRectSelectMouseDown())}c=g.System||(g.System={}),e=c.Engineering||(c.Engineering={}),t.prototype.getRectSelecting=function(){return this.__rectSelecting},t.prototype.lockRectSelect=function(){this.__lockRectSelect=!0},t.prototype.resetState=function(){this.__rectSelecting=!1,this.__lockRectSelect=!1,g.System.SharedResources.jqDocument.off(this.__documentRectSelectMouseMoveNs),g.System.SharedResources.jqDocument.off(this.__documentRectSelectMouseUpNs)},t.prototype.__onDocumentRectSelectMouseDown=function(){var r=this;return function(e){1===e.which&&(r.__designerModeManager.interactionManager.handleInteractionStart(e,null),r.__lockRectSelect=!1,g.System.SharedResources.jqDocument.on(r.__documentRectSelectMouseMoveNs,r.__onDocumentRectSelectMouseMove()),g.System.SharedResources.jqDocument.on(r.__documentRectSelectMouseUpNs,r.__onDocumentRectSelectMouseUp()))}},t.prototype.__onDocumentRectSelectMouseMove=function(){var l=this;return function(e){if(1===e.which&&!0!==l.__designerModeManager.controlMoveManager.getControlMoveActive()&&!0!==l.__designerModeManager.controlResizeManager.getControlResizing()&&!0!==l.__lockRectSelect){var r=l.__designerModeManager.interactionManager.getStartMousePos(),t=e.pageX-r.left,o=e.pageY-r.top;if(0!=t||0!=o){var i=0,n=0,a=0,s=0;l.__designerModeManager.controlMoveManager.setMouseMoving(!0),n=0<=t?(i=t,r.left):(i=-t,r.left+t),s=0<=o?(a=o,r.top):(a=-o,r.top+o),l.__selectionDragHighlighter.css({width:i+"px",left:n+"px",height:a+"px",top:s+"px"}),c.SharedResources.jqBody.append(l.__selectionDragHighlighter),l.__rectSelecting=!0,l.__designerModeManager.controlMoveManager.lockControlMove(),l.__designerModeManager.controlResizeManager.lockControlResize()}}}},t.prototype.__onDocumentRectSelectMouseUp=function(){var r=this;return function(e){1!==e.which?(3===e.which&&r.__selectionDragHighlighter.remove(),r.__designerModeManager.controlMoveManager.setMouseMoving(!1)):!0===r.__lockRectSelect&&!1===r.__rectSelecting||(r.__processRectSelect(r.__selectionDragHighlighter[0].getBoundingClientRect(),e.ctrlKey,e.altKey)&&r.__designerModeManager.resyncSelectedControls(),r.__selectionDragHighlighter.remove(),r.__designerModeManager.controlMoveManager.setMouseMoving(!1)),r.resetState()}},t.prototype.__processRectSelect=function(e,r,t){var o=!1,i=!0,n=this.__designerModeManager.metaDataManager.getControlMetaData();for(var a in n){var s=n[a];if(!1!==s.domVisibility){for(var l=!1,c=s.parent;null!==c;){if(!1===c.domVisibility){l=!0;break}c=c.parent}if(!0!==l){var u=g.Controls.get(s.id);if(u&&u.getElement()){var d=s.jControlPosition[0].getBoundingClientRect();if(!0===this.__hasClientRectIntersection(d,e,t)){if(!0===s.isPartialRoot)continue;!0===i&&!1===r&&(i=!1,this.__designerModeManager.unselectEach(!0)&&(o=!0));var m=this.__designerModeManager.controlMoveManager.getActiveControl();if(m&&m.id===s.id&&m.isContainerControl&&r)continue;for(var _=!1,h=m;h;){if(h.id===s.id){_=!0;break}h=h.parent}if(_)continue;this.__designerModeManager.select(s.id,!0),o=!0}}}}}return o},t.prototype.__hasClientRectIntersection=function(e,r,t){var o=e.left,i=e.right,n=e.top,a=e.bottom,s=r.left,l=r.right,c=r.top,u=r.bottom;return!1===t?!(l<o||i<s||u<n||a<c):s<o&&i<l&&c<n&&a<u},r=t,e.DesignerModeMasterRectSelectManager=r}(TcHmi=TcHmi||{}),function(M){var e,b,r;function t(e){this.__copyMoveRectHighlightOffset={left:0,top:0},this.__highlightMouseDownNs="mousedown.DesignerModeManager.HighlightMouseDown",this.__highlightMouseUpNs="mouseup.DesignerModeManager.HighlightMouseUp",this.__highlightMouseMoveNs="mousemove.DesignerModeManager.HighlightMouseMove",this.__activeControl=null,this.__activeControlPrev=null,this.__mouseMoving=!1,this.__lockControlMove=!1,this.__controlMoveActive=!1,this.__designerModeManager=e,this.__copyMoveRectHighlighter=document.createElement("canvas"),this.__copyMoveRectHighlighter.classList.add("tchmi-creator-copymove-container"),this.__onHighlightMouseUpLastProc=new Date}e=M.System||(M.System={}),b=e.Engineering||(e.Engineering={}),t.prototype.registerControl=function(e){e.jControlPosition.on(this.__highlightMouseDownNs,this.__onHighlightMouseDown())},t.prototype.getActiveControl=function(){return this.__activeControl},t.prototype.getActiveControlPrev=function(){return this.__activeControlPrev},t.prototype.getControlMoveActive=function(){return this.__controlMoveActive},t.prototype.lockControlMove=function(){this.__lockControlMove=!0},t.prototype.setMouseMoving=function(e){this.__mouseMoving=e},t.prototype.resetState=function(){this.__lockControlMove=!1,this.__controlMoveActive=!1,M.System.SharedResources.jqDocument.off(this.__highlightMouseMoveNs),M.System.SharedResources.jqDocument.off(this.__highlightMouseUpNs),M.StyleProvider.setSimpleElementStyle(M.System.SharedResources.jqBody,"cursor",""),this.__designerModeManager.hierarchyManager.removeHighlightDropTarget(),this.__copyMoveRectHighlighter.remove(),null!==this.__activeControl&&(this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snaptop"),this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapleft"),this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapbottom"),this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapright"),this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snaptop-remote"),this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapleft-remote"),this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapbottom-remote"),this.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapright-remote"))},t.prototype.__onHighlightMouseDown=function(){var o=this;return function(e){if(1===e.which){var r=$(e.target).attr("data-tchmi-creator-target-control"),t=o.__designerModeManager.metaDataManager.getControlMetaData(r);null!==t&&(o.__activeControlPrev=o.__activeControl,o.__activeControl=t,o.__designerModeManager.interactionManager.handleInteractionStart(e,t),o.__designerModeManager.interactionManager.setAnchorName(void 0),o.__lockControlMove=!1,M.System.SharedResources.jqDocument.on(o.__highlightMouseMoveNs,o.__onHighlightMouseMove()),M.System.SharedResources.jqDocument.on(o.__highlightMouseUpNs,o.__onHighlightMouseUp()))}}},t.prototype.__onHighlightMouseMove=function(){var C=this;return function(e){var r;if(null!==C.__activeControl&&!0!==C.__designerModeManager.controlResizeManager.getControlResizing()&&!0!==C.__activeControl.isPartialRoot&&!0!==C.__designerModeManager.rectSelectManager.getRectSelecting()&&!0!==C.__lockControlMove)if(!0!==e.ctrlKey||!0!==C.__activeControl.isContainerControl)if(1===e.which){var t=C.__activeControl;do{if(!0===t.locked)return;t=t.parent}while(t);if(!1===C.__mouseMoving){if(!1===e.ctrlKey&&!1===C.__activeControl.isSelected)for(var o in r=C.__designerModeManager.metaDataManager.getSelectedControlsMetaData())null!==(m=r[o])&&null!==C.__activeControl&&m.id!==C.__activeControl.id&&C.__designerModeManager.unselect(m.id,!0);C.__designerModeManager.select(C.__activeControl.id,!0)}var i=C.__designerModeManager.interactionManager.getStartMousePos(),n=e.pageX-i.left,a=e.pageY-i.top;if(0!==n||0!==a)if((C.__mouseMoving=!0)===e.shiftKey&&(Math.abs(n)>Math.abs(a)?a=0:n=0),C.__controlMoveActive=!0,C.__designerModeManager.rectSelectManager.lockRectSelect(),!1===e.ctrlKey||Math.abs(n)<5&&Math.abs(a)<5){var s=C.__designerModeManager.rootControlManager.getCreatorZoomFactor(),l=C.__designerModeManager.interactionManager.handleSnapping(C.__activeControl,{left:n/s,top:a/s},{left:e.pageX,top:e.pageY},!e.altKey);for(var o in r=C.__designerModeManager.metaDataManager.getSelectedControlsMetaData())!0!==(m=r[o]).isPartialRoot&&C.__processMove(m,l);C.__copyMoveRectHighlighter.parentElement&&(M.StyleProvider.setSimpleElementStyle(M.System.SharedResources.jqBody,"cursor",""),C.__designerModeManager.hierarchyManager.removeHighlightDropTarget(),C.__copyMoveRectHighlighter.remove())}else if(C.__copyMoveRectHighlighter.parentElement)C.__copyMoveRectHighlighter.style.top=C.__copyMoveRectHighlightOffset.top+a+window.scrollY+"px",C.__copyMoveRectHighlighter.style.left=C.__copyMoveRectHighlightOffset.left+n+window.scrollX+"px",C.__designerModeManager.hierarchyManager.addHighlightDropTarget({left:e.pageX,top:e.pageY},e.target);else{C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snaptop"),C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapleft"),C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapbottom"),C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapright"),C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snaptop-remote"),C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapleft-remote"),C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapbottom-remote"),C.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapright-remote");var c={top:Number.POSITIVE_INFINITY,left:Number.POSITIVE_INFINITY,rightside:Number.NEGATIVE_INFINITY,bottomside:Number.NEGATIVE_INFINITY},u=!0;null===C.__activeControl.parent&&(u=!1);var d=[];for(var o in r=C.__designerModeManager.metaDataManager.getSelectedControlsMetaData()){var m=r[o];if(C.__processMove(m,{left:0,top:0}),M.StyleProvider.setSimpleElementStyle(m.jControlPosition,"pointer-events","none"),!1!==u)if(null!==m.parent)if(m.parent.id===C.__activeControl.parent.id){var _=m.jControlPosition[0].getBoundingClientRect();c.top>_.top&&(c.top=_.top),c.left>_.left&&(c.left=_.left),c.bottomside<_.top+_.height&&(c.bottomside=_.top+_.height),c.rightside<_.left+_.width&&(c.rightside=_.left+_.width),d.push({top:_.top,left:_.left,height:_.height,width:_.width})}else u=!1;else u=!1}if(C.__designerModeManager.hierarchyManager.addHighlightDropTarget({left:e.pageX,top:e.pageY},e.target),!1===u)M.StyleProvider.setSimpleElementStyle(M.System.SharedResources.jqBody,"cursor","no-drop");else{M.StyleProvider.setSimpleElementStyle(M.System.SharedResources.jqBody,"cursor","copy"),C.__copyMoveRectHighlightOffset.top=c.top,C.__copyMoveRectHighlightOffset.left=c.left;var h=c.top+a+window.scrollY,g=c.left+n+window.scrollX,E=c.bottomside-c.top,p=c.rightside-c.left;C.__copyMoveRectHighlighter.width=p,C.__copyMoveRectHighlighter.height=E,C.__copyMoveRectHighlighter.style.cssText="top:"+h+"px;left:"+g+"px;height:"+E+"px;width:"+p+"px;";var f=C.__copyMoveRectHighlighter.getContext("2d");f.strokeStyle="gray";for(var S=0,v=d;S<v.length;S++){var y=v[S];f.strokeRect(y.left+window.scrollX+n-g,y.top+window.scrollY+a-h,y.width,y.height)}document.body.appendChild(C.__copyMoveRectHighlighter)}for(var o in r)m=r[o],M.StyleProvider.setSimpleElementStyle(m.jControlPosition,"pointer-events","")}else C.__designerModeManager.rectSelectManager.lockRectSelect()}else C.resetState();else for(var T=C.__activeControl;T;)C.__designerModeManager.unselect(T.id,!0),T=T.parent}},t.prototype.__processMove=function(e,r){var t=r.left,o=r.top,i=e,n=!1;do{if(!0===i.locked){n=!0;break}i=i.parent}while(i);if(!0!==n){var a=M.Controls.get(e.id);if(a){for(var s=!1,l=a.getElement().parents("[data-tchmi-type]"),c=this.__designerModeManager.metaDataManager.getSelectedControlIdsWithChildren(),u=0,d=l.length;u<d;u++)if(-1!==c.indexOf(l[u].id)){s=!0;break}if(!0!==s){var m,_=null,h={};null!==e.controlAttributeDimension.topValue&&("%"!==e.controlAttributeDimension.topUnit?(m=e.controlAttributeDimension.topValue+Math.sin(-e.absoluteParentRotation*Math.PI/180)*t+Math.cos(-e.absoluteParentRotation*Math.PI/180)*o,h.top=Math.round(m)+"px"):(null===_&&(_=a.getElement().parent().outerHeight()),m=e.controlAttributeDimension.topValue+100*(Math.sin(-e.absoluteParentRotation*Math.PI/180)*t+Math.cos(-e.absoluteParentRotation*Math.PI/180)*o)/_,h.top=m+"%")),null!==e.controlAttributeDimension.bottomValue&&("%"!==e.controlAttributeDimension.bottomUnit?(m=e.controlAttributeDimension.bottomValue-Math.sin(-e.absoluteParentRotation*Math.PI/180)*t-Math.cos(-e.absoluteParentRotation*Math.PI/180)*o,h.bottom=Math.round(m)+"px"):(null===_&&(_=a.getElement().parent().outerHeight()),m=e.controlAttributeDimension.bottomValue+100*(-Math.sin(-e.absoluteParentRotation*Math.PI/180)*t-Math.cos(-e.absoluteParentRotation*Math.PI/180)*o)/_,h.bottom=m+"%")),null===e.controlAttributeDimension.topValue&&null===e.controlAttributeDimension.bottomValue&&(h.top=Math.round(Math.sin(-e.absoluteParentRotation*Math.PI/180)*t+Math.cos(-e.absoluteParentRotation*Math.PI/180)*o)+"px"),(_=null)!==e.controlAttributeDimension.leftValue&&("%"!==e.controlAttributeDimension.leftUnit?(m=e.controlAttributeDimension.leftValue+Math.cos(e.absoluteParentRotation*Math.PI/180)*t+Math.sin(e.absoluteParentRotation*Math.PI/180)*o,h.left=Math.round(m)+"px"):(null===_&&(_=a.getElement().parent().outerWidth()),m=e.controlAttributeDimension.leftValue+100*(Math.cos(e.absoluteParentRotation*Math.PI/180)*t+Math.sin(e.absoluteParentRotation*Math.PI/180)*o)/_,h.left=m+"%")),null!==e.controlAttributeDimension.rightValue&&("%"!==e.controlAttributeDimension.rightUnit?(m=e.controlAttributeDimension.rightValue-Math.cos(e.absoluteParentRotation*Math.PI/180)*t-Math.sin(e.absoluteParentRotation*Math.PI/180)*o,h.right=Math.round(m)+"px"):(null===_&&(_=a.getElement().parent().outerWidth()),m=e.controlAttributeDimension.rightValue+100*(-Math.cos(e.absoluteParentRotation*Math.PI/180)*t-Math.sin(e.absoluteParentRotation*Math.PI/180)*o)/_,h.right=m+"%")),null===e.controlAttributeDimension.leftValue&&null===e.controlAttributeDimension.rightValue&&(h.left=Math.round(Math.cos(e.absoluteParentRotation*Math.PI/180)*t+Math.sin(e.absoluteParentRotation*Math.PI/180)*o)+"px"),M.StyleProvider.setSimpleElementStyle(a.getElement(),h),a.getParent()&&e.parent&&!0===e.parent.isGridControl&&this.__designerModeManager.highlightManager.setGridcellContainerPositions(a.getParent(),e.parent),this.__designerModeManager.highlightManager.setContainerPositions(a,e)}}else M.Log.error('Failed to move control "'+e.id+'": Not found in control cache.\n')}},t.prototype.__onHighlightMouseUp=function(){var C=this;return function(e){var r={};if(1===e.which)if(!0!==C.__lockControlMove||!0!==C.__designerModeManager.rectSelectManager.getRectSelecting()){null===C.__activeControl&&(C.__mouseMoving=!1,C.resetState());var t=C.__activeControl,o=C.__activeControlPrev;!1===C.__mouseMoving&&(!1===e.ctrlKey&&!1===t.isSelected&&C.__designerModeManager.unselectEach(!0),C.__designerModeManager.select(t.id,!0),C.__designerModeManager.rectSelectManager.lockRectSelect());var i=C.__designerModeManager.interactionManager.getStartMousePos(),n=e.pageX-i.left,a=e.pageY-i.top,s=!1;if(null!=o&&t.id===o.id&&Math.abs(n)<5&&Math.abs(a)<5){var l=C.__onHighlightMouseUpLastProc.getTime();Date.now()-l<=500&&(s=!0)}C.__onHighlightMouseUpLastProc=new Date;var c=!1;if(s&&e.ctrlKey){var u=M.Controls.get(t.id);if(u){var d=M.System.Services.controlManager.getDescription(u.getType());d&&!d.defaultDesignerEvent&&(c=!0)}}if(s&&!c){var m=M.Controls.get(t.id);m&&new b.SyncCmdToCreatorControlDoubleClick({name:"ControlDoubleClick",targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,targetControl:{id:t.id,type:m.getType()},replyTo:null}).send()}else{!0===e.ctrlKey&&!1===C.__mouseMoving&&!0===t.isSelectedPrev&&t.isSelected&&C.__designerModeManager.unselect(t.id,!0);var _=!0;if(!0===e.ctrlKey){_=!1,null===t.parent&&(_=!0),Math.abs(n)<5&&Math.abs(a)<5&&(_=!0),r=C.__designerModeManager.metaDataManager.getSelectedControlsMetaData();var h={name:"CopyMoveControls",targetPartial:TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL,deltaPosition:{left:null,top:null},controls:[],targetParentControl:"",replyTo:null};if(!1===_)for(var g in r){if(null===(T=r[g]).parent){_=!0;break}if(T.parent.id!==t.parent.id){_=!0;break}h.controls.push(T.id),M.StyleProvider.setSimpleElementStyle(T.jControlPosition,"pointer-events","none")}var E=C.__designerModeManager.hierarchyManager.getContainerFromPoint({left:e.pageX,top:e.pageY});if(h.targetParentControl=E.tco.getId(),null!==E.rowIndex&&null!==E.cellIndex&&(h.attributes=[{name:"data-tchmi-grid-row-index",value:E.rowIndex},{name:"data-tchmi-grid-column-index",value:E.cellIndex}]),null!==t.parent&&h.targetParentControl===t.parent.id&&null!==t.controlAttributeDimension.topValue&&"px"===t.controlAttributeDimension.topUnit&&null!==t.controlAttributeDimension.heightValue&&"px"===t.controlAttributeDimension.heightUnit&&"Value"===t.controlAttributeDimension.heightMode)if(!0===t.parent.isGridControl){if(0===t.absoluteParentRotation){var p=t.jOriginalPosition.parent()[0].getBoundingClientRect(),f=E.jHighlighter[0].getBoundingClientRect();h.deltaPosition.top=a+(p.top-f.top)}}else h.deltaPosition.top=a;for(var g in null!==t.parent&&h.targetParentControl===t.parent.id&&null!==t.controlAttributeDimension.leftValue&&"px"===t.controlAttributeDimension.leftUnit&&null!==t.controlAttributeDimension.widthValue&&"px"===t.controlAttributeDimension.widthUnit&&"Value"===t.controlAttributeDimension.widthMode&&(!0===t.parent.isGridControl?0===t.absoluteParentRotation&&(p=t.jOriginalPosition.parent()[0].getBoundingClientRect(),f=E.jHighlighter[0].getBoundingClientRect(),h.deltaPosition.left=n+(p.left-f.left)):h.deltaPosition.left=n),r)T=r[g],M.StyleProvider.setSimpleElementStyle(T.jControlPosition,"pointer-events","");!1===_&&new b.SyncCmdToCreatorCopyMoveControls(h).send()}if(!0===_){var S=M.Controls.get(t.id);if(S){var v=M.System.resolveControlHierarchy(S,null),y=function(e){for(var r=0,t=e.children_hierarchy.length;r<t;r++){var o=e.children_hierarchy[r];C.__designerModeManager.highlightManager.setContainerPositions(o.ctrl,C.__designerModeManager.metaDataManager.getControlMetaData(o.ctrl.getId())),y(o)}};y(v)}C.__designerModeManager.syncManager.updatePcElementAndSync("System.onControlPositionParameterChanged"),C.__designerModeManager.resyncSelectedControls()}}C.__mouseMoving=!1,C.resetState()}else C.resetState();else{if(3===e.which&&!0===C.__controlMoveActive)for(var g in r=C.__designerModeManager.metaDataManager.getSelectedControlsMetaData()){var T;!0!==(T=r[g]).isPartialRoot&&C.__processMove(T,{left:0,top:0})}C.resetState()}}},r=t,b.DesignerModeMasterControlMoveManager=r}(TcHmi=TcHmi||{}),function(_){var e,r,t;function o(e){this.__anchorMouseMoveNs="mousemove.DesignerModeManager.AnchorMouseMove",this.__anchorMouseUpNs="mouseup.DesignerModeManager.AnchorMouseUp",this.__anchorMouseDownNs="mousedown.DesignerModeManager.AnchorMouseDown",this.__lockControlResize=!1,this.__controlResizing=!1,this.__activeControl=null,this.__designerModeManager=e}e=_.System||(_.System={}),r=e.Engineering||(e.Engineering={}),o.prototype.registerControl=function(e){e.jAnchorContainer.children(".tchmi-creator-anchor-rect").on(this.__anchorMouseDownNs,this.__onAnchorMouseDown())},o.prototype.getControlResizing=function(){return this.__controlResizing},o.prototype.lockControlResize=function(){this.__lockControlResize=!0},o.prototype.__onAnchorMouseDown=function(){var o=this;return function(e){if(1===e.which){var r=$(e.target).parent().attr("data-tchmi-creator-target-control");if(o.__activeControl=o.__designerModeManager.metaDataManager.getControlMetaData(r),null!==o.__activeControl){var t=$(e.target).attr("data-tchmi-creator-anchor-name");o.__designerModeManager.interactionManager.setAnchorName(t),t&&(o.__designerModeManager.interactionManager.handleInteractionStart(e,o.__activeControl),o.__lockControlResize=!1,_.System.SharedResources.jqDocument.on(o.__anchorMouseMoveNs,o.__onAnchorMouseMove()),_.System.SharedResources.jqDocument.on(o.__anchorMouseUpNs,o.__onAnchorMouseUp()))}}}},o.prototype.__onAnchorMouseMove=function(){var m=this;return function(e){if(null!==m.__activeControl&&!0!==m.__designerModeManager.rectSelectManager.getRectSelecting()&&!0!==m.__lockControlResize){var r=m.__designerModeManager.interactionManager.getAnchorName();if(r){if(1!==e.which)return _.System.SharedResources.jqDocument.off(m.__anchorMouseMoveNs),_.System.SharedResources.jqDocument.off(m.__anchorMouseUpNs),m.__controlResizing=!1,void m.__designerModeManager.rectSelectManager.resetState();var t=m.__activeControl;do{if(!0===t.locked)return;t=t.parent}while(t);m.__controlResizing=!0,m.__designerModeManager.rectSelectManager.lockRectSelect();var o=m.__designerModeManager.interactionManager.getStartMousePos(),i=m.__designerModeManager.interactionManager.getPositionInsideControl(),n=e.pageX-o.left,a=e.pageY-o.top;!0===e.shiftKey&&0!==i.width&&("TopLeft"===r||"BottomRight"===r?a=n*(i.height/i.width):"TopRight"!==r&&"BottomLeft"!==r||(a=-n*(i.height/i.width)));var s=m.__designerModeManager.rootControlManager.getCreatorZoomFactor(),l=m.__designerModeManager.metaDataManager.getSelectedControlsMetaData(),c=m.__designerModeManager.interactionManager.handleSnapping(m.__activeControl,{left:n/s,top:a/s},{left:e.pageX,top:e.pageY},!e.altKey);for(var u in l){var d=l[u];m.__processResize(d,c,r),d.isPartialRoot&&m.__designerModeManager.rootControlManager.setCreatorViewPortPosition(_.Controls.get(d.id))}}}}},o.prototype.__processResize=function(e,r,t){var o=e,i=!1;do{if(!0===o.locked){i=!0;break}o=o.parent}while(o);if(!0!==i){var n=_.Controls.get(e.id);if(n){var a=Math.sin(-e.absoluteParentRotation*Math.PI/180)*r.left+Math.cos(-e.absoluteParentRotation*Math.PI/180)*r.top,s=Math.cos(e.absoluteParentRotation*Math.PI/180)*r.left+Math.sin(e.absoluteParentRotation*Math.PI/180)*r.top,l=this.__getResizedRect(e,t,s,a),c={};if(null!==l.heightValue&&"Parent"!==l.heightMode&&(c.height=l.heightValue+l.heightUnit),null!==l.widthValue&&"Parent"!==l.widthMode&&(c.width=l.widthValue+l.widthUnit),null!==l.leftValue&&(c.left=l.leftValue+l.leftUnit),null!==l.topValue&&(c.top=l.topValue+l.topUnit),null!==l.rightValue&&(c.right=l.rightValue+l.rightUnit),null!==l.bottomValue&&(c.bottom=l.bottomValue+l.bottomUnit),null===l.leftValue&&null===l.rightValue&&(c.left="0"),null===l.topValue&&null===l.bottomValue&&(c.top="0"),_.StyleProvider.setSimpleElementStyle(n.getElement(),c),n.getParent()&&e.parent&&!0===e.parent.isGridControl&&this.__designerModeManager.highlightManager.setGridcellContainerPositions(n.getParent(),e.parent),this.__designerModeManager.highlightManager.setContainerPositions(_.Controls.get(e.id),e),null!==this.__activeControl&&void 0!==_.Controls.get(this.__activeControl.id)){var u=this,d=function(e){for(var r=0,t=e.children_hierarchy.length;r<t;r++){var o=e.children_hierarchy[r];u.__designerModeManager.highlightManager.setContainerPositions(o.ctrl,u.__designerModeManager.metaDataManager.getControlMetaData(o.ctrl.getId())),d(o)}},m=_.System.resolveControlHierarchy(_.Controls.get(this.__activeControl.id),null);d(m)}}}},o.prototype.__getResizedRectRotationOffset=function(e,r,t,o,i,n,a){if(0===i)return{left:0,top:0};null==n&&(n=Math.sin(i)),null==a&&(a=Math.cos(i));var s=-e/2,l=r/2,c=-(e+t)/2,u=(r+o)/2;return{left:u*n+c*a-c-(l*n+s*a-s),top:u*a-c*n-u-(l*a-s*n-l)}},o.prototype.__getResizedRect=function(e,r,t,o){var i,n,a,s=e.controlAttributeDimension,l=e.relativeControlRotation;if(e.isPartialRoot){var c=this.__designerModeManager.rootControlManager.getViewPortSimulator();i=c.outerHeight(),n=c.outerWidth(),a=this.__designerModeManager.interactionManager.getPositionInsideControl()}else i=e.jControlPosition.parent().outerHeight(),n=e.jControlPosition.parent().outerWidth(),a={top:0,left:0,width:0,right:0,height:0,bottom:0};this.__designerModeManager.rootControlManager.getCreatorZoomFactor();var u,d=tchmi_clone_object(s),m=l*Math.PI/180,_=Math.sin(m),h=Math.cos(m),g=-_*t+h*o,E=h*t+_*o;switch(r){case"TopLeft":if(u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h),null!==d.widthValue){if(null!==d.maxWidthValue)if(d.widthUnit===d.maxWidthUnit)d.widthValue>d.maxWidthValue&&(d.widthValue=d.maxWidthValue);else if("%"!==d.widthUnit){var p=d.maxWidthValue/100*n;d.widthValue>p&&(d.widthValue=p)}else(R=d.widthValue/100*n)>d.maxWidthValue&&(d.widthValue=d.maxWidthValue/n*100);if(null!==d.minWidthValue)if(d.widthUnit===d.minWidthUnit)d.widthValue<d.minWidthValue&&(d.widthValue=d.minWidthValue);else if("%"!==d.widthUnit){var f=d.minWidthValue/100*n;d.widthValue<f&&(d.widthValue=f)}else(R=d.widthValue/100*n)<d.minWidthValue&&(d.widthValue=d.minWidthValue/n*100);null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue-E>=d.maxWidthValue&&(E=d.widthValue-d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue-E>=p&&(E=d.widthValue-p)):(R=d.widthValue/100*n)-E>=d.maxWidthValue&&(E=R-d.maxWidthValue)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue-E<=d.minWidthValue&&(E=d.widthValue-d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue-E<=f&&(E=d.widthValue-f)):(R=d.widthValue/100*n)-E<=d.minWidthValue&&(E=R-d.minWidthValue)),"%"!==d.widthUnit?d.widthValue-E<=0&&(E=d.widthValue):d.widthValue-100*E/n<=0&&(E=d.widthValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)}else if(null===d.widthValue&&null!==d.leftValue&&null!==d.rightValue){var S=d.leftValue;"%"!==d.leftUnit?S+=-(u.left-E):S=n*((S+=100*-(u.left-E)/n)/100);var v=d.rightValue;"%"!==d.rightUnit?v+=u.left:v=n*((v+=100*u.left/n)/100),n<=S+v&&(E=e.controlCssPixelDimension.width,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h))}if(null!==d.heightValue){if(null!==d.maxHeightValue)if(d.heightUnit===d.maxHeightUnit)d.heightValue>d.maxHeightValue&&(d.heightValue=d.maxHeightValue);else if("%"!==d.heightUnit){var y=d.maxHeightValue/100*i;d.heightValue>y&&(d.heightValue=y)}else(b=d.heightValue/100*i)>d.maxHeightValue&&(d.heightValue=d.maxHeightValue/i*100);if(null!==d.minHeightValue)if(d.heightUnit===d.minHeightUnit)d.heightValue<d.minHeightValue&&(d.heightValue=d.minHeightValue);else if("%"!==d.heightUnit){var T=d.minHeightValue/100*i;d.heightValue<T&&(d.heightValue=T)}else(b=d.heightValue/100*i)<d.minHeightValue&&(d.heightValue=d.minHeightValue/i*100);null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue-g>=d.maxHeightValue&&(g=d.heightValue-d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue-g>=y&&(g=d.heightValue-y)):(b=d.heightValue/100*i)-g>=d.maxHeightValue&&(g=b-d.maxHeightValue)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue-g<=d.minHeightValue&&(g=d.heightValue-d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue-g<=T&&(g=d.heightValue-T)):(b=d.heightValue/100*i)-g<=d.minHeightValue&&(g=b-d.minHeightValue)),"%"!==d.heightUnit?d.heightValue-g<=0&&(g=d.heightValue):100*-g/i<=0&&(g=d.heightValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)}else if(null===d.heightValue&&null!==d.topValue&&null!==d.bottomValue){var C=d.topValue;"%"!==d.topUnit?C+=-(-u.top-g):C=i*((C+=100*-(-u.top-g)/i)/100);var M=d.bottomValue;"%"!==d.bottomUnit?M+=-u.top:M=i*((M+=100*-u.top/i)/100),i<=C+M&&(g=e.controlCssPixelDimension.height,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h))}null!==d.widthValue?"%"!==d.widthUnit?d.widthValue+=-E:d.widthValue+=100*-E/n:(null===d.leftValue&&null!==d.rightValue||null!==d.leftValue&&null===d.rightValue)&&("%"!==d.widthUnit?d.widthValue=e.controlCssPixelDimension.width-E:d.widthValue=e.controlCssPixelDimension.width/n*100-100*E/n),null!==d.heightValue?"%"!==d.heightUnit?d.heightValue+=-g:d.heightValue+=100*-g/i:(null===d.topValue&&null!==d.bottomValue||null!==d.topValue&&null===d.bottomValue)&&("%"!==d.heightUnit?d.heightValue=e.controlCssPixelDimension.height-g:d.heightValue=e.controlCssPixelDimension.height/i*100-100*g/i),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=-(u.left-E):d.leftValue+=100*-(u.left-E)/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=-(-u.top-g):d.topValue+=100*-(-u.top-g)/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=u.left:d.rightValue+=100*u.left/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-u.top:d.bottomValue+=100*-u.top/i);break;case"TopCenter":u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,0,g,m,_,h),null!==d.heightValue?(null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue>d.maxHeightValue&&(d.heightValue=d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue>y&&(d.heightValue=y)):(b=d.heightValue/100*i)>d.maxHeightValue&&(d.heightValue=d.maxHeightValue/i*100)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue<d.minHeightValue&&(d.heightValue=d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue<T&&(d.heightValue=T)):(b=d.heightValue/100*i)<d.minHeightValue&&(d.heightValue=d.minHeightValue/i*100)),null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue-g>=d.maxHeightValue&&(g=d.heightValue-d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue-g>=y&&(g=d.heightValue-y)):(b=d.heightValue/100*i)-g>=d.maxHeightValue&&(g=b-d.maxHeightValue)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue-g<=d.minHeightValue&&(g=d.heightValue-d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue-g<=T&&(g=d.heightValue-T)):(b=d.heightValue/100*i)-g<=d.minHeightValue&&(g=b-d.minHeightValue)),"%"!==d.heightUnit?d.heightValue-g<=0&&(g=d.heightValue):100*-g/i<=0&&(g=d.heightValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,0,g,m,_,h)):null===d.heightValue&&null!==d.topValue&&null!==d.bottomValue&&(C=d.topValue,"%"!==d.topUnit?C+=-u.top+h*g:C=i*((C+=100*(-u.top+h*g)/i)/100),M=d.bottomValue,"%"!==d.bottomUnit?M+=-u.top:M=i*((M+=100*-u.top/i)/100),i<=C+M&&(g=e.controlCssPixelDimension.height,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,0,g,m,_,h))),null!==d.heightValue?"%"!==d.heightUnit?d.heightValue+=-g:d.heightValue+=100*-g/i:(null===d.topValue&&null!==d.bottomValue||null!==d.topValue&&null===d.bottomValue)&&("%"!==d.heightUnit?d.heightValue=e.controlCssPixelDimension.height-g:d.heightValue=e.controlCssPixelDimension.height/i*100-100*g/i),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=-(-u.left+_*g):d.leftValue+=100*-(-u.left+_*g)/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=-u.top+h*g:d.topValue+=100*(-u.top+h*g)/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=u.left:d.rightValue+=100*u.left/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-u.top:d.bottomValue+=100*-u.top/i);break;case"TopRight":u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h),null!==d.widthValue?(null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue>d.maxWidthValue&&(d.widthValue=d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue>p&&(d.widthValue=p)):(R=d.widthValue/100*n)>d.maxWidthValue&&(d.widthValue=d.maxWidthValue/n*100)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue<d.minWidthValue&&(d.widthValue=d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue<f&&(d.widthValue=f)):(R=d.widthValue/100*n)<d.minWidthValue&&(d.widthValue=d.minWidthValue/n*100)),null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue+E>=d.maxWidthValue&&(E=d.maxWidthValue-d.widthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue+E>=p&&(E=p-d.widthValue)):(R=d.widthValue/100*n)+E>=d.maxWidthValue&&(E=d.maxWidthValue-R)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue+E<=d.minWidthValue&&(E=d.minWidthValue-d.widthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue+E<=f&&(E=f-d.widthValue)):(R=d.widthValue/100*n)+E<=d.minWidthValue&&(E=d.minWidthValue-R)),"%"!==d.widthUnit?d.widthValue+E<=0&&(E=-d.widthValue):d.widthValue+100*E/n<=0&&(E=-d.widthValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)):null===d.widthValue&&null!==d.leftValue&&null!==d.rightValue&&(S=d.leftValue,"%"!==d.leftUnit?S+=-u.left:S=n*((S+=100*-u.left/n)/100),v=d.rightValue,"%"!==d.rightUnit?v+=-(-u.left+E):v=n*((v+=100*-(-u.left+E)/n)/100),n<=S+v&&(E=-e.controlCssPixelDimension.width,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h))),null!==d.heightValue?(null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue>d.maxHeightValue&&(d.heightValue=d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue>y&&(d.heightValue=y)):(b=d.heightValue/100*i)>d.maxHeightValue&&(d.heightValue=d.maxHeightValue/i*100)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue<d.minHeightValue&&(d.heightValue=d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue<T&&(d.heightValue=T)):(b=d.heightValue/100*i)<d.minHeightValue&&(d.heightValue=d.minHeightValue/i*100)),null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue-g>=d.maxHeightValue&&(g=d.heightValue-d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue-g>=y&&(g=d.heightValue-y)):(b=d.heightValue/100*i)-g>=d.maxHeightValue&&(g=b-d.maxHeightValue)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue-g<=d.minHeightValue&&(g=d.heightValue-d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue-g<=T&&(g=d.heightValue-T)):(b=d.heightValue/100*i)-g<=d.minHeightValue&&(g=b-d.minHeightValue)),"%"!==d.heightUnit?d.heightValue-g<=0&&(g=d.heightValue):100*-g/i<=0&&(g=d.heightValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)):null===d.heightValue&&null!==d.topValue&&null!==d.bottomValue&&(C=d.topValue,"%"!==d.topUnit?C+=-(-u.top-g):C=i*((C+=100*-(-u.top-g)/i)/100),M=d.bottomValue,"%"!==d.bottomUnit?M+=-u.top:M=i*((M+=100*-u.top/i)/100),i<=C+M&&(g=e.controlCssPixelDimension.height,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h))),null!==d.widthValue?"%"!==d.widthUnit?d.widthValue+=E:d.widthValue+=100*E/n:(null===d.leftValue&&null!==d.rightValue||null!==d.leftValue&&null===d.rightValue)&&("%"!==d.widthUnit?d.widthValue=e.controlCssPixelDimension.width+E:d.widthValue=e.controlCssPixelDimension.width/n*100+100*E/n),null!==d.heightValue?"%"!==d.heightUnit?d.heightValue+=-g:d.heightValue+=100*-g/i:(null===d.topValue&&null!==d.bottomValue||null!==d.topValue&&null===d.bottomValue)&&("%"!==d.heightUnit?d.heightValue=e.controlCssPixelDimension.height+g:d.heightValue=e.controlCssPixelDimension.height/i*100+100*g/i),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=-u.left:d.leftValue+=100*-u.left/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=-(-u.top-g):d.topValue+=100*-(-u.top-g)/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=-(-u.left+E):d.rightValue+=100*-(-u.left+E)/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-u.top:d.bottomValue+=100*-u.top/i);break;case"CenterLeft":u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,0,m,_,h),null!==d.widthValue?(null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue>d.maxWidthValue&&(d.widthValue=d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue>p&&(d.widthValue=p)):(R=d.widthValue/100*n)>d.maxWidthValue&&(d.widthValue=d.maxWidthValue/n*100)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue<d.minWidthValue&&(d.widthValue=d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue<f&&(d.widthValue=f)):(R=d.widthValue/100*n)<d.minWidthValue&&(d.widthValue=d.minWidthValue/n*100)),null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue-E>=d.maxWidthValue&&(E=d.widthValue-d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue-E>=p&&(E=d.widthValue-p)):(R=d.widthValue/100*n)-E>=d.maxWidthValue&&(E=R-d.maxWidthValue)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue-E<=d.minWidthValue&&(E=d.widthValue-d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue-E<=f&&(E=d.widthValue-f)):(R=d.widthValue/100*n)-E<=d.minWidthValue&&(E=R-d.minWidthValue)),"%"!==d.widthUnit?d.widthValue-E<=0&&(E=d.widthValue):d.widthValue-100*E/n<=0&&(E=d.widthValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,0,m,_,h)):null===d.widthValue&&null!==d.leftValue&&null!==d.rightValue&&(S=d.leftValue,"%"!==d.leftUnit?S+=u.left+h*E:S=n*((S+=100*(u.left+h*E)/n)/100),v=d.rightValue,"%"!==d.rightUnit?v+=u.left:v=n*((v+=100*u.left/n)/100),n<=S+v&&(E=e.controlCssPixelDimension.width,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,0,m,_,h))),null!==d.widthValue?"%"!==d.widthUnit?d.widthValue+=-E:d.widthValue+=100*-E/n:(null===d.leftValue&&null!==d.rightValue||null!==d.leftValue&&null===d.rightValue)&&("%"!==d.widthUnit?d.widthValue=e.controlCssPixelDimension.width-E:d.widthValue=e.controlCssPixelDimension.width/n*100-100*E/n),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=u.left+h*E:d.leftValue+=100*(u.left+h*E)/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=u.top:d.topValue+=100*u.top/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=u.left:d.rightValue+=100*u.left/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-u.top:d.bottomValue+=100*-u.top/i);break;case"CenterRight":!0===e.isPartialRoot&&(null!==d.widthValue&&"%"===d.widthUnit&&(d.widthUnit="px",d.widthValue=d.widthValue/100*a.width),null!==d.rightValue&&"%"===d.rightUnit&&(d.rightUnit="px",d.rightValue=d.rightValue/100*n)),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,0,m,_,h),null!==d.widthValue?(null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue>d.maxWidthValue&&(d.widthValue=d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue>p&&(d.widthValue=p)):(R=d.widthValue/100*n)>d.maxWidthValue&&(d.widthValue=d.maxWidthValue/n*100)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue<d.minWidthValue&&(d.widthValue=d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue<f&&(d.widthValue=f)):(R=d.widthValue/100*n)<d.minWidthValue&&(d.widthValue=d.minWidthValue/n*100)),null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue+E>=d.maxWidthValue&&(E=d.maxWidthValue-d.widthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue+E>=p&&(E=p-d.widthValue)):(R=d.widthValue/100*n)+E>=d.maxWidthValue&&(E=d.maxWidthValue-R)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue+E<=d.minWidthValue&&(E=d.minWidthValue-d.widthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue+E<=f&&(E=f-d.widthValue)):(R=d.widthValue/100*n)+E<=d.minWidthValue&&(E=d.minWidthValue-R)),"%"!==d.widthUnit?d.widthValue+E<=0&&(E=-d.widthValue):d.widthValue+100*E/n<=0&&(E=-d.widthValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,0,m,_,h)):null===d.widthValue&&null!==d.leftValue&&null!==d.rightValue&&(S=d.leftValue,"%"!==d.leftUnit?S+=-u.left:S=n*((S+=100*-u.left/n)/100),v=d.rightValue,"%"!==d.rightUnit?v+=-(-u.left+E):v=n*((v+=100*-(-u.left+E)/n)/100),n<=S+v&&(E=-e.controlCssPixelDimension.width,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,0,m,_,h))),null!==d.widthValue?"%"!==d.widthUnit?d.widthValue+=E:d.widthValue+=100*E/n:(null===d.leftValue&&null!==d.rightValue||null!==d.leftValue&&null===d.rightValue)&&("%"!==d.widthUnit?d.widthValue=e.controlCssPixelDimension.width+E:d.widthValue=e.controlCssPixelDimension.width/n*100+100*E/n),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=-u.left:d.leftValue+=100*-u.left/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=u.top:d.topValue+=100*u.top/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=-(-u.left+E):d.rightValue+=100*-(-u.left+E)/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-u.top:d.bottomValue+=100*-u.top/i);break;case"BottomLeft":u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h),null!==d.heightValue?(null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue>d.maxHeightValue&&(d.heightValue=d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue>y&&(d.heightValue=y)):(b=d.heightValue/100*i)>d.maxHeightValue&&(d.heightValue=d.maxHeightValue/i*100)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue<d.minHeightValue&&(d.heightValue=d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue<T&&(d.heightValue=T)):(b=d.heightValue/100*i)<d.minHeightValue&&(d.heightValue=d.minHeightValue/i*100)),null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue+g>=d.maxHeightValue&&(g=d.maxHeightValue-d.heightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue+g>=y&&(g=y-d.heightValue)):(b=d.heightValue/100*i)+g>=d.maxHeightValue&&(g=d.maxHeightValue-b)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue+g<=d.minHeightValue&&(g=d.minHeightValue-d.heightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue+g<=T&&(g=T-d.heightValue)):(b=d.heightValue/100*i)+g<=d.minHeightValue&&(g=d.minHeightValue-b)),"%"!==d.heightUnit?d.heightValue+g<=0&&(g=-d.heightValue):d.heightValue+100*g/i<=0&&(g=-d.heightValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)):null===d.heightValue&&null!==d.topValue&&null!==d.bottomValue&&(C=d.topValue,"%"!==d.topUnit?C+=u.top:C=i*((C+=100*u.top/i)/100),M=d.bottomValue,"%"!==d.bottomUnit?M+=-(u.top+g):M=i*((M+=100*-(u.top+g)/i)/100),i<=C+M&&(g=-e.controlCssPixelDimension.height,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h))),null!==d.widthValue?(null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue>d.maxWidthValue&&(d.widthValue=d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue>p&&(d.widthValue=p)):(R=d.widthValue/100*n)>d.maxWidthValue&&(d.widthValue=d.maxWidthValue/n*100)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue<d.minWidthValue&&(d.widthValue=d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue<f&&(d.widthValue=f)):(R=d.widthValue/100*n)<d.minWidthValue&&(d.widthValue=d.minWidthValue/n*100)),null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue-E>=d.maxWidthValue&&(E=d.widthValue-d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue-E>=p&&(E=d.widthValue-p)):(R=d.widthValue/100*n)-E>=d.maxWidthValue&&(E=R-d.maxWidthValue)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue-E<=d.minWidthValue&&(E=d.widthValue-d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue-E<=f&&(E=d.widthValue-f)):(R=d.widthValue/100*n)-E<=d.minWidthValue&&(E=R-d.minWidthValue)),"%"!==d.widthUnit?d.widthValue-E<=0&&(E=d.widthValue):d.widthValue-100*E/n<=0&&(E=d.widthValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)):null===d.widthValue&&null!==d.leftValue&&null!==d.rightValue&&(S=d.leftValue,"%"!==d.leftUnit?S+=-u.left+E:S=n*((S+=100*(-u.left+E)/n)/100),v=d.rightValue,"%"!==d.rightUnit?v+=u.left:v=n*((v+=100*u.left/n)/100),n<=S+v&&(E=e.controlCssPixelDimension.width,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h))),null!==d.widthValue?"%"!==d.widthUnit?d.widthValue+=-E:d.widthValue+=100*-E/n:(null===d.leftValue&&null!==d.rightValue||null!==d.leftValue&&null===d.rightValue)&&("%"!==d.widthUnit?d.widthValue=e.controlCssPixelDimension.width-E:d.widthValue=e.controlCssPixelDimension.width/n*100-100*E/n),null!==d.heightValue?"%"!==d.heightUnit?d.heightValue+=g:d.heightValue+=100*g/i:(null===d.topValue&&null!==d.bottomValue||null!==d.topValue&&null===d.bottomValue)&&("%"!==d.heightUnit?d.heightValue=e.controlCssPixelDimension.height+g:d.heightValue=e.controlCssPixelDimension.height/i*100+100*g/i),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=-u.left+E:d.leftValue+=100*(-u.left+E)/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=u.top:d.topValue+=100*u.top/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=u.left:d.rightValue+=100*u.left/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-(u.top+g):d.bottomValue+=100*-(u.top+g)/i);break;case"BottomCenter":!0===e.isPartialRoot&&(null!==d.heightValue&&"%"===d.heightUnit&&(d.heightUnit="px",d.heightValue=d.heightValue/100*a.height),null!==d.bottomValue&&"px"===d.bottomUnit&&(d.bottomUnit="px",d.bottomValue=d.bottomValue/100*i)),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,0,g,m,_,h),null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue>d.maxHeightValue&&(d.heightValue=d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue>y&&(d.heightValue=y)):(b=d.heightValue/100*i)>d.maxHeightValue&&(d.heightValue=d.maxHeightValue/i*100)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue<d.minHeightValue&&(d.heightValue=d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue<T&&(d.heightValue=T)):(b=d.heightValue/100*i)<d.minHeightValue&&(d.heightValue=d.minHeightValue/i*100)),null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue+g>=d.maxHeightValue&&(g=d.maxHeightValue-d.heightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue+g>=y&&(g=y-d.heightValue)):(b=d.heightValue/100*i)+g>=d.maxHeightValue&&(g=d.maxHeightValue-b)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue+g<=d.minHeightValue&&(g=d.minHeightValue-d.heightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue+g<=T&&(g=T-d.heightValue)):(b=d.heightValue/100*i)+g<=d.minHeightValue&&(g=d.minHeightValue-b)),null!==d.heightValue?("%"!==d.heightUnit?d.heightValue+g<=0&&(g=-d.heightValue):d.heightValue+100*g/i<=0&&(g=-d.heightValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,0,g,m,_,h)):null===d.heightValue&&null!==d.topValue&&null!==d.bottomValue&&(C=d.topValue,"%"!==d.topUnit?C+=u.top:C=i*((C+=100*u.top/i)/100),M=d.bottomValue,"%"!==d.bottomUnit?M+=-(g+u.top):M=i*((M+=100*-(g+u.top)/i)/100),i<=C+M&&(g=-e.controlCssPixelDimension.height,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,0,g,m,_,h))),null!==d.heightValue?"%"!==d.heightUnit?d.heightValue+=g:d.heightValue+=100*g/i:(null===d.topValue&&null!==d.bottomValue||null!==d.topValue&&null===d.bottomValue)&&("%"!==d.heightUnit?d.heightValue=e.controlCssPixelDimension.height+g:d.heightValue=e.controlCssPixelDimension.height/i*100+100*g/i),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=-u.left:d.leftValue+=100*-u.left/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=u.top:d.topValue+=100*u.top/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=u.left:d.rightValue+=100*u.left/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-(g+u.top):d.bottomValue+=100*-(g+u.top)/i);break;case"BottomRight":if(!0===e.isPartialRoot&&(null!==d.heightValue&&"%"===d.heightUnit&&(d.heightUnit="px",d.heightValue=d.heightValue/100*a.height),null!==d.widthValue&&"%"===d.widthUnit&&(d.widthUnit="px",d.widthValue=d.widthValue/100*a.width),null!==d.bottomValue&&"%"===d.bottomUnit&&(d.bottomUnit="px",d.bottomValue=d.bottomValue/100*i),null!==d.rightValue&&"%"===d.rightUnit&&(d.rightUnit="px",d.rightValue=d.rightValue/100*n)),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h),null!==d.heightValue){if(null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue>d.maxHeightValue&&(d.heightValue=d.maxHeightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue>y&&(d.heightValue=y)):(b=d.heightValue/100*i)>d.maxHeightValue&&(d.heightValue=d.maxHeightValue/i*100)),null!==d.minHeightValue&&(d.heightUnit===d.minHeightUnit?d.heightValue<d.minHeightValue&&(d.heightValue=d.minHeightValue):"%"!==d.heightUnit?(T=d.minHeightValue/100*i,d.heightValue<T&&(d.heightValue=T)):(b=d.heightValue/100*i)<d.minHeightValue&&(d.heightValue=d.minHeightValue/i*100)),null!==d.maxHeightValue&&(d.heightUnit===d.maxHeightUnit?d.heightValue+g>=d.maxHeightValue&&(g=d.maxHeightValue-d.heightValue):"%"!==d.heightUnit?(y=d.maxHeightValue/100*i,d.heightValue+g>=y&&(g=y-d.heightValue)):(b=d.heightValue/100*i)+g>=d.maxHeightValue&&(g=d.maxHeightValue-b)),null!==d.minHeightValue)if(d.heightUnit===d.minHeightUnit)d.heightValue+g<=d.minHeightValue&&(g=d.minHeightValue-d.heightValue);else if("%"!==d.heightUnit)T=d.minHeightValue/100*i,d.heightValue+g<=T&&(g=T-d.heightValue);else{var b;(b=d.heightValue/100*i)+g<=d.minHeightValue&&(g=d.minHeightValue-b)}"%"!==d.heightUnit?d.heightValue+g<=0&&(g=-d.heightValue):d.heightValue+100*g/i<=0&&(g=-d.heightValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)}else null===d.heightValue&&null!==d.topValue&&null!==d.bottomValue&&(C=d.topValue,"%"!==d.topUnit?C+=u.top:C=i*((C+=100*u.top/i)/100),M=d.bottomValue,"%"!==d.bottomUnit?M+=-(u.top+g):M=i*((M+=100*-(u.top+g)/i)/100),i<=C+M&&(g=-e.controlCssPixelDimension.height,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)));if(null!==d.widthValue){if(null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue>d.maxWidthValue&&(d.widthValue=d.maxWidthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue>p&&(d.widthValue=p)):(R=d.widthValue/100*n)>d.maxWidthValue&&(d.widthValue=d.maxWidthValue/n*100)),null!==d.minWidthValue&&(d.widthUnit===d.minWidthUnit?d.widthValue<d.minWidthValue&&(d.widthValue=d.minWidthValue):"%"!==d.widthUnit?(f=d.minWidthValue/100*n,d.widthValue<f&&(d.widthValue=f)):(R=d.widthValue/100*n)<d.minWidthValue&&(d.widthValue=d.minWidthValue/n*100)),null!==d.maxWidthValue&&(d.widthUnit===d.maxWidthUnit?d.widthValue+E>=d.maxWidthValue&&(E=d.maxWidthValue-d.widthValue):"%"!==d.widthUnit?(p=d.maxWidthValue/100*n,d.widthValue+E>=p&&(E=p-d.widthValue)):(R=d.widthValue/100*n)+E>=d.maxWidthValue&&(E=d.maxWidthValue-R)),null!==d.minWidthValue)if(d.widthUnit===d.minWidthUnit)d.widthValue+E<=d.minWidthValue&&(E=d.minWidthValue-d.widthValue);else if("%"!==d.widthUnit)f=d.minWidthValue/100*n,d.widthValue+E<=f&&(E=f-d.widthValue);else{var R;(R=d.widthValue/100*n)+E<=d.minWidthValue&&(E=d.minWidthValue-R)}"%"!==d.widthUnit?d.widthValue+E<=0&&(E=-d.widthValue):d.widthValue+100*E/n<=0&&(E=-d.widthValue),u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)}else null===d.widthValue&&null!==d.leftValue&&null!==d.rightValue&&(S=d.leftValue,"%"!==d.leftUnit?S+=-u.left:S=n*((S+=100*-u.left/n)/100),v=d.rightValue,"%"!==d.rightUnit?v+=-(-u.left+E):v=n*((v+=100*-(-u.left+E)/n)/100),n<=S+v&&(E=-e.controlCssPixelDimension.width,u=this.__getResizedRectRotationOffset(d.widthValue,d.heightValue,E,g,m,_,h)));null!==d.widthValue?"%"!==d.widthUnit?d.widthValue+=E:d.widthValue+=100*E/n:(null===d.leftValue&&null!==d.rightValue||null!==d.leftValue&&null===d.rightValue)&&("%"!==d.widthUnit?d.widthValue=e.controlCssPixelDimension.width+E:d.widthValue=e.controlCssPixelDimension.width/n*100+100*E/n),null!==d.heightValue?"%"!==d.heightUnit?d.heightValue+=g:d.heightValue+=100*g/i:(null===d.topValue&&null!==d.bottomValue||null!==d.topValue&&null===d.bottomValue)&&("%"!==d.heightUnit?d.heightValue=e.controlCssPixelDimension.height+g:d.heightValue=e.controlCssPixelDimension.height/i*100+100*g/i),null!==d.leftValue&&("%"!==d.leftUnit?d.leftValue+=-u.left:d.leftValue+=100*-u.left/n),null!==d.topValue&&("%"!==d.topUnit?d.topValue+=u.top:d.topValue+=100*u.top/i),null!==d.rightValue&&("%"!==d.rightUnit?d.rightValue+=-(-u.left+E):d.rightValue+=100*-(-u.left+E)/n),null!==d.bottomValue&&("%"!==d.bottomUnit?d.bottomValue+=-(u.top+g):d.bottomValue+=100*-(u.top+g)/i)}return d},o.prototype.__onAnchorMouseUp=function(){var r=this;return function(e){1===e.which&&(_.System.SharedResources.jqDocument.off(r.__anchorMouseMoveNs),_.System.SharedResources.jqDocument.off(r.__anchorMouseUpNs),null!==r.__activeControl&&(r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snaptop"),r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapleft"),r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapbottom"),r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapright"),r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snaptop-remote"),r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapleft-remote"),r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapbottom-remote"),r.__activeControl.jOriginalPosition[0].classList.remove("tchmi-creator-control-snapright-remote"),!0!==r.__lockControlResize&&(r.__controlResizing=!1,r.__designerModeManager.rectSelectManager.lockRectSelect(),r.__designerModeManager.syncManager.updatePcElementAndSync("System.onControlSizeParameterChanged"),r.__designerModeManager.resyncSelectedControls())))}},t=o,r.DesignerModeMasterControlResizeManager=t}(TcHmi=TcHmi||{}),function(e){var r,t,o;function i(e){var r=this;this.__verPositionCache={},this.__horPositionCache={},this.__anchorName=void 0,this.__onDocumentelementClick=function(e){e.target!==document.documentElement&&e.target!==document.body||r.__designerModeManager.unselectEach(!1)},this.__designerModeManager=e,document.documentElement.addEventListener("click",this.__onDocumentelementClick),this.__modifierKeyPressed={ctrl:!1,shift:!1},this.__startMousePosition={left:0,top:0},this.__positionInsideControl={top:0,left:0,right:0,bottom:0,height:0,width:0}}r=e.System||(e.System={}),t=r.Engineering||(r.Engineering={}),i.prototype.getAnchorName=function(){return this.__anchorName},i.prototype.setAnchorName=function(e){this.__anchorName=e},i.prototype.getStartMousePos=function(){return this.__startMousePosition},i.prototype.getPositionInsideControl=function(){return this.__positionInsideControl},i.prototype.setCtrlModifierKeyState=function(e){this.__modifierKeyPressed.ctrl=e},i.prototype.setShiftModifierKeyState=function(e){this.__modifierKeyPressed.shift=e},i.prototype.clearControlSnapPositionCache=function(){this.__horPositionCache={},this.__verPositionCache={}},i.prototype.handleInteractionStart=function(e,r){if(this.__startMousePosition.left=e.pageX,this.__startMousePosition.top=e.pageY,null!==r){var t=r.jOriginalPosition[0].getBoundingClientRect();this.__positionInsideControl.top=e.pageY-t.top-window.scrollY,this.__positionInsideControl.left=e.pageX-t.left-window.scrollX,this.__positionInsideControl.right=t.right+window.scrollX-e.pageX,this.__positionInsideControl.bottom=t.bottom+window.scrollY-e.pageY,this.__positionInsideControl.height=t.height,this.__positionInsideControl.width=t.width}},i.prototype.refreshControlSnapPositionCache=function(e){if(e){if(0===e.absoluteParentRotation&&(this.__addPositionCacheEntry(e.jOriginalPosition[0],e.id,e.isContainerControl),!0===e.isGridControl))for(var r=e.jControlPosition.children(".tchmi-creator-gridcell"),t=0,o=r.length;t<o;t++)this.__addPositionCacheEntry(r[t],e.id,!0)}else{var i=this.__designerModeManager.metaDataManager.getControlMetaData();for(var n in i)this.refreshControlSnapPositionCache(i[n])}},i.prototype.__addSnapPosition=function(e,r,t){e[t]?e[t].push(r):e[t]=[r]},i.prototype.__addPositionCacheEntry=function(e,r,t){var o=tchmi_clone_object(e.getBoundingClientRect());for(var i in o.left+=window.scrollX,o.top+=window.scrollY,o.right+=window.scrollX,o.bottom+=window.scrollY,o)o[i]=Math.round(o[i]);this.__addSnapPosition(this.__verPositionCache,{name:r,controlTopOrLeft:!0,remoteMatch:!1},o.top),this.__addSnapPosition(this.__verPositionCache,{name:r,controlTopOrLeft:!0,remoteMatch:!0},o.top-10),t&&this.__addSnapPosition(this.__verPositionCache,{name:r,controlTopOrLeft:!1,remoteMatch:!0},o.top+10),this.__addSnapPosition(this.__verPositionCache,{name:r,controlTopOrLeft:!1,remoteMatch:!1},o.bottom),this.__addSnapPosition(this.__verPositionCache,{name:r,controlTopOrLeft:!1,remoteMatch:!0},o.bottom+10),t&&this.__addSnapPosition(this.__verPositionCache,{name:r,controlTopOrLeft:!0,remoteMatch:!0},o.bottom-10),this.__addSnapPosition(this.__horPositionCache,{name:r,controlTopOrLeft:!0,remoteMatch:!1},o.left),this.__addSnapPosition(this.__horPositionCache,{name:r,controlTopOrLeft:!0,remoteMatch:!0},o.left-10),t&&this.__addSnapPosition(this.__horPositionCache,{name:r,controlTopOrLeft:!1,remoteMatch:!0},o.left+10),this.__addSnapPosition(this.__horPositionCache,{name:r,controlTopOrLeft:!1,remoteMatch:!1},o.right),this.__addSnapPosition(this.__horPositionCache,{name:r,controlTopOrLeft:!1,remoteMatch:!0},o.right+10),t&&this.__addSnapPosition(this.__horPositionCache,{name:r,controlTopOrLeft:!0,remoteMatch:!0},o.right-10)},i.prototype.handleSnapping=function(e,r,t,o){var i=0,n=0,a=this.__designerModeManager.rootControlManager.getCreatorZoomFactor(),s=!1,l=!1,c=!1,u=!1,d=!1,m=!1,_=!1,h=!1;if(o&&0===e.absoluteParentRotation){var g=this.__designerModeManager.metaDataManager.getSelectedControlIdsWithChildren(),E=!0,p=!0,f=!0,S=!0;switch(this.__anchorName){case"TopLeft":S=p=!1;break;case"TopCenter":S=f=p=!1;break;case"TopRight":f=p=!1;break;case"CenterRight":f=p=E=!1;break;case"CenterLeft":S=p=E=!1;break;case"BottomLeft":S=E=!1;break;case"BottomCenter":S=f=E=!1;break;case"BottomRight":f=E=!1}var v=void 0,y=void 0;if(!0===E||!0===p)for(v in this.__verPositionCache){var T=this.__verPositionCache[v];if(y=parseInt(v,10),!isNaN(y))if(!0===E&&y-5<t.top-this.__positionInsideControl.top&&t.top-this.__positionInsideControl.top<y+5)for(var C=0,M=T;C<M.length;C++){var b=M[C];if(-1===g.indexOf(b.name)&&(!0!==b.remoteMatch||!0!==b.controlTopOrLeft)){!1===s&&!1===l?(n=y-(t.top-this.__positionInsideControl.top),s=!0,d=b.remoteMatch):y-n==t.top-this.__positionInsideControl.top&&(s=!0,d=b.remoteMatch);break}}else if(!0===p&&y-5<t.top-this.__positionInsideControl.top+this.__positionInsideControl.height&&t.top-this.__positionInsideControl.top+this.__positionInsideControl.height<y+5)for(var R=0,N=T;R<N.length;R++)if(b=N[R],-1===g.indexOf(b.name)&&(!0!==b.remoteMatch||!1!==b.controlTopOrLeft)){!1===s&&!1===l?(n=y-(t.top-this.__positionInsideControl.top+this.__positionInsideControl.height),l=!0,m=b.remoteMatch):y-n===t.top-this.__positionInsideControl.top+this.__positionInsideControl.height&&(l=!0,m=b.remoteMatch);break}if(!0===s&&!0===l)break}if(!0===f||!0===S)for(v in this.__horPositionCache){if(T=this.__horPositionCache[v],y=parseInt(v,10),!isNaN(y))if(!0===f&&y-5<t.left-this.__positionInsideControl.left&&t.left-this.__positionInsideControl.left<y+5){for(var w=0,O=T;w<O.length;w++)if(b=O[w],-1===g.indexOf(b.name)&&(!0!==b.remoteMatch||!0!==b.controlTopOrLeft)){!1===c&&!1===u?(i=y-(t.left-this.__positionInsideControl.left),c=!0,_=b.remoteMatch):y-i==t.left-this.__positionInsideControl.left&&(c=!0,_=b.remoteMatch);break}}else if(!0===S&&y-5<t.left-this.__positionInsideControl.left+this.__positionInsideControl.width&&t.left-this.__positionInsideControl.left+this.__positionInsideControl.width<y+5)for(var I=0,A=T;I<A.length;I++)if(b=A[I],-1===g.indexOf(b.name)&&(!0!==b.remoteMatch||!1!==b.controlTopOrLeft)){!1===c&&!1===u?(i=y-(t.left-this.__positionInsideControl.left+this.__positionInsideControl.width),u=!0,h=b.remoteMatch):y-i===t.left-this.__positionInsideControl.left+this.__positionInsideControl.width&&(u=!0,h=b.remoteMatch);break}if(!0===c&&u)break}}return e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snaptop",s),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snapbottom",l),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snapleft",c),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snapright",u),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snaptop-remote",d),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snapbottom-remote",m),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snapleft-remote",_),e.jOriginalPosition[0].classList.toggle("tchmi-creator-control-snapright-remote",h),{left:r.left+i/a,top:r.top+n/a}},o=i,t.DesignerModeMasterInteractionManager=o}(TcHmi=TcHmi||{}),function(h){var e,r;function t(e){this.__entries={},this.__locale=void 0,this.__localeFileRequested="",this.__callbackMap=new Map}e=h.System||(h.System={}),t.prototype.getLocale=function(){return this.__locale},t.prototype.loadLocale=function(t,o){var i=this;t||h.Callback.callSafe(o,null,{error:h.Errors.E_PARAMETER_INVALID,details:{code:h.Errors.E_PARAMETER_INVALID,message:h.Errors[h.Errors.E_PARAMETER_INVALID],reason:"No locale requested.",domain:"TcHmi.System.LocalizationManager"}}),h.System.Services.serverManager.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"SetLocale",writeValue:t}]},h.Server.__handleServerAnswer(o,function(e){if(o){var r=i.__callbackMap.get(t);r||(r=[],i.__callbackMap.set(t,r)),r.push(o)}}))},t.prototype.processLocalizationData=function(e,r){if(void 0===r&&(r=!1),void 0===e.locale||null===e.locale)return h.Errors.E_PARAMETER_INVALID;var t=e.localizedText;if(null==t)return h.Errors.E_PARAMETER_INVALID;var o=[];for(var i in t)(s=this.__entries[i])?tchmi_equal(s.text,t[i])||(s.text=t[i],o.push(s)):(s={text:t[i],callbacks:[]},this.__entries[i]=s);for(var n=0,a=o.length;n<a;n++){for(var s,l=[],c=0,u=(s=o[n]).callbacks.length;c<u;c++)l[c]=s.callbacks[c];for(var d=0,m=l;d<m.length;d++){var _=m[d];-1!==s.callbacks.indexOf(_)&&h.Callback.callSafe(_.callback,this,{error:h.Errors.NONE,value:s.text,destroy:_.destroy})}}return document.documentElement.lang=e.locale,this.__locale=e.locale,r||h.EventProvider.raise("onLocaleChanged",e.locale),h.Errors.NONE},t.prototype.__loadLocale=function(o,e){var i=this;void 0===e&&(e=null);var n=this.__callbackMap.get(o);(n=n||[]).push(e),n.push(function(){i.__callbackMap.delete(o)});var a=h.System.config.languages;if(a&&0!==Object.keys(a).length){function r(e){if(e){var r=a[e];if(!r)for(var t=e.toLowerCase().split("-"),o=0,i=Object.keys(a);o<i.length;o++){var n=i[o];if(n.toLowerCase().split("-")[0]===t[0])return tchmi_path(a[n])}return tchmi_path(r)}}var t=r(o);if(!t){var s=void 0;s=navigator.languages?navigator.languages:navigator.browserLanguage?[navigator.browserLanguage]:[];for(var l=0;l<s.length&&!(t=r(s[l]));l++);}if(!t)return this.__locale=void 0,void h.System.Callback.callSafeCallbacks1Param(n,null,{error:h.Errors.E_PARAMETER_INVALID,details:{code:h.Errors.E_PARAMETER_INVALID,message:h.Errors[h.Errors.E_PARAMETER_INVALID],reason:"Did not found a localization file for requested locale "+o+".",domain:"TcHmi.System.LocalizationManager"}});if(this.__localeFileRequested!==t){this.__localeFileRequested=t;var c=new XMLHttpRequest;c.open("GET",t+(TCHMI_ENABLE_DESIGNER_MODE?"?preventcache="+Math.random():""));var u=function(e){h.System.Callback.callSafeCallbacks1Param(n,null,{error:h.Errors.E_PARAMETER_INVALID,details:{code:h.Errors.E_PARAMETER_INVALID,message:h.Errors[h.Errors.E_PARAMETER_INVALID],reason:"Failed to load file= "+t+" with error="+c.statusText,domain:"TcHmi.System.LocalizationManager"}})};c.addEventListener("load",function(e){if(200===c.status){var r=h.ValueConverter.toObject(c.responseText),t=i.processLocalizationData(r);t===h.Errors.NONE?h.System.Callback.callSafeCallbacks1Param(n,null,{error:h.Errors.NONE}):h.System.Callback.callSafeCallbacks1Param(n,null,{error:t,details:{code:t,message:h.Errors[t],reason:"Parsing localization file for requested locale "+o+" failed.",domain:"TcHmi.System.LocalizationManager"}})}else u(e)}),c.addEventListener("error",u),c.send()}else h.System.Callback.callSafeCallbacks1Param(n,null,{error:h.Errors.NONE})}else h.System.Callback.callSafeCallbacks1Param(n,null,{error:h.Errors.NONE})},t.prototype.get=function(e){return this.__entries[e]},t.prototype.watch=function(e,r){var t=this.__entries[e];if(!t)return h.Callback.callSafe(r,this,{error:h.Errors.E_SYMBOL_UNKNOWN,details:{code:h.Errors.E_SYMBOL_UNKNOWN,message:h.Errors[h.Errors.E_SYMBOL_UNKNOWN],reason:"Localization symbol with name="+e+" does not exist.",domain:"TcHmi.System.LocalizationManager"}}),function(){};function o(){var e=t.callbacks.indexOf(i);-1!==e&&(t.callbacks.splice(e,1),i.callback=null)}var i={callback:r,destroy:o};return t.callbacks.push(i),h.Callback.callSafe(r,this,{error:h.Errors.NONE,value:t.text,destroy:o}),o},r=t,e.LocalizationManager=r}(TcHmi=TcHmi||{}),function(p){var a,e;function t(e){var r=this;this.__isInitialized=!1,this.__unloaded=!1,this.__lastConnectState=0,this.__cyclicReconnect=!1,this.__watchSymbolCache=p.System.createES5Map(),this.__requestCache=p.System.createES5Map(),this.__requestQueue=[],this.__requestPending=null,this.__requestIdCount=0,this.__conWatcherIntervalId=0,this.__conWatcherFirstAccessReject=new Date,this.__symbolWatcherIntervalId=0,this.__symbolWatcherStartTime=new Date,this.__onUnload=function(e){"__TcHmiServermanager"===p.System.Services.dialogManager.getDialogOwner()&&p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!1),r.__unloaded=!0,r.__cyclicReconnect=!1,r.__lastConnectState=4,r.close()},p.EventProvider.register("System.onUnload",this.__onUnload);var t=window.location.port;if(t=t||("https:"===window.location.protocol?"443":"80"),this.setServerAddress(window.location.hostname,t,window.location.protocol),"undefined"==typeof WebSocket&&"function"==typeof e){var o={servicesName:"ServerManager",error:p.Errors.E_NOT_SUPPORTED,details:{code:p.Errors.E_NOT_SUPPORTED,message:p.Errors[p.Errors.E_NOT_SUPPORTED],domain:"TcHmi.System.ServerManager"},dialogManagerMessage:"Browser support for Websocket missing."};e.call(null,o)}}a=p.System||(p.System={}),t.prototype.onWsOpen=function(l){var c=this;return function(){if(c.__websocket){TCHMI_ENABLE_DESIGNER_MODE&&p.Engineering.ErrorPane.remove("E_SERVER_CONNECTION_LOST"),p.Log.debug("[Source=Framework, Module=TcHmi.System.ServerManager] WebSocket with url="+c.__websocket.url+" opened.");var s=function(){c.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Diagnostics::LICENSE"}]},function(e){var r,t=1;if(null==e||e.error!==p.Errors.NONE||void 0===e.response||null===e.response)t=1;else{var o=e.response.error;if(void 0!==o)t=o.code===p.Server.Error.HMI_E_MISSING_LICENSE_HANDSHAKE||o.code===p.Server.Error.HMI_E_LICENSE_VERIFY?6:1;else{var i=e.response.commands;if(null==i||void 0===i[0]||null===i[0])t=1;else if(void 0!==i[0].error)t=(r=i[0].error).code===p.Server.Error.HMI_E_MISSING_LICENSE_HANDSHAKE||r.code===p.Server.Error.HMI_E_LICENSE_VERIFY?6:r.code===p.Server.Error.HMI_E_INSUFFICIENT_ACCESS?5:2;else{var n=i[0].readValue;if(null==n)t=1;else switch(n.STATE){case"Engineering":case"Demo":case"OK":t=3;break;case"Unregistered":case"Pending":case"Error":default:t=6}}}}if(3===t)c.__isInitialized=!0,c.__cyclicReconnect=!0,0!==c.__conWatcherIntervalId&&(window.clearInterval(c.__conWatcherIntervalId),c.__conWatcherIntervalId=0),p.EventProvider.raise("onWebSocketOpened"),0===c.__symbolWatcherIntervalId&&(c.__symbolWatcherStartTime=new Date,c.__symbolWatcherIntervalId=window.setInterval(c.symbolWatcherTick(),100)),"__TcHmiServermanager"===p.System.Services.dialogManager.getDialogOwner()&&p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!1),p.Callback.callSafe(l,null,{error:p.Errors.NONE,url:c.__websocket?c.__websocket.url:void 0}),c.__lastConnectState=t;else if(6===t){var a=new Date;c.__lastConnectState!==t&&(c.__conWatcherFirstAccessReject=a),!TCHMI_ENABLE_DESIGNER_MODE||5e3<a.getTime()-c.__conWatcherFirstAccessReject.getTime()?("function"==typeof l?("__TcHmiServermanager"===p.System.Services.dialogManager.getDialogOwner()&&p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!1),p.Callback.callSafe(l,null,{error:p.Errors.E_WEBSOCKET_OPEN_SERVER_LICENSE_MISSING,url:c.__websocket?c.__websocket.url:void 0})):(TCHMI_ENABLE_DESIGNER_MODE_MASTER?p.System.Services.dialogManager.updateText("__TcHmiServermanager","Error: TwinCAT HMI Server license is missing. Please reopen window.",p.DialogManager.DialogSeverity.Error):p.System.Services.dialogManager.updateText("__TcHmiServermanager",'Error: TwinCAT HMI Server license is missing.\n<input type="submit" value="Retry" style="margin-left:30px;" onclick="window.location.reload()">',p.DialogManager.DialogSeverity.Error),p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!0,p.DialogManager.DialogType.Overlay)),c.__close()):window.setTimeout(s,500),c.__lastConnectState=t}else 2===t?("function"==typeof l?("__TcHmiServermanager"===p.System.Services.dialogManager.getDialogOwner()&&p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!1),p.Callback.callSafe(l,null,{error:p.Errors.E_SERVER_COMMAND_ERROR,details:{code:p.Errors.E_SERVER_COMMAND_ERROR,message:p.Errors[p.Errors.E_SERVER_COMMAND_ERROR],domain:"TcHmi.System.ServerManager",errors:r?[r]:void 0},url:c.__websocket?c.__websocket.url:void 0})):(TCHMI_ENABLE_DESIGNER_MODE_MASTER?p.System.Services.dialogManager.updateText("__TcHmiServermanager","Error: Communication to TwinCAT HMI Server failed. Please reopen window.",p.DialogManager.DialogSeverity.Error):p.System.Services.dialogManager.updateText("__TcHmiServermanager",'Error: Failed to check TwinCAT HMI Server license.\n<input type="submit" value="Retry" style="margin-left:30px;" onclick="window.location.reload()">',p.DialogManager.DialogSeverity.Error),p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!0,p.DialogManager.DialogType.Overlay)),c.__close()):5===t?"function"==typeof l?("__TcHmiServermanager"===p.System.Services.dialogManager.getDialogOwner()&&p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!1),p.Callback.callSafe(l,null,{error:p.Errors.E_WEBSOCKET_OPEN_SERVER_NO_ACCESS,url:c.__websocket?c.__websocket.url:void 0})):(TCHMI_ENABLE_DESIGNER_MODE_MASTER?p.System.Services.dialogManager.updateText("__TcHmiServermanager","Error: No Access to TwinCAT HMI Server license. This session was logged out or the server is wrong configured. Relogin in 5 seconds.",p.DialogManager.DialogSeverity.Error):p.System.Services.dialogManager.updateText("__TcHmiServermanager",'Error: No Access to TwinCAT HMI Server license. This session was logged out or the server is wrong configured. Relogin in 5 seconds.\n<input type="submit" value="Reload now" style="margin-left:30px;" onclick="window.location.reload()">',p.DialogManager.DialogSeverity.Error),p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!0,p.DialogManager.DialogType.Overlay),window.setTimeout(function(){window.location.reload()},5e3)):("function"==typeof l?("__TcHmiServermanager"===p.System.Services.dialogManager.getDialogOwner()&&p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!1),p.Callback.callSafe(l,null,{error:p.Errors.E_WEBSOCKET_OPEN_SERVER_LICENSE_CHECK_FAILED,url:c.__websocket?c.__websocket.url:void 0})):(TCHMI_ENABLE_DESIGNER_MODE_MASTER?p.System.Services.dialogManager.updateText("__TcHmiServermanager","Error: Communication to TwinCAT HMI Server failed. Please reopen window.",p.DialogManager.DialogSeverity.Error):p.System.Services.dialogManager.updateText("__TcHmiServermanager",'Error: Communication to TwinCAT HMI Server failed.\n<input type="submit" value="Retry" style="margin-left:30px;" onclick="window.location.reload()">',p.DialogManager.DialogSeverity.Error),p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!0,p.DialogManager.DialogType.Overlay)),c.__close()),c.__lastConnectState=t})};s()}else p.Callback.callSafe(l,null,{error:p.Errors.E_WEBSOCKET_NOT_READY,details:{code:p.Errors.E_WEBSOCKET_NOT_READY,message:p.Errors[p.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.System.ServerManager"}})}},t.prototype.onWsClose=function(r){var a=this;return function(e){!0===a.__unloaded||(e.code&&1e3!==e.code&&!e.reason?p.Log.error("[Source=Framework, Module=TcHmi.System.ServerManager] WebSocket with url="+this.url+" was closed with code="+e.code+"."):e.code&&1e3!==e.code&&e.reason?p.Log.error("[Source=Framework, Module=TcHmi.System.ServerManager] WebSocket with url="+this.url+" was closed with code="+e.code+" and reason="+e.reason+"."):p.Log.debug("[Source=Framework, Module=TcHmi.System.ServerManager] WebSocket with url="+this.url+" was closed.")),3===a.__lastConnectState&&(a.__lastConnectState=0,!1===a.__unloaded&&(p.System.Services.dialogManager.updateText("__TcHmiServermanager","Connection to server lost. Reopening connection...",p.DialogManager.DialogSeverity.Error),p.System.Services.dialogManager.showDialog("__TcHmiServermanager",!0,p.DialogManager.DialogType.Overlay),p.Engineering.ErrorPane.add("E_SERVER_CONNECTION_LOST","Connection to server lost. Reopening connection...",p.Engineering.ErrorPane.MessageType.Error))),a.__watchSymbolCache.forEach(function(e,r){for(var t=e.callbacks,o=0,i=t.length;o<i;o++){var n=t[o];p.Callback.callSafe(n.callback,a,{error:p.Errors.E_WEBSOCKET_CLOSED,details:{code:p.Errors.E_WEBSOCKET_CLOSED,message:p.Errors[p.Errors.E_WEBSOCKET_CLOSED],reason:"The underlying websocket was closed.",domain:"TcHmi.System.ServerManager"}})}e.reqId=null}),a.__requestCache.forEach(function(e,r){var t=e.callbacks;clearTimeout(e.timeoutTimer);for(var o=0,i=t.length;o<i;o++){var n=t[o];p.Callback.callSafe(n,a,{error:p.Errors.E_WEBSOCKET_CLOSED,details:{code:p.Errors.E_WEBSOCKET_CLOSED,message:p.Errors[p.Errors.E_WEBSOCKET_CLOSED],reason:"The underlying websocket was closed.",domain:"TcHmi.System.ServerManager"}})}}),a.__requestCache.forEach(function(e,r){a.unregisterRequest(e.id)}),p.EventProvider.raise("onWebSocketClosed"),!(a.__isInitialized=!1)===a.__cyclicReconnect&&0===a.__conWatcherIntervalId&&(a.__conWatcherIntervalId=window.setInterval(a.conWatcherTick(),t.RECONNECT_INTERVAL)),p.Callback.callSafe(r,null,{error:p.Errors.E_WEBSOCKET_NOT_READY,url:this.url}),a.__websocket=void 0}},t.prototype.onWsMessage=function(){var o=this;return function(e){var r=p.ValueConverter.toObject(e.data,null);if(!0===TCHMI_CONSOLE_LOG_TCHMISERVER_MESSAGES&&(p.Log.debug("[Source=Framework, Module=TcHmi.System.ServerManager] Response from TwinCAT HMI Server:"),p.Log.debug(r)),null!=r&&void 0!==r.id&&null!==r.id){var t=o.getRequest(r.id);t&&(0!==t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=0),p.Callback.callSafe(t.responseCallback,o,{error:p.Errors.NONE,response:r}))}}},t.prototype.conWatcherTick=function(){var e=this;return function(){!0===e.__cyclicReconnect&&void 0===e.__websocket&&e.open()}},t.prototype.open=function(e){if(!this.__websocket){var r=this.__websocketProtocol+"//"+this.__websocketHost+":"+this.__websocketPort;try{this.__websocket=new WebSocket(r)}catch(e){return void p.Log.error("[Source=Framework, Module=TcHmi.System.ServerManager] Opening connection to Hmi Webserver failed!")}this.__websocket.onopen=this.onWsOpen(e),this.__websocket.onclose=this.onWsClose(e),this.__websocket.onmessage=this.onWsMessage()}},t.prototype.__close=function(){this.__websocket&&(this.__websocket.close(1e3),this.__websocket=void 0)},t.prototype.close=function(){this.__websocket&&(0!==this.__conWatcherIntervalId&&(window.clearInterval(this.__conWatcherIntervalId),this.__conWatcherIntervalId=0),this.__close())},t.prototype.requestQueueHasPendingRequest=function(){return!!this.__requestPending},t.prototype.requestQueueDone=function(e){e&&this.__requestPending&&this.__requestPending.id===e.id&&(this.__requestPending=null,this.requestQueueNext())},t.prototype.requestQueueAdd=function(e){this.__requestQueue.push(e),!(e.queued=!0)===this.requestQueueHasPendingRequest()&&this.requestQueueNext()},t.prototype.requestQueueRemove=function(e){for(var r=-1,t=0,o=this.__requestQueue.length;t<o;t++)if(this.__requestQueue[t].id===e.id){r=t;break}0<=r&&this.__requestQueue.splice(r,1),this.requestQueueDone(e)},t.prototype.requestQueueNext=function(){var e=this.__requestQueue.shift();e&&(this.__requestPending=e,this.__websocket.send(JSON.stringify(e.message)))},t.prototype.getFreeRequestId=function(){var e=0,r=0;do{if(e=0,1e6<=++r){p.Log.error("[Source=Framework, Module=TcHmi.System.ServerManager] Reached maxium of parallel requests."),e=null;break}this.__requestIdCount++,1e6<=this.__requestIdCount&&(this.__requestIdCount=1),e=this.__requestIdCount}while(this.__requestCache.has(e));return e},t.prototype.setServerAddress=function(e,r,t){e&&(this.__websocketHost=e),r&&(this.__websocketPort=r.toString()),"http:"===t?this.__websocketProtocol="ws:":"https:"===t&&(this.__websocketProtocol="wss:")},t.prototype.getRequest=function(e){return this.__requestCache.get(e)},t.prototype.registerRequest=function(e,r,t){if(this.__requestCache.has(e))return null;var o={id:e,type:r,message:t,deletionPending:!1,timeoutCallback:null,timeoutTimer:0,timeout:null,interval:null,callbacks:[],responseCallback:null,queued:!1};return this.__requestCache.set(e,o),o},t.prototype.unregisterRequest=function(e){var r=this.__requestCache.get(e);r&&(0!==r.timeoutTimer&&(clearTimeout(r.timeoutTimer),r.timeoutTimer=0),this.requestQueueRemove(r),this.__requestCache.delete(e))},t.prototype.registerRequestCallback=function(e,r){var t=this.__requestCache.get(e);t&&t.callbacks.push(r)},t.prototype.unregisterRequestCallback=function(e,r){var t=this.__requestCache.get(e);if(t){var o=t.callbacks.indexOf(r);-1<o&&t.callbacks.splice(o,1)}},t.prototype.registerEventCallback=function(e,r){var t=this,o=this.registerRequest(e,300);return o.responseCallback=function(e){p.System.Callback.callSafeCallbacks1Param(o.callbacks,t,{error:p.Errors.NONE,response:e.response})},this.registerRequestCallback(e,r),e},t.prototype.symbolWatcherTick=function(){var r=this;return function(){var e=new Date;!0===r.__isInitialized&&void 0!==r.__websocket&&null!==r.__websocket&&r.__websocket.readyState===WebSocket.OPEN&&250<e.getTime()-r.__symbolWatcherStartTime.getTime()&&1===r.symbolWatcherRefresh()&&0!==r.__symbolWatcherIntervalId&&(window.clearInterval(r.__symbolWatcherIntervalId),r.__symbolWatcherIntervalId=0)}},t.prototype.symbolWatcherRefresh=function(){var E=this,u=!1,t=[],o=p.System.createES5Map(),i=this.__watchSymbolCache;if(i.forEach(function(e,r){null!==e.reqId&&t.lastIndexOf(e.reqId)<0&&(t.push(e.reqId),e.reqId=null),0===e.refs?i.delete(r):o.get(r)||o.set(r,e)}),0<t.length){for(var e={requestType:"ReadWrite",commands:[]},r=0,n=t.length;r<n;r++){var a=t[r];e.commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Unsubscribe",writeValue:a}),p.Log.debug("[Source=Framework, Module=TcHmi.System.ServerManager] Unsubscribing request with id="+a+".")}this.request(e,function(e){var r=e.response;if(r.error&&p.Log.error("[Source=Framework, Module=TcHmi.System.ServerManager] Server responds with error. "+p.Log.buildMessage(r.error)),void 0!==r){var t=r.commands;if(null!=t)for(var o=0,i=t.length;o<i;o++){var n=t[o];null!=n&&(void 0!==n.error&&null!==n.error&&p.Log.error("[Source=Framework, Module=TcHmi.System.ServerManager] Server responds with error for command for symbol="+n.symbol+". "+p.Log.buildMessage(n.error)),void 0!==n.writeValue&&null!==n.writeValue&&E.releaseRequest(n.writeValue))}}})}var d=p.System.createES5Map();return o.forEach(function(e,r){var t="";null===e.interval?t+="GLOBAL":t+=e.interval,t+="_",null===e.timeout?t+="GLOBAL":t+=e.timeout;var o=d.get(t),i=E.getFreeRequestId();if(i){o?e.reqId=o.message.id:(e.reqId=i,o={interval:e.interval,timeout:e.timeout,watchEntries:[],message:{requestType:"Subscription",id:i,commands:[]}},null!==e.interval&&(o.message.intervalTime=e.interval)),o.watchEntries.push(e);for(var n=o.message.commands,a=!0,s=0,l=n.length;s<l;s++){var c=n[s];if(c.symbol===e.name&&tchmi_equal(c.commandOptions,e.options)){a=!1;break}}a&&(n.push({commandOptions:e.options,symbol:e.name}),p.Log.debug("[Source=Framework, Module=TcHmi.System.ServerManager] Subscribing symbol "+e.name+" in request id="+i+".")),d.set(t,o)}else u=!0}),u?0:(d.forEach(function(e,r){!function(g){for(var e=0,r=g.watchEntries.length;e<r;e++)for(var t=g.watchEntries[e],o=0,i=t.callbacks.length;o<i;o++){var n=t.callbacks[o];!1===n.dirty&&(n.refreshLock=!0)}E.request(g.message,function(e){if(e.error===p.Errors.NONE){var r=e.response;r.error&&p.Log.error("[Source=Framework, Module=TcHmi.System.ServerManager] Server responds with error. "+p.Log.buildMessage(r.error));for(var t=0,o=r.commands.length;t<o;t++){var i=r.commands[t];if(i){var n=i.symbol;null===g.interval?n+="_GLOBAL":n+="_"+g.interval,null===g.timeout?n+="_GLOBAL":n+="_"+g.timeout,i.commandOptions&&-1<i.commandOptions.indexOf("Poll")?n+="_POLL":n+="_GLOBAL";var a=E.__watchSymbolCache.get(n);if(a)if(void 0===i.error){if(void 0!==i.readValue){var s=!tchmi_equal(a.value,i.readValue);a.value=i.readValue;for(var l=[],c=0,u=a.callbacks.length;c<u;c++){var d=a.callbacks[c];l.push(d)}for(var m=0,_=l;m<_.length;m++){var h=_[m];-1!==a.callbacks.indexOf(h)&&(!1===h.refreshLock||1==s?(h.refreshLock=!1,h.dirty=!1,p.Callback.callSafe(h.callback,E,{error:p.Errors.NONE,value:tchmi_clone_object(a.value),destroy:h.destroy})):h.refreshLock=!1)}}}else p.System.ServerManager.__callSymbolWatchEntryCallbacks(a.callbacks,E,{error:p.Errors.E_SERVER_COMMAND_ERROR,details:{code:p.Errors.E_SERVER_COMMAND_ERROR,message:p.Errors[p.Errors.E_SERVER_COMMAND_ERROR],domain:"TcHmi.System.ServerManager",reason:i.symbol,errors:[i.error]}})}}}else for(t=0,o=g.watchEntries.length;t<o;t++)p.System.ServerManager.__callSymbolWatchEntryCallbacks(g.watchEntries[t].callbacks,E,{error:e.error})})}(e)}),u?0:1)},t.prototype.watch=function(e,i){if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER)return p.Callback.callSafe(i,this,{error:p.Errors.E_NOT_SUPPORTED,details:{code:p.Errors.E_NOT_SUPPORTED,message:p.Errors[p.Errors.E_NOT_SUPPORTED],domain:"TcHmi.System.ServerManager"}}),function(){};if(null==e)return p.Callback.callSafe(i,this,{error:p.Errors.E_PARAMETER_INVALID,details:{code:p.Errors.E_PARAMETER_INVALID,message:p.Errors[p.Errors.E_PARAMETER_INVALID],reason:"No expression given",domain:"TcHmi.System.ServerManager"}}),function(){};if(null==i||"function"!=typeof i)return function(){};var r=e.getOptions().Interval?e.getOptions().Interval:null,t=e.getOptions().Timeout?e.getOptions().Timeout:null,n=this,o=e.getName(),a=e.getOptions(),s=[];s.push("SendErrorMessage");var l=o;function c(){var e=!1;if(u){u.refs--;for(var r=-1,t=0,o=u.callbacks.length;t<o;t++)if(u.callbacks[t].callback===i){r=t;break}-1<r&&u.callbacks.splice(r,1),0===u.refs&&(e=!0)}e&&0===n.__symbolWatcherIntervalId&&(n.__symbolWatcherStartTime=new Date,n.__symbolWatcherIntervalId=window.setInterval(n.symbolWatcherTick(),100))}l+=null===r?"_GLOBAL":"_"+r,l+=null===t?"_GLOBAL":"_"+t,a.SubscriptionMode&&"Poll"===a.SubscriptionMode||"Poll"===p.System.config.tcHmiServer.websocketSubscriptionMode?(l+="_POLL",s.push("Poll")):l+="_GLOBAL";var u=this.__watchSymbolCache.get(l);return u?(u.callbacks.push({callback:i,dirty:!0,refreshLock:!1,destroy:c}),u.refs++):(u={reqId:null,name:o,interval:r,timeout:t,refs:1,value:null,options:s,callbacks:[{callback:i,dirty:!0,refreshLock:!1,destroy:c}]},this.__watchSymbolCache.set(l,u)),0===this.__symbolWatcherIntervalId&&(this.__symbolWatcherStartTime=new Date,this.__symbolWatcherIntervalId=window.setInterval(this.symbolWatcherTick(),100)),c},t.prototype.request=function(e,r){return this.requestEx(e,null,r)},t.prototype.requestEx=function(e,r,t){if(!e)return p.Callback.callSafe(t,this,{error:p.Errors.E_PARAMETER_INVALID,details:{code:p.Errors.E_PARAMETER_INVALID,message:p.Errors[p.Errors.E_PARAMETER_INVALID],reason:"No request given",domain:"TcHmi.System.ServerManager"}}),null;if((void 0===e.id||null===e.id)&&(e.id=this.getFreeRequestId(),null===e.id))return p.Callback.callSafe(t,this,{error:p.Errors.ERROR,details:{code:p.Errors.ERROR,message:p.Errors[p.Errors.ERROR],reason:"No request id could be generated",domain:"TcHmi.System.ServerManager"}}),null;if(this.__websocket&&this.__websocket.readyState!==WebSocket.CLOSING&&this.__websocket.readyState!==WebSocket.CLOSED&&this.__websocket.readyState!==WebSocket.CONNECTING){var o,i=!1,n=0;switch(e.requestType){case"ReadWrite":n=100,i=!r||!0!==r.parallel;break;case"Subscription":i=!(n=200);break;case"Event":i=!(n=300)}o=r&&!0===r.refresh?this.getRequest(e.id):this.registerRequest(e.id,n,e),"function"==typeof t&&this.registerRequestCallback(e.id,t),!0===TCHMI_CONSOLE_LOG_TCHMISERVER_MESSAGES&&(p.Log.debug("[Source=Framework, Module=TcHmi.System.ServerManager] Request to TwinCAT HMI Server."),p.Log.debug(e)),"Subscription"===e.requestType&&(void 0===e.intervalTime||null===e.intervalTime?(e.intervalTime=p.System.config.tcHmiServer.websocketIntervalTime,void 0!==e.intervalTime&&null!==e.intervalTime&&"number"==typeof e.intervalTime||(e.intervalTime=500)):o.interval=e.intervalTime),r&&void 0!==r.timeout&&null!==r.timeout&&(o.timeout=r.timeout),o.timeoutCallback=function(){p.Callback.callSafe(t,a,{error:p.Errors.E_TIMEOUT,details:{code:p.Errors.E_TIMEOUT,message:p.Errors[p.Errors.E_TIMEOUT],domain:"TcHmi.System.ServerManager",reason:'Request with id: "'+o.id+'" does not respond within expected time.'}}),o.queued&&a.requestQueueDone(o),a.releaseRequest(o.id)},o.responseCallback=function(e){p.System.Callback.callSafeCallbacks1Param(o.callbacks,a,{error:p.Errors.NONE,response:e.response}),o.queued&&a.requestQueueDone(o),200!==o.type&&a.releaseRequest(o.id)};var a=this,s=void 0;s=null!==o.timeout?o.timeout:p.System.config.tcHmiServer&&p.System.config.tcHmiServer.websocketTimeout?p.System.config.tcHmiServer.websocketTimeout:5e3,o.timeoutTimer=setTimeout(function(){p.Callback.callSafe(o.timeoutCallback,a)},s),i?this.requestQueueAdd(o):this.__websocket.send(JSON.stringify(o.message))}else p.Callback.callSafe(t,this,{error:p.Errors.E_WEBSOCKET_NOT_READY,details:{code:p.Errors.E_WEBSOCKET_NOT_READY,message:p.Errors[p.Errors.E_WEBSOCKET_NOT_READY],domain:"TcHmi.System.ServerManager"}});return e.id},t.prototype.releaseRequest=function(e){this.unregisterRequest(e)},t.prototype.getWebSocketReadyState=function(){return void 0!==this.__websocket&&null!==this.__websocket?this.__websocket.readyState:null},t.prototype.login=function(e,r,t,o,i){void 0===t&&(t=!0);var n={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Login",writeValue:{userName:e,password:r,persistent:t}}]};return a.Services.serverManager.requestEx(n,o,p.Server.__handleServerAnswer(i,function(e){p.Log.debug("Login successful with username: "+e.response.commands[0].writeValue.userName),document.cookie="sessionId="+e.response.sessionId+"; path=/",window.location.reload(!0)})),!0},t.prototype.logout=function(e,r){return a.Services.serverManager.requestEx({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Logout"}]},e,p.Server.__handleServerAnswer(r,function(e){})),!0},t.prototype.forceLogout=function(e,r,t){var o={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ForceLogout",writeValue:e}]};return a.Services.serverManager.requestEx(o,r,p.Server.__handleServerAnswer(t)),!0},t.prototype.refreshGlobalSubscriptionRequest=function(r){var t=this;this.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"Unsubscribe",writeValue:r.id}]},function(e){null===r.interval&&delete r.message.intervalTime,null===r.timeout&&r.timeoutTimer&&(clearTimeout(r.timeoutTimer),r.timeoutTimer=null),t.requestEx(r.message,{refresh:!0})})},t.prototype.refreshGlobalSubscriptionRequests=function(){var t=this;this.__requestCache.forEach(function(e,r){200!==e.type||null!==e.interval&&null!==e.timeout||t.refreshGlobalSubscriptionRequest(e)})},t.__callSymbolWatchEntryCallbacks=function(e,r,t){for(var o=[],i=0,n=e.length;i<n;i++)o.push(e[i]);for(var a=0,s=o;a<s.length;a++){var l=s[a];if(-1!==e.indexOf(l)){var c=p.Callback.callSafe(l.callback,r,t);if(void 0!==c)return c}}},t.RECONNECT_INTERVAL=5e3,e=t,a.ServerManager=e}(TcHmi=TcHmi||{}),function(n){var e,r,t,o;function i(e){this.__subscriptions=new n.List}e=n.System||(n.System={}),i.prototype.confirmAlarm=function(e,r){var t={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ConfirmAlarm",writeValue:e}]};n.System.Services.serverManager.request(t,n.Server.__handleServerAnswer(r))},i.prototype.listEvents=function(e,r){var t={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ListEvents",writeValue:e}]};n.System.Services.serverManager.request(t,n.Server.__handleServerAnswer(r,function(e){setTimeout(function(){n.Callback.callSafe(r,null,{error:n.Errors.NONE,events:e.response.commands[0].readValue})})}))},i.prototype.subscribe=function(e,r){var t=n.System.Services.serverManager.getFreeRequestId(),o={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"SubscribeEvents",writeValue:{responseId:t,filter:e}}]},i={responseId:t,callback:r};return this.__subscriptions.push(i),n.System.Services.serverManager.request(o,n.Server.__handleServerAnswer(r,function(e){n.System.Services.serverManager.registerEventCallback(t,n.Server.__handleServerAnswer(r,function(e){setTimeout(function(){n.Callback.callSafe(r,null,{error:n.Errors.NONE,event:e.response.commands[0].readValue})})}))})),t},i.prototype.unsubscribe=function(r,t){var e=this.__subscriptions.firstOrDefault(function(e){return e.responseId===r});if(null!==e){var o={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"UnsubscribeEvents",writeValue:e.responseId}]};n.System.Services.serverManager.releaseRequest(e.responseId),this.__subscriptions.remove(e),n.System.Services.serverManager.request(o,n.Server.__handleServerAnswer(t,function(e){n.Callback.callSafe(t,null,{error:n.Errors.NONE})}))}},i.prototype.updateSubscription=function(r,e,t){var o=this.__subscriptions.firstOrDefault(function(e){return e.responseId===r});if(null!==o){var i={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"UpdateEventsSubscription",writeValue:{responseId:o.responseId,filter:e}}]};n.System.Services.serverManager.request(i,n.Server.__handleServerAnswer(t))}},o=i,e.ServerEventManager=o,r=o=e.ServerEventManager||(e.ServerEventManager={}),(t=r.ServerAlarmChangeType||(r.ServerAlarmChangeType={}))[t.Raise=0]="Raise",t[t.Change=1]="Change",t[t.Dispose=2]="Dispose"}(TcHmi=TcHmi||{}),function(f){var S,s,e,r;function t(e){this.__triggerMap={}}S=f.System||(f.System={}),t.prototype.__resolveValue=function(t,e){if(e)switch(e.objectType){case"StaticValue":var r=e.value;t.success(r);break;case"Symbol":var o=new S.Symbol(e.symbolExpression);o.read(function(e){e.error===f.Errors.NONE?t.success(e.value):t.error(e.error,e.details),o.destroy(),o=null});break;case"FunctionExpression":if(f.IFunction.isFunctionExpression(e)){var i=new S.FunctionExpression(e.functionExpression);try{var n=!1;i.execute({success:function(e){n||(n=!0,t.success(e))},error:function(e,r){n||(n=!0,t.error(e,r))}})}catch(e){t.error(f.Errors.E_TRIGGER_FUNCTION_EXPRESSION_EXCEPTION,{code:f.Errors.E_TRIGGER_FUNCTION_EXPRESSION_EXCEPTION,message:f.Errors[f.Errors.E_TRIGGER_FUNCTION_EXPRESSION_EXCEPTION],reason:e})}}else t.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]});break;default:t.error(f.Errors.E_NOT_SUPPORTED,{code:f.Errors.E_NOT_SUPPORTED,message:f.Errors[f.Errors.E_NOT_SUPPORTED]})}else t.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]})},t.prototype.__resolveValueAsArray=function(o,r){var i=[];if(r){var n=r.length,a=0,s=this,l=function(){var e=r[a],t=!1;s.__resolveValue({success:function(e){t||(t=!0,i.push(e),a===n-1?o.success(i):(a++,l()))},error:function(e,r){t||(t=!0,o.error(e,r))},trigger:o.trigger,event:o.event},e)};l()}else o.success(i)},t.prototype.__resolveConditionExpressionsResult=function(i,e){function r(r,t){var o=!1;n.__resolveValue({success:function(e){o||(o=!0,a||(r.result[t]=e,0==--l&&function(){var e="";e+="(";for(var r=0,t=s.length;r<t;r++)null!==s[r].expression.logic&&"OR"!==s[r].expression.logic||(e+="("),"=="===s[r].expression.compareOperator||"==="===s[r].expression.compareOperator?(e+="tchmi_equal(",e+="results["+r+"].result.compare1",e+=",",e+="results["+r+"].result.compare2",e+=",false)"):"!="===s[r].expression.compareOperator||"!=="===s[r].expression.compareOperator?(e+="!tchmi_equal(",e+="results["+r+"].result.compare1",e+=",",e+="results["+r+"].result.compare2",e+=",false)"):(e+="(",e+="results["+r+"].result.compare1",e+=s[r].expression.compareOperator,e+="results["+r+"].result.compare2",e+=")"),void 0!==s[r+1]?"AND"===s[r+1].expression.logic?e+=" && ":"OR"===s[r+1].expression.logic&&(e+=") || "):e+=")";e+=")",e+="\n//# sourceURL=TcHmi_System_TriggerManager_ConditionExpressionsResult_Eval";var o=!1;try{o=gIsolatedEval_TcHmi_System_TriggerManager_ConditionExpressionsResult(e,s)}catch(e){f.Log.error(e),i.error(f.Errors.E_EXCEPTION,{code:f.Errors.E_EXCEPTION,message:f.Errors[f.Errors.E_EXCEPTION],reason:e})}i.success(o)}()))},error:function(e,r){o||(a=o=!0,i.error(e,r))},trigger:i.trigger,event:i.event},r.expression[t])}for(var n=this,a=!1,s=[],l=2*e.length,t=0,o=e.length;t<o&&!a;t++){var c={expression:e[t],result:{compare1:void 0,compare2:void 0}};r(s[t]=c,"compare1"),r(c,"compare2")}},t.prototype.__taControlApiFunction=function(o,e){var r=e,t=r.control,i=r.fn;if(null==t)throw new Error("Property=control is missing.");if(null==i)throw new Error("Property=fn is missing.");var n=null;if(!0===f.Symbol.isSymbolExpression(r.control)){var a=new f.SymbolExpression(r.control);n=f.Controls.get(a.getName())}else n=f.Controls.get(r.control);if(null==n)throw new Error("Missing instance for control="+t+".");var s=n[i];if("function"!=typeof s)throw new Error("Missing function="+i+" in control="+t+".");var l=!1;this.__resolveValueAsArray({success:function(e){if(!l){var r,t=l=!0;try{r=s.call.apply(s,[n].concat(e))}catch(e){t=!1,f.Log.error(e),o.error(f.Errors.E_EXCEPTION,{code:f.Errors.E_EXCEPTION,message:f.Errors[f.Errors.E_EXCEPTION],reason:e})}t&&o.success(r)}},error:function(e,r){l||(l=!0,o.error(e,r))},trigger:o.trigger,event:o.event},r.fnParams)},t.prototype.__taWriteToSymbol=function(t,o){var i=!1;this.__resolveValue({success:function(e){if(!i){i=!0;var r=new S.Symbol(o.symbolExpression);r.write(e,function(e){e.error===f.Errors.NONE?t.success():t.error(e.error,e.details),r.destroy(),r=null})}},error:function(e,r){i||(i=!0,t.error(e,r))},trigger:t.trigger,event:t.event},o.value)},t.prototype.__taFunction=function(r,e){if(null!=e){var t={objectType:"Function",active:e.active,fn:e.fn,fnParams:e.fnParams};new f.Function(t).executeEx(null,function(e){e.error===f.Errors.NONE?r.success(e.result):r.error(e.error,e.details)})}},t.prototype.__taActionTemplate=function(t,e){if(null!=e){var r=e.templateName;if(null==r||""===r||"string"!=typeof r)return void t.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID],reason:'Invalid action template name: "'+r+'"'});if(void 0===S.config||null===S.config)return void t.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:"TcHmiConfig is invalid"});var o=S.config.actionTemplates;if(null==o||void 0===o.length)return void t.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:'TcHmiConfig property: "actionTemplates" is invalid'});for(var i=null,n=0,a=o.length;n<a&&(i=o[n]).name!==r;n++)i=null;if(null===i)return void t.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:'Can not find action template with name: "'+r+'".'});function s(){if(u&&u.length)for(var e=0,r=u.length;e<r;e++){var t=u[e];if(t.name){var o=l+"."+t.name;f.System.Services.templateParamSymbolManager.keepAlive(o)||f.System.Services.templateParamSymbolManager.remove(o)}}}var l=tchmi_create_guid(),c=!1,u=i.parameters,d=e.fnParams;for(n=0,a=u.length;n<a;n++)if((g=u[n]).name){var m=l+"."+g.name,_=d[n];if(f.IFunction.isSymbol(_))f.System.Services.templateParamSymbolManager.add(m,g.type,new f.SymbolExpression(_.symbolExpression));else{if(!f.IFunction.isStaticValue(_)){if(_){t.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:'Unsupported action value with objectType: "'+_.objectType+'" for ActionTemplate: "'+e.templateName+'" in action template parameter with name: "'+g.name+'". Supported objectTypse are Symbol and StaticValue. Action template processing will be aborted.'}),c=!0;break}t.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:'Missing parameter number: "'+(n+1)+'" for ActionTemplate: "'+e.templateName+'". Action template processing will be aborted.'}),c=!0;break}f.System.Services.templateParamSymbolManager.add(m,g.type,_.value)}}if(c)t.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR]}),s();else{var h=JSON.stringify(i.actions);for(n=0,a=u.length;n<a;n++){var g;(g=u[n]).name&&(g.name,h=h.replace(new RegExp(tchmi_escape_regex("%tp%"+g.name),"g"),"%tp%"+l+"."+g.name))}var E=f.ValueConverter.toObject(h,null);if(null===E)t.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:'Failed to reparse adjusted json in Triggermanager in "'+event+'".'});else try{var p=!1;this.__processActionList({success:function(e){p||(p=!0,t.success(),s())},error:function(e,r){p||(p=!0,t.error(e,r),s())},trigger:t.trigger,event:t.event},E)}catch(e){t.error(f.Errors.E_EXCEPTION,{code:f.Errors.E_EXCEPTION,message:f.Errors[f.Errors.E_EXCEPTION],reason:'Unexpected exception "'+e+'" in action template: "'+i.name+'".'})}}}},t.prototype.__taFunctionExpression=function(t,e){if(s.isFunctionExpression(e)){var r=new S.FunctionExpression(e.functionExpression),o=!1;r.execute({success:function(e){o||(o=!0,t.success(e))},error:function(e,r){o||(o=!0,t.error(e,r))}})}},t.prototype.__taJavaScript=function(t,o){if(s.isJavaScript(o)){var e="",r=o.sourceLines;if(Array.isArray(r)){try{for(var i=0,n=r.length;i<n;i++)e+=r[i]+"\n";e+="\n//# sourceURL=TcHmi_System_TriggerManager___taJavaScript_Eval"}catch(e){return f.Log.error(e),void t.error(f.Errors.E_EXCEPTION,{code:f.Errors.E_EXCEPTION,message:f.Errors[f.Errors.E_EXCEPTION],reason:e})}try{var a=!1;gIsolatedEval_TcHmi_System_TriggerManager_JavaScriptAction({success:function(e){a||(a=!0,"Asynchronous"===o.waitMode&&t.success())},error:function(e,r){a||(a=!0,"Asynchronous"===o.waitMode&&t.error(e,r))}},e),"Asynchronous"!==o.waitMode&&t.success()}catch(e){f.Log.error(e),"Asynchronous"!==o.waitMode&&t.error(f.Errors.E_TRIGGER_JAVASCRIPT_EVAL_EXCEPTION,{code:f.Errors.E_TRIGGER_JAVASCRIPT_EVAL_EXCEPTION,message:f.Errors[f.Errors.E_TRIGGER_JAVASCRIPT_EVAL_EXCEPTION],reason:e})}}else t.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]})}},t.prototype.__taCondition=function(t,r){if(r){var e=r.expressions;if(e)try{var o=this,i=!1;this.__resolveConditionExpressionsResult({success:function(e){i||((i=!0)===e?o.__processActionList({success:function(e){},error:function(e,r){},trigger:t.trigger,event:t.event},r.true):o.__processActionList({success:function(e){},error:function(e,r){},trigger:t.trigger,event:t.event},r.false),t.success())},error:function(e,r){i||(i=!0,t.error(e,r))},trigger:t.trigger,event:t.event},e)}catch(e){f.Log.error(e),t.error(f.Errors.E_TRIGGER_RESOLVE_CONDITION_EXPRESSION_EXCEPTION,{code:f.Errors.E_TRIGGER_RESOLVE_CONDITION_EXPRESSION_EXCEPTION,message:f.Errors[f.Errors.E_TRIGGER_RESOLVE_CONDITION_EXPRESSION_EXCEPTION],reason:e})}else t.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]})}else t.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]})},t.prototype.__taSwitchCase=function(a,e){if(null!=e){var r=e.compare;if(null!=r){var s=e.cases;if(null!=s){var t=null;function o(){function e(){var e=s[i];if(null==e)return a.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR]}),"break";var r,t=e.caseValue;if(null==t)return a.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR]}),"break";switch(t.objectType){case"StaticValue":r=t.value;break;case"Symbol":var o=new S.Symbol(t.symbolExpression);if(null!=o){if(!S.Symbol.isInternalSymbol(o)){a.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:'Symbol of type: "'+f.SymbolType[o.getExpression().getType()]+'" is not supported in switch case. Please use only StaticValue or InternalSymbol.'}),o.destroy();break}o.read(function(e){r=e.value,o.destroy()})}break;default:return a.error(f.Errors.ERROR,{code:f.Errors.ERROR,message:f.Errors[f.Errors.ERROR],reason:'Object type: "'+t.objectType+'" is not supported in switch case. Please use only StaticValue or Symbol.'}),"continue"}return!0===tchmi_equal(r,c,!1)&&(n=e),null!==n?"break":void 0}var r,i=0,n=null;for(i=0,r=s.length;i<r&&"break"!==e();i++);null!==n?l.__processActionList({success:function(){},error:function(){},trigger:a.trigger,event:a.event},n.actions):null!==t&&l.__processActionList({success:function(){},error:function(){},trigger:a.trigger,event:a.event},t.actions)}void 0!==e.caseDefault&&null!==e.caseDefault&&(t=e.caseDefault);var l=this,c=void 0,i=!1;this.__resolveValue({success:function(e){i||(i=!0,c=e,o(),a.success(f.Errors.NONE))},error:function(e,r){i||(i=!0,a.error(e,r))},trigger:a.trigger,event:a.event},r)}else a.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]})}else a.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]})}else a.error(f.Errors.E_PARAMETER_INVALID,{code:f.Errors.E_PARAMETER_INVALID,message:f.Errors[f.Errors.E_PARAMETER_INVALID]})},t.prototype.__processAction=function(o,i){var n=this;if(!1!==i.active){var a=!1,e={success:function(e){if(!a){var t=!(a=!0);n.__processActionList({success:function(e){t||(t=!0,o.success(e))},error:function(e,r){t||(t=!0,o.error(e,r))},trigger:o.trigger,event:o.event},i.success)}},error:function(e,r){if(!a){a=!0,r?f.Log.error("[Source=Framework, Module=TcHmi.System.TriggerManager, Event="+o.event.name+", ObjectType="+i.objectType+"] "+f.Log.buildMessage(r)):f.Log.error("[Source=Framework, Module=TcHmi.System.TriggerManager, Event="+o.event.name+", ObjectType="+i.objectType+"] "+f.Log.buildMessage({code:e,message:f.Errors[e]}));var t=!1;n.__processActionList({success:function(e){t||(t=!0,o.success(e))},error:function(e,r){t||(t=!0,o.error(e))},trigger:o.trigger,event:o.event},i.error)}},trigger:o.trigger,event:o.event};try{switch(i.objectType){case"Condition":this.__taCondition(e,i);break;case"SwitchCase":this.__taSwitchCase(e,i);break;case"ControlApiFunction":this.__taControlApiFunction(e,i);break;case"WriteToSymbol":this.__taWriteToSymbol(e,i);break;case"Function":this.__taFunction(e,i);break;case"JavaScript":this.__taJavaScript(e,i);break;case"ActionTemplate":this.__taActionTemplate(e,i);break;case"FunctionExpression":this.__taFunctionExpression(e,i);break;case"Comment":o.success();break;default:o.error(f.Errors.E_NOT_SUPPORTED,{code:f.Errors.E_NOT_SUPPORTED,message:f.Errors[f.Errors.E_NOT_SUPPORTED],reason:'Object type: "'+i.objectType+'" is not supported.'})}}catch(e){f.Log.error(e),o.error(f.Errors.E_TRIGGER_ACTION_EXCEPTION,{code:f.Errors.E_TRIGGER_ACTION_EXCEPTION,message:f.Errors[f.Errors.E_TRIGGER_ACTION_EXCEPTION],reason:e})}}else o.success()},t.prototype.__processActionList=function(e,r){if(r){var n=r.length;if(0!==n){var a=0,s=this,l=function(){function t(){a===n-1?e.success():(a++,l())}var o=r[a],i=!1;s.__processAction({success:function(){i||(i=!0,void 0!==o.asyncWait&&!0!==o.asyncWait||t())},error:function(e,r){i||(i=!0,void 0!==o.asyncWait&&!0!==o.asyncWait||t())},trigger:e.trigger,event:e.event},o),void 0!==o.asyncWait&&!1===o.asyncWait&&t()};l()}else e.success()}else e.success()},t.prototype.__onTriggerEvent=function(t){var o=this;return function(e,r){f.Log.debug("[Source=Framework, Module=TcHmi.System.TriggerManager] Trigger event="+e.name),f.Log.debug("[Source=Framework, Module=TcHmi.System.TriggerManager] argument=event"),f.Log.debug(e),f.Log.debug("[Source=Framework, Module=TcHmi.System.TriggerManager] argument=data"),f.Log.debug(r),void 0!==o.__triggerMap&&null!==o.__triggerMap&&(!0===t.preventDefault&&r&&"function"==typeof r.preventDefault&&r.preventDefault(),o.__processActionList({success:function(e){},error:function(e,r){},trigger:t,event:e},t.actions))}},t.prototype.register=function(e){if((!0!==TCHMI_ENABLE_DESIGNER_MODE||!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER)&&null!=e)for(var r=0,t=e.length;r<t;r++){var o=e[r];if(void 0!==o.event&&null!==o.event&&"string"==typeof o.event&&void 0!==o.actions&&null!==o.actions&&"object"==typeof o.actions&&!1!==Array.isArray(o.actions)){var i=f.EventProvider.register(o.event,this.__onTriggerEvent(o),o.preventDefault?{passive:!1,capture:!1}:void 0),n=this.__triggerMap[o.event];void 0===n?(n=[{trigger:o,destroyTriggerEvent:i}],this.__triggerMap[o.event]=n):n.push({trigger:o,destroyTriggerEvent:i})}}},t.prototype.unregister=function(e){if((!0!==TCHMI_ENABLE_DESIGNER_MODE||!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER)&&null!=e)for(var r=0,t=e.length;r<t;r++){var o=e[r];if(void 0!==o.event&&null!==o.event&&"string"==typeof o.event&&void 0!==o.actions&&null!==o.actions&&"object"==typeof o.actions&&!1!==Array.isArray(o.actions)){var i=this.__triggerMap[o.event];if(void 0!==i){for(var n=0,a=i.length;n<a;n++){var s=i[n];if(tchmi_equal(o,s.trigger)){s.destroyTriggerEvent(),i.splice(n,1),n--,a--;break}s=null}0===i.length&&delete this.__triggerMap[o.event]}}}},r=t,S.TriggerManager=r,(e=s=S.Trigger||(S.Trigger={})).isCondition=function(e){return"Condition"===e.objectType},e.isSwitchCase=function(e){return"SwitchCase"===e.objectType},e.isControlApiFunction=function(e){return"ControlApiFunction"===e.objectType},e.isWriteToSymbol=function(e){return"WriteToSymbol"===e.objectType},e.isComment=function(e){return"Comment"===e.objectType},e.isFunction=function(e){return null!==e&&"Function"===e.objectType},e.isJavaScript=function(e){return"JavaScript"===e.objectType},e.isActionTemplate=function(e){return"ActionTemplate"===e.objectType},e.isFunctionExpression=function(e){return null!==e&&"FunctionExpression"===e.objectType},e.isControlAttributeBindingTarget=function(e){return"ControlAttributeBindingTarget"===e.objectType}}(TcHmi=TcHmi||{}),function(t){var e=(
/**
         * Loads a language file and refreshes localization symbols.
         * @param {string | null} locale
         * @param {null | function} callback
         * @preserve (Part of the public API)
         */
r.load=function(e,r){void 0===r&&(r=null),t.System.Services.localizationManager.loadLocale(e,r)},
/**
         * Returns the current locale string for texts or undefined if no localized Symbol is available.
         * @returns   {string}    The current locale identifier.
         * @preserve (Part of the public API)
         */
r.get=function(){return t.System.Services.localizationManager.getLocale()},
/**
         * Returns the list of locales for localizedSymbols.
         * @returns {string[]}
         * @preserve (Part of the public API)
         */
r.getRegisteredLocales=function(){var e=[];for(var r in t.System.config.languages)e.push(r);return e},r);function r(){}t.Locale=e}(TcHmi=TcHmi||{}),function(m){
/**
    * Allows handling date and time formatting
    * @class Localization
    * @memberOf TcHmi
    * @preserve (Part of the public API)
    */
var e=(c.__rebuildLocalizationCache=function(){this.__numberFormatMilliSecondsCache.clear(),this.__dateFormatCache.clear()},c.__getMillisecondsFormatter=function(e){var r=this.__numberFormatMilliSecondsCache.get(e);if(r)return r;var t=e;t=t||m.Server.getCurrentUserConfig().timeFormatLocale;try{r=new Intl.NumberFormat(t,{style:"decimal",minimumFractionDigits:3})}catch(e){e instanceof RangeError&&(t=void 0,r=new Intl.NumberFormat(t,{style:"decimal",minimumFractionDigits:3}))}return this.__numberFormatMilliSecondsCache.set(e,r),r},c.__getFormatter=function(e,r,t,o){void 0===o&&(o="full");var i=this.__dateFormatCache.get(e);i||(i=new Map,this.__dateFormatCache.set(e,i));var n=i.get(r);n||(n=new Map,i.set(r,n));var a=n.get(t);a||(a=new Map,n.set(t,a));var s=a.get(o);if(s)return s;var l=m.Server.getCurrentUserConfig(),c=e;c=c||l.timeFormatLocale;var u=r;u=u||l.timeZone;try{new Intl.DateTimeFormat(c)}catch(e){c=void 0}try{new Intl.DateTimeFormat(c,{timeZone:u})}catch(e){e instanceof RangeError&&(u=void 0)}var d={timeZone:u};switch(o){case"date":d.year="numeric",d.month="numeric",d.day="numeric";break;case"time":d.hour="numeric",d.minute="numeric",d.second="numeric";break;case"full":d.year="numeric",d.month="numeric",d.day="numeric",d.hour="numeric",d.minute="numeric",d.second="numeric"}return d.hour&&"function"!=typeof Intl.DateTimeFormat.prototype.formatToParts&&(d.hour12=!1),s=new Intl.DateTimeFormat(c,d),a.set(o,s),s},
/**
         *  Skip non numberic chars and parseInt the rest.
         *  MS Browsers add Left-To-Right-Mark to output
         *  https://github.com/tc39/ecma402/issues/28
         * @param {string} input
         * @preserve (Part of the public API)
         */
c.parseInt=function(e){for(var r="",t=0;t<e.length;t++)32<=e.charCodeAt(t)&&e.charCodeAt(t)<=126&&(r+=e[t]);return parseInt(r,10)},
/**
         * Parses a Date object
         * formats it to a time zone and split its components into an object
         * On error all entries will be NaN
         * @param date
         * @preserve (Part of the public API)
         */
c.parseDate=function(e,r){var t,o={year:NaN,month:NaN,day:NaN,hour:NaN,minute:NaN,second:NaN,millisecond:NaN};if(isNaN(e.getTime()))return o;if(r&&"string"==typeof r.timeZone&&(t=r.timeZone),"function"==typeof Intl.DateTimeFormat.prototype.formatToParts&&"function"==typeof Array.prototype.find){var i=this.__getFormatter("de-DE",t,!1,"full").formatToParts(e);o.year=m.Localization.parseInt(i.find(function(e){return"year"===e.type}).value),o.month=m.Localization.parseInt(i.find(function(e){return"month"===e.type}).value),o.day=m.Localization.parseInt(i.find(function(e){return"day"===e.type}).value),o.hour=m.Localization.parseInt(i.find(function(e){return"hour"===e.type}).value),o.minute=m.Localization.parseInt(i.find(function(e){return"minute"===e.type}).value),o.second=m.Localization.parseInt(i.find(function(e){return"second"===e.type}).value),o.millisecond=e.getUTCMilliseconds()}else{var n=this.__getFormatter("de-DE",t,!1,"date").format(e).split(".");o.year=m.Localization.parseInt(n[2]),o.month=m.Localization.parseInt(n[1]),o.day=m.Localization.parseInt(n[0]);var a=this.__getFormatter("de-DE",t,!1,"time").format(e).split(":");o.hour=m.Localization.parseInt(a[0]),o.minute=m.Localization.parseInt(a[1]),o.second=m.Localization.parseInt(a[2]),o.millisecond=e.getUTCMilliseconds()}return o},
/**
         * Formats a Date object down to milliseconds in the correct locale and time zone (config from server user or browser default)
         * On error this will be null
         * @param date
         * @preserve (Part of the public API)
         */
c.formatDate=function(o,e){var i=this;if(isNaN(o.getTime()))return null;var n=void 0;e&&"string"==typeof e.locale&&(n=e.locale);var r=void 0;e&&"string"==typeof e.timeZone&&(r=e.timeZone);var t=void 0;e&&"string"==typeof e.type&&(t=e.type);var a="";if("function"==typeof Intl.DateTimeFormat.prototype.formatToParts&&"function"==typeof Array.prototype.find)(s=this.__getFormatter(n,r,void 0,t)).formatToParts(o).forEach(function(e){if("second"===e.type){var r=c.parseInt(e.value);r%1==0&&(r+=o.getMilliseconds()/1e3);var t=i.__getMillisecondsFormatter(n);a+=t.format(r)}else a+=e.value});else{var s=this.__getFormatter(n,r,!1,t);if(a=s.format(o),!e||"date"!==e.type){var l=this.__getMillisecondsFormatter(n).format(o.getMilliseconds()/1e3);a+=l.slice(1)}}return a},c.__numberFormatMilliSecondsCache=m.System.createES5Map(),c.__dateFormatCache=m.System.createES5Map(),c);function c(){}m.Localization=e}(TcHmi=TcHmi||{}),function(le){var ce,e,r,t;if(e=ce=le.System||(le.System={}),(r=e.Services||(e.Services={})).Engineering||(r.Engineering={}),(t=e.Caches||(e.Caches={})).registeredFrameworkFunctionDescription=[],t.registeredControls=le.System.createES5Map(),t.templateMarkupCache=le.System.createES5Map(),t.partialMarkupCache=le.System.createES5Map(),t.partialCompositeConfigCache=le.System.createES5Map(),e.config={basePath:""},(e.isInitialized=!1)===TCHMI_UNITTEST_MODE){if(TCHMI_DYNAMIC_INSTANCE_ID=tchmi_create_guid(),le.Log.debug("[Source=Framework, Module=TcHmi] TCHMI_DYNAMIC_INSTANCE_ID: "+TCHMI_DYNAMIC_INSTANCE_ID),4<=TCHMI_CONSOLE_LOG_LEVEL&&"object"==typeof performance&&"function"==typeof performance.now&&le.Log.debug("[Source=Framework, Module=TcHmi] Time to main function: "+performance.now().toFixed(3).toString()+"ms"),le.System.SharedResources.jqWindow=$(window),le.System.SharedResources.jqDocument=$(document),window.addEventListener("unload",le.System.__unload),ce.Services.dialogManager=new ce.DialogManager,document.body)le.System.SharedResources.jqBody=$(document.body),le.System.SharedResources.jqBody.empty(),!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&le.System.Services.dialogManager.showDialog("__TcHmiMain",!0,le.DialogManager.DialogType.SYSTEMLoading);else{var o=function(){document.removeEventListener("readystatechange",o),le.System.SharedResources.jqBody=$(document.body),le.System.SharedResources.jqBody.empty(),!0!==TCHMI_ENABLE_DESIGNER_MODE_MASTER&&le.System.Services.dialogManager.showDialog("__TcHmiMain",!0,le.DialogManager.DialogType.SYSTEMLoading)};document.addEventListener("readystatechange",o)}if("function"!=typeof Map)throw le.System.Services.dialogManager.updateText("__TcHmiMain","Error: Loading Visualisation failed: Browser support for ES2015 Map missing.",le.DialogManager.DialogSeverity.Error),new Error("Aborting initializing services");le.System.Services.dialogManager.updateText("__TcHmiMain","Loading...");function ue(e){1e4!==de&&e.error!==le.Errors.NONE&&(le.System.Services.dialogManager.updateText("__TcHmiMain","Error: Initializing "+e.servicesName+" failed: "+e.dialogManagerMessage,le.DialogManager.DialogSeverity.Error),de=1e4,i())}var de=1,me=[],_e=0,he=[],ge=0,Ee=[],pe=0,fe=[],Se=0,ve=[],ye=0,Te=[],Ce=0,Me=window.setInterval(function(){le.System.Services.dialogManager.updateProgress()},300),be=TCHMI_ENABLE_DESIGNER_MODE?"?preventcache="+TCHMI_DYNAMIC_INSTANCE_ID:"",Re={HmiConfigJsonFetch:2e9,HmiDescriptionJsonFetch:2e9,OpenServerConnection:2e9,ControlsDescriptionJsonFetch:2e9,ControlsDescriptionJsonResolved:2e9,TypeDefinitionsResolved:2e9,ServerSymbolSchemaCacheResolved:2e9,ControlsTemplatesFetch:2e9,FunctionDescriptionJsonFetch:2e9,UserFunctionDescriptionJsonFetch:2e9,UserControlPartialsConfigFetch:2e9,UserControlPartialsMarkupPreloaded:2e9,ViewPartialsMarkupPreloaded:2e9,ViewPartialsMarkupCompiled:2e9,ContentPartialsMarkupPreloaded:2e9,ContentPartialsMarkupCompiled:2e9},i=function a(){switch(de){case 0:break;case 1:de=0,le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading Properties/tchmiconfig.json"),le.Log.debug("[Source=Framework, Module=TcHmi] Loading Properties/tchmiconfig.json..."),le.System.Services.dialogManager.updateText("__TcHmiMain","Loading Properties/tchmiconfig.json..."),Re.HmiConfigJsonFetch=1;var o=new XMLHttpRequest;o.open("GET","Properties/tchmiconfig.json"+be);var i=function(e){le.Log.error("[Source=Framework, Module=TcHmi] Loading tchmiconfig.json failed! Errordetail: "+o.statusText),le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading base config tchmiconfig.json failed! "+o.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,a()};o.addEventListener("load",function(e){if(200===o.status){le.System.config=le.ValueConverter.toObject(o.responseText),null===le.System.config&&(le.System.config={basePath:""}),le.System.config.creatorSettings?le.System.config.creatorSettings.viewport||(le.System.config.creatorSettings.viewport={defaultHeight:0,defaultWidth:0}):le.System.config.creatorSettings={viewport:{defaultHeight:0,defaultWidth:0}},le.System.config.userFunctions||(le.System.config.userFunctions=[]);var r=0;if(le.System.config.userFunctions)for(me=le.System.config.userFunctions,_e=me.length,r=0;r<_e;r++)me[r].url=tchmi_path(me[r].url);if(le.System.config.userControls||(le.System.config.userControls=[]),le.System.config.userControls)for(he=le.System.config.userControls,ge=he.length,r=0;r<ge;r++)he[r].url=tchmi_path(he[r].url);if(le.System.config.content||(le.System.config.content=[]),le.System.config.content)for(fe=le.System.config.content,Se=fe.length,r=0;r<Se;r++)fe[r].url=tchmi_path(fe[r].url);if(le.System.config.views||(le.System.config.views=[]),le.System.config.views)for(Ee=le.System.config.views,pe=Ee.length,r=0;r<pe;r++)Ee[r].url=tchmi_path(Ee[r].url);if(le.System.config.tcHmiServer||(le.System.config.tcHmiServer={websocketIntervalTime:500}),!0===TCHMI_ENABLE_DESIGNER_MODE){var t=TCHMI_ENABLE_DESIGNER_MODE_FALLBACK_CONFIG_JSON;null!==t&&(void 0!==t.basePath&&(le.System.config.basePath=t.basePath),t.tcHmiServer&&t.tcHmiServer.websocketIntervalTime&&(le.System.config.tcHmiServer.websocketIntervalTime=t.tcHmiServer.websocketIntervalTime))}le.Log.debug("[Source=Framework, Module=TcHmi] Loading tchmiconfig.json finished!"),Re.HmiConfigJsonFetch=0,de=6,a()}else i(e)}),o.addEventListener("error",i),o.send();break;case 6:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading framework description"),de=0,le.Log.debug("[Source=Framework, Module=TcHmi] Loading framework Description.json..."),le.System.Services.dialogManager.updateText("__TcHmiMain","Loading Description.json..."),Re.HmiDescriptionJsonFetch=1;var r=tchmi_path(le.System.config.basePath+"/Description.json"),t=new XMLHttpRequest;t.open("GET",r+be);var n=function(e){le.Log.error("[Source=Framework, Module=TcHmi] Loading "+r+" failed! Errordetail: "+t.statusText),le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading Framework "+r+" failed! "+t.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,a()};t.addEventListener("load",function(e){200===t.status?(le.Log.debug("[Source=Framework, Module=TcHmi] Loading framework Description.json finished!"),le.System.description=le.ValueConverter.toObject(t.responseText),le.version=le.System.description.version,Re.HmiDescriptionJsonFetch=0,de=2,a()):n(e)}),t.addEventListener("error",n),t.send();break;case 2:if("loading"===document.readyState){var e=function(){document.removeEventListener("readystatechange",e),0===de||1e4===de||a()};document.addEventListener("readystatechange",e);break}if("3.2.1"!==$().jquery)return le.Log.error("[Source=Framework, Module=TcHmi] Mismatching jQuery version. Please avoid overriding built in jQuery version."),le.System.Services.dialogManager.updateText("__TcHmiMain","Mismatching jQuery version. Please avoid overriding.",le.DialogManager.DialogSeverity.Error),de=1e4,void a();de=3;case 3:if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Initializing services"),de=0,le.System.Services.dialogManager.updateText("__TcHmiMain","Initializing services..."),le.System.Services.internalSymbolManager=new ce.InternalSymbolManager(ue),1e4===de)return;if(le.System.Services.templateParamSymbolManager=new ce.TemplateParamSymbolManager(ue),1e4===de)return;if(le.System.Services.bindingManager=new ce.BindingManager(ue),1e4===de)return;if(le.System.Services.localizationManager=new ce.LocalizationManager(ue),1e4===de)return;if(le.System.Services.serverManager=new ce.ServerManager(ue),1e4===de)return;if(le.System.Services.triggerManager=new ce.TriggerManager(ue),1e4===de)return;if(le.System.Services.accessManager=new ce.AccessManager(ue),1e4===de)return;if(le.System.Services.topMostLayer=new ce.TopMostLayer(ue),1e4===de)return;if(le.System.Services.serverEventManager=new ce.ServerEventManager(ue),1e4===de)return;if(le.System.Services.functionProvider=new ce.FunctionProvider(ue),1e4===de)return;if(le.System.Services.controlManager=new ce.ControlManager(ue),1e4===de)return;if(le.System.Services.themeManager=new ce.ThemeManager(ue),1e4===de)return;if(le.System.Services.styleManager=new ce.StyleManager(ue),1e4===de)return;if(le.System.Services.typeManager=new ce.Type.TypeManager(ue),1e4===de)return;if(le.System.Services.animationProvider=new ce.AnimationProvider(ue),1e4===de)return;if(le.System.Services.viewManager=new ce.ViewManager(ue),1e4===de)return;if(!0===TCHMI_ENABLE_DESIGNER_MODE){if(le.System.Services.Engineering.designerModeManager=new ce.Engineering.DesignerModeManager(ue),1e4===de)return;if(le.System.Services.Engineering.designerModeComManager=new ce.Engineering.DesignerModeComManager(ue),1e4===de)return;le.System.Services.Engineering.errorPane=new ce.Engineering.ErrorPane}if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER){var s=TCHMI_ENABLE_DESIGNER_MODE_FALLBACK_CONFIG_JSON;null!==s&&void 0!==s.tcHmiServer&&s.tcHmiServer.websocketOverwrite&&le.System.Services.serverManager.setServerAddress(s.tcHmiServer.websocketOverwrite.host,s.tcHmiServer.websocketOverwrite.port)}le.EventProvider.raise("System.onInitializedServices"),le.Log.debug("[Source=Framework, Module=TcHmi] Initializing services finished!"),de=7;case 7:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Opening websocket to server"),de=0,le.Log.debug("[Source=Framework, Module=TcHmi] Opening websocket to server..."),le.System.Services.dialogManager.updateText("__TcHmiMain","Opening Websocket connection..."),Re.OpenServerConnection=1,le.System.Services.serverManager.open(function(e){if(0!==Re.OpenServerConnection&&1e4!==de){if(e.error===le.Errors.NONE)Re.OpenServerConnection=0,le.Log.debug("[Source=Framework, Module=TcHmi] Opening websocket to server finished!"),de=8;else{if(e.error===le.Errors.E_WEBSOCKET_OPEN_SERVER_LICENSE_CHECK_FAILED)le.Log.error("[Source=Framework, Module=TcHmi] Failed to check TwinCAT HMI Server license."),le.System.Services.dialogManager.updateText("__TcHmiMain",'Error: Communication to TwinCAT HMI Server failed.<br>\n<input type="submit" value="Retry" style="padding:10px;" onclick="window.location.reload()">',le.DialogManager.DialogSeverity.Error);else if(e.error===le.Errors.E_SERVER_COMMAND_ERROR)le.Log.error("[Source=Framework, Module=TcHmi] TwinCAT HMI Server license symbol invalid."),le.System.Services.dialogManager.updateText("__TcHmiMain",'Error: Communication to TwinCAT HMI Server failed (System-Symbols mapped?).<br>\n<input type="submit" value="Retry" style="padding:10px;" onclick="window.location.reload()">',le.DialogManager.DialogSeverity.Error);else if(e.error===le.Errors.E_WEBSOCKET_OPEN_SERVER_LICENSE_MISSING)le.Log.error("[Source=Framework, Module=TcHmi] TwinCAT HMI Server license is missing."),TCHMI_ENABLE_DESIGNER_MODE_MASTER?le.System.Services.dialogManager.updateText("__TcHmiMain","Error: TwinCAT HMI Server license is missing. Please reopen window.",le.DialogManager.DialogSeverity.Error):le.System.Services.dialogManager.updateText("__TcHmiMain",'Error: TwinCAT HMI Server license is missing.<br>\n<input type="submit" value="Retry" style="padding:10px;" onclick="window.location.reload()">',le.DialogManager.DialogSeverity.Error);else if(e.error===le.Errors.E_WEBSOCKET_OPEN_SERVER_NO_ACCESS)le.System.Services.dialogManager.updateText("__TcHmiMain",'Error: No Access to TwinCAT HMI Server license. This session was logged out or the server is wrong configured. Autoreload in 5 seconds.<br>\n<input type="submit" value="Reload now" style="padding:10px;" onclick="window.location.reload()">',le.DialogManager.DialogSeverity.Error),window.setTimeout(function(){window.location.reload()},5e3);else if(!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER)le.System.Services.dialogManager.updateText("__TcHmiMain",'Opening connection to engineering server failed.<br>Please start the server from the context menu in the project tree.<br>\n<input type="submit" value="Retry" style="padding:10px;" onclick="window.location.reload()">',le.DialogManager.DialogSeverity.Error);else{var r=e.url&&-1===e.url.indexOf(window.location.host),t="Fatal Error. Opening";"https:"===window.location.protocol&&(t+=" secure"),t+=" Websocket connection failed!",t+=" Perhaps";var o=[];"https:"===window.location.protocol&&o.push(" the HTTPS server certificate is not trusted for websocket (missing trust always)"),e.url&&!0===r&&o.push(" the server "+e.url+" is no working websocket server"),o.push(" we have a proxy problem"),t+=o.join(" or"),t+='. The browser console could have some more information.<br>\n<input type="submit" value="Retry" style="padding:10px;" onclick="window.location.reload()">',le.System.Services.dialogManager.updateText("__TcHmiMain",t,le.DialogManager.DialogSeverity.Error)}de=1e4}a()}});break;case 8:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Resolving type definitions"),le.Log.debug("[Source=Framework, Module=TcHmi] Resolving type definitions..."),le.System.Services.dialogManager.updateText("__TcHmiMain","Resolving type definitions..."),Re.TypeDefinitionsResolved=1,ce.Services.typeManager.doWatchTypeDefinitions(function(e){if(e.error===le.Errors.NONE)Re.TypeDefinitionsResolved=0,le.Log.debug("[Source=Framework, Module=TcHmi] Resolving type definitions finished!"),de=9;else{le.Log.error("[Source=Framework, Module=TcHmi] Fatal internal error. Resolving type definitions failed: "+le.Log.buildMessage(e.details));var r="Fatal internal error. Resolving type definitions failed: "+le.Log.__buildFirstDeepestErrorMessage(e.details);le.System.Services.dialogManager.updateText("__TcHmiMain",r,le.DialogManager.DialogSeverity.Error),de=1e4}a()});break;case 9:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Resolving server symbol schema cache"),le.Log.debug("[Source=Framework, Module=TcHmi] Resolving server symbol schema cache..."),le.System.Services.dialogManager.updateText("__TcHmiMain","Resolving server symbol schema cache..."),Re.ServerSymbolSchemaCacheResolved=1,ce.Symbol.resolveServerSymbolSchemaCache(function(e){if(e.error===le.Errors.NONE)Re.ServerSymbolSchemaCacheResolved=0,le.Log.debug("[Source=Framework, Module=TcHmi] Resolving server symbol schema cache finished!"),de=4;else{le.Log.error("[Source=Framework, Module=TcHmi] Fatal internal error. Resolving server symbol schema cache failed: "+le.Log.buildMessage(e.details));var r="Resolving server symbol schema cache failed: "+le.Log.__buildFirstDeepestErrorMessage(e.details);le.System.Services.dialogManager.updateText("__TcHmiMain",r,le.DialogManager.DialogSeverity.Error),de=1e4}a()});break;case 4:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading internal symbols"),de=0,le.System.Services.dialogManager.updateText("__TcHmiMain","Loading internal symbols...");var l=le.System.config.symbols;if(l&&l.internal)for(var c in l.internal)le.System.Services.internalSymbolManager.add(c,l.internal[c]);l=null,le.Log.debug("[Source=Framework, Module=TcHmi] Loading internal symbols finished!"),de=5;case 5:de=0;var u=ce.Services.accessManager.getCurrentUserConfig();if(0===u.state)return void le.EventProvider.register("System.onUserConfigOnServerChanged",function(e,r){e.destroy(),de=5,a()});le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading localization"),le.System.Services.dialogManager.updateText("__TcHmiMain","Loading localization..."),ce.Services.localizationManager.__loadLocale(u.locale,function(e){e.error!==le.Errors.NONE?le.Log.error("[Source=Framework, Module=TcHmi] Did not found a localization file for requested locale "+u.locale+". Localized symbols are not available."):le.Log.debug("[Source=Framework, Module=TcHmi] Loading localization finished!"),de=10,a()});break;case 10:if(le.System.Caches.registeredControls.forEach(function(e,r){void 0!==e.directory&&null!==e.directory&&(ve.push(e.directory),ye++),void 0!==e.templatePath&&null!==e.templatePath&&-1===Te.indexOf(e.templatePath)&&Te.push(e.templatePath)}),Ce=Te.length,le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading "+ye+" control Description.json"),de=0,ve&&0<ye){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading control descriptions..."),Re.ControlsDescriptionJsonFetch=ye;function d(e,r){var t=tchmi_path(e+"/Description.json"),o=new XMLHttpRequest;o.open("GET",r+be);var i=function(e){1e4!==de&&(le.Log.error("[Source=Framework, Module=TcHmi] Loading "+r+" failed! Errordetail: "+o.statusText),le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading "+r+" failed! "+o.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,a())};o.addEventListener("load",function(e){if(200===o.status){if(1e4!==de){var r=le.ValueConverter.toObject(o.responseText);le.System.Services.controlManager.addDescription(t,r),Re.ControlsDescriptionJsonFetch--,le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+t+" finished!"),ce.Services.themeManager.registerControlThemeFiles(r),Re.ControlsDescriptionJsonFetch<=0&&(r=null,de=11,a())}}else i(e)}),o.addEventListener("error",i),o.send()}for(var m=0,_=ve;m<_.length;m++){var h=_[m];le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+h+"Description.json..."),d(h,tchmi_path(le.System.config.basePath+"/Controls/"+h+"/Description.json"))}break}de=11;case 11:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Parse "+ye+" control Description.json"),de=0,le.Log.debug("[Source=Framework, Module=TcHmi] Resolving control inheritation..."),le.System.Services.dialogManager.updateText("__TcHmiMain","Resolving control inheritation..."),Re.ControlsDescriptionJsonResolved=1;try{le.System.Services.controlManager.resolveDescriptionInheritation()}catch(e){return le.Log.error(e),le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Resolving control description inheritation failed!",le.DialogManager.DialogSeverity.Error),de=1e4,void a()}try{le.System.Services.controlManager.resolveTemplateInheritation()}catch(e){return le.Log.error(e),le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Resolving control template inheritation failed!",le.DialogManager.DialogSeverity.Error),de=1e4,void a()}le.System.Services.themeManager.processActiveTheme(),Re.ControlsDescriptionJsonResolved=0,de=12;case 12:if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading templates for "+ye+" controls"),de=0,Te&&0<Ce){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading control templates..."),Re.ControlsTemplatesFetch=Ce;function g(e,r){var t=tchmi_path(e),o=new XMLHttpRequest;o.open("GET",r+be);var i=function(e){1e4!==de&&(le.Log.error("[Source=Framework, Module=TcHmi] Loading "+r+" failed! Errordetail: "+o.statusText),le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading "+r+" failed! "+o.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,a())};o.addEventListener("load",function(e){200===o.status?1e4!==de&&(ce.Caches.templateMarkupCache.set(t,o.responseText),Re.ControlsTemplatesFetch--,le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+t+" finished!"),Re.ControlsTemplatesFetch<=0&&(de=13,a())):i(e)}),o.addEventListener("error",i),o.send()}for(var E=0,p=Te;E<p.length;E++){var f=p[E];le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+f+"..."),g(f,tchmi_path(le.System.config.basePath+"/Controls/"+f))}break}Re.ControlsTemplatesFetch=0,de=13;case 13:if(Re.FunctionDescriptionJsonFetch=le.System.Caches.registeredFrameworkFunctionDescription.length,le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading "+Re.FunctionDescriptionJsonFetch+" framework functions"),(de=0)<Re.FunctionDescriptionJsonFetch){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading functions...");function S(e,r){var t=tchmi_path(e),o=new XMLHttpRequest;o.open("GET",r+be);var i=function(e){1e4!==de&&(le.Log.error("[Source=Framework, Module=TcHmi] Loading "+r+" failed! Errordetail: "+o.statusText),le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading "+r+" failed! "+o.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,a())};o.addEventListener("load",function(e){if(200===o.status){if(1e4!==de){le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+t+" finished!");var r=le.ValueConverter.toObject(o.responseText);return le.System.Services.functionProvider.addDescription(t,r),Re.FunctionDescriptionJsonFetch--,Re.FunctionDescriptionJsonFetch<=0?(de=14,void a()):void 0}}else i(e)}),o.addEventListener("error",i),o.send()}for(var v=0,y=le.System.Caches.registeredFrameworkFunctionDescription;v<y.length;v++){var T=y[v];le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+T.descriptionUrl+"...");var C=tchmi_path(le.System.config.basePath+"/Functions/"+T.descriptionUrl);S(T.descriptionUrl,C)}break}de=14;case 14:if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading "+_e+" user functions"),de=0,me&&0<_e){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading user functions..."),Re.UserFunctionDescriptionJsonFetch=_e;function M(t){var o=tchmi_path(t),i=new XMLHttpRequest;i.open("GET",t+be);var n=function(e){le.Log.info("[Source=Framework, Module=TcHmi] Loading "+t+" failed. "+i.statusText+" Skipping!"),Re.UserFunctionDescriptionJsonFetch--,Re.UserFunctionDescriptionJsonFetch<=0&&(de=15,a())};i.addEventListener("load",function(e){if(200===i.status){var r=le.ValueConverter.toObject(i.responseText);le.System.Services.functionProvider.addDescription(o,r),le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+t+" finished!"),Re.UserFunctionDescriptionJsonFetch--,Re.UserFunctionDescriptionJsonFetch<=0&&(de=15,a())}else n(e)}),i.addEventListener("error",n),i.send()}for(var b=0,R=me;b<R.length;b++){var N=R[b].url.replace(".js",".function.json");le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+N+"..."),M(N)}break}de=15;case 15:if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Loading "+ge+" user control descriptions"),de=0,he&&0<ge){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading user control config..."),Re.UserControlPartialsConfigFetch=ge;function w(r){var t=new XMLHttpRequest;t.open("GET",r+be);var o=function(e){le.Log.info("[Source=Framework, Module=TcHmi] Loading "+r+" failed. "+t.statusText+" Skipping!"),Re.UserControlPartialsConfigFetch--,Re.UserControlPartialsConfigFetch<=0&&(le.System.Services.controlManager.resolveUcAttributes(),le.System.Services.themeManager.retriggerUserControls(),de=16,a())};t.addEventListener("load",function(e){200===t.status?(le.System.Caches.partialCompositeConfigCache.set(r,le.ValueConverter.toObject(t.responseText)),le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+r+" finished!"),Re.UserControlPartialsConfigFetch--,Re.UserControlPartialsConfigFetch<=0&&(le.System.Services.controlManager.resolveUcAttributes(),le.System.Services.themeManager.retriggerUserControls(),de=16,a())):o(e)}),t.addEventListener("error",o),t.send()}for(var O=0,I=he;O<I.length;O++){var A=I[O].url.replace(".usercontrol",".usercontrol.json");le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+A+"..."),w(A)}break}de=16;case 16:if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Preloading "+ge+" user control markup"),de=0,he&&0<ge){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading user control markup..."),Re.UserControlPartialsMarkupPreloaded=ge;function D(r){var t=new XMLHttpRequest;t.open("GET",r+be);var o=function(e){1e4!==de&&(le.Log.error("[Source=Framework, Module=TcHmi] Loading "+r+" failed! Errordetail: "+t.statusText),r===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL?(le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading "+r+" failed! Probably a syntax error in HTML or a wrong entry in tchmiconfig.json. "+t.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,a()):(Re.UserControlPartialsMarkupPreloaded--,Re.UserControlPartialsMarkupPreloaded<=0&&(de=19,a())))};t.addEventListener("load",function(e){200===t.status?1e4!==de&&(ce.Caches.partialMarkupCache.set(r,t.responseText),Re.UserControlPartialsMarkupPreloaded--,le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+r+" finished!"),Re.UserControlPartialsMarkupPreloaded<=0&&(de=19,a())):o(e)}),t.addEventListener("error",o),t.send()}for(var V=0,P=he;V<P.length;V++){var L=P[V];le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+L.url+"..."),D(L.url)}if(0!==Re.UserControlPartialsMarkupPreloaded)break}de=19;case 19:if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Preloading "+Se+" content markups"),de=0,fe&&0<Se){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading content control markup..."),Re.ContentPartialsMarkupPreloaded=Se;function k(r){var t=new XMLHttpRequest;t.open("GET",r+be);var o=function(e){1e4!==de&&(le.Log.error("[Source=Framework, Module=TcHmi] Loading "+r+" failed! Errordetail: "+t.statusText),r===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL?(le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading "+r+" failed! Probably a syntax error in HTML or a wrong entry in tchmiconfig.json. "+t.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,a()):(Re.ContentPartialsMarkupPreloaded--,Re.ContentPartialsMarkupPreloaded<=0&&(de=17,a())))};t.addEventListener("load",function(e){200===t.status?1e4!==de&&(ce.Caches.partialMarkupCache.set(r,t.responseText),Re.ContentPartialsMarkupPreloaded--,le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+r+" finished!"),Re.ContentPartialsMarkupPreloaded<=0&&(de=17,a())):o(e)}),t.addEventListener("error",o),t.send()}for(var H=0,x=fe;H<x.length;H++){!0!==(j=x[H]).preload||!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER||!0===TCHMI_ENABLE_DESIGNER_MODE&&j.url===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL?Re.ContentPartialsMarkupPreloaded--:(le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+j.url+"..."),k(j.url))}if(0!==Re.ContentPartialsMarkupPreloaded)break}de=17;case 17:if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Preloading "+pe+" view markups"),de=0,Ee&&0<pe){le.System.Services.dialogManager.updateText("__TcHmiMain","Loading view control markup..."),Re.ViewPartialsMarkupPreloaded=pe;function F(r){var t=new XMLHttpRequest;t.open("GET",r+be);var o=function(e){if(1e4!==de)return le.Log.error("[Source=Framework, Module=TcHmi] Loading "+r+" failed! Errordetail: "+t.statusText),r===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL?(le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Loading "+r+" failed! Probably a syntax error in HTML or a wrong entry in tchmiconfig.json. "+t.statusText,le.DialogManager.DialogSeverity.Error),de=1e4,void a()):(Re.ViewPartialsMarkupPreloaded--,Re.ViewPartialsMarkupPreloaded<=0?(de=20,void a()):void 0)};t.addEventListener("load",function(e){200===t.status?1e4!==de&&(ce.Caches.partialMarkupCache.set(r,t.responseText),Re.ViewPartialsMarkupPreloaded--,le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+r+" finished!"),Re.ViewPartialsMarkupPreloaded<=0&&(de=20,a())):o(e)}),t.addEventListener("error",o),t.send()}for(var U=0,B=Ee;U<B.length;U++){!0!==(ae=B[U]).preload||!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER||!0===TCHMI_ENABLE_DESIGNER_MODE&&ae.url===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL?Re.ViewPartialsMarkupPreloaded--:(le.Log.debug("[Source=Framework, Module=TcHmi] Loading "+ae.url+"..."),F(ae.url))}if(0!==Re.ViewPartialsMarkupPreloaded)break}de=20;case 20:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Precompiling partial markup"),de=0,le.System.Services.dialogManager.updateText("__TcHmiMain","Precompiling content control markup..."),Re.ContentPartialsMarkupCompiled=Se;for(var W=0,G=fe;W<G.length;W++){var j;if(!0!==(j=G[W]).preload||!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER||!0===TCHMI_ENABLE_DESIGNER_MODE&&j.url===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)Re.ContentPartialsMarkupCompiled--;else{le.Log.debug("[Source=Framework, Module=TcHmi] Precompiling "+j.url+"...");var q=j.url;if(J=ce.Caches.partialMarkupCache.get(q)){(Z=document.createElement("div")).innerHTML=J;var z=Z.firstElementChild;if(z){z.setAttribute("data-tchmi-partial-url",q);var Y=le.System.Services.controlManager.compile($(z));void 0!==Y&&(Y.__setKeepAlive(!0),le.Log.debug("[Source=Framework, Module=TcHmi] Precompiling "+q+" finished!"))}}Re.ContentPartialsMarkupCompiled--}}de=18;case 18:le.Log.performanceLog("[Source=Framework, Module=TcHmi] Precompiling view markup"),de=0,le.System.Services.dialogManager.updateText("__TcHmiMain","Precompiling view control markup..."),Re.ViewPartialsMarkupCompiled=pe;for(var K=0,X=Ee;K<X.length;K++){if(!0!==(ae=X[K]).preload||!0===TCHMI_ENABLE_DESIGNER_MODE_MASTER||!0===TCHMI_ENABLE_DESIGNER_MODE&&ae.url===TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL)Re.ViewPartialsMarkupCompiled--;else{le.Log.debug("[Source=Framework, Module=TcHmi] Precompiling "+ae.url+"...");var J;q=ae.url;if(J=ce.Caches.partialMarkupCache.get(q)){var Z;(Z=document.createElement("div")).innerHTML=J;var Q=Z.firstElementChild;if(Q){Q.setAttribute("data-tchmi-partial-url",q);var ee=le.System.Services.controlManager.compile($(Q));void 0!==ee&&ee.__setKeepAlive(!0),J=null,le.Log.debug("[Source=Framework, Module=TcHmi] Precompiling "+q+" finished!")}}Re.ViewPartialsMarkupCompiled--}}de=1e3;case 1e3:var re;if(le.Log.performanceLog("[Source=Framework, Module=TcHmi] Finalising framework"),de=0,le.Log.debug("[Source=Framework, Module=TcHmi] Internal event registration..."),le.System.Services.dialogManager.updateText("__TcHmiMain","Internal event registration..."),le.System.Services.triggerManager&&le.System.config&&le.System.config.trigger&&le.System.Services.triggerManager.register(le.System.config.trigger),le.Log.debug("[Source=Framework, Module=TcHmi] Loading view..."),!0===TCHMI_ENABLE_DESIGNER_MODE)re=tchmi_path(TCHMI_ENABLE_DESIGNER_MODE_TARGET_PARTIAL);else{var te=le.System.config.startupView;if(null==te)return le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. No startup view defined!",le.DialogManager.DialogSeverity.Error),de=1e4,void a();for(var oe=!1,ie=0,ne=Ee;ie<ne.length;ie++){var ae;if(tchmi_path((ae=ne[ie]).url)===tchmi_path(te)){oe=!0;break}}if(null==te||!0!==oe)return le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal internal error. Can't find a valid view definition matching the defined startup view.",le.DialogManager.DialogSeverity.Error),de=1e4,void a();re=te}le.System.Services.dialogManager.updateText("__TcHmiMain","Loading view..."),le.System.Services.viewManager.setScaleMode(le.System.config.scaleMode),le.System.Services.viewManager.loadView(re,function(e){if(e.error!==le.Errors.NONE)return le.System.Services.dialogManager.updateText("__TcHmiMain","Fatal error. Loading and compiling "+re+" failed!",le.DialogManager.DialogSeverity.Error),le.Log.error("Loading and compiling failed: "+le.Log.buildMessage(e.details)),de=1e4,void a();le.System.isInitialized=!0,window.clearInterval(Me),Me=0,le.EventProvider.raise("onInitialized"),le.Log.performanceLog("[Source=Framework, Module=TcHmi] End"),4<=TCHMI_CONSOLE_LOG_LEVEL&&"object"==typeof performance&&"function"==typeof performance.now&&le.Log.debug("[Source=Framework, Module=TcHmi] Overall loading time: "+performance.now().toFixed(3).toString()+"ms")});break;case 1e4:if("loading"===document.readyState){var se=function(){document.removeEventListener("readystatechange",se),a()};document.addEventListener("readystatechange",se);break}window.clearInterval(Me),Me=0,le.System.Services.dialogManager.showDialog("__TcHmiMain",!0,le.DialogManager.DialogType.SYSTEMLoading),le.Log.performanceLog("[Source=Framework, Module=TcHmi] End");break;default:de=0}};i()}}(TcHmi=TcHmi||{});